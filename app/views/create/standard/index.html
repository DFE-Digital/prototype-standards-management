{% extends "layouts/full.html" %}
{% set selectedNav = "Create" %}
{% set pageName = "Draft a new standard" %}
{% set seoPageName = "" %}
{% set pageDescription = ""%}
{% set view = "standard" %}
{% block hero %}
    {% include 'create/standard/_head.html' %}
{% endblock %}
{% block head %}
    <meta name="robots" content="noindex, nofollow">
{% endblock %}
{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-quarter">
            <nav class="dfe-vertical-nav">

                <ul class="dfe-vertical-nav__section">

                    <li class="dfe-vertical-nav__section-item  dfe-vertical-nav__section-item--current">
                        <a class="dfe-vertical-nav__link" href="/create/standard">Tasks</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="govuk-grid-column-three-quarters">
            <h2 class="govuk-heading-l">Tasks</h2>

            <ul class="govuk-task-list">
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/title" aria-describedby="standard-details-1-status">
        Standard title
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-1-status">
                        {% if standard.fields.title %}
                        Complete
                        {% else %}
                            <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/summary" aria-describedby="standard-details-4-summary">
        Summary
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-4-summary">
                        {% if standard.fields.title %}
                            {% if standard.fields.summary %}
                                Complete
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/categories" aria-describedby="standard-details-2-status">
        Categories
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-2-status">

                        {% if standard.fields.title %}
                            {% if standard.fields.category %}
                                Complete
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}

                    </div>

                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/sub-categories" aria-describedby="standard-details-3-hint standard-details-3-status">
        Sub-categories
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-3-status">
                        {% if standard.fields.title %}
                            {% if standard.fields.subCategory %}
                                Complete
                            {% else %}
                                {% if standard.fields.category %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% else %}
                                    <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                                {% endif %}
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/purpose" aria-describedby="standard-details-4-status">
        Purpose
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-4-status">
                        {% if standard.fields.title %}
                            {% if standard.fields.purpose %}
                                Complete
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/guidance" aria-describedby="standard-details-4-status">
        How to meet the standard
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-4-status">
                        {% if standard.fields.title %}
                            {% if standard.fields.guidance %}
                                Complete
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/products" aria-describedby="standard-details-5-status">
        Approved or tolerated products
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-5-status">
                        {% if standard.fields.title %}
                             {% if standard.fields.approvedProducts or standard.fields.toleratedProducts %}
                                
                                {% set number = standard.fields.approvedProducts | length + standard.fields.toleratedProducts | length %}

                                {{ number }} product{% if number > 1 %}s{% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Optional</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/exceptions" aria-describedby="standard-details-5-status">
        Exceptions
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-5-status">
                        {% if standard.fields.title %}
                            {% if standard.fields.exceptions %}
                                 
                                {{ standard.fields.exceptions | length }} exception{% if standard.fields.exceptions | length > 1 %}s{% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Optional</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
                <li class="govuk-task-list__item govuk-task-list__item--with-link">
                    <div class="govuk-task-list__name-and-hint">
                        <a class="govuk-link govuk-task-list__link" href="/create/standard/contacts" aria-describedby="standard-details-5-status">
        Owner and contacts
      </a>
                    </div>
                    <div class="govuk-task-list__status" id="standard-details-5-status">
                        {% if standard.fields.title %}
                            {% if standard.fields.owners or standard.fields.technicalContacts %}
                                
                                {% set number = standard.fields.owners | length + standard.fields.technicalContacts | length %}

                                {{ number }} contact{% if number > 1 %}s{% endif %}


                            {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        {% else %}
                            <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                        {% endif %}
                    </div>
                </li>
            </ul>

      

            {% set isSubmittable = false %}


            {% if standard.fields.title and standard.fields.summary and standard.fields.purpose and standard.fields.guidance and standard.fields.category and standard.fields.subCategory and(standard.fields.technicalContacts or standard.fields.owners) %}

                {% set isSubmittable = true %}

                   

            {% endif %}

            {% if isSubmittable %}

                  <h2 class="govuk-heading-l">Submit draft for approval</h2>

                <p>You can now submit this draft for review by the standards forum.</p>


            {% else %}
   <h2 class="govuk-heading-l">You cannot submit this draft</h2>
                <p>You need to complete all the required tasks before you can submit this standard for review.</p>

            {% endif %}

                   <form action="/create/standard/submit" method="post">
                      {% if isSubmittable %}
                    <button type="submit" name="action" value="Submit" class="govuk-button" data-module="govuk-button">
                    Submit for approval
                </button>   {% endif %}

                    <h2 class="govuk-heading-l">Delete draft</h2>
                    <p>If you no longer need this draft, you can delete it.</p>
                  <button type="submit"  name="action" value="Delete" class="govuk-button govuk-button--secondary" data-module="govuk-button">
                    Delete draft standard
                </button>
             
                </form>

        </div>
    </div>
{% endblock %}