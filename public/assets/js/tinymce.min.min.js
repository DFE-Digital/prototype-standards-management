!function(){"use strict";function c(e){return{eq:e}}function u(o){return c(function(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(!o.eq(e[n],t[n]))return!1;return!0})}function w(d){return c(function(e,t){var r,n,o=Object.keys(e),a=Object.keys(t);if(r=u(m),n=function(e){return Array.prototype.slice.call(e).sort(void 0)},!c(function(e,t){return r.eq(n(e),n(t))}).eq(o,a))return!1;for(var s=o.length,i=0;i<s;i++){var l=o[i];if(!d.eq(e[l],t[l]))return!1}return!0})}var n=function(e){var t;return null===e?"null":void 0===e?"undefined":"object"==(t=typeof e)&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},m=c(function(e,t){return e===t}),E=c(function(e,t){var r;return e===t||(r=n(e))===n(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?u(E).eq(e,t):"object"===r&&w(E).eq(e,t))});const r=Object.getPrototypeOf,o=(e,t,r)=>{return!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name},a=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&o(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t},s=t=>e=>typeof e===t,i=t=>e=>t===e,y=(e,t)=>de(e)&&o(e,t,(e,t)=>r(e)===t),Z=a("string"),de=a("object"),ce=e=>y(e,Object),Q=a("array"),P=i(null),ue=s("boolean"),D=i(void 0),z=e=>null==e,j=e=>!z(e),H=s("function"),k=s("number"),_=(r,n)=>{if(Q(r)){for(let e=0,t=r.length;e<t;++e)if(!n(r[e]))return!1;return!0}return!1},$=()=>{},d=(t,r)=>(...e)=>t(r.apply(null,e)),l=(t,r)=>e=>t(r(e)),J=e=>()=>e,g=e=>e,f=(e,t)=>e===t;function C(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}const L=t=>e=>!t(e),p=e=>()=>{throw new Error(e)},h=e=>e(),M=e=>{e()},T=J(!1),S=J(!0);class ee{constructor(e,t){this.tag=e,this.value=t}static some(e){return new ee(!0,e)}static none(){return ee.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?ee.some(e(this.value)):ee.none()}bind(e){return this.tag?e(this.value):ee.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:ee.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return j(e)?ee.some(e):ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ee.singletonNone=new ee(!1);const b=Array.prototype.slice,N=Array.prototype.indexOf,R=Array.prototype.push,A=(e,t)=>N.call(e,t),V=(e,t)=>-1<A(e,t),q=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},te=(t,r)=>{const n=t.length,o=new Array(n);for(let e=0;e<n;e++){const n=t[e];o[e]=r(n,e)}return o},re=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},me=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},ge=(r,n)=>{var o=[],a=[];for(let e=0,t=r.length;e<t;e++){var s=r[e];(n(s,e)?o:a).push(s)}return{pass:o,fail:a}},I=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];n(a,e)&&o.push(a)}return o},fe=(e,r,n)=>(me(e,(e,t)=>{n=r(n,e,t)}),n),pe=(e,r,n)=>(re(e,(e,t)=>{n=r(n,e,t)}),n),he=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var a=r[e];if(n(a,e))return ee.some(a);if(o(a,e))break}return ee.none()},ve=(e,t)=>he(e,t,T),be=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return ee.some(e);return ee.none()},ye=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!Q(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);R.apply(n,r[e])}return n},Ce=(e,t)=>ye(te(e,t)),we=(r,n)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==n(r[e],e))return!1;return!0},Ee=e=>{e=b.call(e,0);return e.reverse(),e},xe=(e,t)=>I(e,e=>!V(t,e)),ke=(r,n)=>{var o={};for(let e=0,t=r.length;e<t;e++){var a=r[e];o[String(a)]=n(a,e)}return o},_e=(e,t)=>{e=b.call(e,0);return e.sort(t),e},Se=(e,t)=>0<=t&&t<e.length?ee.some(e[t]):ee.none(),Ne=e=>Se(e,0),Re=e=>Se(e,e.length-1),Ae=H(Array.from)?Array.from:e=>b.call(e),Te=(t,r)=>{for(let e=0;e<t.length;e++){var n=r(t[e],e);if(n.isSome())return n}return ee.none()},Oe=(r,n)=>{const o=[],a=H(n)?t=>q(o,e=>n(e,t)):e=>V(o,e);for(let e=0,t=r.length;e<t;e++){var s=r[e];a(s)||o.push(s)}return o},Be=Object.keys,Pe=Object.hasOwnProperty,ne=(r,n)=>{var o=Be(r);for(let e=0,t=o.length;e<t;e++){var a=o[e];n(r[a],a)}},De=(e,r)=>{{var n=(e,t)=>({k:t,v:r(e,t)});const o={};return ne(e,(e,t)=>{e=n(e,t);o[e.k]=e.v}),o}},Le=r=>(e,t)=>{r[t]=e},Me=(e,r,n,o)=>{ne(e,(e,t)=>{(r(e,t)?n:o)(e,t)})},Ie=(e,t)=>{var r={};return Me(e,t,Le(r),$),r},Fe=(e,r)=>{const n=[];return ne(e,(e,t)=>{n.push(r(e,t))}),n},Ue=e=>Fe(e,g),O=(e,t)=>oe(e,t)?ee.from(e[t]):ee.none(),oe=(e,t)=>Pe.call(e,t),ze=(e,t)=>oe(e,t)&&void 0!==e[t]&&null!==e[t],He=e=>{const t={};return re(e,e=>{t[e]={}}),Be(t)},$e=e=>void 0!==e.length,Ve=Array.isArray,qe=(r,n,o)=>{if(!r)return!1;if(o=o||r,$e(r)){for(let e=0,t=r.length;e<t;e++)if(!1===n.call(o,r[e],e,r))return!1}else for(const e in r)if(oe(r,e)&&!1===n.call(o,r[e],e,r))return!1;return!0},We=(r,n)=>{const o=[];return qe(r,(e,t)=>{o.push(n(e,t,r))}),o},Ke=(r,n)=>{const o=[];return qe(r,(e,t)=>{n&&!n(e,t,r)||o.push(e)}),o},Ye=(t,r,e,n)=>{let o=D(e)?t[0]:e;for(let e=0;e<t.length;e++)o=r.call(n,o,t[e],e);return o},Ge=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++)if(n.call(o,r[e],e,r))return e;return-1},Xe=e=>e[e.length-1],Ze=t=>{let r,n=!1;return(...e)=>(n||(n=!0,r=t.apply(null,e)),r)},Qe=()=>Je(0,0),Je=(e,t)=>({major:e,minor:t}),et={nu:Je,detect:(e,t)=>{var t=String(t).toLowerCase();if(0===e.length)return Qe();{var r=t;const n=((t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}})(e,r);return n?(t=e=>Number(r.replace(n,"$"+e)),Je(t(1),t(2))):{major:0,minor:0}}},unknown:Qe},tt=(e,t)=>{const r=String(t).toLowerCase();return ve(e,e=>e.search(r))},rt=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,nt=(e,t)=>{return at(e,t)?(t=t.length,e.substring(t)):e},ot=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!D(n)||e+t.length<=n)},at=(e,t)=>rt(e,t,0),st=(e,t)=>rt(e,t,e.length-t.length),it=t=>e=>e.replace(t,""),lt=it(/^\s+|\s+$/g),dt=it(/^\s+/g),ct=it(/\s+$/g),ut=e=>0<e.length,mt=e=>!ut(e),gt=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?ee.none():ee.some(e)},ft=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pt=t=>e=>ot(e,t),ht=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ot(e,"edge/")&&ot(e,"chrome")&&ot(e,"safari")&&ot(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ft],search:e=>ot(e,"chrome")&&!ot(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ot(e,"msie")||ot(e,"trident")},{name:"Opera",versionRegexes:[ft,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pt("firefox")},{name:"Safari",versionRegexes:[ft,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ot(e,"safari")||ot(e,"mobile/"))&&ot(e,"applewebkit")}],vt=[{name:"Windows",search:pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ot(e,"iphone")||ot(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pt("linux"),versionRegexes:[]},{name:"Solaris",search:pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bt={browsers:J(ht),oses:J(vt)},yt="Chromium",Ct="Firefox",wt=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n("Edge"),isChromium:n(yt),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(Ct),isSafari:n("Safari")}},Et=()=>wt({current:void 0,version:et.unknown()}),xt=wt,kt=(J("Edge"),J(yt),J("IE"),J("Opera"),J(Ct),J("Safari"),"Windows"),_t="Android",St="Solaris",Nt="FreeBSD",Rt="ChromeOS",At=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(kt),isiOS:n("iOS"),isAndroid:n(_t),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(St),isFreeBSD:n(Nt),isChromeOS:n(Rt)}},Tt=()=>At({current:void 0,version:et.unknown()}),Ot=At,Bt=(J(kt),J("iOS"),J(_t),J("Linux"),J("macOS"),J(St),J(Nt),J(Rt),e=>window.matchMedia(e).matches);let Pt=Ze(()=>{{var t=window.navigator.userAgent,e=ee.from(window.navigator.userAgentData),r=Bt,n,o,a,s,i,l,d;const c=bt.browsers(),u=bt.oses(),m=e.bind(e=>{return n=c,e=e,Te(e.brands,t=>{const r=t.brand.toLowerCase();return ve(n,e=>{return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(e=>({current:e.name,version:et.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=c,r=t,tt(e,r).map(e=>{var t=et.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(Et,xt),g=(e=u,d=t,tt(e,d).map(e=>{var t=et.detect(e.versionRegexes,d);return{current:e.name,version:t}}).fold(Tt,Ot)),f=(e=m,o=t,r=r,a=(n=g).isiOS()&&!0===/ipad/i.test(o),s=n.isiOS()&&!a,i=n.isiOS()||n.isAndroid(),l=i||r("(pointer:coarse)"),r=a||!s&&i&&r("(min-device-width:768px)"),i=s||i&&!r,e=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(o),o=!i&&!r&&!e,{isiPad:J(a),isiPhone:J(s),isTablet:J(r),isPhone:J(i),isTouch:J(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:J(e),isDesktop:J(o)});return{browser:m,os:g,deviceType:f}}});function Dt(e,r,n,o){o=o||this,e&&(n&&(e=e[n]),qe(e,(e,t)=>!1!==r.call(o,e,t,n)&&(Dt(e,r,n,o),!0)))}const Lt=()=>Pt(),Mt=window.navigator.userAgent,It=Lt(),Ft=It.browser,Ut=It.os,zt=It.deviceType,jt=-1!==Mt.indexOf("Windows Phone"),F={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ft.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ft.isIE(),windowsPhone:jt,browser:{current:Ft.current,version:Ft.version,isChromium:Ft.isChromium,isEdge:Ft.isEdge,isFirefox:Ft.isFirefox,isIE:Ft.isIE,isOpera:Ft.isOpera,isSafari:Ft.isSafari},os:{current:Ut.current,version:Ut.version,isAndroid:Ut.isAndroid,isChromeOS:Ut.isChromeOS,isFreeBSD:Ut.isFreeBSD,isiOS:Ut.isiOS,isLinux:Ut.isLinux,isMacOS:Ut.isMacOS,isSolaris:Ut.isSolaris,isWindows:Ut.isWindows},deviceType:{isDesktop:zt.isDesktop,isiPad:zt.isiPad,isiPhone:zt.isiPhone,isPhone:zt.isPhone,isTablet:zt.isTablet,isTouch:zt.isTouch,isWebView:zt.isWebView}},Ht=/^\s*|\s*$/g,$t=e=>z(e)?"":(""+e).replace(Ht,""),ae={trim:$t,isArray:Ve,is:(e,t)=>t?!("array"!==t||!Ve(e))||typeof e===t:void 0!==e,toArray:r=>{if(Ve(r))return r;var n=[];for(let e=0,t=r.length;e<t;e++)n[e]=r[e];return n},makeMap:(e,t,r={})=>{var n=Z(e)?e.split(t||","):e||[];let o=n.length;for(;o--;)r[n[o]]={};return r},each:qe,map:We,grep:Ke,inArray:(r,n)=>{if(r)for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},hasOwn:oe,extend:(t,...r)=>{for(let e=0;e<r.length;e++){var n,o=r[e];for(const r in o)oe(o,r)&&void 0!==(n=o[r])&&(t[r]=n)}return t},walk:Dt,resolve:(e,r=window)=>{var n=e.split(".");for(let e=0,t=n.length;e<t&&(r=r[n[e]]);e++);return r},explode:(e,t)=>Q(e)?e:""===e?[]:We(e.split(t||","),$t),_addCacheSuffix:e=>{var t=F.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Vt=(e,t,r=f)=>e.exists(e=>r(e,t)),qt=(e,t,r=f)=>Wt(e,t,r).getOr(e.isNone()&&t.isNone()),Wt=(e,t,r)=>e.isSome()&&t.isSome()?ee.some(r(e.getOrDie(),t.getOrDie())):ee.none(),Kt=(e,t)=>e?ee.some(t):ee.none(),Yt="undefined"!=typeof window?window:Function("return this;")(),Gt=(e,r)=>{{var n=e.split(".");let t=null!=r?r:Yt;for(let e=0;e<n.length&&null!=t;++e)t=t[n[e]];return t}},Xt=Object.getPrototypeOf,Zt=e=>{var t=Gt("ownerDocument.defaultView",e);return de(e)&&((e=>{var t="HTMLElement";if(e=e,null==(e=Gt("HTMLElement",e)))throw new Error(t+" not available on this browser");return e})(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xt(e).constructor.name))},W=e=>e.dom.nodeName.toLowerCase(),Qt=e=>e.dom.nodeType,Jt=t=>e=>Qt(e)===t,er=e=>tr(e)&&Zt(e.dom),tr=Jt(1),rr=Jt(3),nr=Jt(9),or=Jt(11),ar=t=>e=>tr(e)&&W(e)===t,sr=(e,t,r)=>{if(!(Z(r)||ue(r)||k(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},ir=(e,t,r)=>{sr(e.dom,t,r)},lr=(e,t)=>{const r=e.dom;ne(t,(e,t)=>{sr(r,t,e)})},dr=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},cr=(e,t)=>ee.from(dr(e,t)),ur=(e,t)=>{e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},mr=(e,t)=>{e.dom.removeAttribute(t)},gr=e=>pe(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),fr=(e,t)=>{e=dr(e,t);return void 0===e||""===e?[]:e.split(" ")},pr=e=>void 0!==e.dom.classList,hr=e=>fr(e,"class"),vr=(e,t)=>{return t=fr(e,"class").concat([t]),ir(e,"class",t.join(" ")),!0},br=(e,t)=>{return e=e,r="class",n=t,0<(t=I(fr(e,r),e=>e!==n)).length?ir(e,r,t.join(" ")):mr(e,r),!1;var r,n},yr=(e,t)=>{pr(e)?e.dom.classList.add(t):vr(e,t)},Cr=e=>{0===(pr(e)?e.dom.classList:hr(e)).length&&mr(e,"class")},wr=(e,t)=>{pr(e)?e.dom.classList.remove(t):br(e,t),Cr(e)},Er=(e,t)=>pr(e)&&e.dom.classList.contains(t),xr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},kr=(e,t)=>{t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return xr(t.childNodes[0])},_r=(e,t)=>{t=(t||document).createElement(e);return xr(t)},Sr=(e,t)=>{t=(t||document).createTextNode(e);return xr(t)},K=xr,Nr=(e,t)=>{const r=[],n=e=>(r.push(e),t(e));let o=t(e);for(;(o=o.bind(n)).isSome(););return r},Rr=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ar=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,U=(e,t)=>e.dom===t.dom,Tr=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},Or=e=>K(e.dom.ownerDocument),Br=e=>nr(e)?e:Or(e),Pr=e=>K(Br(e).dom.defaultView),Dr=e=>ee.from(e.dom.parentNode).map(K),Lr=e=>ee.from(e.dom.parentElement).map(K),Mr=(e,t)=>{var r=H(t)?t:T;let n=e.dom;for(var o=[];null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=K(e);if(o.push(t),!0===r(t))break;n=e}return o},Ir=e=>ee.from(e.dom.previousSibling).map(K),Fr=e=>ee.from(e.dom.nextSibling).map(K),Ur=e=>Ee(Nr(e,Ir)),zr=e=>Nr(e,Fr),jr=e=>te(e.dom.childNodes,K),Hr=(e,t)=>{e=e.dom.childNodes;return ee.from(e[t]).map(K)},$r=e=>Hr(e,0),Vr=e=>Hr(e,e.dom.childNodes.length-1),qr=e=>e.dom.childNodes.length,Wr=e=>or(e)&&j(e.dom.host),Kr=e=>K(e.dom.getRootNode()),Yr=e=>{if(Wr(e))return e;e=Br(e).dom.head;if(null==e)throw new Error("Head is not available yet");return K(e)},Gr=e=>K(e.dom.host),Xr=e=>{if(j(e.target)){var t=K(e.target);if(tr(t)&&Zr(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Ne(t)}}return ee.from(e.target)},Zr=e=>j(e.dom.shadowRoot),Qr=e=>{const t=rr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{e=Kr(e);return Wr(e)?ee.some(e):ee.none()})(K(t)).fold(()=>r.body.contains(t),l(Qr,Gr))};var Jr,en,tn,rn=(e,t,r,n,o)=>e(r,n)?ee.some(r):H(o)&&o(r)?ee.none():t(r,n,o);const nn=(e,t,r)=>{let n=e.dom;for(var o=H(r)?r:T;n.parentNode;){n=n.parentNode;const e=K(n);if(t(e))return ee.some(e);if(o(e))break}return ee.none()},on=(e,t,r)=>rn((e,t)=>t(e),nn,e,t,r),an=(e,n)=>{const o=t=>{for(let e=0;e<t.childNodes.length;e++){var r=K(t.childNodes[e]);if(n(r))return ee.some(r);r=o(t.childNodes[e]);if(r.isSome())return r}return ee.none()};return o(e.dom)},sn=(e,t,r)=>nn(e,e=>Rr(e,t),r),ln=(e,t)=>{return t=t,e=void 0===e?document:e.dom,Ar(e)?ee.none():ee.from(e.querySelector(t)).map(K)},dn=(e,t,r)=>rn((e,t)=>Rr(e,t),sn,e,t,r),cn=(e,t=!1)=>{return Qr(e)?e.dom.isContentEditable:(e=e,dn(e,"[contenteditable]").fold(J(t),e=>"true"===un(e)))},un=e=>e.dom.contentEditable,mn=e=>void 0!==e.style&&H(e.style.getPropertyValue),gn=(e,t,r)=>{if(!Z(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);mn(e)&&e.style.setProperty(t,r)},fn=(e,t,r)=>{e=e.dom;gn(e,t,r)},pn=(e,t)=>{const r=e.dom;ne(t,(e,t)=>{gn(r,t,e)})},hn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Qr(e)?n:vn(r,t)},vn=(e,t)=>mn(e)?e.style.getPropertyValue(t):"",bn=(e,t)=>{e=e.dom,e=vn(e,t);return ee.from(e).filter(e=>0<e.length)},yn=e=>{var t={},r=e.dom;if(mn(r))for(let e=0;e<r.style.length;e++){var n=r.style.item(e);t[n]=r.style[n]}return t},Cn=(e,t)=>{var r;r=e.dom,t=t,mn(r)&&r.style.removeProperty(t),Vt(cr(e,"style").map(lt),"")&&mr(e,"style")},wn=(t,r)=>{Dr(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},En=(e,t)=>{Fr(e).fold(()=>{Dr(e).each(e=>{kn(e,t)})},e=>{wn(e,t)})},xn=(t,r)=>{$r(t).fold(()=>{kn(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},kn=(e,t)=>{e.dom.appendChild(t.dom)},_n=(e,t)=>{wn(e,t),kn(t,e)},Sn=(t,e)=>{re(e,e=>{kn(t,e)})},Nn=e=>{e.dom.textContent="",re(jr(e),e=>{Y(e)})},Y=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Rn=e=>{var r,n,t=jr(e);0<t.length&&(r=e,re(n=t,(e,t)=>{t=0===t?r:n[t-1];En(t,e)})),Y(e)},An=e=>te(e,K),Tn=e=>e.dom.innerHTML,On=(e,t)=>{const r=Or(e).dom,n=K(r.createDocumentFragment()),o=(t=t,(a=(r||document).createElement("div")).innerHTML=t,jr(K(a)));var a;Sn(n,o),Nn(e),kn(e,n)},Bn=(e,t,r,n)=>{return t=t,i=r,l=n,r=e=>{var t,r,n,o,a,s;i(e)&&l((t=e,e=K(Xr(t).getOr(t.target)),o=()=>t.stopPropagation(),a=()=>t.preventDefault(),s=d(a,o),r=t.clientX,n=t.clientY,{target:e,x:r,y:n,stop:o,prevent:a,kill:s,raw:t}))},(n=e).dom.addEventListener(t,r,!1),{unbind:C(Pn,n,t,r,!1)};var i,l},Pn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Dn=(r,n)=>({left:r,top:n,translate:(e,t)=>Dn(r+e,n+t)}),Ln=Dn,Mn=(e,t)=>void 0!==e?e:void 0!==t?t:0,In=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Ln(r.offsetLeft,r.offsetTop):Qr(e)?(r=t.getBoundingClientRect(),Ln(r.left,r.top)):Ln(0,0)},Fn=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Ln(t,e)},Un=(e,t,r)=>{r=(void 0!==r?r.dom:document).defaultView;r&&r.scrollTo(e,t)},zn=(e,t)=>{Lt().browser.isSafari()&&H(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},jn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),Hn=e=>{const r=void 0===e?window:e,t=r.document,n=Fn(K(t));return(e=>{e=void 0===e?window:e;return Lt().browser.isFirefox()?ee.none():ee.from(e.visualViewport)})(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return jn(n.left,n.top,t,e)},e=>jn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},$n=(e,t)=>{let r=[];return re(jr(e),e=>{r=(r=t(e)?r.concat([e]):r).concat($n(e,t))}),r},Vn=(e,t)=>{return t=t,e=void 0===e?document:e.dom,Ar(e)?[]:te(e.querySelectorAll(t),K)},qn=(e,t,r)=>nn(e,t,r).isSome(),Wn=(e,t)=>{return n=t,((t=(r=e).dom).parentNode?(t=K(t.parentNode),ve(t.dom.childNodes,e=>{return e=K(e),!U(r,e)&&n(e)}).map(K)):ee.none()).isSome();var r,n},Kn=(e,t)=>an(e,t).isSome();class Yn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(r,e,n,t){if(r){if(!t&&r[e])return r[e];if(r!==this.rootNode){let t=r[n];if(t)return t;for(let e=r.parentNode;e&&e!==this.rootNode;e=e.parentNode)if(t=e[n])return t}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(!this.rootNode||r!==this.rootNode){if(r){if(!t)for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return r}t=e.parentNode;return t&&t!==this.rootNode?t:void 0}}}}const Gn="\ufeff",Xn=" ",Zn=e=>e===Gn,Qn=/^[ \t\r\n]*$/,Jn=e=>Qn.test(e),eo=e=>"\n"===e||"\r"===e,to=(e,t=4,o=!0,a=!0)=>{const r=t<=0?"":new Array(t+1).join(" "),s=e.replace(/\t/g,r),n=pe(s,(e,t)=>{return-1!==" \f\t\v".indexOf(t)||t===Xn?e.pcIsSpace||""===e.str&&o||e.str.length===s.length-1&&a||(r=s,(n=e.str.length+1)<r.length&&0<=n&&eo(r[n]))?{pcIsSpace:!1,str:e.str+Xn}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:eo(t),str:e.str+t};var r,n},{pcIsSpace:!1,str:""});return n.str},ro=t=>e=>!!e&&e.nodeType===t,no=e=>!!e&&!Object.getPrototypeOf(e),G=ro(1),oo=e=>G(e)&&er(K(e)),ao=e=>{const t=e.toLowerCase();return e=>j(e)&&e.nodeName.toLowerCase()===t},so=e=>{const t=e.map(e=>e.toLowerCase());return e=>{return!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),V(t,e))}},io=(o,e)=>{const a=e.toLowerCase().split(" ");return t=>{if(G(t)){var r=t.ownerDocument.defaultView;if(r)for(let e=0;e<a.length;e++){var n=r.getComputedStyle(t,null);if((n?n.getPropertyValue(o):null)===a[e])return!0}}return!1}},lo=e=>G(e)&&e.hasAttribute("data-mce-bogus"),co=e=>G(e)&&"TABLE"===e.tagName,uo=t=>e=>{if(oo(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1},mo=so(["textarea","input"]),X=ro(3),go=ro(4),fo=ro(7),po=ro(8),ho=ro(9),vo=ro(11),B=ao("br"),bo=ao("img"),yo=uo("true"),x=uo("false"),Co=so(["td","th"]),wo=so(["td","th","caption"]),Eo=so(["video","audio","object","embed"]),xo=ao("li"),ko=ao("details"),_o=ao("summary"),So={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},No=(e,t,r,n)=>{return H(n.isContent)&&n.isContent(t)||(a=t,s=e,G(a)&&oe(s.getNonEmptyElements(),a.nodeName))||(s=t,G(s)&&s.hasAttribute("data-mce-bookmark"))||(a=t,G(a)&&"A"===a.nodeName&&!a.hasAttribute("href")&&(a.hasAttribute("name")||a.hasAttribute("id")))||(o=t,s=r,a=e,r=n,X(o)&&(e=o,s=s,a=a,!(Jn(e.data)&&!((e,t,r)=>{const n=K(t),o=K(e),a=r.getWhitespaceElements();return qn(o,e=>oe(a,W(e)),C(U,n))})(e,s,a)))&&(!r.includeZwsp||!(()=>{for(const e of o.data)if(!Zn(e))return!1;return!0})()))||x(t)||yo(t)&&(n=t,Lr(K(n)).exists(e=>!cn(e)));var o,a,s},Ro=(e,t,r)=>{var n={...So,...r};if(n.checkRootAsContent&&No(e,t,t,n))return!1;let o=t.firstChild,a=0;if(!o)return!0;var s=new Yn(o,t);do{if(n.skipBogus&&G(o)){const e=o.getAttribute("data-mce-bogus");if(e){o=s.next("all"===e);continue}}if(po(o))o=s.next(!0);else{if(B(o))a++;else if(No(e,o,t,n))return!1;o=s.next()}}while(o);return a<=1},Ao=(e,t,r)=>Ro(e,t.dom,{checkRootAsContent:!0,...r}),To=(e,t,r)=>No(e,t,t,{includeZwsp:So.includeZwsp,...r}),Oo=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Bo=()=>{const t=(e=>{const t=Oo(ee.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(ee.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(ee.some(e))}}})($);return{...t,on:e=>t.get().each(e)}},Po=e=>{e=e.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},Do=e=>"html"!==Po(e),Lo=e=>Do(e.nodeName),Mo=e=>Po(e.nodeName),Io=["svg","math"],Fo="data-mce-block",Uo=e=>{return te((e=e,I(Be(e),e=>!/[A-Z]/.test(e))),e=>{const t=CSS.escape(e);return t+":"+te(Io,e=>`not(${e} ${t})`).join(":")}).join(",")},zo=(e,t)=>j(t.querySelector(e))?(t.setAttribute(Fo,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Fo),!1),jo=(e,t)=>{const r=Uo(e.getTransparentElements()),n=Uo(e.getBlockElements());return I(t.querySelectorAll(r),e=>zo(n,e))},Ho=(t,r,e)=>{var n,o=e?"lastChild":"firstChild";for(let e=r[o];e;e=e[o])if(Ro(t,e,{checkRootAsContent:!0}))return void(null!=(n=e.parentNode)&&n.removeChild(e))},$o=(i,e,t)=>{const r=i.getBlockElements(),n=K(e),o=e=>W(e)in r,a=e=>U(e,n);re(An(t),r=>{nn(r,o,a).each(t=>{e=r;var e=I(jr(e),e=>o(e)&&!i.isValidChild(W(t),W(e)));if(0<e.length){const r=Lr(t);re(e,s=>{nn(s,o,a).each(e=>{var t,r,n,o,a;t=i,e=e.dom,r=s.dom,o=document.createRange(),(a=e.parentNode)&&(o.setStartBefore(e),o.setEndBefore(r),n=o.extractContents(),Ho(t,n,!0),o.setStartAfter(r),o.setEndAfter(e),o=o.extractContents(),Ho(t,o,!1),Ro(t,n,{checkRootAsContent:!0})||a.insertBefore(n,e),Ro(t,r,{checkRootAsContent:!0})||a.insertBefore(r,e),Ro(t,o,{checkRootAsContent:!0})||a.insertBefore(o,e),a.removeChild(e))})}),r.each(e=>jo(i,e.dom))}})})},Vo=(e,t)=>{var r,n=jo(e,t);$o(e,t,n),r=e,e=t,t=n,re([...t,...Yo(r,e)?[e]:[]],e=>re(Vn(K(e),e.nodeName.toLowerCase()),e=>{Go(r,e.dom)&&Rn(e)}))},qo=e=>e.hasAttribute(Fo),Wo=(e,t)=>oe(e.getTransparentElements(),t),Ko=(e,t)=>G(t)&&Wo(e,t.nodeName),Yo=(e,t)=>Ko(e,t)&&qo(t),Go=(e,t)=>Ko(e,t)&&!qo(t),Xo=(e,t)=>1===t.type&&Wo(e,t.name)&&Z(t.attr(Fo)),Zo=Lt().browser,Qo=e=>ve(e,tr),Jo=(e,t)=>e.children&&V(e.children,t),ea=(e,d={})=>{let t=0;const c={},r=K(e),u=Br(r),m=e=>{kn(Yr(r),e)},n=e=>{var t=Yr(r);ln(t,"#"+e).each(Y)},g=e=>O(c,e).getOrThunk(()=>({id:"mce-u"+t++,passed:[],failed:[],count:0})),o=l=>new Promise((e,t)=>{let r;const n=ae._addCacheSuffix(l),o=g(n),a=((c[n]=o).count++,(e,t)=>{re(e,M),o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)}),s=()=>a(o.passed,2),i=()=>a(o.failed,3);e&&o.passed.push(e),t&&o.failed.push(t),1!==o.status&&(2===o.status?s():3===o.status?i():(o.status=1,e=_r("link",u.dom),lr(e,{rel:"stylesheet",type:"text/css",id:o.id}),d.contentCssCors&&ir(e,"crossOrigin","anonymous"),d.referrerPolicy&&ir(e,"referrerpolicy",d.referrerPolicy),(r=e.dom).onload=s,r.onerror=i,m(e),ir(e,"href",n)))}),a=e=>{const t=ae._addCacheSuffix(e);O(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})};return{load:o,loadRawCss:(e,t)=>{var r=g(e),e=((c[e]=r).count++,_r("style",u.dom));lr(e,{rel:"stylesheet",type:"text/css",id:r.id}),e.dom.innerHTML=t,m(e)},loadAll:e=>Promise.allSettled(te(e,e=>o(e).then(J(e)))).then(e=>{e=ge(e,e=>"fulfilled"===e.status);return 0<e.fail.length?Promise.reject(te(e.fail,e=>e.reason)):te(e.pass,e=>e.value)}),unload:a,unloadRawCss:t=>{O(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})},unloadAll:e=>{re(e,e=>{a(e)})},_setReferrerPolicy:e=>{d.referrerPolicy=e},_setContentCssCors:e=>{d.contentCssCors=e}}},ta=(()=>{const n=new WeakMap;return{forElement:(e,t)=>{const r=Kr(e).dom;return ee.from(n.get(r)).getOrThunk(()=>{var e=ea(r,t);return n.set(r,e),e})}}})(),ra=(e,t)=>j(e)&&(To(t,e)||t.isInline(e.nodeName.toLowerCase())),na=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),oa=(t,e,r,n)=>{var o,a,s,i=n||e;if(!G(e)||!na(e)){var l=e.childNodes;for(let e=l.length-1;0<=e;e--)oa(t,l[e],r,i);if(G(e)){const t=e.childNodes;1!==t.length||!na(t[0])||null!=(n=e.parentNode)&&n.insertBefore(t[0],e)}n=e,vo(n)||ho(n)||To(r,e)||(n=e,!!G(n)&&0<n.childNodes.length)||(n=e,o=i,a=r,X(n)&&0<n.data.length&&(n=n,o=o,a=a,s=new Yn(n,o).prev(!1),n=new Yn(n,o).next(!1),o=D(s)||ra(s,a),s=D(n)||ra(n,a),o)&&s)||t.remove(e)}return e},aa=ae.makeMap,sa=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ia=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,la=/[<>&\"\']/g,da=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ca={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ua={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ma={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ga=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(let e=0;e<n.length;e+=2){var o=String.fromCharCode(parseInt(n[e],t));if(!ua[o]){const t="&"+n[e+1]+";";r[o]=t,r[t]=o}}return r}},fa=ga("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),pa=(e,t)=>e.replace(t?sa:ia,e=>ua[e]||e),ha=(e,t)=>e.replace(t?sa:ia,e=>1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ua[e]||"&#"+e.charCodeAt(0)+";"),va=(e,t,r)=>{const n=r||fa;return e.replace(t?sa:ia,e=>ua[e]||n[e]||e)},ba={encodeRaw:pa,encodeAllRaw:e=>(""+e).replace(la,e=>ua[e]||e),encodeNumeric:ha,encodeNamed:va,getEncodeFunc:(e,t)=>{const r=ga(t)||fa,n=aa(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?sa:ia,e=>void 0!==ua[e]?ua[e]:void 0!==r[e]?r[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>va(e,t,r):va:n.numeric?ha:pa},decode:e=>e.replace(da,(e,t)=>{return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ca[t]||String.fromCharCode(t):ma[e]||fa[e]||(t=e,(e=_r("div").dom).innerHTML=t,e.textContent)||e.innerText||t})},ya=(e,t)=>(e=ae.trim(e))?e.split(t||" "):[],Ca=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),wa=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),Ea=e=>{let t,r;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(r=[r,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));e=[t,r].join(" ");return{blockContent:t,phrasingContent:r,flowContent:e}},xa=e=>{var{blockContent:e,phrasingContent:t,flowContent:r}=Ea(e),n=e=>Object.freeze(e.split(" "));return Object.freeze({blockContent:n(e),phrasingContent:n(t),flowContent:n(r)})},ka={html4:Ze(()=>xa("html4")),html5:Ze(()=>xa("html5")),"html5-strict":Ze(()=>xa("html5-strict"))},_a=(e,t)=>{var{blockContent:e,phrasingContent:r,flowContent:n}=ka[e]();return"blocks"===t?ee.some(e):"phrasing"===t?ee.some(r):"flow"===t?ee.some(n):ee.none()},Sa=e=>ee.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(e=>({preset:"@"===e[1],name:e[2]})),Na={},Ra=ae.makeMap,Aa=ae.each,Ta=ae.extend,Oa=ae.explode,Ba=(e,t={})=>{e=Ra(e," ",Ra(e.toUpperCase()," "));return Ta(e,t)},Pa=e=>Ba("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Da=(e,r)=>{if(e){const n={};return Z(e)&&(e={"*":e}),Aa(e,(e,t)=>{n[t]=n[t.toUpperCase()]=("map"===r?Ra:Oa)(e,/[, ]/)}),n}},La=(o={})=>{var e;const a={},s={};let i=[];const l={},t={},r=(t,r,n)=>{var e=o[t];if(e)return Ra(e,/[, ]/,Ra(e.toUpperCase(),/[, ]/));{let e=Na[t];return e||(e=Ba(r,n),Na[t]=e),e}},d=null!=(e=o.schema)?e:"html5",n=(e=>{const i=wa(e),{phrasingContent:t,flowContent:r}=Ea(e),a={},l=(e,t,r)=>{a[e]={attributes:ke(t,J({})),attributesOrder:t,children:ke(r,J({}))}},n=(e,t="",r="")=>{var n=ya(r),o=ya(e);let a=o.length;for(var s=[...i,...ya(t)];a--;)l(o[a],s.slice(),n)},o=(r,e)=>{var t=ya(r),n=ya(e);let o=t.length;for(;o--;){const r=a[t[o]];for(let e=0,t=n.length;e<t;e++)r.attributes[n[e]]={},r.attributesOrder.push(n[e])}};return"html5-strict"!==e&&(re(ya("acronym applet basefont big font strike tt"),e=>{n(e,"",t)}),re(ya("center dir isindex noframes"),e=>{n(e,"",r)})),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),n("dd div","",r),n("address dt caption","","html4"===e?t:r),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),n("blockquote","cite",r),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",r),n("dl","","dt dd"),n("a","href target rel media hreflang type","html4"===e?t:r),n("q","cite",t),n("ins del","cite datetime",r),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",r),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),n("param","name value"),n("map","name",[r,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",r),n("th","colspan rowspan headers scope abbr",r),n("form","accept-charset action autocomplete enctype method name novalidate target",r),n("fieldset","disabled form name",[r,"legend"].join(" ")),n("label","form for",t),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:t),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[r,"li"].join(" ")),n("noscript","",r),"html4"!==e&&(n("wbr"),n("ruby","",[t,"rt rp"].join(" ")),n("figcaption","",r),n("mark rt rp bdi","",t),n("summary","",[t,"h1 h2 h3 h4 h5 h6"].join(" ")),n("canvas","width height",r),n("data","value",t),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[t,"option"].join(" ")),n("article section nav aside main header footer","",r),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[r,"figcaption"].join(" ")),n("time","datetime",t),n("dialog","open",r),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",t),n("progress","value max",t),n("meter","value min max low high optimum",t),n("details","open",[r,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(o("script","language xml:space"),o("style","xml:space"),o("object","declare classid code codebase codetype archive standby align border hspace vspace"),o("embed","align name hspace vspace"),o("param","valuetype type"),o("a","charset name rev shape coords"),o("br","clear"),o("applet","codebase archive code object alt name width height align hspace vspace"),o("img","name longdesc align border hspace vspace"),o("iframe","longdesc frameborder marginwidth marginheight scrolling align"),o("font basefont","size color face"),o("input","usemap align"),o("select"),o("textarea"),o("h1 h2 h3 h4 h5 h6 div p legend caption","align"),o("ul","type compact"),o("li","type"),o("ol dl menu dir","compact"),o("pre","width xml:space"),o("hr","align noshade size width"),o("isindex","prompt"),o("table","summary width frame rules cellspacing cellpadding align bgcolor"),o("col","width align char charoff valign"),o("colgroup","width align char charoff valign"),o("thead","align char charoff valign"),o("tr","align char charoff valign bgcolor"),o("th","axis align char charoff valign nowrap bgcolor width height"),o("form","accept"),o("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),o("tfoot","align char charoff valign"),o("tbody","align char charoff valign"),o("area","nohref"),o("body","background bgcolor text link vlink alink")),"html4"!==e&&(o("input button select textarea","autofocus"),o("input textarea","placeholder"),o("a","download"),o("link script img","crossorigin"),o("img","loading"),o("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==e&&re([a.video,a.audio],e=>{delete e.children.audio,delete e.children.video}),re(ya("a form meter progress dfn"),e=>{a[e]&&delete a[e].children[e]}),delete a.caption.children.table,delete a.script,a})(d),c=(!1===o.verify_html&&(o.valid_elements="*[*]"),Da(o.valid_styles)),u=Da(o.invalid_styles,"map"),m=Da(o.valid_classes,"map"),g=r("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=r("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",b=r("non_empty_elements",v+" pre svg textarea summary",p),y=r("move_caret_before_on_enter_elements",v+" table",p),C="h1 h2 h3 h4 h5 h6",w=r("text_block_elements",C+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),E=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),x=r("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),k=r("transparent_elements","a ins del canvas map"),_=r("wrap_block_elements","pre "+C),S=(Aa("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{t[e]=new RegExp("</"+e+"[^>]*>","gi")}),e=>{const t=ee.from(a["@"]),n=/[*?+]/;re(((u,e)=>{const m=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ce(ya(e,","),e=>{var t=m.exec(e);if(t){const e=t[1],m=t[2],r=t[3],n=t[4],o=t[5],s={attributes:{},attributesOrder:[]};if(u.each(e=>{return e=e,r=s,ne(e.attributes,(e,t)=>{r.attributes[t]=e}),void r.attributesOrder.push(...e.attributesOrder);var r}),"#"===e?s.paddEmpty=!0:"-"===e&&(s.removeEmpty=!0),"!"===n&&(s.removeEmptyAttrs=!0),o){t=o;var a=s;const i=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,l=/[*?+]/,{attributes:d,attributesOrder:c}=a;re(ya(t,"|"),e=>{var t=i.exec(e);if(t){const e={},i=t[1],r=t[2].replace(/[\\:]:/g,":"),n=t[3],o=t[4];if("!"===i&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(r),e.required=!0),"-"===i)delete d[r],c.splice(ae.inArray(c,r),1);else if(n&&("="===n?(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:r,value:o}),e.defaultValue=o):"~"===n?(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:r,value:o}),e.forcedValue=o):"<"===n&&(e.validValues=ae.makeMap(o,"?"))),l.test(r)){const i=e;a.attributePatterns=a.attributePatterns||[],i.pattern=Ca(r),a.attributePatterns.push(i)}else d[r]||c.push(r),d[r]=e}})}if(r&&(s.outputName=m),"@"===m){if(!u.isNone())return[];u=ee.some(s)}return[r?{name:m,element:s,aliasName:r}:{name:m,element:s}]}return[]})})(t,null!=e?e:""),({name:e,element:t,aliasName:r})=>{if(r&&(a[r]=t),n.test(e)){const a=t;a.pattern=Ca(e),i.push(a)}else a[e]=t})}),N=e=>{i=[],re(Be(a),e=>{delete a[e]}),S(e)},R=(r,e)=>{var n;delete Na.text_block_elements,delete Na.block_elements;const t=!!e.extends&&!D(e.extends),o=e.extends;if(s[r]=o?s[o]:{},l[r]=null!=o?o:r,b[r.toUpperCase()]={},b[r]={},t||(E[r.toUpperCase()]={},E[r]={}),o&&!a[r]&&a[o]){const e=(e=>{const r=e=>{return Q(e)?te(e,r):(t=e,de(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(e.source,e.flags):de(e)?De(e,r):e);var t};return r(e)})(a[o]);delete e.removeEmptyAttrs,delete e.removeEmpty,a[r]=e}else a[r]={attributesOrder:[],attributes:{}};if(Q(e.attributes)){const s=e=>{l.attributesOrder.push(e),l.attributes[e]={}},l=null!=(n=a[r])?n:{};delete l.attributesDefault,delete l.attributesForced,delete l.attributePatterns,delete l.attributesRequired,l.attributesOrder=[],l.attributes={},re(e.attributes,e=>{const r=wa(d);Sa(e).each(({preset:e,name:t})=>{e?"global"===t&&re(r,s):s(t)})}),a[r]=l}if(ue(e.padEmpty)){const s=null!=(n=a[r])?n:{};s.paddEmpty=e.padEmpty,a[r]=s}if(Q(e.children)){const a={},n=e=>{a[e]={}},l=e=>{_a(d,e).each(e=>{re(e,n)})};re(e.children,e=>{Sa(e).each(({preset:e,name:t})=>{(e?l:n)(t)})}),s[r]=a}o&&ne(s,(e,t)=>{e[o]&&(s[t]=e=Ta({},s[t]),e[r]=e[o])})},A=e=>{de(e)?ne(e,(e,t)=>R(t,e)):Z(e)&&(e=e,re((e=>{const t=/^(~)?(.+)$/;return Ce(ya(e,","),e=>{e=t.exec(e);return e?[{cloneName:"~"===e[1]?"span":"div",name:e[2]}]:[]})})(null!=e?e:""),({name:e,cloneName:t})=>{R(e,{extends:t})}))},T=e=>{re((e=>{const r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ce(ya(e,","),e=>{var t=r.exec(e);if(t){const e=t[1],r=e?"-"===e?"remove":"add":"replace";return[{operation:r,name:t[2],validChildren:Ce(ya(t[3],"|"),e=>Sa(e).toArray())}]}return[]})})(null!=e?e:""),({operation:t,name:e,validChildren:r})=>{const n="replace"===t?{"#comment":{}}:s[e],o=e=>{"remove"===t?delete n[e]:n[e]={}};re(r,({preset:e,name:t})=>{e?(e=t,_a(d,e).each(e=>{re(e,o)})):o(t)}),s[e]=n})},O=e=>{const t=a[e];if(t)return t;let r=i.length;for(;r--;){const t=i[r];if(t.pattern.test(e))return t}},M=J(c),I=J(u),F=J(m),U=J(h),B=J(E),z=J(w),j=J(x),H=J(Object.seal(p)),$=J(f),V=J(b),q=J(y),W=J(g),K=J(k),Y=J(_),G=J(Object.seal(t)),P=(t,r)=>{var e=O(t);if(e){if(!r)return!0;{if(e.attributes[r])return!0;const t=e.attributePatterns;if(t){let e=t.length;for(;e--;)if(t[e].pattern.test(r))return!0}}}return!1},D=e=>oe(B(),e),L=e=>!at(e,"#")&&P(e)&&!D(e),X=J(l);return o.valid_elements?(N(o.valid_elements),Aa(n,(e,t)=>{s[t]=e.children})):(Aa(n,(e,t)=>{a[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},s[t]=e.children}),Aa(ya("strong/b em/i"),e=>{e=ya(e,"/");a[e[1]].outputName=e[0]}),Aa(x,(e,t)=>{a[t]&&(o.padd_empty_block_inline_children&&(a[t].paddInEmptyBlock=!0),a[t].removeEmpty=!0)}),Aa(ya("ol ul blockquote a table tbody"),e=>{a[e]&&(a[e].removeEmpty=!0)}),Aa(ya("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{a[e]&&(a[e].paddEmpty=!0)}),Aa(ya("span"),e=>{a[e].removeEmptyAttrs=!0})),delete a.svg,A(o.custom_elements),T(o.valid_children),S(o.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),Aa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{a[t]&&(a[t].parentsRequired=ya(e))}),o.invalid_elements&&Aa(Oa(o.invalid_elements),e=>{a[e]&&delete a[e]}),O("span")||S("span[!data-mce-type|*]"),{type:d,children:s,elements:a,getValidStyles:M,getValidClasses:F,getBlockElements:B,getInvalidStyles:I,getVoidElements:H,getTextBlockElements:z,getTextInlineElements:j,getBoolAttrs:U,getElementRule:O,getSelfClosingElements:$,getNonEmptyElements:V,getMoveCaretBeforeOnEnterElements:q,getWhitespaceElements:W,getTransparentElements:K,getSpecialElements:G,isValidChild:(e,t)=>{e=s[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:P,isBlock:D,isInline:L,isWrapper:e=>oe(Y(),e)||L(e),getCustomElements:X,addValidElements:S,setValidElements:N,addCustomElements:A,addValidChildren:T}},Ma=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Ia=e=>{return{value:(e=Ma(e.red)+Ma(e.green)+Ma(e.blue),nt(e,"#").toUpperCase())}},Fa=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ua=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,za=(e,t,r,n)=>({red:parseInt(e,10),green:parseInt(t,10),blue:parseInt(r,10),alpha:parseFloat(n)}),ja=e=>{var t=Fa.exec(e);return null!==t?ee.some(za(t[1],t[2],t[3],"1")):null!==(t=Ua.exec(e))?ee.some(za(t[1],t[2],t[3],t[4])):ee.none()},Ha=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,$a=e=>ja(e).map(Ia).map(e=>"#"+e.value).getOr(e),Va=(h={},e)=>{const v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,y=/\s+$/,C={};let t,l;const w=Gn;e&&(t=e.getValidStyles(),l=e.getInvalidStyles());var r="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let e=0;e<r.length;e++)C[r[e]]=w+e,C[w+e]=r[e];const E={parse:e=>{const d={};let r=!1;const s=h.url_converter,i=h.url_converter_scope||E,t=(t,r,n)=>{var o=d[t+"-top"+r];if(o){var a=d[t+"-right"+r];if(a){var s=d[t+"-bottom"+r];if(s){var i=d[t+"-left"+r];if(i){var l=[o,a,s,i];let e=l.length-1;for(;e--&&l[e]===l[e+1];);-1<e&&n||(d[t+r]=-1===e?l[0]:l.join(" "),delete d[t+"-top"+r],delete d[t+"-right"+r],delete d[t+"-bottom"+r],delete d[t+"-left"+r])}}}}},n=t=>{var r=d[t];if(r){var n=-1<r.indexOf(",")?[r]:r.split(" ");let e=n.length;for(;e--;)if(n[e]!==n[0])return!1;return d[t]=n[0],!0}},o=e=>(r=!0,C[e]),l=(e,t)=>(r&&(e=e.replace(/\uFEFF[0-9]/g,e=>C[e])),e=t?e:e.replace(/\\([\'\";:])/g,"$1")),a=e=>String.fromCharCode(parseInt(e.slice(1),16)),c=e=>e.replace(/\\[0-9a-f]+/gi,a),u=(e,t,r,n,o,a)=>{if(o=o||a)return"'"+(o=l(o)).replace(/\'/g,"\\'")+"'";if(t=l(t||r||n||""),!h.allow_script_urls){const e=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(e))return"";if(!h.allow_svg_data_urls&&/^data:image\/svg/i.test(e))return""}return"url('"+(t=s?s.call(i,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,o));p=b.exec(e);){b.lastIndex=p.index+p[0].length;let e=p[1].replace(y,"").toLowerCase(),t=p[2].replace(y,"");e&&t&&(e=c(e),t=c(t),-1===e.indexOf(w))&&-1===e.indexOf('"')&&(h.allow_script_urls||"behavior"!==e&&!/expression\s*\(|\/\*|\*\//.test(t))&&("font-weight"===e&&"700"===t?t="bold":"color"!==e&&"background-color"!==e||(t=t.toLowerCase()),"rgb"==(p=t,Fa.test(p)?"rgb":Ua.test(p)?"rgba":"other")&&ja(t).each(e=>{t=$a(Ha(e)).toLowerCase()}),t=t.replace(v,u),d[e]=r?l(t,!0):t)}t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),g="border-style",f="border-color",n(m="border-width")&&n(g)&&n(f)&&(d.border=d[m]+" "+d[g]+" "+d[f],delete d[m],delete d[g],delete d[f]),"medium none"===d.border&&delete d.border,"none"===d["border-image"]&&delete d["border-image"]}var m,g,f,p;return d},serialize:(a,s)=>{let i="";var e=(e,r)=>{var n=r[e];if(n)for(let e=0,t=n.length;e<t;e++){const r=n[e],o=a[r];o&&(i+=(0<i.length?" ":"")+r+": "+o+";")}};return s&&t?(e("*",t),e(s,t)):ne(a,(e,t)=>{var r,n,o;!e||(r=t,n=s,l&&n&&((o=l["*"])&&o[r]||(o=l[n])&&o[r]))||(i+=(0<i.length?" ":"")+t+": "+e+";")}),i}};return E},qa={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Wa=(t,e)=>{var r=null!=e?e:{};for(const e in t)oe(qa,e)||(r[e]=t[e]);return j(t.composedPath)&&(r.composedPath=()=>t.composedPath()),j(t.getModifierState)&&(r.getModifierState=e=>t.getModifierState(e)),j(t.getTargetRanges)&&(r.getTargetRanges=()=>t.getTargetRanges()),r},Ka=(e,t,r,n)=>{const o=Wa(t,n);return o.type=e,z(o.target)&&(o.target=null!=(n=o.srcElement)?n:r),e=t,(z(e.preventDefault)||(e=e)instanceof Event||H(e.initEvent))&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=S,H(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=S,H(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=S,o.stopPropagation()},(n=o).isDefaultPrevented!==S&&n.isDefaultPrevented!==T&&(o.isDefaultPrevented=!0===o.defaultPrevented?S:T,o.isPropagationStopped=!0===o.cancelBubble?S:T,o.isImmediatePropagationStopped=T)),o},Ya=/^(?:mouse|contextmenu)|click/,Ga=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},Xa=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},Za=(e,t)=>{var r=Ka(e.type,e,document,t);if(t=e,j(t)&&Ya.test(t.type)&&D(e.pageX)&&!D(e.clientX)){const t=r.target.ownerDocument||document,n=t.documentElement,o=t.body,a=r;a.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),a.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return r};class Qa{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,e,a,s){const i=this;let l;const d=window,c=e=>{i.executeHandlers(Za(e||d.event),u)};if(!o||X(o)||po(o))return a;let u;o[i.expando]?u=o[i.expando]:(u=i.count++,o[i.expando]=u,i.events[u]={}),s=s||o;var m=e.split(" ");let g=m.length;for(;g--;){let e=m[g],t=c,r=!1,n=!1;"DOMContentLoaded"===e&&(e="ready"),i.domLoaded&&"ready"===e&&"complete"===o.readyState?a.call(s,Za({type:e})):(i.hasFocusIn||"focusin"!==e&&"focusout"!==e||(r=!0,n="focusin"===e?"focus":"blur",t=e=>{e=Za(e||d.event);e.type="focus"===e.type?"focusin":"focusout",i.executeHandlers(e,u)}),(l=i.events[u][e])?"ready"===e&&i.domLoaded?a(Za({type:e})):l.push({func:a,scope:s}):(i.events[u][e]=l=[{func:a,scope:s}],l.fakeName=n,l.capture=r,l.nativeHandler=t,"ready"===e?((e,t,r)=>{const n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{const a=()=>{Xa(e,"DOMContentLoaded",a),Xa(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():Ga(e,"DOMContentLoaded",a),r.domLoaded||Ga(e,"load",a)}})(o,t,i):Ga(o,n||e,t,r)))}return o=l=null,a}unbind(r,n,o){if(r&&!X(r)&&!po(r)){const a=r[this.expando];if(a){let t=this.events[a];if(n){const a=n.split(" ");let e=a.length;for(;e--;){const n=a[e],s=t[n];if(s){if(o){let e=s.length;for(;e--;)if(s[e].func===o){const o=s.nativeHandler,a=s.fakeName,i=s.capture,l=s.slice(0,e).concat(s.slice(e+1));l.nativeHandler=o,l.fakeName=a,l.capture=i,t[n]=l}}o&&0!==s.length||(delete t[n],Xa(r,s.fakeName||n,s.nativeHandler,s.capture))}}}else ne(t,(e,t)=>{Xa(r,e.fakeName||t,e.nativeHandler,e.capture)}),t={};for(const r in t)if(oe(t,r))return this;delete this.events[a];try{delete r[this.expando]}catch(n){r[this.expando]=null}}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(e&&!X(e)&&!po(e)){var n=Za({type:t,target:e},r);do{const t=e[this.expando];t&&this.executeHandlers(n,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped())}return this}clean(t){if(t&&!X(t)&&!po(t)&&(t[this.expando]&&this.unbind(t),t=t.getElementsByTagName?t:t.document)&&t.getElementsByTagName){this.unbind(t);var r=t.getElementsByTagName("*");let e=r.length;for(;e--;)(t=r[e])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(r,e){const n=this.events[e],o=n&&n[r.type];if(o)for(let e=0,t=o.length;e<t;e++){const n=o[e];if(n&&!1===n.func.call(n.scope,r)&&r.preventDefault(),r.isImmediatePropagationStopped())return}}}Qa.Event=new Qa;const Ja=ae.each,es=ae.grep,ts="data-mce-style",rs=ae.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ns=(e,t,r)=>{z(r)||""===r?mr(e,t):ir(e,t,r)},os=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),as=(r,n)=>{let o=0;if(r)for(let e=r.nodeType,t=r.previousSibling;t;t=t.previousSibling){const r=t.nodeType;n&&X(t)&&(r===e||!t.data.length)||(o++,e=r)}return o},ss=(e,t)=>{var r=dr(t,"style"),e=e.serialize(e.parse(r),W(t));ns(t,ts,e)},is=(e,t,r)=>{t=os(t);z(r)||""===r?Cn(e,t):fn(e,t,(e=r,r=t,k(e)?oe(rs,r)?e+"":e+"px":e))},se=(i,s={})=>{const r={},l=window,o={};let I=0;const a=ta.forElement(K(i),{contentCssCors:s.contentCssCors,referrerPolicy:s.referrerPolicy}),d=[],c=s.schema||La({}),n=Va({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),u=s.ownEvents?new Qa:Qa.Event,t=c.getBlockElements(),m=e=>e&&i&&Z(e)?i.getElementById(e):e,g=e=>{e=m(e);return j(e)?K(e):null},f=(e,t,r="")=>{let n;var o=g(e);if(j(o)&&tr(o)){const e=U[t];n=e&&e.get?e.get(o.dom,t):dr(o,t)}return j(n)?n:r},p=e=>{e=m(e);return z(e)?[]:e.attributes},h=(e,o,a)=>{k(e,e=>{var t,r,n;G(e)&&(e=K(e),t=""===a?null:a,r=dr(e,o),(n=U[o])&&n.set?n.set(e.dom,t,o):ns(e,o,t),r!==t)&&s.onSetAttrib&&s.onSetAttrib({attrElm:e.dom,attrName:o,attrValue:t})})},v=()=>s.root_element||i.body,b=(n,o)=>{{var a=i.body,s=(n=m(n),o);let t=0,r=0;if(o=a.ownerDocument,s=s||a,n){if(s===a&&n.getBoundingClientRect&&"static"===hn(K(a),"position")){const s=n.getBoundingClientRect();return t=s.left+(o.documentElement.scrollLeft||a.scrollLeft)-o.documentElement.clientLeft,r=s.top+(o.documentElement.scrollTop||a.scrollTop)-o.documentElement.clientTop,{x:t,y:r}}let e=n;for(;e&&e!==s&&e.nodeType&&!Jo(e,s);){const a=e;t+=a.offsetLeft||0,r+=a.offsetTop||0,e=a.offsetParent}for(e=n.parentNode;e&&e!==s&&e.nodeType&&!Jo(e,s);)t-=e.scrollLeft||0,r-=e.scrollTop||0,e=e.parentNode;r+=(a=K(n),Zo.isFirefox()&&"table"===W(a)?Qo(jr(a)).filter(e=>"caption"===W(e)).bind(n=>Qo(zr(n)).map(e=>{var e=e.dom.offsetTop,t=n.dom.offsetTop,r=n.dom.offsetHeight;return e<=t?-r:0})).getOr(0):0)}return{x:t,y:r}}},y=(e,t,r)=>{var n,e=m(e);if(!z(e)&&(oo(e)||G(n=e)&&"http://www.w3.org/2000/svg"===n.namespaceURI))return r?hn(K(e),os(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),e.style?e.style[t]:void 0)},C=e=>{e=m(e);if(!e)return{w:0,h:0};let t=y(e,"width"),r=y(e,"height");return t&&-1!==t.indexOf("px")||(t="0"),r&&-1!==r.indexOf("px")||(r="0"),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},w=(e,t)=>{return!!e&&(e=Q(e)?e:[e],q(e,e=>Rr(K(e),t)))},E=(t,e,r,n)=>{var o=[];let a=m(t);n=void 0===n;var s=r||("BODY"!==v().nodeName?v().parentNode:null);if(Z(e))if("*"===e)e=G;else{const t=e;e=e=>w(e,t)}for(;a&&!(a===s||z(a.nodeType)||ho(a)||vo(a));){if(!e||e(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},x=(t,r,n)=>{let o=r;if(t){Z(r)&&(o=e=>w(e,r));for(let e=t[n];e;e=e[n])if(H(o)&&o(e))return e}return null},k=function(e,r,n){const o=null!=n?n:this;if(Q(e)){const n=[];return Ja(e,(e,t)=>{e=m(e);e&&n.push(r.call(o,e,t))}),n}{const n=m(e);return!!n&&r.call(o,n)}},_=(e,t)=>{k(e,r=>{ne(t,(e,t)=>{h(r,t,e)})})},S=(e,t)=>{k(e,e=>{e=K(e);On(e,t)})},N=(e,r,n,o,a)=>k(e,e=>{var t=Z(r)?i.createElement(r):r;return j(n)&&_(t,n),o&&(!Z(o)&&o.nodeType?t.appendChild(o):Z(o)&&S(t,o)),a?t:e.appendChild(t)}),R=(e,t,r)=>N(i.createElement(e),e,t,r,!0),A=ba.encodeAllRaw,T=(e,r)=>k(e,e=>{const t=K(e);return r&&re(jr(t),e=>{rr(e)&&0===e.dom.length?Y(e):wn(t,e)}),Y(t),t.dom}),O=(e,n,o)=>{k(e,e=>{if(G(e)){const t=K(e),r=n.split(" ");re(r,e=>{(j(o)?o?yr:wr:(e,t)=>{var r;pr(e)?e.dom.classList.toggle(t):(r=e,t=t,(V(hr(r),t)?br:vr)(r,t));Cr(e)})(t,e)})}})},B=(n,o,a)=>k(o,e=>{var t;const r=Q(o)?n.cloneNode(!0):n;return a&&Ja(es(e.childNodes),e=>{r.appendChild(e)}),null!=(t=e.parentNode)&&t.replaceChild(r,e),e}),P=()=>i.createRange(),D=(t,r,n,o)=>{if(Q(t)){let e=t.length;const s=[];for(;e--;)s[e]=D(t[e],r,n,o);return s}return!s.collect||t!==i&&t!==l||d.push([t,r,n,o]),u.bind(t,r,n,o||M)},L=(t,r,n)=>{if(Q(t)){let e=t.length;const l=[];for(;e--;)l[e]=L(t[e],r,n);return l}if(0<d.length&&(t===i||t===l)){let e=d.length;for(;e--;){const[l,o,a]=d[e];t!==l||r&&r!==o||n&&n!==a||u.unbind(l,o,a)}}return u.unbind(t,r,n)},F=e=>{var t;return e&&oo(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},M={doc:i,settings:s,win:l,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:d,styles:n,schema:c,events:u,isBlock:e=>Z(e)?oe(t,e):G(e)&&(oe(t,e.nodeName)||Yo(c,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:v,getViewPort:e=>{e=Hn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:e=>{var e=m(e),t=b(e),e=C(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:C,getParent:(e,t,r)=>{e=E(e,t,r,!1);return e&&0<e.length?e[0]:null},getParents:E,get:m,getNext:(e,t)=>x(e,t,"nextSibling"),getPrev:(e,t)=>x(e,t,"previousSibling"),select:(e,t)=>{t=null!=(t=null!=(t=m(t))?t:s.root_element)?t:i;return H(t.querySelectorAll)?Ae(t.querySelectorAll(e)):[]},is:w,add:N,create:R,createHTML:(e,t,r="")=>{let n="<"+e;for(const e in t)ze(t,e)&&(n+=" "+e+'="'+A(t[e])+'"');return mt(r)&&oe(c.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var t,r=i.createElement("div"),n=i.createDocumentFragment();for(n.appendChild(r),e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n.removeChild(r),n},remove:T,setStyle:(e,t,r)=>{k(e,e=>{e=K(e);is(e,t,r),s.update_styles&&ss(n,e)})},getStyle:y,setStyles:(e,t)=>{k(e,e=>{const r=K(e);ne(t,(e,t)=>{is(r,t,e)}),s.update_styles&&ss(n,r)})},removeAllAttribs:e=>k(e,t=>{var r=t.attributes;for(let e=r.length-1;0<=e;e--)t.removeAttributeNode(r.item(e))}),setAttrib:h,setAttribs:_,getAttrib:f,getPos:b,parseStyle:e=>n.parse(e),serializeStyle:(e,t)=>n.serialize(e,t),addStyle:e=>{if(M!==se.DOM&&i===document){if(r[e])return;r[e]=!0}let t=i.getElementById("mceDefaultStyles");if(!t){(t=i.createElement("style")).id="mceDefaultStyles",t.type="text/css";const e=i.head;e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(i.createTextNode(e))},loadCSS:e=>{e=e||"",re(e.split(","),e=>{o[e]=!0,a.load(e).catch($)})},addClass:(e,t)=>{O(e,t,!0)},removeClass:(e,t)=>{O(e,t,!1)},hasClass:(e,t)=>{const r=g(e),n=t.split(" ");return j(r)&&we(n,e=>Er(r,e))},toggleClass:O,show:e=>{k(e,e=>Cn(K(e),"display"))},hide:e=>{k(e,e=>fn(K(e),"display","none"))},isHidden:e=>{e=g(e);return j(e)&&Vt(bn(e,"display"),"none")},uniqueId:e=>(e||"mce_")+I++,setHTML:S,getOuterHTML:e=>{var t,e=g(e);return j(e)?G(e.dom)?e.dom.outerHTML:(e=e,t=_r("div"),e=K(e.dom.cloneNode(!0)),kn(t,e),Tn(t)):""},setOuterHTML:(e,t)=>{k(e,e=>{G(e)&&(e.outerHTML=t)})},decode:ba.decode,encode:A,insertAfter:(e,t)=>{const n=m(t);return k(e,e=>{var t=null==n?void 0:n.parentNode,r=null==n?void 0:n.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},replace:B,rename:(t,e)=>{if(t.nodeName===e.toUpperCase())return t;{const r=R(e);return Ja(p(t),e=>{h(r,e.nodeName,f(t,e.nodeName))}),B(r,t,!0),r}},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:k,getAttribs:p,isEmpty:(e,t,r)=>{return ce(t)?Ro(c,e,{...r,isContent:e=>{e=e.nodeName.toLowerCase();return Boolean(t[e])}}):Ro(c,e,r)},createRng:P,nodeIndex:as,split:(e,t,r)=>{let n,o,a=P();var s;if(e&&t&&e.parentNode&&t.parentNode)return s=e.parentNode,a.setStart(s,as(e)),a.setEnd(t.parentNode,as(t)),n=a.extractContents(),(a=P()).setStart(t.parentNode,as(t)+1),a.setEnd(s,as(e)+1),o=a.extractContents(),s.insertBefore(oa(M,n,c),e),r?s.insertBefore(r,e):s.insertBefore(t,e),s.insertBefore(oa(M,o,c),e),T(e),r||t},bind:D,unbind:L,fire:(e,t,r)=>u.dispatch(e,t,r),dispatch:(e,t,r)=>u.dispatch(e,t,r),getContentEditable:F,getContentEditableParent:t=>{var r=v();let n=null;for(let e=t;e&&e!==r&&null===(n=F(e));e=e.parentNode);return n},isEditable:e=>{return!!j(e)&&(e=G(e)?e:e.parentElement,j(e))&&oo(e)&&cn(K(e))},destroy:()=>{if(0<d.length){let e=d.length;for(;e--;){var[t,r,n]=d[e];u.unbind(t,r,n)}}ne(o,(e,t)=>{a.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},U=((r,o,a)=>{const n=o.keep_values,e={set:(e,t,r)=>{var n=K(e);H(o.url_converter)&&j(t)&&(t=o.url_converter.call(o.url_converter_scope||a(),String(t),r,e)),ns(n,"data-mce-"+r,t),ns(n,r,t)},get:(e,t)=>{e=K(e);return dr(e,"data-mce-"+t)||dr(e,t)}},t={style:{set:(e,t)=>{e=K(e);n&&ns(e,ts,t),mr(e,"style"),Z(t)&&pn(e,r.parse(t))},get:e=>{var e=K(e),t=dr(e,ts)||dr(e,"style");return r.serialize(r.parse(t),W(e))}}};return n&&(t.href=t.src=e),t})(n,s,J(M));return M},ls=(se.DOM=se(document),se.nodeIndex=as,se.DOM);class ds{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(s){return new Promise((e,t)=>{const r=ls;let n;const o=()=>{r.remove(a),n&&(n.onerror=n.onload=n=null)},a=r.uniqueId();(n=document.createElement("script")).id=a,n.type="text/javascript",n.src=ae._addCacheSuffix(s),this.settings.referrerPolicy&&r.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),e()},n.onerror=()=>{o(),t("Failed to load script: "+s)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(r){const n=this;return n.queue.push(r),void 0===n.states[r]&&(n.states[r]=0),new Promise((e,t)=>{n.scriptLoadedCallbacks[r]||(n.scriptLoadedCallbacks[r]=[]),n.scriptLoadedCallbacks[r].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(t,r)=>{O(n.scriptLoadedCallbacks,r).each(e=>{re(e,e=>e[t](r))}),delete n.scriptLoadedCallbacks[r]},o=e=>{e=I(e,e=>"rejected"===e.status);return 0<e.length?Promise.reject(Ce(e,({reason:e})=>Q(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(te(e,t=>2===n.states[t]?(r("resolve",t),Promise.resolve()):3===n.states[t]?(r("reject",t),Promise.reject(t)):(n.states[t]=1,n.loadScript(t).then(()=>{n.states[t]=2,r("resolve",t);var e=n.queue;return 0<e.length?(n.queue=[],a(e).then(o)):Promise.resolve()},()=>(n.states[t]=3,r("reject",t),Promise.reject(t)))))),s=e=>(n.loading=!0,a(e).then(e=>{n.loading=!1;var t=n.queueLoadedCallbacks.shift();return ee.from(t).each(M),o(e)})),i=He(e);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(e,t)})}):s(i)}}ds.ScriptLoader=new ds;const cs={},us=Oo("en"),ms=()=>O(cs,us.get()),gs={getData:()=>De(cs,e=>({...e})),setCode:e=>{e&&us.set(e)},getCode:()=>us.get(),add:(e,s)=>{let i=cs[e];i||(cs[e]=i={});const l=te(Be(s),e=>e.toLowerCase());ne(s,(e,t)=>{var r,n,o,a=t.toLowerCase();a!==t&&(r=l,n=a,-1!==(o=r.indexOf(n)))&&r.indexOf(n,o+1)>o?(oe(s,a)||(i[a]=e),i[t]=e):i[a]=e})},translate:e=>{const r=ms().getOr({}),n=e=>H(e)?Object.prototype.toString.call(e):t(e)?"":""+e,t=e=>""===e||null==e,o=e=>{e=n(e);return oe(r,e)?n(r[e]):O(r,e.toLowerCase()).map(n).getOr(e)},a=e=>e.replace(/{context:\w+}$/,"");if(t(e))return"";if(de(s=e)&&oe(s,"raw"))return n(e.raw);var s;if(s=e,Q(s)&&1<s.length){const r=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>oe(r,t)?n(r[t]):e))}return a(o(e))},isRtl:()=>ms().bind(e=>O(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>oe(cs,e)},fs=()=>{const r=[],n={},o={},a=[],s=(t,r)=>{var e=I(a,e=>e.name===t&&e.state===r);re(e,e=>e.resolve())},i=e=>oe(n,e),l=(e,t)=>{var r=gs.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||ds.ScriptLoader.add(n[e]+"/langs/"+r+".js")},d=(t,r="added")=>{return"added"===r&&(e=t,oe(o,e))||"loaded"===r&&i(t)?Promise.resolve():new Promise(e=>{a.push({name:t,state:r,resolve:e})});var e};return{items:r,urls:n,lookup:o,get:e=>{if(o[e])return o[e].instance},requireLangPack:(e,t)=>{!1!==fs.languageLoad&&(i(e)?l(e,t):d(e,"loaded").then(()=>l(e,t)))},add:(e,t)=>(r.push(t),o[e]={instance:t},s(e,"added"),t),remove:e=>{delete n[e],delete o[e]},createUrl:(e,t)=>Z(t)?Z(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,t)=>{if(n[e])return Promise.resolve();let r=Z(t)?t:t.prefix+t.resource+t.suffix;0!==r.indexOf("/")&&-1===r.indexOf("://")&&(r=fs.baseURL+"/"+r),n[e]=r.substring(0,r.lastIndexOf("/"));t=()=>(s(e,"loaded"),Promise.resolve());return o[e]?t():ds.ScriptLoader.add(r).then(t)},waitFor:d}},ps=(fs.languageLoad=!0,fs.baseURL="",fs.PluginManager=fs(),fs.ThemeManager=fs(),fs.ModelManager=fs(),(t,r)=>{let n=null;return{cancel:()=>{P(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{P(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}}),hs=(t,r)=>{let n=null;const o=()=>{P(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...e)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,e)},r)}}},vs=J("mce-annotation"),bs=J("data-mce-annotation"),ys=J("data-mce-annotation-uid"),Cs=J("data-mce-annotation-active"),ws=J("data-mce-annotation-classes"),Es=J("data-mce-annotation-attrs"),xs=t=>e=>U(e,t),ks=(n,e)=>{var t=n.selection.getRng(),r=K(t.startContainer),o=K(n.getBody()),e=e.fold(()=>"."+vs(),e=>`[${bs()}="${e}"]`),t=Hr(r,t.startOffset).getOr(r);return dn(t,e,xs(o)).bind(e=>cr(e,""+ys()).bind(r=>cr(e,""+bs()).map(e=>{var t=Ss(n,r);return{uid:r,name:e,elements:t}})))},_s=(e,t)=>{return ur(e,"data-mce-bogus")||(e=e,t=xs(t),sn(e,'[data-mce-bogus="all"]',t).isSome())},Ss=(e,t)=>{const r=K(e.getBody()),n=Vn(r,`[${ys()}="${t}"]`);return I(n,e=>!_s(e,r))},Ns=(e,t)=>{const r=K(e.getBody()),n=Vn(r,`[${bs()}="${t}"]`),o={};return re(n,e=>{if(!_s(e,r)){const t=dr(e,ys()),r=O(o,t).getOr([]);o[t]=r.concat([e])}}),o},Rs=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let As=0;const Ts=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Rs())+ ++As+String(t)},Os=(e,t)=>K(e.dom.cloneNode(t)),Bs=e=>Os(e,!1),Ps=e=>Os(e,!0),Ds=(e,t,r=T)=>{const n=new Yn(e,t),o=e=>{let t;for(;(t=n[e]())&&!X(t)&&!r(t););return ee.from(t).filter(X)};return{current:()=>ee.from(n.current()).filter(X),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Ls=(a,e)=>{const s=e||(e=>a.isBlock(e)||B(e)||x(e)),i=(e,t,r,n)=>{if(X(e)){const r=n(e,t,e.data);if(-1!==r)return ee.some({container:e,offset:r})}return r().bind(e=>i(e.container,e.offset,r,n))};return{backwards:(e,t,r,n)=>{const o=Ds(e,null!=n?n:a.getRoot(),s);return i(e,t,()=>o.prev().map(e=>({container:e,offset:e.length})),r).getOrNull()},forwards:(e,t,r,n)=>{const o=Ds(e,null!=n?n:a.getRoot(),s);return i(e,t,()=>o.next().map(e=>({container:e,offset:0})),r).getOrNull()}}},Ms=(r=>{const t=e=>r(e)?ee.from(e.dom.nodeValue):ee.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(rr),Is=e=>Ms.get(e),Fs=(e,t)=>Ms.set(e,t),Us=t=>{let r;return e=>(r=r||ke(t,S),oe(r,W(e)))},zs=e=>tr(e)&&"br"===W(e),js=Us(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Hs=Us(["ul","ol","dl"]),$s=Us(["li","dd","dt"]),Vs=Us(["thead","tbody","tfoot"]),qs=Us(["td","th"]),Ws=Us(["pre","script","textarea","style"]),Ks=()=>{var e=_r("br");return ir(e,"data-mce-bogus","1"),e},Ys=e=>{Nn(e),kn(e,Ks())},Gs=Gn,Xs=Zn,Zs=e=>e.replace(/\uFEFF/g,""),Qs=G,Js=X,ei=e=>(Js(e)&&(e=e.parentNode),Qs(e)&&e.hasAttribute("data-mce-caret")),ti=e=>Js(e)&&Xs(e.data),ri=e=>ei(e)||ti(e),ni=e=>e.firstChild!==e.lastChild||!B(e.firstChild),oi=e=>{var t=e.container();return!!X(t)&&(t.data.charAt(e.offset())===Gs||e.isAtStart()&&ti(t.previousSibling))},ai=e=>{var t=e.container();return!!X(t)&&(t.data.charAt(e.offset()-1)===Gs||e.isAtEnd()&&ti(t.nextSibling))},si=e=>Js(e)&&e.data[0]===Gs,ii=e=>Js(e)&&e.data[e.data.length-1]===Gs,li=e=>{return e&&e.hasAttribute("data-mce-caret")?(r=(r=e.getElementsByTagName("br"))[r.length-1],lo(r)&&null!=(t=r.parentNode)&&t.removeChild(r),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r},di=e=>ei(e.startContainer),ci=Math.round,ui=e=>e?{left:ci(e.left),top:ci(e.top),bottom:ci(e.bottom),right:ci(e.right),width:ci(e.width),height:ci(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},mi=(e,t)=>(e=ui(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),gi=(e,t,r)=>0<=e&&e<=Math.min(t.height,r.height)/2,fi=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&gi(t.top-e.bottom,e,t)},pi=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&gi(t.bottom-e.top,e,t),hi=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),e=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-e)*(r-e))},vi=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},bi=(e,t)=>{var r,n;return G(e)&&e.hasChildNodes()?(r=e.childNodes,n=r.length-1,r[Math.min(Math.max(t,0),n)]):e},yi=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ci=e=>Z(e)&&768<=e.charCodeAt(0)&&yi.test(e),wi=yo,Ei=x,xi=B,ki=X,_i=so(["script","style","textarea"]),Si=so(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ni=so(["table"]),Ri=ri,Ai=e=>!Ri(e)&&(ki(e)?!_i(e.parentNode):Si(e)||xi(e)||Ni(e)||Ti(e)),Ti=e=>{return t=e,!(G(t)&&"true"===t.getAttribute("unselectable"))&&Ei(e);var t},Oi=(r,e)=>Ai(r)&&(t=>{for(let e=r.parentNode;e&&e!==t;e=e.parentNode){if(Ti(e))return!1;if(wi(e))return!0}return!0})(e),Bi=G,Pi=Ai,Di=io("display","block table"),Li=io("float","left right"),Mi=(Jr=[Bi,Pi,L(Li)],t=>{for(let e=0;e<Jr.length;e++)if(!Jr[e](t))return!1;return!0}),Ii=L(io("white-space","pre pre-line pre-wrap")),Fi=X,Ui=B,zi=se.nodeIndex,ji=(e,t)=>t<0&&G(e)&&e.hasChildNodes()?void 0:bi(e,t),Hi=e=>e?e.createRange():se.DOM.createRng(),$i=e=>Z(e)&&/[\r\n\t ]/.test(e),Vi=e=>!!e.setStart&&!!e.setEnd,qi=e=>{var t=e.startContainer,r=e.startOffset;if($i(e.toString())&&Ii(t.parentNode)&&X(t)){const e=t.data;if($i(e[r-1])||$i(e[r+1]))return!0}return!1},Wi=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Ki=e=>{var t,r,n,o,a=e.getClientRects(),a=0<a.length?ui(a[0]):ui(e.getBoundingClientRect());return!Vi(e)&&Ui(e)&&Wi(a)?(r=(t=e).ownerDocument,n=Hi(r),r=r.createTextNode(Xn),(o=t.parentNode).insertBefore(r,t),n.setStart(r,0),n.setEnd(r,1),t=ui(n.getBoundingClientRect()),o.removeChild(r),t):Wi(a)&&Vi(e)&&null!=(n=(e=>{const t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&X(r)&&0===n&&1===o){const t=e.cloneRange();return t.setEndAfter(r),Ki(t)}return null})(e))?n:a},Yi=(e,t)=>{e=mi(e,t);return e.width=1,e.right=e.left+1,e},ie=(t,r,e)=>{const n=()=>e=e||(e=>{const n=[],o=e=>{var t,r;0===e.height||0<n.length&&(t=e,r=n[n.length-1],t.left===r.left)&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right||n.push(e)},t=(e,t)=>{var r=Hi(e.ownerDocument);if(t<e.data.length){if(Ci(e.data[t]))return;if(Ci(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!qi(r)))return void o(Yi(Ki(r),!1))}0<t&&(r.setStart(e,t-1),r.setEnd(e,t),qi(r)||o(Yi(Ki(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),qi(r)||o(Yi(Ki(r),!0)))},r=e.container(),a=e.offset();if(Fi(r))t(r,a);else if(Bi(r))if(e.isAtEnd()){const e=ji(r,a);Fi(e)&&t(e,e.data.length),Mi(e)&&!Ui(e)&&o(Yi(Ki(e),!1))}else{var s=ji(r,a);if(Fi(s)&&t(s,0),Mi(s)&&e.isAtEnd())return o(Yi(Ki(s),!1)),n;e=ji(e.container(),e.offset()-1);!Mi(e)||Ui(e)||!Di(e)&&!Di(s)&&Mi(s)||o(Yi(Ki(e),!1)),Mi(s)&&o(Yi(Ki(s),!0))}return n})(ie(t,r));return{container:J(t),offset:J(r),toRange:()=>{var e=Hi(t.ownerDocument);return e.setStart(t,r),e.setEnd(t,r),e},getClientRects:n,isVisible:()=>0<n().length,isAtStart:()=>(Fi(t),0===r),isAtEnd:()=>Fi(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:e=>e&&t===e.container()&&r===e.offset(),getNode:e=>ji(t,e?r-1:r)}},Gi=(ie.fromRangeStart=e=>ie(e.startContainer,e.startOffset),ie.fromRangeEnd=e=>ie(e.endContainer,e.endOffset),ie.after=e=>ie(e.parentNode,zi(e)+1),ie.before=e=>ie(e.parentNode,zi(e)),ie.isAbove=(e,t)=>Wt(Ne(t.getClientRects()),Re(e.getClientRects()),fi).getOr(!1),ie.isBelow=(e,t)=>Wt(Re(t.getClientRects()),Ne(e.getClientRects()),pi).getOr(!1),ie.isAtStart=e=>!!e&&e.isAtStart(),ie.isAtEnd=e=>!!e&&e.isAtEnd(),ie.isTextPosition=e=>!!e&&X(e.container()),ie.isElementPosition=e=>!ie.isTextPosition(e),(e,t)=>{X(t)&&0===t.data.length&&e.remove(t)}),Xi=(e,t,r)=>{var n,o,a,s,i;vo(r)?(n=e,o=t,a=r,s=ee.from(a.firstChild),i=ee.from(a.lastChild),o.insertNode(a),s.each(e=>Gi(n,e.previousSibling)),i.each(e=>Gi(n,e.nextSibling))):(o=e,a=r,t.insertNode(a),Gi(o,a.previousSibling),Gi(o,a.nextSibling))},Zi=X,Qi=lo,Ji=se.nodeIndex,el=e=>{e=e.parentNode;return Qi(e)?el(e):e},tl=e=>e?Ye(e.childNodes,(e,t)=>(Qi(t)&&"BR"!==t.nodeName?e=e.concat(tl(t)):e.push(t),e),[]):[],rl=t=>e=>t===e,nl=e=>(Zi(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let n,t;n=tl(el(e)),t=Ge(n,rl(e),e),n=n.slice(0,t+1);var r=Ye(n,(e,t,r)=>(Zi(t)&&Zi(n[r-1])&&e++,e),0);return n=Ke(n,so([e.nodeName])),Ge(n,rl(e),e)-r})(e)+"]",ol=(e,t)=>{let r,n=[],o=t.container(),a=t.offset();if(Zi(o))r=((e,t)=>{let r=e;for(;(r=r.previousSibling)&&Zi(r);)t+=r.data.length;return t})(o,a);else{const e=o.childNodes;a>=e.length?(r="after",a=e.length-1):r="before",o=e[a]}n.push(nl(o));t=(t=>{var r=[];for(let e=o.parentNode;e&&e!==t;e=e.parentNode)r.push(e);return r})(e),t=Ke(t,L(lo));return(n=n.concat(We(t,e=>nl(e)))).reverse().join("/")+","+r},al=(e,r)=>{if(!r)return null;var r=r.split(","),n=r[0].split("/"),r=1<r.length?r[1]:"before",n=Ye(n,(e,t)=>{t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(t){"text()"===t[1]&&(t[1]="#text");{var n=t[1],t=parseInt(t[2],10);let r=tl(e);return r=Ke(r,(e,t)=>!Zi(e)||!Zi(r[t-1])),(r=Ke(r,so([n])))[t]}}return null},e);if(!n)return null;if(!Zi(n)&&n.parentNode)return e="after"===r?Ji(n)+1:Ji(n),ie(n.parentNode,e);{var o=n;var a=parseInt(r,10);let e=o,t=0;for(;Zi(e);){var s=e.data.length;if(a>=t&&a<=t+s){o=e,a-=t;break}if(!Zi(e.nextSibling)){o=e,a=s;break}t+=s,e=e.nextSibling}return Zi(o)&&a>o.data.length&&(a=o.data.length),ie(o,a);return}},sl=x,il=(t,e,r,n,o)=>{var a=o?n.startContainer:n.endContainer;let s=o?n.startOffset:n.endOffset;var i=[],l=t.getRoot();if(X(a))i.push(r?((t,r,e)=>{let n=t(r.data.slice(0,e)).length;for(let e=r.previousSibling;e&&X(e);e=e.previousSibling)n+=t(e.data).length;return n})(e,a,s):s);else{let e=0;const n=a.childNodes;s>=n.length&&n.length&&(e=1,s=Math.max(0,n.length-1)),i.push(t.nodeIndex(n[s],r)+e)}for(let e=a;e&&e!==l;e=e.parentNode)i.push(t.nodeIndex(e,r));return i},ll=(e,t,r)=>{let n=0;return ae.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++),n},dl=(e,t)=>{var r,n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;G(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(t?o:o-1,r.length-1)])&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))},cl=e=>(dl(e,!0),dl(e,!1),e),ul=(e,t)=>{return G(e)&&(e=bi(e,t),sl(e))?e:ri(e)&&(t=(e=X(e)&&ei(e)?e.parentNode:e).previousSibling,sl(t)||(t=e.nextSibling,sl(t)))?t:void 0},ml=(e,t,r)=>{var n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||sl(n)){const e=n.nodeName;return{name:e,index:ll(r.dom,e,n)}}n=o;var a,s,i,n=ul(n.startContainer,n.startOffset)||ul(n.endContainer,n.endOffset);if(n){const e=n.tagName;return{name:e,index:ll(r.dom,e,n)}}return n=e,e=t,t=o,r=(o=r).dom,a=il(r,n,e,t,!0),s=o.isForward(),i=di(t)?{isFakeCaret:!0}:{},o.isCollapsed()?{start:a,forward:s,...i}:{start:a,end:il(r,n,e,t,!1),forward:s,...i}},gl=(e,t,r)=>{t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",t,"&#xFEFF;"):e.create("span",t)},fl=(e,t)=>{var r=e.dom;let n=e.getRng();var o=r.uniqueId(),a=e.isCollapsed(),s=e.getNode(),i=s.nodeName,l=e.isForward();if("IMG"===i)return{name:i,index:ll(r,i,s)};i=cl(n.cloneRange());if(!a){i.collapse(!1);const e=gl(r,o+"_end",t);Xi(r,i,e)}(n=cl(n)).collapse(!0);s=gl(r,o+"_start",t);return Xi(r,n,s),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},pl=C(ml,g,!0),hl=r=>{const e=e=>e(r),t=J(r),n=()=>o,o={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:S,isError:T,map:e=>bl.value(e(r)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(r)},toOptional:()=>ee.some(r)};return o},vl=r=>{const e=()=>t,t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:T,isError:S,map:e,mapError:e=>bl.error(e(r)),bind:e,exists:T,forall:S,getOr:g,or:g,getOrThunk:h,orThunk:h,getOrDie:p(String(r)),each:$,toOptional:ee.none};return t},bl={value:hl,error:vl,fromOption:(e,t)=>e.fold(()=>vl(t),hl)},yl=a=>{if(!Q(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");const s=[],i={};return re(a,(e,t)=>{var r=Be(e);if(1!==r.length)throw new Error("one and only one name per case");const n=r[0],o=e[n];if(void 0!==i[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!Q(o))throw new Error("case arguments must be an array");s.push(n),i[n]=(...r)=>{var e=r.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+o.length+" ("+o+"), got "+e);return{fold:(...e)=>{if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{const t=Be(e);if(s.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+t.join(","));if(we(s,e=>V(t,e)))return e[n].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+s.join(", "))},log:e=>{console.log(e,{constructors:s,constructor:n,params:r})}}}}),i},Cl=(yl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),e=>"inline-command"===e.type||"inline-format"===e.type),wl=e=>"block-command"===e.type||"block-format"===e.type,El=o=>{var e;const a=e=>bl.error({message:e,pattern:o}),t=(t,r,e)=>{if(void 0===o.format)return void 0!==o.cmd?Z(o.cmd)?bl.value(e(o.cmd,o.value)):a(t+" pattern has non-string `cmd` parameter"):a(t+" pattern is missing both `format` and `cmd` parameters");{let e;if(Q(o.format)){if(!we(o.format,Z))return a(t+" pattern has non-string items in the `format` array");e=o.format}else{if(!Z(o.format))return a(t+" pattern has non-string `format` parameter");e=[o.format]}return bl.value(r(e))}};if(!de(o))return a("Raw pattern is not an object");if(!Z(o.start))return a("Raw pattern is missing `start` parameter");if(void 0!==o.end){if(!Z(o.end))return a("Inline pattern has non-string `end` parameter");if(0===o.start.length&&0===o.end.length)return a("Inline pattern has empty `start` and `end` parameters");let r=o.start,n=o.end;return 0===n.length&&(n=r,r=""),t("Inline",e=>({type:"inline-format",start:r,end:n,format:e}),(e,t)=>({type:"inline-command",start:r,end:n,cmd:e,value:t}))}if(void 0!==o.replacement)return Z(o.replacement)?0===o.start.length?a("Replacement pattern has empty `start` parameter"):bl.value({type:"inline-command",start:"",end:o.start,cmd:"mceInsertContent",value:o.replacement}):a("Replacement pattern has non-string `replacement` parameter");{const r=null!=(e=o.trigger)?e:"space";return 0===o.start.length?a("Block pattern has empty `start` parameter"):t("Block",e=>({type:"block-format",start:o.start,format:e[0],trigger:r}),(e,t)=>({type:"block-command",start:o.start,cmd:e,value:t,trigger:r}))}},xl=e=>I(e,wl),kl=e=>I(e,Cl),_l=(e,t)=>({...e,blockPatterns:I(e.blockPatterns,e=>("block-command"===e.type||"block-format"===e.type)&&e.trigger===t)}),Sl=e=>{e=(e=>{const t=[],r=[];return re(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}})(te(e,El));return re(e.errors,e=>console.error(e.message,e.pattern)),e.values},Nl=Lt().deviceType,Rl=Nl.isTouch(),Al=se.DOM,Tl=e=>y(e,RegExp),e=t=>e=>e.options.get(t),Ol=e=>Z(e)||de(e),Bl=(n,o="")=>e=>{var t,r=Z(e);return r?-1!==e.indexOf("=")?(t=(e=>{e=0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return pe(e,(e,t)=>{var t=t.split("="),r=t[0],t=1<t.length?t[1]:r;return e[lt(r)]=lt(t),e},{})})(e),{value:O(t,n.id).getOr(o),valid:r}):{value:e,valid:r}:{valid:!1,message:"Must be a string."}},Pl=e("iframe_attrs"),Dl=e("doctype"),Ll=e("document_base_url"),Ml=e("body_id"),Il=e("body_class"),Fl=e("content_security_policy"),Ul=e("br_in_pre"),zl=e("forced_root_block"),jl=e("forced_root_block_attrs"),Hl=e("newline_behavior"),$l=e("br_newline_selector"),Vl=e("no_newline_selector"),ql=e("keep_styles"),Wl=e("end_container_on_empty_block"),Kl=e("automatic_uploads"),Yl=e("images_reuse_filename"),Gl=e("images_replace_blob_uris"),Xl=e("icons"),Zl=e("icons_url"),Ql=e("images_upload_url"),Jl=e("images_upload_base_path"),ed=e("images_upload_credentials"),td=e("images_upload_handler"),rd=e("content_css_cors"),nd=e("referrer_policy"),od=e("language"),ad=e("language_url"),sd=e("indent_use_margin"),id=e("indentation"),ld=e("content_css"),dd=e("content_style"),cd=e("font_css"),ud=e("directionality"),md=e("inline_boundaries_selector"),gd=e("object_resizing"),fd=e("resize_img_proportional"),pd=e("placeholder"),hd=e("event_root"),vd=e("service_message"),bd=e("theme"),yd=e("theme_url"),Cd=e("model"),wd=e("model_url"),Ed=e("inline_boundaries"),xd=e("formats"),kd=e("preview_styles"),_d=e("format_empty_lines"),Sd=e("format_noneditable_selector"),Nd=e("custom_ui_selector"),Rd=e("inline"),Ad=e("hidden_input"),Td=e("submit_patch"),Od=e("add_form_submit_trigger"),Bd=e("add_unload_trigger"),Pd=e("custom_undo_redo_levels"),Dd=e("disable_nodechange"),Ld=e("readonly"),Md=e("editable_root"),Id=e("content_css_cors"),Fd=e("plugins"),Ud=e("external_plugins"),zd=e("block_unsupported_drop"),jd=e("visual"),Hd=e("visual_table_class"),$d=e("visual_anchor_class"),Vd=e("iframe_aria_text"),qd=e("setup"),Wd=e("init_instance_callback"),Kd=e("urlconverter_callback"),Yd=e("auto_focus"),Gd=e("browser_spellcheck"),Xd=e("protect"),Zd=e("paste_block_drop"),Qd=e("paste_data_images"),Jd=e("paste_preprocess"),ec=e("paste_postprocess"),tc=e("newdocument_content"),rc=e("paste_webkit_styles"),nc=e("paste_remove_styles_if_webkit"),oc=e("paste_merge_formats"),ac=e("smart_paste"),sc=e("paste_as_text"),ic=e("paste_tab_spaces"),lc=e("allow_html_data_urls"),dc=e("text_patterns"),cc=e("text_patterns_lookup"),uc=e("noneditable_class"),mc=e("editable_class"),gc=e("noneditable_regexp"),fc=e("preserve_cdata"),pc=e("highlight_on_focus"),hc=e("xss_sanitization"),vc=e("init_content_sync"),bc=e=>ae.explode(e.options.get("images_file_types")),yc=e("table_tab_navigation"),Cc=e("details_initial_state"),wc=e("details_serialized_state"),Ec=e("sandbox_iframes"),xc=e=>e.options.get("sandbox_iframes_exclusions"),kc=e("convert_unsafe_embeds"),_c=e("license_key"),Sc=e("api_key"),Nc=G,Rc=X,Ac=e=>{var t=e.parentNode;t&&t.removeChild(e)},Tc=e=>{var t=Zs(e);return{count:e.length-t.length,text:t}},Oc=e=>{for(var t;-1!==(t=e.data.lastIndexOf(Gs));)e.deleteData(t,1)},Bc=(e,t)=>(Pc(e),t),Pc=e=>{Nc(e)&&ri(e)&&(ni(e)?e.removeAttribute("data-mce-caret"):Ac(e)),Rc(e)&&(Oc(e),0===e.data.length)&&Ac(e)},Dc=x,Lc=Eo,Mc=Co,Ic=(e,t,r)=>{var n=mi(t.getBoundingClientRect(),r);let o,a;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,a=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,a=e.scrollTop-t.top}n.left+=o,n.right+=o,n.top+=a,n.bottom+=a,n.width=1;let s=t.offsetWidth-t.clientWidth;return 0<s&&(r&&(s*=-1),n.left+=s,n.right+=s),n},Fc=(e,i,l,d)=>{const c=Bo();let u,m;const g=zl(e),f=e.dom,p=()=>{var r,n=i,o=Vn(K(n),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<o.length;t++){var a=o[t].dom;let e=a.previousSibling;if(ii(e)){const n=e.data;1===n.length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(n.length-1,1)}e=a.nextSibling,si(e)&&(1===e.data.length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(0,1))}m&&(Pc(m),m=null),c.on(e=>{f.remove(e.caret),c.clear()}),u&&(clearInterval(u),u=void 0)};return{show:(e,t)=>{let r;if(p(),Mc(t))return null;var n,o,a;if(l(t)){n=g,s=e,(a=(null!=(a=(o=t).ownerDocument)?a:document).createElement(n)).setAttribute("data-mce-caret",s?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(Ks().dom),n=o.parentNode,s?null!=n&&n.insertBefore(a,o):o.nextSibling?null!=n&&n.insertBefore(a,o.nextSibling):null!=n&&n.appendChild(a);const l=a,p=Ic(i,t,e);f.setStyle(l,"top",p.top),f.setStyle(l,"caret-color","transparent"),m=l;var s=f.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});f.setStyles(s,{...p}),f.add(i,s),c.set({caret:s,element:t,before:e}),e&&f.addClass(s,"mce-visual-caret-before"),u=setInterval(()=>{c.on(e=>{d()?f.toggleClass(e.caret,"mce-visual-caret-hidden"):f.addClass(e.caret,"mce-visual-caret-hidden")})},500),(r=t.ownerDocument.createRange()).setStart(l,0),r.setEnd(l,0)}else m=((e,t)=>{var r=(null!=(r=e.ownerDocument)?r:document).createTextNode(Gs),n=e.parentNode;if(t){const t=e.previousSibling;if(Js(t)){if(ri(t))return t;if(ii(t))return t.splitText(t.data.length-1)}null!=n&&n.insertBefore(r,e)}else{const t=e.nextSibling;if(Js(t)){if(ri(t))return t;if(si(t))return t.splitText(1),t}e.nextSibling?null!=n&&n.insertBefore(r,e.nextSibling):null!=n&&n.appendChild(r)}return r})(t,e),r=t.ownerDocument.createRange(),zc(m.nextSibling)?(r.setStart(m,0),r.setEnd(m,0)):(r.setStart(m,1),r.setEnd(m,1));return r},hide:p,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(e=>{var t=Ic(i,e.element,e.before);f.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(u)}},Uc=()=>F.browser.isFirefox(),zc=e=>Dc(e)||Lc(e),jc=e=>(zc(e)||co(e)&&Uc())&&Lr(K(e)).exists(cn),Hc=yo,$c=x,Vc=Eo,qc=io("display","block table table-cell table-caption list-item"),Wc=ri,Kc=ei,Yc=G,Gc=X,Xc=Ai,Zc=e=>0<e,Qc=e=>e<0,Jc=(e,t)=>{for(var r;r=e(t);)if(!Kc(r))return r;return null},eu=(e,t,r,n,o)=>{var a=new Yn(e,n),n=$c(e)||Kc(e);let s;if(Qc(t)){if(n&&r(s=Jc(a.prev.bind(a),!0)))return s;for(;s=Jc(a.prev.bind(a),o);)if(r(s))return s}if(Zc(t)){if(n&&r(s=Jc(a.next.bind(a),!0)))return s;for(;s=Jc(a.next.bind(a),o);)if(r(s))return s}return null},tu=(e,t)=>{for(;e&&e!==t;){if(qc(e))return e;e=e.parentNode}return null},ru=(e,t,r)=>tu(e.container(),r)===tu(t.container(),r),nu=(e,t)=>{var r;return t&&(r=t.container(),t=t.offset(),Yc(r))?ee.from(r.childNodes[t+e]):ee.none()},ou=(e,t)=>{var r=(null!=(r=t.ownerDocument)?r:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},au=(e,t,r)=>{var n,o,a,s=e?"previousSibling":"nextSibling";let i=r;for(;i&&i!==t;){let e=i[s];if(e&&Wc(e)&&(e=e[s]),$c(e)||Vc(e)){if(n=t,o=e,a=i,tu(o,n)===tu(a,n))return e;break}if(Xc(e))break;i=i.parentNode}return null},su=C(ou,!0),iu=C(ou,!1),lu=(e,t,r)=>{let n;var o=C(au,!0,t),t=C(au,!1,t),a=r.startContainer,s=r.startOffset;if(ei(a)){const e=Gc(a)?a.parentNode:a,t=e.getAttribute("data-mce-caret");if("before"===t&&(n=e.nextSibling,jc(n)))return su(n);if("after"===t&&(n=e.previousSibling,jc(n)))return iu(n)}if(r.collapsed&&X(a)){if(Wc(a)){if(1===e){if(n=t(a))return su(n);if(n=o(a))return iu(n)}if(-1===e){if(n=o(a))return iu(n);if(n=t(a))return su(n)}return r}if(ii(a)&&s>=a.data.length-1)return 1===e&&(n=t(a))?su(n):r;if(si(a)&&s<=1)return-1===e&&(n=o(a))?iu(n):r;if(s===a.data.length)return(n=t(a))?su(n):r;if(0===s)return(n=o(a))?iu(n):r}return r},du=(e,t)=>nu(e?0:-1,t).filter($c),cu=(e,t,r)=>{t=lu(e,t,r);return-1===e?ie.fromRangeStart(t):ie.fromRangeEnd(t)},uu=e=>ee.from(e.getNode()).map(K),mu=(e,t)=>{let r=t;for(;r=e(r);)if(r.isVisible())return r;return r},gu=(e,t)=>{t=ru(e,t);return!(t||!B(e.getNode()))||t},fu=((t=en=en||{})[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards",x),pu=X,hu=G,vu=B,bu=Ai,yu=e=>{return Si(e)||(e=e,!!Ti(e)&&!pe(Ae(e.getElementsByTagName("*")),(e,t)=>e||wi(t),!1))},Cu=Oi,wu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Eu=(e,t)=>{if(Zc(e)){if(bu(t.previousSibling)&&!pu(t.previousSibling))return ie.before(t);if(pu(t))return ie(t,0)}if(Qc(e)){if(bu(t.nextSibling)&&!pu(t.nextSibling))return ie.after(t);if(pu(t))return ie(t,t.data.length)}return!Qc(e)||vu(t)?ie.before(t):ie.after(t)},xu=(e,t,r)=>{let n,o,a,s;if(!hu(r)||!t)return null;if(t.isEqual(ie.after(r))&&r.lastChild){if(s=ie.after(r.lastChild),Qc(e)&&bu(r.lastChild)&&hu(r.lastChild))return vu(r.lastChild)?ie.before(r.lastChild):s}else s=t;var i,l=s.container();let d=s.offset();if(pu(l)){if(Qc(e)&&0<d)return ie(l,--d);if(Zc(e)&&d<l.length)return ie(l,++d);n=l}else{if(Qc(e)&&0<d&&(o=wu(l,d-1),bu(o)))return!yu(o)&&(a=eu(o,e,Cu,o))?pu(a)?ie(a,a.data.length):ie.after(a):pu(o)?ie(o,o.data.length):ie.before(o);if(Zc(e)&&d<l.childNodes.length&&(o=wu(l,d),bu(o)))return vu(o)?(t=r,i=o,(c=i.nextSibling)&&bu(c)?pu(c)?ie(c,0):ie.before(c):xu(en.Forwards,ie.after(i),t)):!yu(o)&&(a=eu(o,e,Cu,o))?pu(a)?ie(a,0):ie.before(a):pu(o)?ie(o,0):ie.after(o);n=o||s.getNode()}if(n&&(Zc(e)&&s.isAtEnd()||Qc(e)&&s.isAtStart())&&(n=eu(n,e,S,r,!0),Cu(n,r)))return Eu(e,n);o=n&&eu(n,e,Cu,r);var c=Xe(I((e=>{var t=[];let r=l;for(;r&&r!==e;)t.push(r),r=r.parentNode;return t})(r),fu));return!c||o&&c.contains(o)?o?Eu(e,o):null:s=Zc(e)?ie.after(c):ie.before(c)},ku=t=>({next:e=>xu(en.Forwards,e,t),prev:e=>xu(en.Backwards,e,t)}),_u=e=>ie.isTextPosition(e)?0===e.offset():Ai(e.getNode()),Su=e=>{var t;return ie.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):Ai(e.getNode(!0))},Nu=(e,t)=>!ie.isTextPosition(e)&&!ie.isTextPosition(t)&&e.getNode()===t.getNode(!0),Ru=(e,t,r)=>{t=ku(t);return ee.from(e?t.next(r):t.prev(r))},Au=(o,a,s)=>Ru(o,a,s).bind(e=>{return ru(s,e,a)&&(t=s,r=e,o?!Nu(t,r)&&(n=t,!(!ie.isTextPosition(n)&&B(n.getNode())))&&Su(t)&&_u(r):!Nu(r,t)&&_u(t)&&Su(r))?Ru(o,a,e):ee.some(e);var t,r,n}),Tu=(t,r,e,n)=>Au(t,r,e).bind(e=>n(e)?Tu(t,r,e,n):ee.some(e)),Ou=(e,t)=>{var r=e?t.firstChild:t.lastChild;{var n;return X(r)?ee.some(ie(r,e?0:r.data.length)):r?Ai(r)?ee.some(e?ie.before(r):B(n=r)?ie.before(n):ie.after(n)):(n=e,e=t,t=r,t=n?ie.before(t):ie.after(t),Ru(n,e,t)):ee.none()}},Bu=C(Ru,!0),Pu=C(Ru,!1),Du=C(Ou,!0),Lu=C(Ou,!1),Mu="_mce_caret",Iu=e=>G(e)&&e.id===Mu,Fu=(e,t)=>{let r=t;for(;r&&r!==e;){if(Iu(r))return r;r=r.parentNode}return null},Uu=e=>oe(e,"name"),zu=e=>ae.isArray(e.start),ju=e=>!(!Uu(e)&&ue(e.forward))||e.forward,Hu=(e,t)=>(G(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),$u=(e,t,r)=>{return!(t.hasChildNodes()||!Fu(e,t)||(e=r,t=(null!=(t=(r=t).ownerDocument)?t:document).createTextNode(Gs),r.appendChild(t),e.setStart(t,0),e.setEnd(t,0),0))},Vu=(e,r,n,o)=>{var a=n[r?"start":"end"],s=e.getRoot();if(a){let t=s,e=a[0];for(let e=a.length-1;t&&1<=e;e--){const n=t.childNodes;if($u(s,t,o))return!0;if(a[e]>n.length-1)return!!$u(s,t,o)||((e,t)=>Lu(e).fold(T,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)))(t,o);t=n[a[e]]}X(t)&&(e=Math.min(a[0],t.data.length)),G(t)&&(e=Math.min(a[0],t.childNodes.length)),r?o.setStart(t,e):o.setEnd(t,e)}return!0},qu=e=>X(e)&&0<e.data.length,Wu=(r,n,o)=>{const a=r.get(o.id+"_"+n),s=null==a?void 0:a.parentNode,i=o.keep;if(a&&s){let e,t;if(t="start"===n?i?a.hasChildNodes()?(e=a.firstChild,1):qu(a.nextSibling)?(e=a.nextSibling,0):qu(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=s,r.nodeIndex(a)+1):(e=s,r.nodeIndex(a)):i?a.hasChildNodes()?(e=a.firstChild,1):qu(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=s,r.nodeIndex(a)):(e=s,r.nodeIndex(a)),!i){const s=a.previousSibling,i=a.nextSibling;var l;for(ae.each(ae.grep(a.childNodes),e=>{X(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});l=r.get(o.id+"_"+n);)r.remove(l,!0);if(X(i)&&X(s)&&!F.browser.isOpera()){const n=s.data.length;s.appendData(i.data),r.remove(i),e=s,t=n}}return ee.some(ie(e,t))}return ee.none()},Ku=(e,t,r)=>{return[e,t,r=!1]=[e,t,r],2===t?ml(Zs,r,e):3===t?(n=(r=e).getRng(),{start:ol(r.dom.getRoot(),ie.fromRangeStart(n)),end:ol(r.dom.getRoot(),ie.fromRangeEnd(n)),forward:r.isForward()}):t?{rng:(n=e).getRng(),forward:n.isForward()}:fl(e,!1);var n},Yu=(m,e)=>{(e=>{var r,n,o,t,a,s,i,l,d,c,u=m.dom;if(e){if(zu(e))return d=e,c=(l=u).createRng(),Vu(l,!0,d,c)&&Vu(l,!1,d,c)?ee.some({range:c,forward:ju(d)}):ee.none();if(l=e,Z(l.start))return s=u,i=e,c=ee.from(al(s.getRoot(),i.start)),d=ee.from(al(s.getRoot(),i.end)),Wt(c,d,(e,t)=>{var r=s.createRng();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),{range:r,forward:ju(i)}});if(a=e,oe(a,"id"))return n=u,o=e,a=Wu(n,"start",o),t=Wu(n,"end",o),Wt(a,t.or(a),(e,t)=>{var r=n.createRng();return r.setStart(Hu(n,e.container()),e.offset()),r.setEnd(Hu(n,t.container()),t.offset()),{range:r,forward:ju(o)}});if(Uu(e))return r=u,t=e,ee.from(r.select(t.name)[t.index]).map(e=>{var t=r.createRng();return t.selectNode(e),{range:t,forward:!0}});if(a=e,oe(a,"rng"))return ee.some({range:e.rng,forward:ju(e)})}return ee.none()})(e).each(({range:e,forward:t})=>{m.setRng(e,t)})},Gu=e=>G(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Xu=(tn=Xn,e=>tn===e),Zu=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Qu=e=>!Zu(e)&&!Xu(e)&&!Zn(e),Ju=t=>{var r=[];if(t)for(let e=0;e<t.rangeCount;e++)r.push(t.getRangeAt(e));return r},em=(e,t)=>{var t=Vn(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:(t=e,I((t=t,Ce(t,e=>{e=vi(e);return e?[K(e)]:[]})),qs))},tm=e=>em(Ju(e.selection.getSel()),K(e.getBody())),rm=(e,t)=>sn(e,"table",t),nm=t=>$r(t).fold(J([t]),e=>[t].concat(nm(e))),om=t=>Vr(t).fold(J([t]),e=>"br"===W(e)?Ir(e).map(e=>[t].concat(om(e))).getOr([]):[t].concat(om(e))),am=(r,e)=>{return Wt((t=e.startContainer,n=e.startOffset,X(t)?0===n?ee.some(K(t)):ee.none():ee.from(t.childNodes[n]).map(K)),(t=e.endContainer,n=e.endOffset,X(t)?n===t.data.length?ee.some(K(t)):ee.none():ee.from(t.childNodes[n-1]).map(K)),(e,t)=>{e=ve(nm(r),C(U,e)),t=ve(om(r),C(U,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,n},sm=(e,t,r,n)=>{var o=r,a=new Yn(r,o),s=Ie(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!V(["td","th","table"],t.toLowerCase()));let i=r;do{if(X(i)&&0!==ae.trim(i.data).length)return void(n?t.setStart(i,0):t.setEnd(i,i.data.length));if(s[i.nodeName])return void(n?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i))}while(i=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},im=e=>{e=e.selection.getSel();return j(e)&&0<e.rangeCount},lm=(r,n)=>{var e=tm(r);0<e.length?re(e,e=>{var e=e.dom,t=r.dom.createRng();t.setStartBefore(e),t.setEndAfter(e),n(t,!0)}):n(r.selection.getRng(),!1)},dm=(e,t,r)=>{t=fl(e,t);r(t),e.moveToBookmark(t)},cm=e=>k(null==e?void 0:e.nodeType),um=e=>G(e)&&!Gu(e)&&!Iu(e)&&!lo(e),mm=(e,t,r)=>{var{selection:n,dom:o}=e,a=n.getNode(),s=x(a);if(dm(n,!0,()=>{t()}),s&&x(a)&&o.isChildOf(a,e.getBody()))e.selection.select(a);else if(r(n.getStart())){var i=o,l=n,d=l.getRng(),{startContainer:s,startOffset:e}=d;if(!((e,t)=>{return!(!um(t)||/^(TD|TH)$/.test(t.nodeName)||(e=e.getAttrib(t,"data-mce-selected"),t=parseInt(e,10),isNaN(t)))&&0<t})(i,l.getNode())&&G(s)){a=s.childNodes,r=i.getRoot();let t;if(e<a.length){const l=a[e];t=new Yn(l,null!=(o=i.getParent(l,i.isBlock))?o:r)}else{const l=a[a.length-1];(t=new Yn(l,null!=(n=i.getParent(l,i.isBlock))?n:r)).next(!0)}for(let e=t.current();e;e=t.next()){if("false"===i.getContentEditable(e))return;if(X(e)&&!hm(e))return d.setStart(e,0),void l.setRng(d)}}}},gm=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(G(e)||!hm(e))return e}},fm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Yo(e,t),pm=(e,t,r)=>e.schema.isValidChild(t,r),hm=(e,t=!1)=>{return!(!j(e)||!X(e))&&(t=t?e.data.replace(/ /g," "):e.data,Jn(t))},vm=(e,t)=>{var r,n,o=e.dom;return um(t)&&"false"===o.getContentEditable(t)&&(e=e,r=t,n="[data-mce-cef-wrappable]",e=Sd(e),n=mt(e)?n:n+","+e,Rr(K(r),n))&&0===o.select('[contenteditable="true"]',t).length},bm=(e,r)=>H(e)?e(r):e=j(r)?e.replace(/%(\w+)/g,(e,t)=>r[t]||e):e,ym=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Cm=(t,r)=>{if(z(t))return null;{let e=String(t);return"color"!==r&&"backgroundColor"!==r||(e=$a(e)),"fontWeight"===r&&700===t&&(e="bold"),e="fontFamily"===r?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e}},wm=(e,t,r)=>{e=e.getStyle(t,r);return Cm(e,r)},Em=(t,e)=>{let r;return t.getParent(e,e=>!!G(e)&&!!(r=t.getStyle(e,"text-decoration"))&&"none"!==r),r},xm=(e,t,r)=>e.getParents(t,r,e.getRoot()),km=(e,t,r)=>{e=e.formatter.get(t);return j(e)&&q(e,r)},_m=e=>ze(e,"block"),Sm=e=>ze(e,"selector"),Nm=e=>ze(e,"inline"),Rm=e=>Sm(e)&&!1!==e.expand&&!Nm(e),Am=r=>0<(()=>{var e=[];let t=r;for(;t;){if(X(t)&&t.data!==Gs||1<t.childNodes.length)return[];G(t)&&e.push(t),t=t.firstChild}return e})().length,Tm=e=>Iu(e.dom)&&Am(e.dom),Om=Gu,Bm=xm,Pm=hm,Dm=fm,Lm=(e,t)=>{let r=t;for(;r;){if(G(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Mm=(e,t,r,n)=>{var o=t.data;if(e){for(let e=r;0<e;e--)if(n(o.charAt(e-1)))return e}else for(let e=r;e<o.length;e++)if(n(o.charAt(e)))return e;return-1},Im=(e,t,r)=>Mm(e,t,r,e=>Xu(e)||Zu(e)),Fm=(e,t,r)=>Mm(e,t,r,Qu),Um=(o,e,t,r,a,n)=>{let s;const i=o.getParent(t,o.isBlock)||e,l=(e,t,r)=>{var n=Ls(o),n=a?n.backwards:n.forwards;return ee.from(n(e,t,(e,t)=>Om(e.parentNode)?-1:(s=e,r(a,e,t)),i))};return l(t,r,Im).bind(e=>n?l(e.container,e.offset+(a?-1:0),Fm):ee.some(e)).orThunk(()=>s?ee.some({container:s,offset:a?0:s.length}):ee.none())},zm=(r,n,o,e,t)=>{const a=e[t];X(e)&&mt(e.data)&&a&&(e=a);var s=Bm(r,e);for(let t=0;t<s.length;t++)for(let e=0;e<n.length;e++){const a=n[e];if((!j(a.collapsed)||a.collapsed===o.collapsed)&&Sm(a)&&r.is(s[t],a.selector))return s[t]}return e},jm=(t,e,r,n)=>{var o;let a=r;const s=t.getRoot(),i=e[0];if(!(a=_m(i)?i.wrapper?null:t.getParent(r,i.block,s):a)){const e=null!=(o=t.getParent(r,"LI,TD,TH,SUMMARY"))?o:s;a=t.getParent(X(r)?r.parentNode:r,e=>e!==s&&Dm(t.schema,e),e)}if(!(a=a&&_m(i)&&i.wrapper?Bm(t,a,"ul,ol").reverse()[0]||a:a))for(a=r;a&&a[n]&&!t.isBlock(a[n])&&(a=a[n],!ym(a,"br")););return a||r},Hm=(e,t,r,n)=>{var o=r.parentNode;return!j(r[n])&&(!(o!==t&&!z(o)&&!e.isBlock(o))||Hm(e,t,o,n))},$m=(t,e,r,n,o)=>{let a=r;var s,i=o?"previousSibling":"nextSibling",l=t.getRoot();if(!X(r)||Pm(r)||!(o?0<n:n<r.data.length))for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let e=a[i];e;e=e[i]){const r=X(e)&&!Hm(t,l,e,i);if(!Om(e)&&(!B(s=e)||!s.getAttribute("data-mce-bogus")||s.nextSibling)&&!Pm(e,r))return a}if(a===l||a.parentNode===l){r=a;break}a=a.parentNode}return r},Vm=e=>Om(e.parentNode)||Om(e),qm=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:a,endContainer:s,endOffset:i}=t;var l=r[0];return G(o)&&o.hasChildNodes()&&(o=bi(o,a),X(o))&&(a=0),G(s)&&s.hasChildNodes()&&(s=bi(s,t.collapsed?i:i-1),X(s))&&(i=s.data.length),o=Lm(e,o),s=Lm(e,s),Vm(o)&&(o=Om(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,X(o))&&(a=t.collapsed?o.length:0),Vm(s)&&(s=Om(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,X(s))&&(i=t.collapsed?0:s.length),t.collapsed&&(Um(e,e.getRoot(),o,a,!0,n).each(({container:e,offset:t})=>{o=e,a=t}),Um(e,e.getRoot(),s,i,!1,n).each(({container:e,offset:t})=>{s=e,i=t})),(Nm(l)||l.block_expand)&&(Nm(l)&&X(o)&&0!==a||(o=$m(e,r,o,a,!0)),Nm(l)&&X(s)&&i!==s.data.length||(s=$m(e,r,s,i,!1))),Rm(l)&&(o=zm(e,r,t,o,"previousSibling"),s=zm(e,r,t,s,"nextSibling")),(_m(l)||Sm(l))&&(o=jm(e,r,o,"previousSibling"),s=jm(e,r,s,"nextSibling"),_m(l))&&(e.isBlock(o)||(o=$m(e,r,o,a,!0),X(o)&&(a=0)),e.isBlock(s)||(s=$m(e,r,s,i,!1),X(s)&&(i=s.data.length))),G(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),G(s)&&s.parentNode&&(i=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:i}},Wm=(r,e,s)=>{var t;const n=e.startOffset,o=bi(e.startContainer,n),a=e.endOffset,i=bi(e.endContainer,a-1),l=e=>{var t=e[0],t=(X(t)&&t===o&&n>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===a&&0<e.length&&t===i&&X(t)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(e,t)=>r.getParent(e,e=>e.parentNode===t,t),u=(r,n,o)=>{var a=o?"nextSibling":"previousSibling";for(let e=r,t=void e.parentNode;e&&e!==n;e=t){t=e.parentNode;const n=d(e===r?e:e[a],a);n.length&&(o||n.reverse(),s(l(n)))}};return o===i?s(l([o])):(e=null!=(e=r.findCommonAncestor(o,i))?e:r.getRoot(),r.isChildOf(o,i)?u(o,e,!0):r.isChildOf(i,o)?u(i,e):(t=c(o,e)||o,e=c(i,e)||i,u(o,t,!0),(t=d(t===o?t:t.nextSibling,"nextSibling",e===i?e.nextSibling:e)).length&&s(l(t)),void u(i,e)))},Km=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Ym=(e,t,r,n,o,a)=>{const{uid:s=t,...i}=r;yr(e,vs()),ir(e,""+ys(),s),ir(e,""+bs(),n);var l,{attributes:r={},classes:n=[]}=o(s,i);if(lr(e,r),l=e,t=n,re(t,e=>{yr(l,e)}),a){0<n.length&&ir(e,""+ws(),n.join(","));const t=Be(r);0<t.length&&ir(e,""+Es(),t.join(","))}},Gm=(e,t,r,n,o)=>{e=_r("span",e);return Ym(e,t,r,n,o,!1),e},Xm=(t,e,a,s,i,l)=>{const d=[],c=Gm(t.getDoc(),a,l,s,i),u=Bo(),m=()=>{u.clear()},g=e=>{re(e,r)},r=e=>{switch(r=t,n=e,o=W(e),Dr(n).fold(()=>"skipping",e=>{return"br"===o||(t=n,rr(t)&&Is(t)===Gs)?"valid":(t=n,tr(t)&&Er(t,vs())?"existing":Iu(n.dom)?"caret":q(Km,e=>Rr(n,e))?"valid-block":pm(r,"span",o)&&pm(r,W(e),"span")?"valid":"invalid-child");var t})){case"invalid-child":{m();const t=jr(e);g(t),m();break}case"valid-block":m(),Ym(e,a,l,s,i,!0);break;case"valid":{const t=u.get().getOrThunk(()=>{var e=Bs(c);return d.push(e),u.set(e),e});_n(e,t);break}}var r,n,o};return Wm(t.dom,e,e=>{m();e=te(e,K),g(e)}),d},Zm=n=>{const o=(()=>{const r={};return{register:(e,t)=>{r[e]={name:e,settings:t}},lookup:e=>O(r,e).map(e=>e.settings),getNames:()=>Be(r)}})();{var e=n,r=o;const l=bs();e.serializer.addTempAttr(Cs()),e.serializer.addAttributeFilter(l,e=>{for(const n of e)t=n,ee.from(t.attr(l)).bind(r.lookup).each(e=>{var t,r;!1===e.persistent&&("span"===n.name?n.unwrap():((t=n).attr(ys(),null),t.attr(bs(),null),t.attr(Cs(),null),e=ee.from(t.attr(Es())).map(e=>e.split(",")).getOr([]),r=ee.from(t.attr(ws())).map(e=>e.split(",")).getOr([]),re(e,e=>t.attr(e,null)),e=null!=(e=null==(e=t.attr("class"))?void 0:e.split(" "))?e:[],e=xe(e,[vs()].concat(r)),t.attr("class",0<e.length?e.join(" "):null),t.attr(ws(),null),t.attr(Es(),null)))});var t})}const a=((n,t)=>{const o=Oo({}),a=()=>({listeners:[],previous:Bo()}),l=(e,t)=>{s(e,e=>(t(e),e))},s=(e,t)=>{var r=o.get(),t=t(O(r,e).getOrThunk(a));r[e]=t,o.set(r)},d=(e,t)=>{re(Ss(n,e),e=>{t?ir(e,Cs(),"true"):mr(e,Cs())})},e=hs(()=>{var e=_e(t.getNames());re(e,r=>{s(r,s=>{const i=s.previous.get();return ks(n,ee.some(r)).fold(()=>{i.each(e=>{var t;t=r,l(t,e=>{re(e.listeners,e=>e(!1,t))}),s.previous.clear(),d(e,!1)})},({uid:e,name:t,elements:r})=>{var n,o,a;Vt(i,e)||(i.each(e=>d(e,!1)),n=t,o=e,a=r,l(n,e=>{re(e.listeners,e=>e(!0,n,{uid:o,nodes:te(a,e=>e.dom)}))}),s.previous.set(e),d(e,!0))}),{previous:s.previous,listeners:s.listeners}})})},30);return n.on("remove",()=>{e.cancel()}),n.on("NodeChange",()=>{e.throttle()}),{addListener:(e,t)=>{s(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(n,o),s=ar("span"),i=e=>{re(e,e=>{var t,r,n;s(e)?Rn(e):(t=e,wr(t,vs()),mr(t,""+ys()),mr(t,""+bs()),mr(t,""+Cs()),e=cr(t,""+Es()).map(e=>e.split(",")).getOr([]),n=cr(t,""+ws()).map(e=>e.split(",")).getOr([]),re(e,e=>mr(t,e)),r=t,re(n,e=>{wr(r,e)}),mr(t,""+ws()),mr(t,""+Es()))})};return{register:(e,t)=>{o.register(e,t)},annotate:(t,r)=>{o.lookup(t).each(e=>{var i,l,d,c;l=t,d=e,c=r,(i=n).undoManager.transact(()=>{const e=i.selection,t=e.getRng(),r=0<tm(i).length,n=Ts("mce-annotation");if(t.collapsed&&!r&&(o=i,a=t,s=qm(o.dom,a,[{inline:"span"}]),a.setStart(s.startContainer,s.startOffset),a.setEnd(s.endContainer,s.endOffset),o.selection.setRng(a)),e.getRng().collapsed&&!r){const t=Gm(i.getDoc(),n,c,l,d.decorate);On(t,Xn),e.getRng().insertNode(t.dom),e.select(t.dom)}else dm(e,!1,()=>{lm(i,e=>{Xm(i,e,n,l,d.decorate,c)})});var o,a,s})})},annotationChanged:(e,t)=>{a.addListener(e,t)},remove:e=>{ks(n,ee.some(e)).each(({elements:e})=>{var t=n.selection.getBookmark();i(e),n.selection.moveToBookmark(t)})},removeAll:e=>{var t=n.selection.getBookmark();ne(Ns(n,e),(e,t)=>{i(e)}),n.selection.moveToBookmark(t)},getAll:e=>{e=Ns(n,e);return De(e,e=>te(e,e=>e.dom))}}},Qm=e=>({getBookmark:C(Ku,e),moveToBookmark:C(Yu,e)}),Jm=(Qm.isBookmarkNode=Gu,(t,r,e)=>!e.collapsed&&q(e.getClientRects(),e=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)),eg=(e,t,r)=>{e.dispatch(t,r)},tg=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},rg=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},ng=(e,t)=>e.dispatch("SetContent",t),og=(e,t)=>e.dispatch("GetContent",t),ag=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},sg=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),le={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||le.metaKeyPressed(e),metaKeyPressed:e=>F.os.isMacOS()||F.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ig="data-mce-selected",lg=Math.abs,dg=Math.round,cg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ug=(r,a)=>{const c=a.dom,u=a.getDoc(),m=document,g=a.getBody();let f,p,h,v,b,y,C,w,E,x,s,k,_,S,N;const i=e=>j(e)&&(bo(e)||c.is(e,"figure.image")),R=e=>Eo(e)||c.hasClass(e,"mce-preview-object"),e=e=>{var t,r,n,o=e.target;t=e,r=a.selection.getRng(),("longpress"===(n=t).type||0===n.type.indexOf("touch")?(n=t.touches[0],!i(t.target)||Jm(n.clientX,n.clientY,r)):!i(t.target)||Jm(t.clientX,t.clientY,r))||e.isDefaultPrevented()||a.selection.select(o)},A=e=>c.hasClass(e,"mce-preview-object")&&j(e.firstElementChild)?[e,e.firstElementChild]:c.is(e,"figure.image")?[e.querySelector("img")]:[e],o=e=>{var t=gd(a);return!!t&&"false"!==e.getAttribute("data-mce-resize")&&e!==a.getBody()&&(c.hasClass(e,"mce-preview-object")&&j(e.firstElementChild)?Rr(K(e.firstElementChild),t):Rr(K(e),t))},l=(e,t,r)=>{j(r)&&(e=A(e),re(e,e=>{e.style[t]||!a.schema.isValid(e.nodeName.toLowerCase(),t)?c.setStyle(e,t,r):c.setAttrib(e,t,""+r)}))},T=(e,t,r)=>{l(e,"width",t),l(e,"height",r)},O=e=>{var t,r,n=e.screenX-y,o=e.screenY-C;k=n*v[2]+w,_=o*v[3]+E,k=k<5?5:k,_=_<5?5:_,((i(f)||R(f))&&!1!==fd(a)?!le.modifierPressed(e):le.modifierPressed(e))&&(lg(n)>lg(o)?(_=dg(k*x),k=dg(_/x)):(k=dg(_/x),_=dg(k*x))),T(p,k,_),e=0<(e=v.startPos.x+n)?e:0,t=0<(t=v.startPos.y+o)?t:0,c.setStyles(h,{left:e,top:t,display:"block"}),h.innerHTML=k+" &times; "+_,v[2]<0&&p.clientWidth<=k&&c.setStyle(p,"left",void 0+(w-k)),v[3]<0&&p.clientHeight<=_&&c.setStyle(p,"top",void 0+(E-_)),(n=g.scrollWidth-S)+(o=g.scrollHeight-N)!=0&&c.setStyles(h,{left:e-n,top:t-o}),s||(e=a,n=f,t=w,o=E,r="corner-"+v.name,e.dispatch("ObjectResizeStart",{target:n,width:t,height:o,origin:r}),s=!0)},B=()=>{var e,t,r,n,o=s;s=!1,o&&(l(f,"width",k),l(f,"height",_)),c.unbind(u,"mousemove",O),c.unbind(u,"mouseup",B),m!==u&&(c.unbind(m,"mousemove",O),c.unbind(m,"mouseup",B)),c.remove(p),c.remove(h),c.remove(b),d(f),o&&(o=a,e=f,t=k,r=_,n="corner-"+v.name,o.dispatch("ObjectResized",{target:e,width:t,height:r,origin:n}),c.setAttrib(f,"style",c.getAttrib(f,"style"))),a.nodeChanged()},d=e=>{L();const t=c.getPos(e,g),s=t.x,i=t.y,r=e.getBoundingClientRect(),l=r.width||r.right-r.left,d=r.height||r.bottom-r.top;f!==e&&(P(),f=e,k=_=0);var n=a.dispatch("ObjectSelected",{target:e});o(e)&&!n.isDefaultPrevented()?ne(cg,(o,a)=>{var e=c.get("mceResizeHandle"+a);e&&c.remove(e),e=c.add(g,"div",{id:"mceResizeHandle"+a,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+a+"-resize; margin:0; padding:0"}),c.bind(e,"mousedown",e=>{var r,t,n;e.stopImmediatePropagation(),e.preventDefault(),e=e,n=A(f)[0],y=e.screenX,C=e.screenY,w=n.clientWidth,E=n.clientHeight,x=E/w,(v=o).name=a,v.startPos={x:l*o[0]+s,y:d*o[1]+i},S=g.scrollWidth,N=g.scrollHeight,b=c.add(g,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),c.setStyles(b,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),p=(r=c,e=f,R(e)?r.create("img",{src:F.transparentSrc}):co(e)?(n=at(v.name,"n")?Ne:Re,t=e.cloneNode(!0),n(r.select("tr",t)).each(e=>{var t=r.select("td,th",e);r.setStyle(e,"height",null),re(t,e=>r.setStyle(e,"height",null))}),t):e.cloneNode(!0)),c.addClass(p,"mce-clonedresizable"),c.setAttrib(p,"data-mce-bogus","all"),p.contentEditable="false",c.setStyles(p,{left:s,top:i,margin:0}),T(p,l,d),p.removeAttribute(ig),g.appendChild(p),c.bind(u,"mousemove",O),c.bind(u,"mouseup",B),m!==u&&(c.bind(m,"mousemove",O),c.bind(m,"mouseup",B)),h=c.add(g,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},w+" &times; "+E)}),o.elm=e,c.setStyles(e,{left:l*o[0]+s-e.offsetWidth/2,top:d*o[1]+i-e.offsetHeight/2})}):P(!1)},n=ps(d,0),P=(e=!0)=>{n.cancel(),L(),f&&e&&f.removeAttribute(ig),ne(cg,(e,t)=>{t=c.get("mceResizeHandle"+t);t&&(c.unbind(t),c.remove(t))})},D=(e,t)=>c.isChildOf(e,t),t=e=>{if(!(s||a.removed||a.composing)){var e="mousedown"===e.type?e.target:r.getNode(),e=dn(K(e),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>c.isEditable(e.parentElement)||"IMG"===e.nodeName&&c.isEditable(e)).getOrUndefined(),t=j(e)?c.getAttrib(e,ig,"1"):"1";if(re(c.select(`img[${ig}],hr[${ig}]`),e=>{e.removeAttribute(ig)}),j(e)&&D(e,g)&&a.hasFocus()){M();const a=r.getStart(!0);if(D(a,e)&&D(r.getEnd(!0),e))return c.setAttrib(e,ig,t),void n.throttle(e)}P()}},L=()=>{ne(cg,e=>{e.elm&&(c.unbind(e.elm),delete e.elm)})},M=()=>{try{a.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return a.on("init",()=>{M(),a.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",t),a.on("keyup compositionend",e=>{f&&"TABLE"===f.nodeName&&t(e)}),a.on("hide blur",P),a.on("contextmenu longpress",e,!0)}),a.on("remove",L),{isResizable:o,showResizeRect:d,hideResizeRect:P,updateResizeRect:t,destroy:()=>{n.cancel(),f=p=b=null}}},mg=(e,t,r)=>{var n,e=e.document.createRange(),o=e;return t.fold(e=>{o.setStartBefore(e.dom)},(e,t)=>{o.setStart(e.dom,t)},e=>{o.setStartAfter(e.dom)}),n=e,r.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)}),e},gg=(e,t,r,n,o)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(n.dom,o),e},fg=yl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pg=(e,t,r)=>t(K(r.startContainer),r.startOffset,K(r.endContainer),r.endOffset),hg=(fg.ltr,fg.rtl,(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n})),vg=yl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bg={before:vg.before,on:vg.on,after:vg.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(g,g,g)},yg=yl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Cg={domRange:yg.domRange,relative:yg.relative,exact:yg.exact,exactFromRange:e=>yg.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>K(e.startContainer),relative:(e,t)=>bg.getStart(e),exact:(e,t,r,n)=>e});return Pr(e)},range:hg},wg=(e,t)=>{var r=W(e);return"input"===r?bg.after(e):V(["br","img"],r)?0===t?bg.before(e):bg.after(e):bg.on(e,t)},Eg=(e,t)=>{e=e.fold(bg.before,wg,bg.after),t=t.fold(bg.before,wg,bg.after);return Cg.relative(e,t)},xg=(e,t,r,n)=>{e=wg(e,t),t=wg(r,n);return Cg.relative(e,t)},kg=(e,t)=>{const r=(t||document).createDocumentFragment();return re(e,e=>{r.appendChild(e.dom)}),K(r)},_g=e=>{const o=Cg.getWin(e).dom,t=(e,t,r,n)=>gg(o,e,t,r,n),r=e.match({domRange:e=>{var t=K(e.startContainer),r=K(e.endContainer);return xg(t,e.startOffset,r,e.endOffset)},relative:Eg,exact:xg});return((e,t)=>{o=e;var o,e=t.match({domRange:e=>({ltr:J(e),rtl:ee.none}),relative:(e,t)=>({ltr:Ze(()=>mg(o,e,t)),rtl:Ze(()=>ee.some(mg(o,t,e)))}),exact:(e,t,r,n)=>({ltr:Ze(()=>gg(o,e,t,r,n)),rtl:Ze(()=>ee.some(gg(o,r,n,e,t)))})});{const r=(t=e).ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>fg.rtl(K(e.endContainer),e.endOffset,K(e.startContainer),e.startOffset)).getOrThunk(()=>pg(0,fg.ltr,r)):pg(0,fg.ltr,r)}})(o,r).match({ltr:t,rtl:t})},Sg=(e,t,r)=>{var n,o,a,s,i=Pr(K(r));return i=i.dom,e=e,t=t,i=i.document,e=e,t=t,(i.caretPositionFromPoint?(n=i,o=e,a=t,ee.from(null==(s=n.caretPositionFromPoint)?void 0:s.call(n,o,a)).bind(e=>{var t;return null===e.offsetNode?ee.none():((t=n.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),ee.some(t))})):i.caretRangeFromPoint?(s=i,o=e,a=t,ee.from(null==(i=s.caretRangeFromPoint)?void 0:i.call(s,o,a))):ee.none()).map(e=>hg(K(e.startContainer),e.startOffset,K(e.endContainer),e.endOffset)).map(e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},Ng=(e,t)=>j(e)&&j(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Rg=(n,e,t)=>null!==((e,t)=>{let r=n;for(;r&&r!==e;){if(t(r))return r;r=r.parentNode}return null})(e,t),Ag=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Yn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(B(o))return!0;return!1},Tg=(e,t,r,n,o)=>{var a=e.getRoot(),s=e.schema.getNonEmptyElements(),i=o.parentNode;let l,d;if(!i)return ee.none();var c=e.getParent(i,e.isBlock)||a;if(n&&B(o)&&t&&e.isEmpty(c))return ee.some(ie(i,e.nodeIndex(o)));for(var u,m,g=new Yn(o,c);d=g[n?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||(u=d,m=a,ri(u)&&!Rg(u,m,Iu)))return ee.none();if(X(d)&&0<d.data.length)return((e,t,r)=>Rg(e,t,e=>e.nodeName===r))(d,a,"A")?ee.none():ee.some(ie(d,n?d.data.length:0));if(e.isBlock(d)||s[d.nodeName.toLowerCase()])return ee.none();l=d}return!po(l)&&r&&l?ee.some(ie(l,0)):ee.none()},Og=(e,t,r,n)=>{var o=e.getRoot();let a,s=!1,i=r?n.startContainer:n.endContainer,l=r?n.startOffset:n.endOffset;var n=G(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let c=r;if(ri(i))return ee.none();if(G(i)&&l>i.childNodes.length-1&&(c=!1),ho(i)&&(i=o,l=0),i===o){if(c&&(a=i.childNodes[0<l?l-1:0])){if(ri(a))return ee.none();if(d[a.nodeName]||co(a))return ee.none()}if(i.hasChildNodes()){if(l=Math.min(!c&&0<l?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=X(i)&&n?i.data.length:0,!t&&i===o.lastChild&&co(i))return ee.none();if((e=>{let t=i;for(;t&&t!==e;){if(x(t))return!0;t=t.parentNode}return!1})(o)||ri(i))return ee.none();if(ko(i))return ee.none();if(i.hasChildNodes()&&!co(i)){a=i;const t=new Yn(i,o);do{if(x(a)||ri(a)){s=!1;break}if(X(a)&&0<a.data.length){l=c?0:a.data.length,i=a,s=!0;break}if(d[a.nodeName.toLowerCase()]&&!wo(a)){l=e.nodeIndex(a),i=a.parentNode,c||l++,s=!0;break}}while(a=c?t.next():t.prev())}}}return t&&(X(i)&&0===l&&Tg(e,n,t,!0,i).each(e=>{i=e.container(),l=e.offset(),s=!0}),G(i))&&((a=(a=i.childNodes[l])||i.childNodes[l-1])&&B(a)&&"A"!==(null==(r=a.previousSibling)?void 0:r.nodeName)&&!Ag(e,a,!1)&&!Ag(e,a,!0)&&Tg(e,n,t,!0,a).each(e=>{i=e.container(),l=e.offset(),s=!0})),c&&!t&&X(i)&&l===i.data.length&&Tg(e,n,t,!1,i).each(e=>{i=e.container(),l=e.offset(),s=!0}),s&&i?ee.some(ie(i,l)):ee.none()},Bg=(e,t)=>{const r=t.collapsed,n=t.cloneRange(),o=ie.fromRangeStart(t);return Og(e,r,!0,n).each(e=>{r&&ie.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||Og(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),Ng(t,n)?ee.none():ee.some(n)},Pg=(e,t)=>e.splitText(t),Dg=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&X(t)){if(0<r&&r<t.data.length)if(n=Pg(t,r),t=n.previousSibling,o>r){o-=r;const e=Pg(n,o).previousSibling;t=n=e,o=e.data.length,r=0}else o=0}else if(X(t)&&0<r&&r<t.data.length&&(t=Pg(t,r),r=0),X(n)&&0<o&&o<n.data.length){const e=Pg(n,o).previousSibling;n=e,o=e.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},Lg=n=>({walk:(e,t)=>Wm(n,e,t),split:Dg,expand:(e,t={type:"word"})=>{if("word"!==t.type)return e;{const t=qm(n,e,[{inline:"span"}]),r=n.createRng();return r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),r}},normalize:t=>Bg(n,t).fold(T,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))}),Mg=(Lg.compareRanges=Ng,Lg.getCaretRangeFromPoint=Sg,Lg.getSelectedNode=vi,Lg.getNode=bi,(o=>{const e=e=>{n=(r=e).dom;const t=Qr(r)?n.getBoundingClientRect().height:n.offsetHeight;var r,n;if(t<=0||null===t){const t=hn(e,o);return parseFloat(t)||0}return t},n=(r,e)=>pe(e,(e,t)=>{t=hn(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!k(t)&&!t.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+t);e=e.dom;mn(e)&&(e.style[o]=t+"px")},get:e,getOuter:e,aggregate:n,max:(e,t,r)=>{e=n(e,r);return e<t?t-e:0}}})("height")),Ig=()=>K(document),Fg=(r,e)=>r.view(e).fold(J([]),e=>{var t=r.owner(e),t=Fg(r,t);return[e].concat(t)});var Ug,zg=Object.freeze({__proto__:null,view:e=>{return(e.dom===document?ee.none():ee.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(K)},owner:e=>Br(e)});const jg=e=>"textarea"===W(e),Hg=(e,t)=>{a=(r=e).dom.ownerDocument,s=a.body,i=a.defaultView,a=a.documentElement;var r,n,o,a,s=s===r.dom?Ln(s.offsetLeft,s.offsetTop):(n=Mn(null==i?void 0:i.pageYOffset,a.scrollTop),i=Mn(null==i?void 0:i.pageXOffset,a.scrollLeft),o=Mn(a.clientTop,s.clientTop),a=Mn(a.clientLeft,s.clientLeft),In(r).translate(i-a,n-o)),i=(r=e,Mg.get(r));return{element:e,bottom:s.top+i,height:i,pos:s,cleanup:t}},$g=(d,c,u,m)=>{{var e=d,t=(e,t)=>{{var r=d,n=c,o=u,a=m,s=K(r.getBody()),i=K(r.getDoc()),l=(s.dom.offsetWidth,((e,t)=>{e=e,t=t;const r=0===(o=jr(e)).length||jg(e)?{element:e,offset:t}:t<o.length&&!jg(o[t])?{element:o[t],offset:0}:(o=o[o.length-1],jg(o)?{element:e,offset:t}:"img"===W(o)?{element:o,offset:1}:rr(o)?{element:o,offset:Is(o).length}:{element:o,offset:jr(o).length}),n=kr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');var o;return wn(r.element,n),Hg(n,()=>Y(n))})(K(o.startContainer),o.startOffset));Vg(r,i,n,l,a),l.cleanup()}},r=u,n=r.startContainer,o=r.startOffset,a=r.endContainer,s=r.endOffset,i=(t(K(n),K(a)),e.dom.createRng());i.setStart(n,o),i.setEnd(a,s),e.selection.setRng(r)}},Vg=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",a).isDefaultPrevented()||(r(e,t,Fn(t).top,n,o),e.dispatch("AfterScrollIntoView",a))},qg=(e,t,r,n)=>{var o=K(e.getDoc());Vg(e,o,r,(e=t,Hg(K(e),$)),n)},Wg=(e,t,r,n,o)=>{var a=t.pos;if(n)Un(a.left,a.top,o);else{const n=a.top-r+t.height;Un(-e.getBody().getBoundingClientRect().left,n,o)}},Kg=(e,t,r,n,o,a)=>{var s=n+r,i=o.pos.top,l=o.bottom,d=n<=l-i;i<r?Wg(e,o,n,!1!==a,t):s<i?Wg(e,o,n,d?!1!==a:!0===a,t):s<l&&!d&&Wg(e,o,n,!0===a,t)},Yg=(e,t,r,n,o)=>{var a=Pr(t).dom.innerHeight;Kg(e,t,r,a,n,o)},Gg=(e,t,r,n,o)=>{var a=Pr(t).dom.innerHeight,r=(Kg(e,t,r,a,n,o),e=n.element,t=Ig(),t=Fn(t),a=(r=zg).owner(e),r=Fg(r,a),a=In(e),e=fe(r,(e,t)=>{t=In(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0}),Ln(e.left+a.left+t.left,e.top+a.top+t.top)),e=Hn(window);r.top<e.y?zn(n.element,!1!==o):r.top>e.bottom&&zn(n.element,!0===o)},Xg=(e,t,r)=>$g(e,Yg,t,r),Zg=(e,t,r)=>qg(e,t,Yg,r),Qg=(e,t,r)=>$g(e,Gg,t,r),Jg=(e,t,r)=>qg(e,t,Gg,r),ef=(e,t,r)=>{(e.inline?Xg:Qg)(e,t,r)},tf=(e,t=!1)=>e.dom.focus({preventScroll:t}),rf=e=>{var t=Kr(e).dom;return e.dom===t.activeElement},nf=(e=Ig())=>ee.from(e.dom.activeElement).map(K),of=(e,t)=>{t=rr(t)?Is(t).length:jr(t).length+1;return t<e?t:e<0?0:e},af=e=>Cg.range(e.start,of(e.soffset,e.start),e.finish,of(e.foffset,e.finish)),sf=(e,t)=>!no(t.dom)&&(Tr(e,t)||U(e,t)),lf=t=>e=>sf(t,e.start)&&sf(t,e.finish),df=e=>Cg.range(K(e.startContainer),e.startOffset,K(e.endContainer),e.endOffset),cf=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),ee.some(t)}catch(e){return ee.none()}},uf=e=>{var t,r=e.inline||F.browser.isFirefox()?(t=K(e.getBody()),((r=Pr(t).dom.getSelection())&&0!==r.rangeCount?ee.from(r.getRangeAt(0)):ee.none()).map(df).filter(lf(t))):ee.none();e.bookmark=r.isSome()?r:e.bookmark},mf=r=>(r.bookmark||ee.none()).bind(e=>{return t=K(r.getBody()),e=e,ee.from(e).filter(lf(t)).map(af);var t}).bind(cf),gf={isEditorUIElement:e=>{e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},ff={setEditorTimeout:(e,t,r)=>{return r=r,k(r)||(r=0),setTimeout(()=>{e.removed||t()},r)},setEditorInterval:(e,t,r)=>{r=r,k(r)||(r=0);const n=setInterval(()=>{e.removed?clearInterval(n):t()},r);return n}};let pf;const hf=se.DOM,vf=e=>{e=e.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},bf=(r,e)=>{const n=Nd(r),t=hf.getParent(e,e=>{return t=e,G(t)&&gf.isEditorUIElement(t)||!!n&&r.dom.is(e,n);var t});return null!==t},yf=e=>{try{var t=Kr(K(e.getElement()));return nf(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},Cf=(r,e)=>{const t=e.editor;{var a=t;const s=ps(()=>{uf(a)},0);a.on("init",()=>{if(a.inline){var e=a,t=s;const o=()=>{t.throttle()};se.DOM.bind(document,"mouseup",o),e.on("remove",()=>{se.DOM.unbind(document,"mouseup",o)})}var r,n;r=a,e=s,n=e,r.on("mouseup touchend",e=>{n.throttle()}),r.on("keyup NodeChange AfterSetSelectionRange",e=>{"nodechange"===e.type&&e.selectionChange||uf(r)})}),a.on("remove",()=>{s.cancel()})}const n=(e,t)=>{pc(e)&&!0!==e.inline&&t(K(e.getContainer()),"tox-edit-focus")};t.on("focusin",()=>{var e=r.focusedEditor;vf(yf(t))&&n(t,yr),e!==t&&(e&&e.dispatch("blur",{focusedEditor:t}),r.setActive(t),(r.focusedEditor=t).dispatch("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",()=>{ff.setEditorTimeout(t,()=>{var e=r.focusedEditor;vf(yf(t))&&e===t||n(t,wr),bf(t,yf(t))||e!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),pf||(pf=e=>{const t=r.activeEditor;t&&Xr(e).each(e=>{e.ownerDocument!==document||e===document.body||bf(t,e)||r.focusedEditor!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})},hf.bind(document,"focusin",pf))},wf=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&pf&&(hf.unbind(document,"focusin",pf),pf=null)},Ef=(t,e)=>{var r;r=K(t.getBody()),((e=e).collapsed?ee.from(bi(e.startContainer,e.startOffset)).map(K):ee.none()).bind(e=>Vs(e)?ee.some(e):Tr(r,e)?ee.none():ee.some(r)).bind(e=>Du(e.dom)).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))},xf=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},kf=e=>{return e.inline?(r=e.getBody())&&(r=K(r),rf(r)||(t=r,nf(Kr(t)).filter(e=>t.dom.contains(e.dom)).isSome())):(r=e,j(r.iframeElement)&&rf(K(r.iframeElement)));var t,r},_f=e=>{return kf(e)||(t=e,e=Kr(K(t.getElement())),nf(e).filter(e=>!vf(e.dom)&&bf(t,e.dom)).isSome());var t},Sf=e=>e.editorManager.setActive(e),Nf=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Rf=(e,t,r,n,o)=>{const a=r?t.startContainer:t.endContainer,s=r?t.startOffset:t.endOffset;return ee.from(a).map(K).map(e=>n&&t.collapsed?e:Hr(e,o(e,s)).getOr(e)).bind(e=>tr(e)?ee.some(e):Dr(e).filter(tr)).map(e=>e.dom).getOr(e)},Af=(e,t,r=!1)=>Rf(e,t,!0,r,(e,t)=>Math.min(qr(e),t)),Tf=(e,t,r=!1)=>Rf(e,t,!1,r,(e,t)=>0<t?t-1:t),Of=(e,t)=>{for(var r=e;e&&X(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Bf=(r,e)=>te(e,e=>{var t=r.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e}),Pf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Df=(r,n,e)=>{var t=e?"lastChild":"firstChild",o=e?"prev":"next";if(r[t])return r[t];if(r!==n){let t=r[o];if(t)return t;for(let e=r.parent;e&&e!==n;e=e.parent)if(t=e[o])return t}},Lf=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Mf{static create(e,t){const r=new Mf(e,Pf[e]||1);return t&&ne(t,(e,t)=>{r.attr(t,e)}),r}constructor(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(t,r){const n=this;if(!Z(t))return j(t)&&ne(t,(e,t)=>{n.attr(t,e)}),n;var o=n.attributes;if(o){if(void 0===r)return o.map[t];if(null===r){if(t in o.map){delete o.map[t];let e=o.length;for(;e--;)if(o[e].name===t)return o.splice(e,1),n}}else{if(t in o.map){let e=o.length;for(;e--;)if(o[e].name===t){o[e].value=r;break}}else o.push({name:t,value:r});o.map[t]=r}return n}}clone(){const r=this,e=new Mf(r.name,r.type),n=r.attributes;if(n){const r=[];r.map={};for(let e=0,t=n.length;e<t;e++){var o=n[e];"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value)}e.attributes=r}return e.value=r.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){var e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):r&&(r.next=t),e.lastChild===this?(e.lastChild=r)&&(r.next=null):t&&(t.prev=r),this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,(e.next=t).prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,(e.prev=t).next=e),e.parent=n,e}getAll(t){var r=[];for(let e=this.firstChild;e;e=Df(e,this))e.name===t&&r.push(e);return r}children(){var t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){const t=this;if(t.firstChild){var r=[];for(let e=t.firstChild;e;e=Df(e,t))r.push(e);let e=r.length;for(;e--;){const t=r[e];t.parent=t.firstChild=t.lastChild=t.next=t.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(e,t={},r){var n,o;let a=this.firstChild;if(Lf(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(Lf(a))return!1}if(8===a.type)return!1;if(3===a.type&&(n=a,o=void 0,o=null!=(o=n.value)?o:"",!Jn(o)||(n=n.parent)&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(o)))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&Jn(null!=(n=a.value)?n:""))return!1;if(r&&r(a))return!1}while(a=Df(a,this));return!0}walk(e){return Df(this,null,e)}}const If=ae.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Ff=e=>Z(e.nodeValue)&&e.nodeValue.includes(Gs),Uf=e=>(0===e.length?"":te(e,e=>`[${e}]`).join(",")+",")+'[data-mce-bogus="all"]',zf=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>Ff(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),jf=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>{return Ff(e)&&(e=e.parentNode)&&oe(If,e.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),Hf=e=>null!==zf(e).nextNode(),$f=e=>null!==jf(e).nextNode(),Vf=(e,t)=>null!==t.querySelector(Uf(e)),qf=(r,e)=>{var t;re((t=r,e.querySelectorAll(Uf(t))),e=>{const t=K(e);"all"===dr(t,"data-mce-bogus")?Y(t):re(r,e=>{ur(t,e)&&mr(t,e)})})},Wf=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},Kf=d(Wf,zf),Yf=d(Wf,jf),Gf=(r,e)=>{e=[{condition:C(Vf,e),action:C(qf,e)},{condition:Hf,action:Kf},{condition:$f,action:Yf}];let n=r,o=!1;return re(e,({condition:e,action:t})=>{e(n)&&(o||(n=r.cloneNode(!0),o=!0),t(n))}),n},Xf=e=>{e=Vn(e,"[data-mce-bogus]");re(e,e=>{("all"===dr(e,"data-mce-bogus")?Y:zs(e)?(wn(e,Sr(Gn)),Y):Rn)(e)})},Zf=e=>{e=Vn(e,"input");re(e,e=>{mr(e,"name")})},Qf=ae.makeMap,Jf=e=>{const n=[],o=(e=e||{}).indent,a=Qf(e.indent_before||""),s=Qf(e.indent_after||""),i=ba.getEncodeFunc(e.entity_encoding||"raw",e.entities),l="xhtml"!==e.element_format;return{start:(e,r,t)=>{if(o&&a[e]&&0<n.length){const e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}if(n.push("<",e),r)for(let e=0,t=r.length;e<t;e++){const o=r[e];n.push(" ",o.name,'="',i(o.value,!0),'"')}if(n[n.length]=!t||l?">":" />",t&&o&&s[e]&&0<n.length){const e=n[n.length-1];0<e.length&&"\n"!==e&&n.push("\n")}},end:e=>{n.push("</",e,">"),o&&s[e]&&0<n.length&&0<(e=n[n.length-1]).length&&"\n"!==e&&n.push("\n")},text:(e,t)=>{0<e.length&&(n[n.length]=t?e:i(e))},cdata:e=>{n.push("<![CDATA[",e,"]]>")},comment:e=>{n.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{t?n.push("<?",e," ",i(t),"?>"):n.push("<?",e,"?>"),o&&n.push("\n")},doctype:e=>{n.push("<!DOCTYPE",e,">",o?"\n":"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},ep=(r={},i=La())=>{const l=Jf(r);return r.validate=!("validate"in r)||r.validate,{serialize:e=>{const t=r.validate,a={3:e=>{var t;l.text(null!=(t=e.value)?t:"",e.raw)},8:e=>{l.comment(null!=(e=e.value)?e:"")},7:e=>{l.pi(e.name,e.value)},10:e=>{l.doctype(null!=(e=e.value)?e:"")},4:e=>{l.cdata(null!=(e=e.value)?e:"")},11:e=>{let t=e;if(t=t.firstChild)for(;s(t),t=t.next;);}},s=(l.reset(),n=>{var o;const e=a[n.type];if(e)e(n);else{const a=n.name,e=a in i.getVoidElements();let r=n.attributes;if(t&&r&&1<r.length){const l=[],o=(l.map={},i.getElementRule(n.name));if(o){for(let e=0,t=o.attributesOrder.length;e<t;e++){const i=o.attributesOrder[e];if(i in r.map){const n=r.map[i];l.map[i]=n,l.push({name:i,value:n})}}for(let e=0,t=r.length;e<t;e++){const i=r[e].name;if(!(i in l.map)){const n=r.map[i];l.map[i]=n,l.push({name:i,value:n})}}r=l}}if(l.start(a,r,e),Do(a))Z(n.value)&&l.text(n.value,!0),l.end(a);else if(!e){let e=n.firstChild;if(e)for("pre"!==a&&"textarea"!==a||3!==e.type||"\n"!==(null==(o=e.value)?void 0:o[0])||l.text("\n",!0);s(e),e=e.next;);l.end(a)}}});return 1!==e.type||r.inner?3===e.type?a[3](e):a[11](e):s(e),l.getContent()}}},tp=new Set,rp=(re(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{tp.add(e)}),new Set),np=(re(["background-color"],e=>{rp.add(e)}),["font","text-decoration","text-emphasis"]),op=(e,t)=>{return Be(e.parseStyle(e.getAttrib(t,"style")))},ap=(e,t)=>q(op(e,t),e=>{return e=e,tp.has(e)}),sp=(r,n,o)=>ee.from(o.container()).filter(X).exists(e=>{var t=r?0:-1;return n(e.data.charAt(o.offset()+t))}),ip=C(sp,!0,Zu),lp=C(sp,!1,Zu),dp=e=>{e=e.container();return X(e)&&(0===e.data.length||Xs(e.data)&&Qm.isBookmarkNode(e.parentNode))},cp=(t,r)=>e=>nu(t?0:-1,e).filter(r).isSome(),up=e=>bo(e)&&"block"===hn(K(e),"display"),mp=e=>{return x(e)&&(e=e,!(G(e)&&"all"===e.getAttribute("data-mce-bogus")))},gp=cp(!0,up),fp=cp(!1,up),pp=cp(!0,Eo),hp=cp(!1,Eo),vp=cp(!0,co),bp=cp(!1,co),yp=cp(!0,mp),Cp=cp(!1,mp),wp=(e,t)=>{return e=e,r=t,n=T,Tr(r,e)?Mr(e,e=>n(e)||U(e,r)).slice(0,-1):[];var r,n},Ep=(e,t)=>[e].concat(wp(e,t)),xp=(e,t,r)=>Tu(e,t,r,dp),kp=(e,t,r)=>{return ve(Ep(K(t.container()),e),(n=r,e=>n.isBlock(W(e))));var n},_p=(e,r,n,o)=>xp(e,r.dom,n).forall(t=>kp(r,n,o).fold(()=>!ru(t,n,r.dom),e=>!ru(t,n,r.dom)&&Tr(e,K(t.container())))),Sp=(t,r,n,e)=>kp(r,n,e).fold(()=>xp(t,r.dom,n).forall(e=>!ru(e,n,r.dom)),e=>xp(t,e.dom,n).isNone()),Np=C(Sp,!1),Rp=C(Sp,!0),Ap=C(_p,!1),Tp=C(_p,!0),Op=e=>uu(e).exists(zs),Bp=(e,t,r,n)=>{var o=I(Ep(K(r.container()),t),e=>n.isBlock(W(e))),o=Ne(o).getOr(t);return Ru(e,o.dom,r).filter(Op)},Pp=(e,t,r)=>uu(t).exists(zs)||Bp(!0,e,t,r).isSome(),Dp=(e,t,r)=>{return n=t,ee.from(n.getNode(!0)).map(K).exists(zs)||Bp(!1,e,t,r).isSome();var n},Lp=C(Bp,!1),Mp=C(Bp,!0),Ip=e=>ie.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Fp=(e,t,r)=>{t=I(Ep(K(t.container()),e),e=>r.isBlock(W(e)));return Ne(t).getOr(e)},Up=(e,t,r)=>Ip(t)?lp(t):lp(t)||Pu(Fp(e,t,r).dom,t).exists(lp),zp=(e,t,r)=>Ip(t)?ip(t):ip(t)||Bu(Fp(e,t,r).dom,t).exists(ip),jp=e=>uu(e).bind(e=>on(e,tr)).exists(e=>{return e=hn(e,"white-space"),V(["pre","pre-wrap"],e)}),Hp=(t,r)=>e=>{return e=new Yn(e,t)[r](),j(e)&&x(e)&&qc(e)},$p=(e,t,r)=>{return!jp(t)&&(a=r,s=n=e,i=o=t,Pu(s.dom,i).isNone()||(s=n,i=o,Bu(s.dom,i).isNone())||Np(n,o,a)||Rp(n,o,a)||Dp(n,o,a)||Pp(n,o,a)||Up(e,t,r)||zp(e,t,r));var n,o,a,s,i},Vp=(e,t,r)=>{return!jp(t)&&(Np(e,t,r)||Ap(e,t,r)||Dp(e,t,r)||Up(e,t,r)||(r=e,e=t,t=Pu(r.dom,e).getOr(e),r=Hp(r.dom,"prev"),e.isAtStart()&&(r(e.container())||r(t.container()))))},qp=(e,t,r)=>{return!jp(t)&&(Rp(e,t,r)||Tp(e,t,r)||Pp(e,t,r)||zp(e,t,r)||(r=e,e=t,t=Bu(r.dom,e).getOr(e),r=Hp(r.dom,"next"),e.isAtEnd()&&(r(e.container())||r(t.container()))))},Wp=(e,t,r)=>{return Vp(e,t,r)||qp(e,(t=(e=t).container(),n=e.offset(),X(t)&&n<t.data.length?ie(t,n+1):e),r);var n},Kp=(e,t)=>Xu(e.charAt(t)),Yp=(e,t)=>Zu(e.charAt(t)),Gp=(e,t,r,n)=>{var o=t.data,a=ie(t,0);return r||!Kp(o,0)||Wp(e,a,n)?!!(r&&Yp(o,0)&&Vp(e,a,n))&&(t.data=Xn+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},Xp=(e,t,r,n)=>{var o=t.data,a=ie(t,o.length-1);return r||!Kp(o,o.length-1)||Wp(e,a,n)?!!(r&&Yp(o,o.length-1)&&qp(e,a,n))&&(t.data=o.slice(0,-1)+Xn,!0):(t.data=o.slice(0,-1)+" ",!0)},Zp=(e,t,r,n)=>{var o,a,s;0!==r&&(s=K(e),s=nn(s,e=>n.isBlock(W(e))).getOr(s),o=e.data.slice(t,t+r),a=t+r>=e.data.length&&qp(s,ie(e,e.data.length),n),s=0===t&&Vp(s,ie(e,0),n),e.replaceData(t,r,to(o,4,s,a)))},Qp=(e,t,r)=>{var n=e.data.slice(t),n=n.length-dt(n).length;Zp(e,t,n,r)},Jp=(e,t,r)=>{var n=e.data.slice(0,t),n=n.length-ct(n).length;Zp(e,t-n,n,r)},eh=(e,t,r,n,o=!0)=>{var a=ct(e.data).length,s=o?e:t,t=o?t:e;return o?s.appendData(t.data):s.insertData(0,t.data),Y(K(t)),n&&Qp(s,a,r),s},th=(e,t)=>{return e=e,n=(r=t).container(),o=r.offset(),!ie.isTextPosition(r)&&n===e.parentNode&&o>ie.before(e).offset()?ie(t.container(),t.offset()-1):t;var r,n,o},rh=e=>{return Ai(e.previousSibling)?ee.some((t=e.previousSibling,X(t)?ie(t,t.data.length):ie.after(t))):e.previousSibling?Lu(e.previousSibling):ee.none();var t},nh=e=>{return Ai(e.nextSibling)?ee.some((t=e.nextSibling,X(t)?ie(t,0):ie.before(t))):e.nextSibling?Du(e.nextSibling):ee.none();var t},oh=(e,t,r)=>{return t=t,n=r,(e?(s=t,i=n,nh(i).orThunk(()=>rh(i)).orThunk(()=>{return e=s,t=i,Bu(e,ie.after(t)).orThunk(()=>Pu(e,ie.before(t)));var e,t})):(o=t,a=n,rh(a).orThunk(()=>nh(a)).orThunk(()=>{return t=o,e=a,ee.from(e.previousSibling||e.parentNode).bind(e=>Pu(t,ie.before(e))).orThunk(()=>Bu(t,ie.after(e)));var t,e}))).map(C(th,r));var n,o,a,s,i},ah=(t,r,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),r)})},sh=(e,t)=>t&&oe(e.schema.getBlockElements(),W(t)),ih=(n,t,e,r=!0,o=!1)=>{var a,s=oh(t,n.getBody(),e.dom),i=nn(e,C(sh,n),(a=n.getBody(),e=>e.dom===a));const l=((e,t,o,a)=>{const r=Ir(e).filter(rr),n=Fr(e).filter(rr);return Y(e),e=r,s=n,i=t,l=(e,t,r)=>{var e=e.dom,t=t.dom,n=e.data.length;return eh(e,t,o,a),r.container()===t?ie(e,n):r},(e.isSome()&&s.isSome()&&i.isSome()?ee.some(l(e.getOrDie(),s.getOrDie(),i.getOrDie())):ee.none()).orThunk(()=>(a&&(r.each(e=>Jp(e.dom,e.dom.length,o)),n.each(e=>Qp(e.dom,0,o))),t));var s,i,l})(e,s,n.schema,(s=n,e=e,oe(s.schema.getTextInlineElements(),W(e))));n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):i.bind(e=>{var t=n.schema,r=o;if(Ao(t,e)){const t=kr('<br data-mce-bogus="1">');return r?re(jr(e),e=>{Tm(e)||Y(e)}):Nn(e),kn(e,t),ee.some(ie.before(t.dom))}return ee.none()}).fold(()=>{r&&ah(n,t,l)},e=>{r&&ah(n,t,ee.some(e))})},lh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,dh=(e,t)=>Rr(K(t),md(e))&&!Yo(e.schema,t)&&e.dom.isEditable(t),ch=e=>{return"rtl"===se.DOM.getStyle(e,"direction",!0)||(e=null!=(e=e.textContent)?e:"",lh.test(e))},uh=(e,t,r)=>{e=e,t=t,r=r;r=I(se.DOM.getParents(r.container(),"*",t),e);return ee.from(r[r.length-1])},mh=(e,t)=>{var r=t.container(),n=t.offset();return e?ti(r)?X(r.nextSibling)?ie(r.nextSibling,0):ie.after(r):oi(t)?ie(r,n+1):t:ti(r)?X(r.previousSibling)?ie(r.previousSibling,r.previousSibling.data.length):ie.before(r):ai(t)?ie(r,n-1):t},gh=C(mh,!0),fh=C(mh,!1),ph=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},hh=e=>ph(e,"Delete"),vh=e=>ph(e,"ForwardDelete"),bh=e=>js(e)||$s(e),yh=(e,t)=>{return Tr(e,t)?on(t,bh,(r=e,e=>Vt(Dr(e),r,U))):ee.none();var r},Ch=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},wh=(a,s,i)=>Wt(Du(i),Lu(i),(e,t)=>{const r=mh(!0,e),n=mh(!1,t),o=mh(!1,s);return a?Bu(i,o).exists(e=>e.isEqual(n)&&s.isEqual(r)):Pu(i,o).exists(e=>e.isEqual(r)&&s.isEqual(n))}).getOr(!0),Eh=e=>{var t;return(8===Qt(t=e)||"#comment"===W(t)?Ir:Vr)(e).bind(Eh).orThunk(()=>ee.some(e))},xh=(t,e,r,n=!0)=>{var o;e.deleteContents();const a=Eh(r).getOr(r),s=K(null!=(e=t.dom.getParent(a.dom,t.dom.isBlock))?e:r.dom);if(s.dom===t.getBody()?Ch(t,n):Ao(t.schema,s,{checkRootAsContent:!1})&&(Ys(s),n)&&t.selection.setCursorLocation(s.dom,0),!U(r,s)){const e=Vt(Dr(s),r)?[]:Dr(o=s).map(jr).map(e=>I(e,e=>!U(o,e))).getOr([]);re(e.concat(jr(r)),e=>{U(e,s)||Tr(e,s)||!Ao(t.schema,e)||Y(e)})}},kh=e=>Vn(e,"td,th"),_h=(e,t)=>rm(K(e),t),Sh=(e,t)=>({start:e,end:t}),Nh=yl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Rh=(e,t)=>dn(K(e),"td,th",t),Ah=e=>!U(e.start,e.end),Th=(e,r)=>rm(e.start,r).bind(t=>rm(e.end,r).bind(e=>Kt(U(t,e),t))),Oh=e=>t=>Th(t,e).map(e=>({rng:t,table:e,cells:kh(e)})),Bh=(e,t,r,n)=>{if(r.collapsed||!e.forall(Ah))return ee.none();if(t.isSameTable){const t=e.bind(Oh(n));return ee.some({start:t,end:t})}{const e=Rh(r.startContainer,n),t=Rh(r.endContainer,n),s=e.bind((a=n,t=>rm(t,a).bind(e=>Re(kh(e)).map(e=>Sh(t,e))))).bind(Oh(n)),i=t.bind((o=n,t=>rm(t,o).bind(e=>Ne(kh(e)).map(e=>Sh(e,t))))).bind(Oh(n));return ee.some({start:s,end:i})}var o,a},Ph=(e,t)=>be(e,e=>U(e,t)),Dh=r=>Wt(Ph(r.cells,r.rng.start),Ph(r.cells,r.rng.end),(e,t)=>r.cells.slice(e,t+1)),Lh=(e,t)=>{const{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},Mh=(e,t)=>{r=e;var o,r,n,a,s,i,l,d,c,u,m,g,e=e=>U(r,e),f=(n=t,f=e,l=Rh(n.startContainer,f),n=Rh(n.endContainer,f),Wt(l,n,Sh)),p=(l=t,n=e,p=_h(l.startContainer,n),l=_h(l.endContainer,n),n=p.isSome(),i=l.isSome(),u=Wt(p,l,U).getOr(!1),o={startTable:p,endTable:l,isStartInTable:n,isEndInTable:i,isSameTable:u,isMultiTable:!u&&n&&i},Wt(o.startTable,o.endTable,(t,r)=>{var e=Kn(t,e=>U(e,r)),n=Kn(r,e=>U(e,t));return e||n?{...o,startTable:e?ee.none():o.startTable,endTable:n?ee.none():o.endTable,isSameTable:!1,isMultiTable:!1}:o}).getOr(o));return m=t,g=e,f.exists(e=>{return t=e,r=g,!Ah(t)&&Th(t,r).exists(e=>{e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&am(e.start,m);var t,r})?f.map(e=>Nh.singleCellTable(t,e.start)):p.isMultiTable?(l=f,d=p,c=t,u=e,Bh(l,d,c,u).bind(({start:e,end:t})=>{var r=e.bind(Dh).getOr([]),t=t.bind(Dh).getOr([]);if(0<r.length&&0<t.length){const e=Lh(c,d);return ee.some(Nh.multiTable(r,t,e))}return ee.none()})):(n=f,a=p,s=t,i=e,Bh(n,a,s,i).bind(({start:e,end:t})=>e.or(t)).bind(e=>{var t=a["isSameTable"],r=Dh(e).getOr([]);if(t&&e.cells.length===r.length)return ee.some(Nh.fullTable(e.table));if(0<r.length){if(t)return ee.some(Nh.partialTable(r,ee.none()));{const e=Lh(s,a);return ee.some(Nh.partialTable(r,ee.some({...a,rng:e})))}}return ee.none()}))},Ih=e=>re(e,e=>{mr(e,"contenteditable"),Ys(e)}),Fh=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),Hh(e,o,t,!1).each(e=>e())},Uh=e=>{const t=tm(e),r=K(e.selection.getNode());Co(r.dom)&&Ao(e.schema,r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),1<t.length&&q(t,e=>U(e,r))&&ir(r,"data-mce-selected","1")},zh=(i,l,t)=>ee.some(()=>{const s=i.selection.getRng(),e=t.bind(({rng:e,isStartInTable:t})=>{a=i,o=t?e.endContainer:e.startContainer;var r,n,o=ee.from(a.dom.getParent(o,a.dom.isBlock)).map(K),a=(e.deleteContents(),r=i,n=t,o.filter(C(Ao,i.schema)).each(e=>{n?Y(e):(Ys(e),r.selection.setCursorLocation(e.dom,0))}),t?l[0]:l[l.length-1]);return Fh(i,a,s,t),Ao(i.schema,a)?ee.none():ee.some(t?l.slice(1):l.slice(0,-1))}).getOr(l);Ih(e),Uh(i)}),jh=(n,o,a,s)=>ee.some(()=>{var e=n.selection.getRng(),t=o[0],r=a[a.length-1],e=(Fh(n,t,e,!0),Fh(n,r,e,!1),Ao(n.schema,t)?o:o.slice(1)),t=Ao(n.schema,r)?a:a.slice(0,-1);Ih(e.concat(t)),s.deleteContents(),Uh(n)}),Hh=(e,t,r,n=!0)=>ee.some(()=>{xh(e,t,r,n)}),$h=(e,t)=>ee.some(()=>ih(e,!1,t)),Vh=(e,t)=>ve(Ep(t,e),qs),qh=(e,t)=>ve(Ep(t,e),ar("caption")),Wh=(e,t)=>ee.some(()=>{Ys(t),e.selection.setCursorLocation(t.dom,0)}),Kh=(e,t)=>(e?vp:bp)(t),Yh=(a,s,e)=>{const i=K(a.getBody());return qh(i,e).fold(()=>((a,s,i,e)=>{const l=ie.fromRangeStart(a.selection.getRng());return Vh(i,e).bind(e=>{return Ao(a.schema,e,{checkRootAsContent:!1})?Wh(a,e):(t=a,r=i,n=s,o=e,e=l,Au(n,t.getBody(),e).bind(e=>Vh(r,K(e.getNode())).bind(e=>U(e,o)?ee.none():ee.some($))));var t,r,n,o})})(a,s,i,e).orThunk(()=>{return Kt((e=a,t=s,r=ie.fromRangeStart(e.selection.getRng()),Kh(t,r)||Ru(t,e.getBody(),r).exists(e=>Kh(t,e))),$);var e,t,r}),e=>{return t=a,r=s,n=i,e=e,o=ie.fromRangeStart(t.selection.getRng()),Ao(t.schema,e)?Wh(t,e):(l=t,d=n,c=r,u=e,m=o,Au(c,l.getBody(),m).fold(()=>ee.some($),e=>{return o=u,a=c,s=m,i=e,Du(o.dom).bind(t=>Lu(o.dom).map(e=>a?s.isEqual(t)&&i.isEqual(e):s.isEqual(e)&&i.isEqual(t))).getOr(!0)?(r=l,n=u,Wh(r,n)):(r=d,t=u,n=e,qh(r,K(n.getNode())).fold(()=>ee.some($),e=>Kt(!U(e,t),$)));var t,r,n,o,a,s,i}));var t,r,n,l,d,c,u,m,o})},Gh=(e,t)=>{var n,o,a,r,s=K(e.selection.getStart(!0)),i=tm(e);return e.selection.isCollapsed()&&0===i.length?Yh(e,t,s):(t=e,e=s,s=i,i=K(t.getBody()),r=t.selection.getRng(),0!==s.length?zh(t,s,ee.none()):(n=t,o=i,a=r,s=e,qh(o,s).fold(()=>{return t=n,e=o,r=a,Mh(e,r).bind(e=>e.fold(C(Hh,t),C($h,t),C(zh,t),C(jh,t)));var t,e,r},e=>{return t=n,e=e,Wh(t,e);var t})))},Xh=(e,t)=>{let r=t;for(;r&&r!==e;){if(yo(r)||x(r))return r;r=r.parentNode}return null},Zh=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Qh=ae.each,Jh=e=>{const o=e.dom,r=new Set(e.serializer.getTempAttrs()),a=t=>q(Zh,e=>at(t,e))||r.has(t);return{compare:(e,t)=>{if(e.nodeName!==t.nodeName||e.nodeType!==t.nodeType)return!1;var r=t=>{const r={};return Qh(o.getAttribs(t),e=>{e=e.nodeName.toLowerCase();"style"===e||a(e)||(r[e]=o.getAttrib(t,e))}),r},n=(e,t)=>{for(const n in e)if(oe(e,n)){var r=t[n];if(D(r))return!1;if(e[n]!==r)return!1;delete t[n]}for(const e in t)if(oe(t,e))return!1;return!0};if(G(e)&&G(t)){if(!n(r(e),r(t)))return!1;if(!n(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style"))))return!1}return!Gu(e)&&!Gu(t)},isAttributeInternal:a}},ev=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),tv=(r,n,o,a)=>{const s=o.name;for(let e=0,t=r.length;e<t;e++){var i=r[e];if(i.name===s){const r=a.nodes[s];r?r.nodes.push(o):a.nodes[s]={filter:i,nodes:[o]}}}if(o.attributes)for(let e=0,t=n.length;e<t;e++){const s=n[e],l=s.name;if(l in o.attributes.map){const r=a.attributes[l];r?r.nodes.push(o):a.attributes[l]={filter:s,nodes:[o]}}}},rv=(e,a)=>{var t=(e,o)=>{ne(e,r=>{const n=Ae(r.nodes);re(r.filter.callbacks,t=>{for(let e=n.length-1;0<=e;e--){const t=n[e];(o?void 0!==t.attr(r.filter.name):t.name===r.filter.name)&&!z(t.parent)||n.splice(e,1)}0<n.length&&t(n,r.filter.name,a)})})};t(e.nodes,!1),t(e.attributes,!0)},nv=(e,t,r,n={})=>{e=((t,r,n)=>{const o={nodes:{},attributes:{}};if(n.firstChild){let e=n;for(;e=e.walk();)tv(t,r,e,o)}return o})(e,t,r);rv(e,n)},ov=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){const e=new Mf("br",1);t.insert&&e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new Mf("#text",3)).value=Xn},av=(e,t)=>{var r=null==e?void 0:e.firstChild;return j(r)&&r===e.lastChild&&r.name===t},sv=(t,e,r,n)=>n.isEmpty(e,r,e=>{return!0===(null==(e=t.getElementRule(e.name))?void 0:e.paddEmpty)}),iv=t=>{let r;for(let e=t;e;e=e.parent){const t=e.attr("contenteditable");if("false"===t)break;"true"===t&&(r=e)}return ee.from(r)},lv=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{var n=e.children();for(const e of n)r&&!t.isValidChild(r.name,e.name)&&lv(e,t,r);e.unwrap()}},dv=(o,a,t,s=$)=>{const i=a.getTextBlockElements(),l=a.getNonEmptyElements(),d=a.getWhitespaceElements(),c=ae.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),u=new Set,m=e=>e!==t&&!c[e.name];for(let e=0;e<o.length;e++){const c=o[e];let t,r,n;if(c.parent&&!u.has(c))if(i[c.name]&&"li"===c.parent.name){let e=c.next;for(;e&&i[e.name];)e.name="li",u.add(e),c.parent.insert(e,c.parent),e=e.next;c.unwrap()}else{var g=[c];for(t=c.parent;t&&!a.isValidChild(t.name,c.name)&&m(t);t=t.parent)g.push(t);if(t&&1<g.length)if(cv(a,c,t))lv(c,a);else{g.reverse(),s(r=g[0].clone());let e=r;for(let t=0;t<g.length-1;t++){a.isValidChild(e.name,g[t].name)&&0<t?(s(n=g[t].clone()),e.append(n)):n=e;for(let e=g[t].firstChild;e&&e!==g[t+1];){const a=e.next;n.append(e),e=a}e=n}sv(a,l,d,r)?t.insert(c,g[0],!0):(t.insert(r,g[0],!0),t.insert(c,r)),t=g[0],(sv(a,l,d,t)||av(t,"br"))&&t.empty().remove()}else if(c.parent)if("li"===c.name){let e=c.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(c);continue}if((e=c.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(c,e.firstChild,!0);continue}const a=new Mf("ul",1);s(a),c.wrap(a)}else if(a.isValidChild(c.parent.name,"div")&&a.isValidChild("div",c.name)){const o=new Mf("div",1);s(o),c.wrap(o)}else lv(c,a)}}},cv=(e,t,r=t.parent)=>!(!r||(!e.children[t.name]||e.isValidChild(r.name,t.name))&&("a"!==t.name||!(()=>{let e=r;for(;e;){if("a"===e.name)return!0;e=e.parent}return!1})())&&("summary"!==r.name||!ev(t)||(null==r?void 0:r.firstChild)===t&&(null==r?void 0:r.lastChild)===t)),uv=e=>{if(e.collapsed)return e;{var a=e;const s=ie.fromRangeStart(a),i=ie.fromRangeEnd(a),l=a.commonAncestorContainer;return Ru(!1,l,i).map(e=>{return!ru(s,i,l)&&ru(s,e,l)?(t=s.container(),r=s.offset(),n=e.container(),e=e.offset(),(o=document.createRange()).setStart(t,r),o.setEnd(n,e),o):a;var t,r,n,o}).getOr(a)}},mv=(e,t)=>{t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},gv=(e,t)=>{e=ie.after(e),t=ku(t).prev(e);return t?t.toRange():null},fv=(e,n,o,t)=>{c=n,e=e.serialize(t),c=c.createFragment(e),e=c.firstChild,t=c.lastChild,e&&"META"===e.nodeName&&null!=(i=e.parentNode)&&i.removeChild(e),t&&"mce_marker"===t.id&&null!=(i=t.parentNode)&&i.removeChild(t);const r=c,a=mv(n,o.startContainer),s=(e=r.firstChild,0<(t=I(null!=(i=null==e?void 0:e.childNodes)?i:[],e=>"LI"===e.nodeName)).length&&(!(c=t[t.length-1]).firstChild||j(null==(c=c)?void 0:c.firstChild)&&c.firstChild===c.lastChild&&((c=c.firstChild).data===Xn||B(c)))?t.slice(0,-1):t);var i,l,d,e=n.getRoot(),c=e=>{var t=ie.fromRangeStart(o),r=ku(n.getRoot()),e=1===e?r.prev(t):r.next(t),r=null==e?void 0:e.getNode();return!r||mv(n,r)!==a};{if(a){if(c(1)){var u=a,t=s,m=e;const f=u.parentNode;return f&&ae.each(t,e=>{f.insertBefore(e,u)}),t=u,t=ie.before(t),(m=ku(m).next(t))?m.toRange():null}if(c(2))return t=a,m=s,c=e,n.insertAfter(m.reverse(),t),gv(m[0],c);{var g=a;t=s,c=e,e=g,d=(l=o).cloneRange(),l=l.cloneRange(),d.setStartBefore(e),l.setEndAfter(e);const p=[d.cloneContents(),l.cloneContents()],h=g.parentNode;return h&&(h.insertBefore(p[0],g),ae.each(t,e=>{h.insertBefore(e,g)}),h.insertBefore(p[1],g),h.removeChild(g)),gv(t[t.length-1],c)}}return null}},pv=["pre"],hv=Co,vv=(n,o,a)=>{var t,e,r,s,i,l,d,c;const u=n.selection,m=n.dom,g=n.parser,f=a.merge,p=ep({validate:!0},n.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===(o=a.preserve_zwsp?o:Zs(o)).indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,h);let v=u.getRng();const b=v.startContainer,y=n.getBody(),C=(b===y&&u.isCollapsed()&&m.isBlock(y.firstChild)&&(e=n,r=y.firstChild,j(r))&&!e.schema.getVoidElements()[r.nodeName]&&m.isEmpty(y.firstChild)&&((v=m.createRng()).setStart(y.firstChild,0),v.setEnd(y.firstChild,0),u.setRng(v)),u.isCollapsed()||(r=(e=n).dom,l=uv(e.selection.getRng()),e.selection.setRng(l),t=r.getParent(l.startContainer,hv),r=r,i=l,s=t,!!j(s)&&s===r.getParent(i.endContainer,hv)&&am(K(s),i)?Hh(e,l,K(t)):l.startContainer===l.endContainer&&l.endOffset-l.startOffset==1&&X(l.startContainer.childNodes[l.startOffset])?l.deleteContents():e.getDoc().execCommand("Delete",!1)),u.getNode()),w={context:C.nodeName.toLowerCase(),data:a.data,insert:!0},E=g.parse(o,w);if(!0===a.paste&&((e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),t=e,e=n,o=t.getNonEmptyElements(),j(e)&&(e.isEmpty(o)||(o=e,t.getBlockElements()[o.name]&&(e=o,j(e.firstChild))&&e.firstChild===e.lastChild&&("br"===(e=o.firstChild).name||e.value===Xn)))&&(n=null==n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name);var o})(n.schema,E)&&(s=m,i=C,!!mv(s,i)))(v=fv(p,m,u.getRng(),E))&&u.setRng(v);else{!0===a.paste&&((e,t,r,n)=>{const o=t.firstChild,a=t.lastChild,s=o===("bookmark"===a.attr("data-mce-type")?a.prev:a),i=V(pv,o.name);if(s&&i){const t="false"!==o.attr("contenteditable"),a=(null==(e=e.getParent(r,e.isBlock))?void 0:e.nodeName.toLowerCase())===o.name,s=ee.from(Xh(n,r)).forall(yo);return t&&a&&s}return!1})(m,E,C,n.getBody())&&null!=(t=E.firstChild)&&t.unwrap();{let e=E;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}let e=E.lastChild;if(e&&"mce_marker"===e.attr("id")){const o=e;for(e=e.prev;e;e=e.walk(!0))if(3===e.type||!m.isBlock(e.name)){e.parent&&n.schema.isValidChild(e.parent.name,"span")&&e.parent.insert(o,e,"br"===e.name);break}}if(n._selectionOverrides.showBlockCaretContainer(C),w.invalid||(l=m,a=C,x=E,q(x.children(),ev)&&"SUMMARY"===(null==(x=l.getParent(a,l.isBlock))?void 0:x.nodeName))){n.selection.setContent(h);let e,t=u.getNode();const f=n.getBody();for(ho(t)?t=e=f:e=t;e&&e!==f;)e=(t=e).parentNode;o=t===f?f.innerHTML:m.getOuterHTML(t);const v=g.parse(o),b=(()=>{for(let e=v;e;e=e.walk())if("mce_marker"===e.attr("id"))return ee.some(e);return ee.none()})(),y=b.bind(iv).getOr(v),C=(b.each(e=>e.replace(E)),E.children()),w=null!=(a=E.parent)?a:v,r=(E.unwrap(),I(C,e=>cv(n.schema,e,w)));dv(r,n.schema,y),nv(g.getNodeFilters(),g.getAttributeFilters(),v),o=p.serialize(v),t===f?m.setHTML(f,o):m.setOuterHTML(t,o)}else{o=p.serialize(E);{var x=n;a=o;var k=C;if("all"===k.getAttribute("data-mce-bogus"))null!=(_=k.parentNode)&&_.insertBefore(x.dom.createFragment(a),k);else{const _=k.firstChild,O=k.lastChild;!_||_===O&&"BR"===_.nodeName?x.dom.setHTML(k,a):x.selection.setContent(a,{no_events:!0})}}}{var _=n;var S=f;const B=_.schema.getTextInlineElements(),P=_.dom;if(S){const S=_.getBody(),D=Jh(_),L="*[data-mce-fragment]",M=P.select(L);ae.each(M,t=>{const r=e=>j(B[e.nodeName.toLowerCase()]),n=e=>1===e.childNodes.length;if(!ap(P,o=t)&&(e=P,o=o,!ap(e,o)||!q(op(e,o),e=>{return e=e,rp.has(e)}))&&r(t)&&n(t)){const B=op(P,t),o=(e,t)=>we(e,e=>V(t,e)),a=e=>n(t)&&P.is(e,L)&&r(e)&&(e.nodeName===t.nodeName&&o(B,op(P,e))||a(e.children[0])),s=e=>j(e)&&e!==S&&(D.compare(t,e)||s(e.parentElement)),i=e=>j(e)&&e!==S&&P.is(e,L)&&(((r,n,o)=>{const e=op(r,n),a=op(r,o),s=e=>{var t=null!=(t=r.getStyle(n,e))?t:"",e=null!=(e=r.getStyle(o,e))?e:"";return ut(t)&&ut(e)&&t!==e};return q(e,t=>{var e=e=>q(e,e=>e===t);if(e(a)||!e(np))return s(t);{const t=I(a,t=>q(np,e=>at(t,e)));return q(t,s)}})})(P,t,e)||i(e.parentElement));(a(t.children[0])||s(t.parentElement)&&!i(t.parentElement))&&P.remove(t,!0)}var e,o})}}{var N=n;var R=m.get("mce_marker");let t;k=N.dom,a=N.selection;if(R){a.scrollIntoView(R);var S=Xh(N.getBody(),R);if(S&&"false"===k.getContentEditable(S))k.remove(R),a.select(S);else{let e=k.createRng();S=R.previousSibling;if(X(S)){e.setStart(S,null!=(d=null==(d=S.nodeValue)?void 0:d.length)?d:0);const N=R.nextSibling;X(N)&&(S.appendData(N.data),null!=(d=N.parentNode))&&d.removeChild(N)}else e.setStartBefore(R),e.setEndBefore(R);S=k.getParent(R,k.isBlock);if(k.remove(R),S&&k.isEmpty(S)){const R=hv(S);Nn(K(S)),e.setStart(S,0),e.setEnd(S,0),R||S.getAttribute("data-mce-fragment")||!(t=(e=>{e=ie.fromRangeStart(e);return null==(e=ku(N.getBody()).next(e))?void 0:e.toRange()})(e))?k.add(S,k.create("br",R?{}:{"data-mce-bogus":"1"})):(e=t,k.remove(S))}a.setRng(e)}}}d=n.getBody(),ae.each(d.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),R=m,S=u.getStart(),c=n.schema,ee.from(R.getParent(S,"td,th")).map(K).each(e=>{var r,n;r=e,n=c,Vr(r).each(t=>{Ir(t).each(e=>{n.isBlock(W(r))&&zs(t)&&n.isBlock(W(e))&&Y(t)})})});var A=n.schema,T=n.getBody(),a=u.getStart();a=Mr(K(a),e=>U(e,K(T))),Se(a,a.length-2).filter(tr).fold(()=>Vo(A,T),e=>Vo(A,e.dom))}return o},bv=e=>e instanceof Mf,yv=(e,t,r)=>{var n;e.dom.setHTML(e.getBody(),t),!0!==r&&(n=e,kf(n))&&Du(n.getBody()).each(e=>{var t=e.getNode(),t=co(t)?Du(t).getOr(e):e;n.selection.setRng(t.toRange())})},Cv=e=>H(e)?e:T,wv=(a,s,e)=>{const t=s(a),i=Cv(e);return t.orThunk(()=>{if(i(a))return ee.none();{var t=a,r=s,n=i;let e=t.dom;for(var o=Cv(n);e.parentNode;){e=e.parentNode;const t=K(e),n=r(t);if(n.isSome())return n;if(o(t))break}return ee.none()}})},Ev=ym,xv=(t,r,e)=>{var n=t.formatter.get(e);if(n)for(let e=0;e<n.length;e++){var o=n[e];if(Sm(o)&&!1===o.inherit&&t.dom.is(r,o.selector))return!0}return!1},kv=(t,e,r,n,o)=>{const a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,e=>!!xv(t,e,r)||e.parentNode===a||!!Nv(t,e,r,n,!0)),!!Nv(t,e,r,n,o))},_v=(e,t,r)=>!(!Nm(r)||!Ev(t,r.inline))||!(!_m(r)||!Ev(t,r.block))||!!Sm(r)&&G(t)&&e.is(t,r.selector),Sv=(t,r,e,n,o,a)=>{var s=e[n],i="attributes"===n;if(H(e.onmatch))return e.onmatch(r,e,n);if(s)if($e(s)){for(let e=0;e<s.length;e++)if(i?t.getAttrib(r,s[e]):wm(t,r,s[e]))return!0}else for(const n in s)if(oe(s,n)){var l=i?t.getAttrib(r,n):wm(t,r,n),d=bm(s[n],a),c=z(l)||mt(l);if(c&&z(d))continue;if(o&&c&&!e.exact)return!1;if((!o||e.exact)&&!Ev(l,Cm(d,n)))return!1}return!0},Nv=(t,r,n,o,a)=>{var s=t.formatter.get(n),i=t.dom;if(s&&G(r))for(let e=0;e<s.length;e++){var l=s[e];if(_v(t.dom,r,l)&&Sv(i,r,l,"attributes",a,o)&&Sv(i,r,l,"styles",a,o)){const n=l.classes;if(n)for(let e=0;e<n.length;e++)if(!t.dom.hasClass(r,bm(n[e],o)))return;return l}}},Rv=(e,t,r,n,o)=>{var a;return n?kv(e,n,t,r,o):(n=e.selection.getNode(),!!kv(e,n,t,r,o)||!((a=e.selection.getStart())===n||!kv(e,a,t,r,o)))},Av=Gs,Tv=e=>{if(e){var t=new Yn(e,e);for(let e=t.current();e;e=t.next())if(X(e))return e}return null},Ov=e=>{var t=_r("span");return lr(t,{id:Mu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&kn(t,Sr(Av)),t},Bv=(e,t,r)=>{var n=e.dom,o=e.selection;if(Am(t))ih(e,!1,K(t),r,!0);else{const e=o.getRng(),r=n.getParent(t,n.isBlock),a=e.startContainer,s=e.startOffset,i=e.endContainer,l=e.endOffset,d=(e=>{e=Tv(e);return e&&e.data.charAt(0)===Av&&e.deleteData(0,1),e})(t);n.remove(t,!0),a===d&&0<s&&e.setStart(d,s-1),i===d&&0<l&&e.setEnd(d,l-1),r&&n.isEmpty(r)&&Ys(K(r)),o.setRng(e)}},Pv=(e,t,r)=>{var n=e.dom,o=e.selection;if(t)Bv(e,t,r);else if(!(t=Fu(e.getBody(),o.getStart())))for(;t=n.get(Mu);)Bv(e,t,r)},Dv=(e,t)=>(e.appendChild(t),t),Lv=(e,t)=>{e=fe(e,(e,t)=>Dv(e,t.cloneNode(!1)),t),t=null!=(t=e.ownerDocument)?t:document;return Dv(e,t.createTextNode(Av))},Mv=e=>Fs(e,Is(e).replace(new RegExp(Xn+"$")," ")),Iv=(t,e)=>{const r=()=>{null===e||t.dom.isEmpty(e)||Ir(K(e)).each(e=>{rr(e)?Mv(e):an(e,e=>rr(e)).each(e=>{rr(e)&&Mv(e)})})};t.once("input",e=>{e.data&&!Zu(e.data)&&(e.isComposing?t.once("compositionend",()=>{r()}):r())})},Fv=(r,n,o,a)=>{var s=r.dom,i=r.selection;let l=!1;const d=r.formatter.get(n);if(d){const v=i.getRng(),b=v.startContainer,y=v.startOffset;let e=b;X(b)&&(y!==b.data.length&&(l=!0),e=e.parentNode);var c,u,m,g,f,p=[];let t;for(;e;){if(Nv(r,e,n,o,a)){t=e;break}e.nextSibling&&(l=!0),p.push(e),e=e.parentNode}if(t)if(l){const w=i.getBookmark();v.collapse(!0);var h=qm(s,v,d,!0),h=Dg(h);r.formatter.remove(n,o,h,a),i.moveToBookmark(w)}else{const l=Fu(r.getBody(),t),d=j(l)?s.getParents(t.parentNode,S,l):[],v=Ov(!1).dom,b=(h=r,c=v,u=null!=l?l:t,f=h.dom,(h=f.getParent(u,C(fm,h.schema)))&&f.isEmpty(h)?null!=(h=u.parentNode)&&h.replaceChild(c,u):(m=K(u),h=Vn(m,"br"),g=I((()=>{var e=[];let t=m.dom;for(;t;)e.push(K(t)),t=t.lastChild;return e})().slice(-1),zs),h.length===g.length&&re(g,Y),f.isEmpty(u)?null!=(h=u.parentNode)&&h.replaceChild(c,u):f.insertAfter(c,u)),((a,e,t,s,r,n)=>{var o,i,l=a.formatter,d=a.dom,c=I(Be(l.get()),e=>e!==s&&!ot(e,"removeformat")),c=(o=a,i=t,c=c,pe(c,(e,t)=>{n=o,r=t;var r,n=km(n,r,t=>{const r=e=>H(e)||1<e.length&&"%"===e.charAt(0);return q(["styles","attributes"],e=>O(t,e).exists(e=>{e=Q(e)?e:Ue(e);return q(e,r)}))});return o.formatter.matchNode(i,t,{},n)?e.concat([t]):e},[]));if(0<I(c,e=>{{var t=a,n=s;const r=["inline","block","selector","attributes","styles","classes"],o=e=>Ie(e,(e,t)=>q(r,e=>e===t));return!km(t,e,e=>{const r=o(e);return km(t,n,e=>{var t,e=o(e);return t=r,w(E).eq(t,e)})})}}).length){const a=t.cloneNode(!1);return d.add(e,a),l.remove(s,r,a,n),d.remove(a),ee.some(a)}return ee.none()})(r,v,t,n,o,a)),y=Lv([...p,...b.toArray(),...d],v);l&&Bv(r,l,j(l)),i.setCursorLocation(y,1),Iv(r,v),s.isEmpty(t)&&s.remove(t)}}},Uv=e=>{var t=Ov(!1),e=Lv(e,t.dom);return{caretContainer:t,caretPosition:ie(e,0)}},zv=(e,t)=>{var{caretContainer:t,caretPosition:r}=Uv(t);return wn(K(e),t),Y(K(e)),r},jv=(e,t)=>{return!Iu(t.dom)&&(e=e.schema.getTextInlineElements(),oe(e,W(t)))&&!Iu(t.dom)&&!lo(t.dom)},Hv={},$v=so(["pre"]),Vv=(Hv.pre||(Hv.pre=[]),Hv.pre.push(e=>{var t;e.selection.getRng().collapsed||(e=e.selection.getSelectedBlocks(),e=I(I(e,$v),(t=e,e=>{e=e.previousSibling;return $v(e)&&V(t,e)})),re(e,e=>{var t,r;t=e.previousSibling,e=e,e=K(e),r=Br(e).dom,Y(e),Sn(K(t),[_r("br",r),_r("br",r),...jr(e)])}))}),["fontWeight","fontStyle","color","fontSize","fontFamily"]),qv=(e,t)=>{e=e.get(t);return Q(e)?ve(e,e=>{return Nm(e)&&"span"===e.inline&&(e=e,de(e.styles))&&q(Be(e.styles),e=>V(Vv,e))}):ee.none()},Wv=(e,t)=>Pu(t,ie.fromRangeStart(e)).isNone(),Kv=(e,t)=>!1===Bu(t,ie.fromRangeEnd(e)).exists(e=>!B(e.getNode())||Bu(t,e).isSome()),Yv=t=>e=>xo(e)&&t.isEditable(e),Gv=e=>I(e.getSelectedBlocks(),Yv(e.dom)),Xv=ae.each,Zv=e=>G(e)&&!Gu(e)&&!Iu(e)&&!lo(e),Qv=(t,r)=>{for(let e=t;e;e=e[r]){if(X(e)&&ut(e.data))return t;if(G(e)&&!Gu(e))return e}return t},Jv=(e,t,r)=>{const n=Jh(e),o=oo(t)&&e.dom.isEditable(t),a=oo(r)&&e.dom.isEditable(r);if(o&&a){const o=Qv(t,"previousSibling"),a=Qv(r,"nextSibling");if(n.compare(o,a)){for(let e=o.nextSibling;e&&e!==a;){const t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(a),ae.each(ae.grep(a.childNodes),e=>{o.appendChild(e)}),o}}return r},eb=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){const t=null!=(o=Jv(e,gm(n),n))?o:n;Jv(e,t,gm(t,!0))}},tb=(e,t,r)=>{Xv(e.childNodes,e=>{Zv(e)&&(t(e)&&r(e),e.hasChildNodes())&&tb(e,t,r)})},rb=(t,r)=>e=>!(!e||!wm(t,e,r)),nb=(r,n,o)=>e=>{var t;r.setStyle(e,n,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=r,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},ob=yl([{keep:[]},{rename:["name"]},{removed:[]}]),ab=/^(src|href|style)$/,sb=ae.each,ib=ym,lb=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),db=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(G(n)){const e=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>e?e:o]}return X(n)&&r&&o>=n.data.length&&(n=new Yn(n,e.getBody()).next()||n),n=X(n)&&!r&&0===o?new Yn(n,e.getBody()).prev()||n:n},cb=(e,t)=>{var t=t?"firstChild":"lastChild",r=e[t];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[t]||r:e},ub=(e,t,r,n)=>{e=e.create(r,n);return null!=(r=t.parentNode)&&r.insertBefore(e,t),e.appendChild(t),e},mb=(e,t,r,n,o)=>{t=K(t),e=K(e.create(n,o)),n=(r?zr:Ur)(t);return Sn(e,n),(r?(wn(t,e),xn):(En(t,e),kn))(e,t),e.dom},gb=(t,e,r)=>{var n=e.parentNode;let o;const a=t.dom,s=zl(t);!_m(r)||n!==a.getRoot()||r.list_block&&ib(e,r.list_block)||re(Ae(e.childNodes),e=>{pm(t,s,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=ub(a,e,s),a.setAttribs(o,jl(t))):o=null}),n=r,Sm(n)&&Nm(n)&&Vt(O(n,"mixed"),!0)&&!ib(r.inline,e)||a.remove(e,!0)},fb=(e,t,r)=>k(e)?{name:t,value:null}:{name:e,value:bm(t,r)},pb=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},hb=(n,o,a,s,i)=>{let l=!1;sb(a.styles,(e,t)=>{var{name:t,value:e}=fb(t,e,s),r=Cm(e,t);(a.remove_similar||P(e)||!G(i)||ib(wm(n,i,t),r))&&n.setStyle(o,t,""),l=!0}),l&&pb(n,o)},vb=(t,n,o,e,a)=>{const s=t.dom,r=Jh(t),i=t.schema;if(Nm(n)&&Wo(i,n.inline)&&Yo(i,e)&&e.parentElement===t.getBody())return gb(t,e,n),ob.removed();if(!n.ceFalseOverride&&e&&"false"===s.getContentEditableParent(e))return ob.keep();if(e&&!_v(s,e,n)&&(!n.links||"A"!==e.nodeName))return ob.keep();const l=e,d=n.preserve_attributes;if(Nm(n)&&"all"===n.remove&&Q(d)){const t=I(s.getAttribs(l),e=>V(d,e.name.toLowerCase()));if(s.removeAllAttribs(l),re(t,e=>s.setAttrib(l,e.name,e.value)),0<t.length)return ob.rename("span")}if("all"!==n.remove){hb(s,l,n,o,a),sb(n.attributes,(e,r)=>{var{name:r,value:e}=fb(r,e,o);if(n.remove_similar||P(e)||!G(a)||ib(s.getAttrib(a,r),e)){if("class"===r){const e=s.getAttrib(l,r);if(e){let t="";if(re(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void s.setAttrib(l,r,t)}}(ab.test(r)&&l.removeAttribute("data-mce-"+r),"style"===r&&so(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))?(l.removeAttribute(r),s.setStyle(l,"list-style-type","none")):("class"===r&&l.removeAttribute("className"),l.removeAttribute(r))}}),sb(n.classes,e=>{e=bm(e,o),G(a)&&!s.hasClass(a,e)||s.removeClass(l,e)});const t=s.getAttribs(l);for(let e=0;e<t.length;e++){const o=t[e].nodeName;if(!r.isAttributeInternal(o))return ob.keep()}}return"none"!==n.remove?(gb(t,l,n),ob.removed()):ob.keep()},bb=(e,t,r,n,o)=>{if(n||e.selection.isEditable()){var a,s,u=e,m=t,g=r,e=n,f=o;const p=u.formatter.get(m),h=p[0],i=u.dom,l=u.selection,d=e=>{var t=((r,e,n,o,a)=>{let s;return e.parentNode&&re(xm(r.dom,e.parentNode).reverse(),e=>{var t;!s&&G(e)&&"_start"!==e.id&&"_end"!==e.id&&(t=Nv(r,e,n,o,a))&&!1!==t.split&&(s=e)}),s})(u,e,m,g,f);{var o=u,a=p,s=e,i=h,l=g;let r,n;var d=o.dom;if(t){const c=t.parentNode;for(let e=s.parentNode;e&&e!==c;e=e.parentNode){let t=d.clone(e,!1);for(let e=0;e<a.length&&null!==(t=((t,e,r,n)=>vb(t,e,r,n,n).fold(J(n),e=>(t.dom.createFragment().appendChild(n),t.dom.rename(n,e)),J(null)))(o,a[e],l,t));e++);t&&(r&&t.appendChild(r),n=n||t,r=t)}i.mixed&&d.isBlock(t)||(s=null!=(t=d.split(t,s))?t:s),r&&n&&(null!=(t=e.parentNode)&&t.insertBefore(r,e),n.appendChild(e),Nm(i))&&eb(o,i,0,r)}return s}},c=t=>q(p,e=>yb(u,e,g,t,t)),v=t=>{var r=Ae(t.childNodes),e=c(t)||q(p,e=>_v(i,t,e)),n=t.parentNode;if(!e&&j(n)&&Rm(h)&&c(n),h.deep&&r.length)for(let e=0;e<r.length;e++)v(r[e]);re(["underline","line-through","overline"],e=>{G(t)&&u.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&Em(i,t.parentNode)===e&&yb(u,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},void 0,t)})},b=t=>{var r,n=i.get(t?"_start":"_end");if(n){let e=n[t?"firstChild":"lastChild"];return r=e,Gu(r)&&G(r)&&("_start"===r.id||"_end"===r.id)&&(e=e[t?"firstChild":"lastChild"]),X(e)&&0===e.data.length&&(e=t?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),i.remove(n,!0),e}return null},y=e=>{let t,r,n=qm(i,e,p,e.collapsed);if(h.split){if(n=Dg(n),t=db(u,n,!0),r=db(u,n),t!==r){if(t=cb(t,!0),r=cb(r,!1),lb(i,t,r)){const u=ee.from(t.firstChild).getOr(t);return d(mb(i,u,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(lb(i,r,t)){const u=ee.from(r.lastChild).getOr(r);return d(mb(i,u,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}t=ub(i,t,"span",{id:"_start","data-mce-type":"bookmark"}),r=ub(i,r,"span",{id:"_end","data-mce-type":"bookmark"});const u=i.createRng();u.setStartAfter(t),u.setEndBefore(r),Wm(i,u,e=>{re(e,e=>{Gu(e)||Gu(e.parentNode)||d(e)})}),d(t),d(r),t=b(!0),r=b()}else t=r=d(t);n.startContainer=t.parentNode||t,n.startOffset=i.nodeIndex(t),n.endContainer=r.parentNode||r,n.endOffset=i.nodeIndex(r)+1}Wm(i,n,e=>{re(e,v)})};if(e)if(cm(e)){const u=i.createRng();u.setStartBefore(e),u.setEndAfter(e),y(u)}else y(e);else l.isCollapsed()&&Nm(h)&&!tm(u).length?Fv(u,m,g,f):(mm(u,()=>lm(u,y),e=>Nm(h)&&Rv(u,m,g,e)),u.nodeChanged()),a=u,s=g,"removeformat"===(t=m)?re(Gv(a.selection),t=>{re(Vv,e=>a.dom.setStyle(t,e,"")),pb(a.dom,t)}):qv(a.formatter,t).each(t=>{re(Gv(a.selection),e=>hb(a.dom,e,t,s,null))});rg(u,m,e,g)}},yb=(t,e,r,n,o)=>vb(t,e,r,n,o).fold(T,e=>(t.dom.rename(n,e),!0),S),Cb=ae.each,wb=ae.each,Eb=(r,n,e,o)=>{if(wb(e.styles,(e,t)=>{r.setStyle(n,t,bm(e,o))}),e.styles){const e=r.getAttrib(n,"style");e&&r.setAttrib(n,"data-mce-style",e)}},xb=(C,w,E,t)=>{const x=C.formatter.get(w),k=x[0],n=!t&&C.selection.isCollapsed(),o=C.dom,e=C.selection,_=(r,e=k)=>{H(e.onformat)&&e.onformat(r,e,E,t),Eb(o,r,e,E),wb(e.attributes,(e,t)=>{o.setAttrib(r,t,bm(e,E))}),wb(e.classes,e=>{e=bm(e,E);o.hasClass(r,e)||o.addClass(r,e)})},v=(e,t)=>{let r=!1;return wb(e,e=>!(!Sm(e)||("false"!==o.getContentEditable(t)||e.ceFalseOverride)&&(!j(e.collapsed)||e.collapsed===n)&&o.is(t,e.selector)&&!Iu(t)&&(_(t,e),r=!0))),r},r=(b,e,g)=>{const y=[];let f=!0;const p=k.inline||k.block,h=(t=p,Z(t)?(t=o.create(t),_(t),t):null);var t;Wm(b,e,e=>{let u;const m=t=>{let e=!1,r=f,n=!1;var o,a,s,i,l=t.parentNode,d=l.nodeName.toLowerCase(),c=b.getContentEditable(t),c=(j(c)&&(r=f,f="true"===c,e=!0,n=vm(C,t)),f&&!e);if(B(t)&&!((e,t,r,n)=>{if(_d(e)&&Nm(t)&&r.parentNode){const t=Pa(e.schema),o=Wn(K(r),e=>Iu(e.dom));return ze(t,n)&&Ro(e.schema,r.parentNode,{skipBogus:!1,includeZwsp:!0})&&!o}return!1})(C,k,t,d))u=null,_m(k)&&b.remove(t);else if(s=t,i=k,_m(i)&&!0===i.wrapper&&Nv(C,s,w,E))u=null;else if(i=t,s=d,o=c,a=k,a=_m(a)&&!0!==a.wrapper&&fm(C.schema,i)&&pm(C,s,p),o&&a){const C=b.rename(t,p);_(C),y.push(C),void(u=null)}else{if(Sm(k)){let e=v(x,t);if(!e&&j(l)&&Rm(k)&&(e=v(x,l)),!Nm(k)||e)return void(u=null)}j(h)&&(i=t,s=d,o=c,a=n,d=i.nodeName.toLowerCase(),d=pm(C,p,d)&&pm(C,s,p),s=!g&&X(i)&&Xs(i.data),c=Iu(i),i=!Nm(k)||!b.isBlock(i),o||a)&&d&&!s&&!c&&i?(u||(u=b.clone(h,!1),l.insertBefore(u,t),y.push(u)),n&&e&&(f=r),u.appendChild(t)):(u=null,re(Ae(t.childNodes),m),e&&(f=r),u=null)}};re(e,m)}),!0===k.links&&re(y,e=>{const t=e=>{"A"===e.nodeName&&_(e,k),re(Ae(e.childNodes),t)};t(e)}),re(y,e=>{var r,t,n,o,a,s,i,l,d,c,u=(e=>{let r=0;return re(e.childNodes,e=>{var t;t=e,j(t)&&X(t)&&0===t.length||Gu(e)||r++}),r})(e);if(!(1<y.length)&&b.isBlock(e)||0!==u){if(Nm(k)||_m(k)&&k.wrapper){k.exact||1!==u||(c=e,e=ve(c.childNodes,um).filter(e=>"false"!==b.getContentEditable(e)&&_v(b,e,k)).map(e=>{var t=b.clone(e,!1);return _(t),b.replace(t,c,!0),b.remove(e,!0),t}).getOr(c)),i=C,u=x,l=E,d=e,Cb(u,t=>{var n,e,r,o;Nm(t)&&Cb(i.dom.select(t.inline,d),e=>{Zv(e)&&yb(i,t,l,e,t.exact?e:null)}),n=i.dom,r=d,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",Xv(n.select(o,r),r=>{Zv(r)&&n.isEditable(r)&&Xv(e.styles,(e,t)=>{n.setStyle(r,t,"")})}))}),t=C,n=k,o=w,a=E,u=(s=e).parentNode,Nv(t,u,o,a)&&yb(t,n,a,s)||n.merge_with_parents&&u&&t.dom.getParent(u,e=>!!Nv(t,e,o,a)&&(yb(t,n,a,s),!0));var m=b,u=k,g=E,f=e;if(u.styles&&u.styles.backgroundColor){const v=rb(m,"fontSize");tb(f,e=>v(e)&&m.isEditable(e),nb(m,"backgroundColor",bm(u.styles.backgroundColor,g)))}r=b,f=k,u=e,g=e=>{var t;oo(e)&&G(e.parentNode)&&r.isEditable(e)&&(t=Em(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},f.styles&&(f.styles.color||f.styles.textDecoration)&&(ae.walk(u,g,"childNodes"),g(u));var p=b,h=(f=k,0);if(g=e,Nm(f)&&("sub"===f.inline||"sup"===f.inline)){const h=rb(p,"fontSize");tb(g,e=>h(e)&&p.isEditable(e),nb(p,"fontSize",""));f=I(p.select("sup"===f.inline?"sub":"sup",g),p.isEditable);p.remove(f,!0)}eb(C,k,0,e)}}else b.remove(e,!0)})},a=cm(t)?t:e.getNode();var s;if("false"!==o.getContentEditable(a)||vm(C,a)){if(k){if(t)if(cm(t)){if(!v(x,t)){const C=o.createRng();C.setStartBefore(t),C.setEndAfter(t),r(o,qm(o,C,x),!0)}}else r(o,t,!0);else{if(n&&Nm(k)&&!tm(C).length){var i=C;var l=w;var d=E;let r;var c=i.selection,u=i.formatter.get(l);if(u){var m=c.getRng();let t=m.startOffset;var g=m.startContainer.nodeValue,f=(r=Fu(i.getBody(),c.getStart()),/[^\s\u00a0\u00ad\u200b\ufeff]/);if(g&&0<t&&t<g.length&&f.test(g.charAt(t))&&f.test(g.charAt(t-1))){const e=c.getBookmark();m.collapse(!0);f=qm(i.dom,m,u),f=Dg(f);i.formatter.apply(l,d,f),c.moveToBookmark(e)}else{let e=r?Tv(r):null;r&&(null==e?void 0:e.data)===Av||(g=i.getDoc(),u=Ov(!0).dom,r=g.importNode(u,!0),e=r.firstChild,m.insertNode(r),t=1,Iv(i,r)),i.formatter.apply(l,d,r),c.setCursorLocation(e,t)}}}else e.setRng(uv(e.getRng())),mm(C,()=>{lm(C,(e,t)=>{t=t?e:qm(o,e,x);r(o,t,!1)})},S),C.nodeChanged();qv(C.formatter,w).each(t=>{var e;re((e=C.selection,I((e=>{const t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return Wv(r,t[0])&&Kv(r,t[0])?t:[];{const e=Ne(t).filter(e=>Wv(r,e)).toArray(),n=Re(t).filter(e=>Kv(r,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(n)}})(e),Yv(e.dom))),e=>Eb(o,e,t,E))})}f=w,s=C,oe(Hv,f)&&re(Hv[f],e=>{e(s)})}}else v(x,t=a);tg(C,w,t,E)},kb=(e,t,r,n)=>{(n||e.selection.isEditable())&&xb(e,t,r,n)},_b=e=>oe(e,"vars"),Sb=e=>e.selection.getStart(),Nb=(t,e,r,n,o)=>he(e,e=>{e=t.formatter.matchNode(e,r,null!=o?o:{},n);return!D(e)},e=>!!xv(t,e,r)||!n&&j(t.formatter.matchNode(e,r,o,!0))),Rb=(e,t)=>{t=null!=t?t:Sb(e);return I(xm(e.dom,t),e=>G(e)&&!lo(e))},Ab=(o,a,e)=>{const s=Rb(o,a);ne(e,(e,n)=>{var t=e=>{const t=Nb(o,s,n,e.similar,_b(e)?e.vars:void 0),r=t.isSome();if(e.state.get()!==r){e.state.set(r);const o=t.getOr(a);_b(e)?e.callback(r,{node:o,format:n,parents:s}):re(e.callbacks,e=>e(r,{node:o,format:n,parents:s}))}};re([e.withSimilar,e.withoutSimilar],t),re(e.withVars,t)})},Tb=ae.explode,Ob=()=>{const o={};return{addFilter:(e,t)=>{re(Tb(e),e=>{oe(o,e)||(o[e]={name:e,callbacks:[]}),o[e].callbacks.push(t)})},getFilters:()=>Ue(o),removeFilter:(e,n)=>{re(Tb(e),e=>{var t,r;oe(o,e)&&(j(n)&&(t=o[e],0<(r=I(t.callbacks,e=>e!==n)).length)?t.callbacks=r:delete o[e])})}}},Bb=(e,t,r)=>{var n,o,a,s,i,l=Va();t.convert_fonts_to_spans&&(a=e,s=l,i=ae.explode(null!=(t=t.font_size_legacy_values)?t:""),a.addNodeFilter("font",e=>{re(e,e=>{const t=s.parse(e.attr("style")),r=e.attr("color"),n=e.attr("face"),o=e.attr("size");var a;r&&(t.color=r),n&&(t["font-family"]=n),o&&gt(o).each(e=>{t["font-size"]=i[e-1]}),e.name="span",e.attr("style",s.serialize(t)),a=e,re(["color","face","size"],e=>{a.attr(e,null)})})})),n=r,o=l,e.addNodeFilter("strike",e=>{const r="html4"!==n.type;re(e,e=>{var t;r?e.name="s":((t=o.parse(e.attr("style")))["text-decoration"]="line-through",e.name="span",e.attr("style",o.serialize(t)))})})},Pb=e=>{const[t,...r]=e.split(","),n=r.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const e=";base64"===o[2],t=e?(a=/([a-z0-9+\/=\s]+)/i.exec(n))?a[1]:"":decodeURIComponent(n);return ee.some({type:o[1],data:t,base64Encoded:e})}var a;return ee.none()},Db=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return ee.none()}var o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return ee.some(new Blob([o],{type:e}))},Lb=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var e;t(null==(e=r.error)?void 0:e.message)},r.readAsDataURL(n)});let Mb=0;const Ib=(e,n,o)=>Pb(e).bind(({data:e,type:t,base64Encoded:r})=>{if(n&&!r)return ee.none();{const n=r?e:btoa(e);return o(n,t)}}),Fb=(e,t,r)=>{t=e.create("blobid"+Mb++,t,r);return e.add(t),t},Ub=(r,e,t=!1)=>Ib(e,t,(t,e)=>ee.from(r.getByData(t,e)).orThunk(()=>Db(e,t).map(e=>Fb(r,e,t)))),zb=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,jb=e=>ee.from(e.match(zb)).bind(e=>Se(e,1)).map(e=>at(e,"www.")?e.substring(4):e),Hb=(e,t)=>{ee.from(e.attr("src")).bind(jb).forall(e=>!V(t,e))&&e.attr("sandbox","")},$b=(e,t)=>at(e,t+"/"),{entries:Vb,setPrototypeOf:qb,isFrozen:Wb,getPrototypeOf:Kb,getOwnPropertyDescriptor:Yb}=Object;let{freeze:Gb,seal:Xb,create:Zb}=Object,{apply:Qb,construct:Jb}="undefined"!=typeof Reflect&&Reflect;Qb=Qb||function(e,t,r){return e.apply(t,r)},Gb=Gb||function(e){return e},Xb=Xb||function(e){return e},Jb=Jb||function(e,t){return new e(...t)};function e0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Jb(Ug,t)}const t0=u0(Array.prototype.forEach),r0=u0(Array.prototype.pop),n0=u0(Array.prototype.push),o0=u0(String.prototype.toLowerCase),a0=u0(String.prototype.toString),s0=u0(String.prototype.match),i0=u0(String.prototype.replace),l0=u0(String.prototype.indexOf),d0=u0(String.prototype.trim),c0=u0(RegExp.prototype.test);Ug=TypeError;function u0(o){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Qb(o,e,r)}}function je(t,r,n){var e;n=null!=(e=n)?e:o0,qb&&qb(t,null);let o=r.length;for(;o--;){let e=r[o];if("string"==typeof e){const t=n(e);t!==e&&(Wb(r)||(r[o]=t),e=t)}t[e]=!0}return t}function m0(e){var t,r,n=Zb(null);for([t,r]of Vb(e))n[t]=r;return n}function g0(e,t){for(;null!==e;){var r=Yb(e,t);if(r){if(r.get)return u0(r.get);if("function"==typeof r.value)return u0(r.value)}e=Kb(e)}return function(e){return console.warn("fallback value for",e),null}}const f0=Gb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),p0=Gb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),h0=Gb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),v0=Gb(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),b0=Gb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),y0=Gb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C0=Gb(["#text"]),w0=Gb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),E0=Gb(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),x0=Gb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k0=Gb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_0=Xb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),S0=Xb(/<%[\w\W]*|[\w\W]*%>/gm),N0=Xb(/\${[\w\W]*}/gm),R0=Xb(/^data-[\-\w.\u00B7-\uFFFF]/),A0=Xb(/^aria-[\-\w]+$/),T0=Xb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O0=Xb(/^(?:\w+script|data):/i),B0=Xb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),P0=Xb(/^html$/i);var D0=Object.freeze({__proto__:null,MUSTACHE_EXPR:_0,ERB_EXPR:S0,TMPLIT_EXPR:N0,DATA_ATTR:R0,ARIA_ATTR:A0,IS_ALLOWED_URI:T0,IS_SCRIPT_OR_DATA:O0,ATTR_WHITESPACE:B0,DOCTYPE_NAME:P0});var L0,M0,I0,F0=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const l=e=>t(e);if(l.version="3.0.5",l.removed=[],!e||!e.document||9!==e.document.nodeType)return l.isSupported=!1,l;const d=e.document,L=d.currentScript;let o=e["document"];const{DocumentFragment:M,HTMLTemplateElement:I,Node:c,Element:F,NodeFilter:U,NamedNodeMap:z=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:j,DOMParser:H,trustedTypes:u}=e,r=F.prototype,$=g0(r,"cloneNode"),V=g0(r,"nextSibling"),q=g0(r,"childNodes"),W=g0(r,"parentNode");if("function"==typeof I){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let m,g="";const{implementation:K,createNodeIterator:Y,createDocumentFragment:G,getElementsByTagName:X}=o,Z=d["importNode"];let n={};l.isSupported="function"==typeof Vb&&"function"==typeof W&&K&&void 0!==K.createHTMLDocument;const{MUSTACHE_EXPR:Q,ERB_EXPR:J,TMPLIT_EXPR:ee,DATA_ATTR:te,ARIA_ATTR:re,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:oe}=D0;let ae=D0["IS_ALLOWED_URI"],f=null;const se=je({},[...f0,...p0,...h0,...b0,...C0]);let p=null;const ie=je({},[...w0,...E0,...x0,...k0]);let a=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),h=null,le=null,de=!0,ce=!0,ue=!1,me=!0,v=!1,b=!1,ge=!1,fe=!1,y=!1,C=!1,w=!1,pe=!0,he=!1,ve=!0,E=!1,s={},i=null;const be=je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ye=null;const Ce=je({},["audio","video","img","source","image","track"]);let we=null;const Ee=je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),x="http://www.w3.org/1998/Math/MathML",k="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xhtml";let S=_,xe,ke=null;const _e=je({},[x,k,_],a0);let N;const Se=["application/xhtml+xml","text/html"];let R,A=null;function Ne(e){return e instanceof RegExp||e instanceof Function}function Re(e){if(!A||A!==e){if(e=m0(e=e&&"object"==typeof e?e:{}),N=N=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,R="application/xhtml+xml"===N?a0:o0,f="ALLOWED_TAGS"in e?je({},e.ALLOWED_TAGS,R):se,p="ALLOWED_ATTR"in e?je({},e.ALLOWED_ATTR,R):ie,ke="ALLOWED_NAMESPACES"in e?je({},e.ALLOWED_NAMESPACES,a0):_e,we="ADD_URI_SAFE_ATTR"in e?je(m0(Ee),e.ADD_URI_SAFE_ATTR,R):Ee,ye="ADD_DATA_URI_TAGS"in e?je(m0(Ce),e.ADD_DATA_URI_TAGS,R):Ce,i="FORBID_CONTENTS"in e?je({},e.FORBID_CONTENTS,R):be,h="FORBID_TAGS"in e?je({},e.FORBID_TAGS,R):{},le="FORBID_ATTR"in e?je({},e.FORBID_ATTR,R):{},s="USE_PROFILES"in e&&e.USE_PROFILES,de=!1!==e.ALLOW_ARIA_ATTR,ce=!1!==e.ALLOW_DATA_ATTR,ue=e.ALLOW_UNKNOWN_PROTOCOLS||!1,me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,v=e.SAFE_FOR_TEMPLATES||!1,b=e.WHOLE_DOCUMENT||!1,y=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,w=e.RETURN_TRUSTED_TYPE||!1,fe=e.FORCE_BODY||!1,pe=!1!==e.SANITIZE_DOM,he=e.SANITIZE_NAMED_PROPS||!1,ve=!1!==e.KEEP_CONTENT,E=e.IN_PLACE||!1,ae=e.ALLOWED_URI_REGEXP||T0,S=e.NAMESPACE||_,a=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(a.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(a.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(a.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),v&&(ce=!1),C&&(y=!0),s&&(f=je({},[...C0]),p=[],!0===s.html&&(je(f,f0),je(p,w0)),!0===s.svg&&(je(f,p0),je(p,E0),je(p,k0)),!0===s.svgFilters&&(je(f,h0),je(p,E0),je(p,k0)),!0===s.mathMl)&&(je(f,b0),je(p,x0),je(p,k0)),e.ADD_TAGS&&je(f=f===se?m0(f):f,e.ADD_TAGS,R),e.ADD_ATTR&&je(p=p===ie?m0(p):p,e.ADD_ATTR,R),e.ADD_URI_SAFE_ATTR&&je(we,e.ADD_URI_SAFE_ATTR,R),e.FORBID_CONTENTS&&je(i=i===be?m0(i):i,e.FORBID_CONTENTS,R),ve&&(f["#text"]=!0),b&&je(f,["html","head","body"]),f.table&&(je(f,["tbody"]),delete h.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw e0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw e0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=e.TRUSTED_TYPES_POLICY,g=m.createHTML("")}else null!==(m=void 0===m?function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null;var n="data-tt-policy-suffix",t="dompurify"+((r=t&&t.hasAttribute(n)?t.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(u,L):m)&&"string"==typeof g&&(g=m.createHTML(""));Gb&&Gb(e),A=e}}function T(t){n0(l.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}}function Ae(e){let t,r;if(fe)e="<remove></remove>"+e;else{const t=s0(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===N&&S===_&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=m?m.createHTML(e):e;if(S===_)try{t=(new H).parseFromString(n,N)}catch(e){}if(!t||!t.documentElement){t=K.createDocument(S,"template",null);try{t.documentElement.innerHTML=xe?g:n}catch(e){}}return n=t.body||t.documentElement,e&&r&&n.insertBefore(o.createTextNode(r),n.childNodes[0]||null),S===_?X.call(t,b?"html":"body")[0]:b?t.documentElement:n}function Te(e){return Y.call(e.ownerDocument||e,e,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT,null,!1)}function O(e){return"object"==typeof c?e instanceof c:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Oe(t){let r;if(D("beforeSanitizeElements",t,null),!((e=t)instanceof j)||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof z&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore&&"function"==typeof e.hasChildNodes){var e=R(t.nodeName);if(D("uponSanitizeElement",t,{tagName:e,allowedTags:f}),!t.hasChildNodes()||O(t.firstElementChild)||O(t.content)&&O(t.content.firstElementChild)||!c0(/<[/\w]/g,t.innerHTML)||!c0(/<[/\w]/g,t.textContent)){if(f[e]&&!h[e])return(!(t instanceof F)||function(e){let t=W(e);t&&t.tagName||(t={namespaceURI:S,tagName:"template"});var r=o0(e.tagName),n=o0(t.tagName);return ke[e.namespaceURI]&&(e.namespaceURI===k?t.namespaceURI===_?"svg"===r:t.namespaceURI===x?"svg"===r&&("annotation-xml"===n||Me[n]):Boolean(B[r]):e.namespaceURI===x?t.namespaceURI===_?"math"===r:t.namespaceURI===k?"math"===r&&Ie[n]:Boolean(Ue[r]):e.namespaceURI===_?(t.namespaceURI!==k||Ie[n])&&(t.namespaceURI!==x||Me[n])&&!Ue[r]&&(Fe[r]||!B[r]):"application/xhtml+xml"===N&&ke[e.namespaceURI])}(t))&&("noscript"!==e&&"noembed"!==e&&"noframes"!==e||!c0(/<\/no(script|embed|frames)/i,t.innerHTML))?(v&&3===t.nodeType&&(r=t.textContent,r=i0(r,Q," "),r=i0(r,J," "),r=i0(r,ee," "),t.textContent!==r)&&(n0(l.removed,{element:t.cloneNode()}),t.textContent=r),D("afterSanitizeElements",t,null),!1):(T(t),!0);if(!h[e]&&Be(e)){if(a.tagNameCheck instanceof RegExp&&c0(a.tagNameCheck,e))return;if(a.tagNameCheck instanceof Function&&a.tagNameCheck(e))return}if(ve&&!i[e]){const r=W(t)||t.parentNode,l=q(t)||t.childNodes;if(l&&r)for(let e=l.length-1;0<=e;--e)r.insertBefore($(l[e],!0),V(t))}}}return T(t),1}function Be(e){return 0<e.indexOf("-")}function Pe(e){let t,r,n,o;D("beforeSanitizeAttributes",e,null);var a=e["attributes"];if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:p};for(o=a.length;o--;){var{name:i,namespaceURI:l}=t=a[o],d=r="value"===i?t.value:d0(t.value);if(n=R(i),s.attrName=n,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,D("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr)if(s.keepAttr)if(!me&&c0(/\/>/i,r))P(i,e);else{v&&(r=i0(r,Q," "),r=i0(r,J," "),r=i0(r,ee," "));var c=R(e.nodeName);if(ze(c,n,r)){if(!he||"id"!==n&&"name"!==n||(P(i,e),r="user-content-"+r),m&&"object"==typeof u&&"function"==typeof u.getAttributeType&&!l)switch(u.getAttributeType(c,n)){case"TrustedHTML":r=m.createHTML(r);break;case"TrustedScriptURL":r=m.createScriptURL(r)}if(r!==d)try{l?e.setAttributeNS(l,i,r):e.setAttribute(i,r)}catch(t){P(i,e)}}else P(i,e)}else P(i,e)}D("afterSanitizeAttributes",e,null)}}function De(e){var t,r=Te(e);for(D("beforeSanitizeShadowDOM",e,null);t=r.nextNode();)D("uponSanitizeShadowNode",t,null),Oe(t)||(t.content instanceof M&&De(t.content),Pe(t));D("afterSanitizeShadowDOM",e,null)}const Le=o.createElement("form"),Me=je({},["mi","mo","mn","ms","mtext"]),Ie=je({},["foreignobject","desc","title","annotation-xml"]),Fe=je({},["title","style","font","a","script"]),B=je({},p0),Ue=(je(B,h0),je(B,v0),je({},b0)),P=(je(Ue,y0),function(e,t){try{n0(l.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){n0(l.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!p[e])if(y||C)try{T(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}),D=function(e,t,r){n[e]&&t0(n[e],e=>{e.call(l,t,r,A)})},ze=function(e,t,r){if(pe&&("id"===t||"name"===t)&&(r in o||r in Le))return!1;if((!ce||le[t]||!c0(te,t))&&(!de||!c0(re,t)))if(!p[t]||le[t]){if(!(Be(e)&&(a.tagNameCheck instanceof RegExp&&c0(a.tagNameCheck,e)||a.tagNameCheck instanceof Function&&a.tagNameCheck(e))&&(a.attributeNameCheck instanceof RegExp&&c0(a.attributeNameCheck,t)||a.attributeNameCheck instanceof Function&&a.attributeNameCheck(t))||"is"===t&&a.allowCustomizedBuiltInElements&&(a.tagNameCheck instanceof RegExp&&c0(a.tagNameCheck,r)||a.tagNameCheck instanceof Function&&a.tagNameCheck(r))))return!1}else if(!we[t]&&!c0(ae,i0(r,oe,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==l0(r,"data:")||!ye[e])&&(!ue||c0(ne,i0(r,oe,"")))&&r)return!1;return!0};return l.sanitize=function(e){let t,r,n,o,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof(e=(xe=!e)?"\x3c!--\x3e":e)&&!O(e)){if("function"!=typeof e.toString)throw e0("toString is not a function");if("string"!=typeof(e=e.toString()))throw e0("dirty is not a string, aborting")}if(!l.isSupported)return e;if(ge||Re(a),l.removed=[],E="string"==typeof e?!1:E){if(e.nodeName){const t=R(e.nodeName);if(!f[t]||h[t])throw e0("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(r=(t=Ae("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?t=r:t.appendChild(r);else{if(!y&&!v&&!b&&-1===e.indexOf("<"))return m&&w?m.createHTML(e):e;if(!(t=Ae(e)))return y?null:w?g:""}t&&fe&&T(t.firstChild);for(var s=Te(E?e:t);n=s.nextNode();)Oe(n)||(n.content instanceof M&&De(n.content),Pe(n));if(E)return e;if(y){if(C)for(o=G.call(t.ownerDocument);t.firstChild;)o.appendChild(t.firstChild);else o=t;return o=p.shadowroot||p.shadowrootmode?Z.call(d,o,!0):o}let i=b?t.outerHTML:t.innerHTML;return b&&f["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&c0(P0,t.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+i),v&&(i=i0(i,Q," "),i=i0(i,J," "),i=i0(i,ee," ")),m&&w?m.createHTML(i):i},l.setConfig=function(e){Re(e),ge=!0},l.clearConfig=function(){A=null,ge=!1},l.isValidAttribute=function(e,t,r){A||Re({});e=R(e),t=R(t);return ze(e,t,r)},l.addHook=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],n0(n[e],t))},l.removeHook=function(e){if(n[e])return r0(n[e])},l.removeHooks=function(e){n[e]&&(n[e]=[])},l.removeAllHooks=function(){n={}},l}();const U0=ae.each,z0=ae.trim,j0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],H0={ftp:21,http:80,https:443,mailto:25},$0=["img","video"],V0=(e,t,r)=>{t=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(t)||!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,r=r,(j(e)?!e:!j(r)||!V($0,r))&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t)))};class q0{static parseDataUri(e){let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}}static isDomSafe(e,t,r={}){return!!r.allow_script_urls||(e=ba.decode(e).replace(/[\s\u0000-\u001F]+/g,""),!V0(r,e,t))}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!=(t=e.href)?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,t={}){this.path="",this.directory="",e=z0(e);const r=(this.settings=t).base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{const o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=r?r.path:new q0(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&U0(j0,(e,t)=>{let r=a[t];r=r&&r.replace(/\(mce_at\)/g,"@@"),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}setPath(e){e=/^(.*?)\/?(\w+)?$/.exec(e);e&&(this.path=e[0],this.directory=e[1],this.file=e[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;e=new q0(e,{base_uri:this});if("mce_host"!==e.host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),r=e.getURI();if(t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r)return t;let n=this.toRelPath(this.path,e.path);return e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n}toAbsolute(e,t){e=new q0(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?H0[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r,n,o=0,a="";var s=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(s.length>=i.length)for(r=0,n=s.length;r<n;r++)if(r>=i.length||s[r]!==i[r]){o=r+1;break}if(s.length<i.length)for(r=0,n=i.length;r<n;r++)if(r>=s.length||s[r]!==i[r]){o=r+1;break}if(1===o)return t;for(r=0,n=s.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=i.length;r<n;r++)a+=r!==o-1?"/"+i[r]:i[r];return a}toAbsPath(e,t){let r=0;const n=/\/$/.test(t)?"/":"",o=e.split("/"),a=t.split("/"),s=[];U0(o,e=>{e&&s.push(e)});var i=[];for(let e=a.length-1;0<=e;e--)0!==a[e].length&&"."!==a[e]&&(".."!==a[e]?0<r?r--:i.push(a[e]):r++);e=s.length-r;let l;return 0!==(l=e<=0?Ee(i).join("/"):s.slice(0,e).join("/")+"/"+Ee(i).join("/")).indexOf("/")&&(l="/"+l),n&&l.lastIndexOf("/")!==l.length-1&&(l+=n),l}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const W0=ae.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),K0="data-mce-type";let Y0=0;const G0=(e,t,r,n,o)=>{var a=t.validate,s=r.getSpecialElements(),t=(8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!=(t=e.nodeValue)?t:"")&&(e.nodeValue=" "+e.nodeValue),null!=(t=null==o?void 0:o.tagName)?t:e.nodeName.toLowerCase());if("html"!==n&&r.isValid(n))j(o)&&(o.allowedTags[t]=!0);else if(1===e.nodeType&&"body"!==t){const i=K(e),l=ur(i,K0),d=dr(i,"data-mce-bogus");!l&&Z(d)?("all"===d?Y:Rn)(i):(n=r.getElementRule(t),!a||n?(j(o)&&(o.allowedTags[t]=!0),a&&n&&!l&&(re(null!=(e=n.attributesForced)?e:[],e=>{ir(i,e.name,"{$uid}"===e.value?"mce_"+Y0++:e.value)}),re(null!=(r=n.attributesDefault)?r:[],e=>{ur(i,e.name)||ir(i,e.name,"{$uid}"===e.value?"mce_"+Y0++:e.value)}),(!n.attributesRequired||q(n.attributesRequired,e=>ur(i,e)))&&(!n.removeEmptyAttrs||null!=(o=i.dom.attributes)&&0!==o.length)?n.outputName&&n.outputName!==t&&(a=i,e=((e,t)=>{t=_r(t),e=gr(e);return lr(t,e),t})(a,n.outputName),En(a,e),r=jr(a),Sn(e,r),Y(a)):Rn(i))):(oe(s,t)?Y:Rn)(i))}},X0=(e,t,r,n,o,a)=>"html"!==r&&!Do(n)||!(o in W0&&V0(e,a,n))&&(!e.validate||t.isValid(n,o)||at(o,"data-")||at(o,"aria-")),Z0=(e,t)=>e.hasAttribute(K0)&&("id"===t||"class"===t||"style"===t),Q0=(e,t)=>e in t.getBoolAttrs(),J0=(l,d,c)=>{var e=F0();return e.addHook("uponSanitizeElement",(e,t)=>{G0(e,l,d,c.track(e),t)}),e.addHook("uponSanitizeAttribute",(e,t)=>{var r=l,n=d,o=c.current(),a=e.tagName.toLowerCase(),{attrName:s,attrValue:i}=t;t.keepAttr=X0(r,n,o,a,s,i),t.keepAttr?(t.allowedAttributes[s]=!0,Q0(s,n)&&(t.attrValue=s),r.allow_svg_data_urls&&at(i,"data:image/svg+xml")&&(t.forceKeepAttr=!0)):Z0(e,s)&&(t.forceKeepAttr=!0)}),e},ey=e=>{const t=Mo(e);if("svg"===t){const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>"xlink:"+e),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};F0().sanitize(e,r)}else{if("math"!==t)throw new Error("Not a namespace element");{const t={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};F0().sanitize(e,t)}}},ty=ae.makeMap,ry=ae.extend,ny=(r,e,n,o)=>{const a=r.name,s=a in n&&"title"!==a&&"textarea"!==a&&"noscript"!==a,i=e.childNodes;for(let e=0,t=i.length;e<t;e++){const a=i[e],l=new Mf(a.nodeName.toLowerCase(),a.nodeType);if(G(a)){const r=a.attributes;for(let e=0,t=r.length;e<t;e++){const n=r[e];l.attr(n.name,n.value)}Do(l.name)&&(o(a),l.value=a.innerHTML)}else X(a)?(l.value=a.data,s&&(l.raw=!0)):(po(a)||go(a)||fo(a))&&(l.value=a.data);Do(l.name)||ny(l,a,n,o),r.append(l)}},oy=(e={},S=La())=>{const t=Ob(),r=Ob(),N={validate:!0,root_name:"body",sanitize:!0,...e},R=new DOMParser,A=((u,m)=>{const g=(()=>{const e=Bo(),r=()=>e.get().map(Mo).getOr("html");return{track:t=>(Lo(t)?e.set(t):e.get().exists(e=>!e.contains(t))&&e.clear(),r()),current:r,reset:()=>{e.clear()}}})();if(u.sanitize){const n=J0(u,m,g);return{sanitizeHtmlElement:(e,t)=>{var r;n.sanitize(e,(e=u,(r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}).PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r)),n.removed=[],g.reset()},sanitizeNamespaceElement:ey}}return{sanitizeHtmlElement:(e,t)=>{for(var r,n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);r=n.nextNode();){const e=g.track(r);if(G0(r,u,m,e),G(r)){l=void 0;d=void 0;c=void 0;var o=r;var a=u;var s=m;var i=e;var l=o["attributes"];for(let e=l.length-1;0<=e;e--){var d=l[e],c=d.name,d=d.value;X0(a,s,i,o.tagName.toLowerCase(),c,d)||Z0(o,c)?Q0(c,s)&&o.setAttribute(c,c):o.removeAttribute(c)}}}g.reset()},sanitizeNamespaceElement:$}})(N,S),n=t.addFilter,T=t.getFilters,o=t.removeFilter,a=r.addFilter,O=r.getFilters,s=r.removeFilter,B=(e,t)=>{var r=Z(t.attr(K0)),e=1===t.type&&!oe(e,t.name)&&!Xo(S,t)&&!Do(t.name);return 3===t.type||e&&!r},i={schema:S,addAttributeFilter:a,getAttributeFilters:O,removeAttributeFilter:s,addNodeFilter:n,getNodeFilters:T,removeNodeFilter:o,parse:(e,t={})=>{var r,n=N.validate,o=null!=(o=t.context)?o:N.root_name,e=([e,h,r="html"]=[e,o,t.format],v="xhtml"===r?"application/xhtml+xml":"text/html",h=(b=oe(S.getSpecialElements(),h.toLowerCase()))?`<${h}>${e}</${h}>`:e,r=R.parseFromString("xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${h}</body></html>`:/^[\s]*<head/i.test(e)||/^[\s]*<html/i.test(e)||/^[\s]*<!DOCTYPE/i.test(e)?`<html>${h}</html>`:`<body>${h}</body>`,v).body,A.sanitizeHtmlElement(r,v),b?r.firstChild:r);Vo(S,e);const a=new Mf(o,11),[s,i]=(ny(a,e,S.getSpecialElements(),A.sanitizeNamespaceElement),e.innerHTML="",((r,n,o,a)=>{const s=o.validate,i=n.getNonEmptyElements(),l=n.getWhitespaceElements(),t=ry(ty("script,style,head,html,body,title,meta,param"),n.getBlockElements()),d=Pa(n),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,g=e=>{let t=e.parent;for(;j(t);){if(t.name in l)return!0;t=t.parent}return!1},f=e=>e.name in t||Xo(n,e)||Do(e.name)&&e.parent===r,p=(e,t)=>{t=t?e.prev:e.next;return!j(t)&&!z(e.parent)&&f(e.parent)&&(e.parent!==r||!0===a.isRootContent)};return[t=>{var r,n;if(3===t.type&&!g(t)){let e=null!=(r=t.value)?r:"";e=e.replace(c," "),r=t.prev,n=f,0===(e=j(r)&&(n(r)||"br"===r.name)||p(t,!0)?e.replace(u,""):e).length||" "===e&&t.prev&&8===t.prev.type&&t.next&&8===t.next.type?t.remove():t.value=e}},t=>{var r,e;if(1===t.type){const r=n.getElementRule(t.name);if(s&&r){const s=sv(n,i,l,t);r.paddInEmptyBlock&&s&&(()=>{let e=t;for(;j(e);){if(e.name in d)return sv(n,i,l,e);e=e.parent}return!1})()?ov(o,a,f,t):r.removeEmpty&&s?f(t)?t.remove():t.unwrap():r.paddEmpty&&(s||(e=t,av(e,"#text")&&(null==(e=null==e?void 0:e.firstChild)?void 0:e.value)===Xn))&&ov(o,a,f,t)}}else if(3===t.type&&!g(t)){let e=null!=(r=t.value)?r:"";0===(e=t.next&&f(t.next)||p(t,!1)?e.replace(m,""):e).length?t.remove():t.value=e}}]})(a,S,N,t)),l=[],d=n?e=>{var t;e=e,t=l,cv(S,e)&&t.push(e)}:$,c={nodes:{},attributes:{}},u=e=>tv(T(),O(),e,c);var m=a,g=[s,u],f=[i,d],p=[];for(let e=m,t=e;e;e=(t=e).walk()){const E=e;re(g,e=>e(E)),z(E.parent)&&E!==m?e=t:p.push(E)}for(let e=p.length-1;0<=e;e--){const g=p[e];re(f,e=>e(g))}if(l.reverse(),n&&0<l.length)if(t.context){const{pass:e,fail:o}=ge(l,e=>e.parent===a);dv(o,S,a,u),t.invalid=0<e.length}else dv(l,S,a,u);h=N;var h,v,b=!1===(v=null!=(v=t.forced_root_block)?v:h.forced_root_block)?"":!0===v?"p":v;if(b&&("body"===a.name||t.isRootContent)){var y=a,C=b;const x=ry(ty("script,style,head,html,body,title,meta,param"),S.getBlockElements()),k=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/;let r=y.firstChild,e=null;var w=e=>{var t;e&&((r=e.firstChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(k,"")),r=e.lastChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(_,""))};if(S.isValidChild(y.name,C.toLowerCase())){for(;r;){const S=r.next;B(x,r)?(e||((e=new Mf(C,1)).attr(N.forced_root_block_attrs),y.insert(e,r)),e.append(r)):(w(e),e=null),r=S}w(e)}}return t.invalid||rv(c,t),a}};{var l=N,d=(e=i).schema;e.addAttributeFilter("href",e=>{let t=e.length;if(!l.allow_unsafe_link_target)for(;t--;){const l=e[t];"a"===l.name&&"_blank"===l.attr("target")&&l.attr("rel",(e=>{e=e?ae.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(e=>0<e.length).concat(["noopener"]).sort().join(" ")})(l.attr("rel")))}}),l.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,r,n,o,a=e.length;for(;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r}),l.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,r,n=e.length;for(;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new Mf("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const u=d.getValidClasses();l.validate&&u&&e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var o=e[t],a=null!=(a=o.attr("class"))?a:"",s=ae.explode(a," ");let n="";for(let r=0;r<s.length;r++){const a=s[r];let e=!1,t=u["*"];t&&t[a]&&(e=!0),t=u[o.name],(e=!e&&t&&t[a]?!0:e)&&(n&&(n+=" "),n+=a)}n.length||(n=null),o.attr("class",n)}});{var c=l;const f=c["blob_cache"];if(f){const c=t=>{var e,r=t.attr("src");(e=t).attr("src")===F.transparentSrc||j(e.attr("data-mce-placeholder"))||(e=t,j(e.attr("data-mce-bogus")))||z(r)||Ub(f,r,!0).each(e=>{t.attr("src",e.blobUri())})};e.addAttributeFilter("src",e=>re(e,c))}}const m=null!=(d=l.sandbox_iframes)&&d,g=Oe(null!=(c=l.sandbox_iframes_exclusions)?c:[]);l.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>re(e,e=>{var t,r,n,o,a,s;e.replace(([{type:e,src:t,width:r,height:n},o,a]=[{type:e.attr("type"),src:"object"===e.name?e.attr("data"):e.attr("src"),width:e.attr("width"),height:e.attr("height")},m,g],e=e,e=D(e)?"iframe":$b(e,"image")?"img":$b(e,"video")?"video":$b(e,"audio")?"audio":"iframe",(s=new Mf(e,1)).attr("audio"==e?{src:t}:{src:t,width:r,height:n}),"audio"!=e&&"video"!=e||s.attr("controls",""),"iframe"==e&&o&&Hb(s,a),s))})),m&&e.addNodeFilter("iframe",e=>re(e,e=>Hb(e,g)))}return d=i,c=N,e=S,c.inline_styles&&Bb(d,c,e),i},ay=(e,t,r)=>{n=e;var n=bv(n)?ep({validate:!1}).serialize(n):n,o=t(n);if(o.isDefaultPrevented()||!bv(e))return o;if(o.content===n)return{...o,content:e};{const t=oy({validate:!1,forced_root_block:!1,...r}).parse(o.content,{context:e.name});return{...o,content:t}}},sy=e=>({sanitize:hc(e),sandbox_iframes:Ec(e),sandbox_iframes_exclusions:xc(e)}),iy=(e,t)=>{return!t.no_events&&(t=e.dispatch("BeforeGetContent",t)).isDefaultPrevented()?bl.error(og(e,{content:"",...t}).content):bl.value(t)},ly=(t,e,r)=>{return r.no_events?e:ay(e,e=>og(t,{...r,content:e}),sy(t)).content},dy=(r,n)=>{var e;return n.no_events?bl.value(n):(e=ay(n.content,e=>{return t=r,e={...n,content:e},t.dispatch("BeforeSetContent",e);var t},sy(r))).isDefaultPrevented()?(ng(r,e),bl.error(void 0)):bl.value(e)},cy=(e,t,r)=>{r.no_events||ng(e,{...r,content:t})},uy=(e,t,r)=>({element:e,width:t,rows:r}),my=(e,t)=>({element:e,cells:t}),gy=(e,t)=>cr(e,t).bind(gt).getOr(1),fy=e=>pe(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),py=(e,r)=>{var n=e.rows;for(let t=0;t<n.length;t++){var o=n[t].cells;for(let e=0;e<o.length;e++)if(U(o[e],r))return ee.some({x:e,y:t})}return ee.none()},hy=(e,t,r,n,o)=>{var a=[],s=e.rows;for(let e=r;e<=o;e++){const r=s[e].cells,o=t<n?r.slice(t,n+1):r.slice(n,t+1);a.push(my(s[e].element,o))}return a},vy=(e,t,r)=>{var n,o,a,s=K(t.commonAncestorContainer),e=Ep(s,e),i=I(e,e=>r.isWrapper(W(e))),e=(o=e,a=t,ve(o,e=>"li"===W(e)&&am(e,a)).fold(J([]),e=>{return t=o,ve(t,e=>"ul"===W(e)||"ol"===W(e)).map(e=>{var t=_r(W(e)),e=Ie(yn(e),(e,t)=>at(t,"list-style"));return pn(t,e),[_r("li"),t]}).getOr([]);var t})),t=i.concat(e.length?e:(n=s,$s(n)?Dr(n).filter(Hs).fold(J([]),e=>[n,e]):Hs(n)?[n]:[]));return te(t,Bs)},by=()=>kg([]),yy=(e,o)=>{return e=e,t=o[0],sn(t,"table",C(U,e)).bind(e=>{var s,t,r=o[0],n=o[o.length-1],e=(e=>{const m=uy(Bs(e),0,[]);return re(Vn(e,"tr"),(c,u)=>{re(Vn(c,"td,th"),(e,t)=>{var r=m,n=((e,t,r)=>{for(;((e,t,r)=>{e=e.rows;return!!(e[r]?e[r].cells:[])[t]})(e,t,r);)t++;return t})(m,t,u),o=u,a=c,s=e,i=gy(s,"rowspan"),l=gy(s,"colspan"),d=r.rows;for(let t=o;t<o+i;t++){d[t]||(d[t]=my(Ps(a),[]));for(let e=n;e<n+l;e++)d[t].cells[e]=t===o&&e===n?s:Bs(s)}})}),uy(m.element,fy(m.rows),m.rows)})(e);return s=e,e=r,t=n,py(s,e).bind(a=>py(s,t).map(e=>{return t=s,r=a.x,n=a.y,o=e.x,e=e.y,r=n<e?hy(t,r,n,o,e):hy(t,r,e,o,n),uy(t.element,fy(r),r);var t,r,n,o})).map(e=>{return kg([(r=e=e=e,r=te(r.rows,e=>{var t=te(e.cells,e=>{e=Ps(e);return mr(e,"colspan"),mr(e,"rowspan"),e}),e=Bs(e.element);return Sn(e,t),e}),e=Bs(e.element),t=_r("tbody"),Sn(t,r),kn(e,t),e)]);var t,r})}).getOrThunk(by);var t},Cy=(e,t)=>0<=t&&t<e.length&&Zu(e.charAt(t)),wy=e=>Zs(e.innerText),Ey=e=>G(e)?e.outerHTML:X(e)?ba.encodeRaw(e.data,!1):po(e)?"\x3c!--"+e.data+"--\x3e":"",xy=(e,t)=>{{e=((g,f)=>{const e=g.length+f.length+2,p=new Array(e),h=new Array(e),i=(r,n,o,a,s)=>{var t=l(r,n,o,a);if(null===t||t.start===n&&t.diag===n-a||t.end===r&&t.diag===r-o){let e=r,t=o;for(;e<n||t<a;)e<n&&t<a&&g[e]===f[t]?(s.push([0,g[e]]),++e,++t):a-o<n-r?(s.push([2,g[e]]),++e):(s.push([1,f[t]]),++t)}else{i(r,t.start,o,t.start-t.diag,s);for(let e=t.start;e<t.end;++e)s.push([0,g[e]]);i(t.end,n,t.end-t.diag,a,s)}},v=(e,t,r,n)=>{let o=e;for(;o-t<n&&o<r&&g[o]===f[o-t];)++o;return{start:e,end:o,diag:t}},l=(a,s,i,l)=>{var d=s-a,c=l-i;if(0!=d&&0!=c){var u=d-c,c=c+d,m=(c%2==0?c:1+c)/2;let e,t,r,n,o;for(p[1+m]=a,h[1+m]=s+1,e=0;e<=m;++e){for(t=-e;t<=e;t+=2){for(r=t+m,t===-e||t!==e&&p[r-1]<p[r+1]?p[r]=p[r+1]:p[r]=p[r-1]+1,n=p[r],o=n-a+i-t;n<s&&o<l&&g[n]===f[o];)p[r]=++n,++o;if(u%2!=0&&u-e<=t&&t<=u+e&&h[r-u]<=p[r])return v(h[r-u],t+a-i,s,l)}for(t=u-e;t<=u+e;t+=2){for(r=t+m-u,t===u-e||t!==u+e&&h[r+1]<=h[r-1]?h[r]=h[r+1]-1:h[r]=h[r-1],n=h[r]-1,o=n-a+i-t;n>=a&&o>=i&&g[n]===f[o];)h[r]=n--,o--;if(u%2==0&&-e<=t&&t<=e&&h[r]<=p[r+u])return v(h[r],t+a-i,s,l)}}}return null},t=[];return i(0,g.length,0,f.length,t),t})(te(Ae(t.childNodes),Ey),e);var s=t;let a=0;re(e,e=>{if(0===e[0])a++;else if(1===e[0]){var t=s,r=e[1],n=a,o=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(r);if(t.hasChildNodes()&&n<t.childNodes.length){const r=t.childNodes[n];t.insertBefore(o,r)}else t.appendChild(o);a++}else 2===e[0]&&(r=s,n=a,r.hasChildNodes())&&n<r.childNodes.length&&(n=r.childNodes[n],r.removeChild(n))})}return t},ky=Ze(()=>document.implementation.createHTMLDocument("undo")),_y=e=>{var t=e.serializer.getTempAttrs(),e=Gf(e.getBody(),t);return null!==e.querySelector("iframe")?{type:"fragmented",fragments:I(te(Ae(e.childNodes),d(Zs,Ey)),e=>0<e.length),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Zs(e.innerHTML),bookmark:null,beforeBookmark:null}},Sy=(e,t,r)=>{r=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?xy(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!j(r)||!zu(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Ny=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Ry=e=>{var t=_r("body",ky());return On(t,Ny(e)),re(Vn(t,"*[data-mce-bogus]"),Rn),Tn(t)},Ay=(e,t)=>{return!(!e||!t||(r=e,n=t,Ny(r)!==Ny(n)&&(r=e,n=t,Ry(r)!==Ry(n))));var r,n},Ty=e=>0===e.get(),Oy=(e,t,r)=>{Ty(r)&&(e.typing=t)},By=(e,t)=>{e.typing&&(Oy(e,!1,t),e.add())},Py=f=>({init:{bindEvents:$},undoManager:{beforeChange:(e,t)=>{var r;r=f,e=e,t=t,Ty(e)&&t.set(pl(r.selection))},add:(e,t,r,n,o,a)=>{var s=f,i=e,l=t,e=r,t=n,r=o,n=a,o=_y(s),r=ae.extend(r||{},o);if(!Ty(e)||s.removed)return null;if(o=i.data[l.get()],s.dispatch("BeforeAddUndo",{level:r,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&Ay(o,r))return null;if(i.data[l.get()]&&t.get().each(e=>{i.data[l.get()].beforeBookmark=e}),(e=Pd(s))&&i.data.length>e){for(let e=0;e<i.data.length-1;e++)i.data[e]=i.data[e+1];i.data.length--,l.set(i.data.length)}return r.bookmark=pl(s.selection),l.get()<i.data.length-1&&(i.data.length=l.get()+1),i.data.push(r),l.set(i.data.length-1),t={level:r,lastLevel:o,originalEvent:n},0<l.get()?(s.setDirty(!0),s.dispatch("AddUndo",t),s.dispatch("change",t)):s.dispatch("AddUndo",t),r},undo:(t,r,n)=>{{var o=f;let e;return t.typing&&(t.add(),t.typing=!1,Oy(t,!1,r)),0<n.get()&&(n.set(n.get()-1),e=t.data[n.get()],Sy(o,e,!0),o.setDirty(!0),o.dispatch("Undo",{level:e})),e}},redo:(t,r)=>{{var n=f;let e;return t.get()<r.length-1&&(t.set(t.get()+1),e=r[t.get()],Sy(n,e,!1),n.setDirty(!0),n.dispatch("Redo",{level:e})),e}},clear:(e,t)=>{return r=f,t=t,(e=e).data=[],t.set(0),e.typing=!1,void r.dispatch("ClearUndos");var r},reset:e=>{(e=e).clear(),e.add()},hasUndo:(e,t)=>{return r=f,e=e,0<t.get()||e.typing&&e.data[0]&&!Ay(_y(r),e.data[0]);var r},hasRedo:(e,t)=>{return e=e,t.get()<e.data.length-1&&!e.typing},transact:(e,t,r)=>{return e=e,t=t,r=r,By(e,t),e.beforeChange(),e.ignore(r),e.add()},ignore:(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:(e,t,r,n)=>{var o=f,a=r,r=n;if(e.transact(a)){const a=e.data[t.get()].bookmark,s=e.data[t.get()-1];Sy(o,s,!0),e.transact(r)&&(e.data[t.get()-1].beforeBookmark=a)}}},formatter:{match:(e,t,r,n)=>Rv(f,e,t,r,n),matchAll:(e,t)=>{{var n=f,o=e,a=t;const s=[],i={},r=n.selection.getStart();return n.dom.getParent(r,t=>{for(let e=0;e<o.length;e++){var r=o[e];!i[r]&&Nv(n,t,r,a)&&(i[r]=!0,s.push(r))}},n.dom.getRoot()),s}},matchNode:(e,t,r,n)=>Nv(f,e,t,r,n),canApply:e=>{var t=f,r=e,n=t.formatter.get(r),o=t.dom;if(n&&t.selection.isEditable()){const r=t.selection.getStart(),a=xm(o,r);for(let e=n.length-1;0<=e;e--){const r=n[e];if(!Sm(r))return!0;for(let e=a.length-1;0<=e;e--)if(o.is(a[e],r.selector))return!0}}return!1},closest:e=>{{var n=f,t=e;const r=e=>U(e,K(n.getBody()));return ee.from(n.selection.getStart(!0)).bind(e=>wv(K(e),r=>Te(t,e=>{return t=r,e=e,Nv(n,t.dom,e)?ee.some(e):ee.none();var t}),r)).getOrNull()}},apply:(e,t,r)=>kb(f,e,t,r),remove:(e,t,r,n)=>bb(f,e,t,r,n),toggle:(e,t,r)=>{var n,o;e=e,t=t,r=r,(o=(n=f).formatter.get(e))&&(!Rv(n,e,t,r)||"toggle"in o[0]&&!o[0].toggle?kb:bb)(n,e,t,r)},formatChanged:(e,t,r,n,o)=>{var a=f,s=e,i=t,l=r,e=n,t=o;{var d=a,r=i,c=l,u=e,m=t;const g=(a=s).get();re(r.split(","),t=>{var e=O(g,t).getOrThunk(()=>{var e={withSimilar:{state:Oo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Oo(!1),similar:!1,callbacks:[]},withVars:[]};return g[t]=e}),r=()=>{var e=Rb(d);return Nb(d,e,t,u,m).isSome()};if(D(m)){const d=u?e.withSimilar:e.withoutSimilar;d.callbacks.push(c),1===d.callbacks.length&&d.state.set(r())}else e.withVars.push({state:Oo(r()),similar:u,vars:m,callback:c})}),a.set(g)}return{unbind:()=>{{var e=s,t=i,r=l;const n=e.get();re(t.split(","),t=>O(n,t).each(e=>{n[t]={withSimilar:{...e.withSimilar,callbacks:I(e.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...e.withoutSimilar,callbacks:I(e.withoutSimilar.callbacks,e=>e!==r)},withVars:I(e.withVars,e=>e.callback!==r)}})),e.set(n)}}}}},editor:{getContent:e=>{return s=f,i=e,ee.from(s.getBody()).fold(J("tree"===i.format?new Mf("body",11):""),e=>{return t=s,e=e,a="raw"===(r=i).format?ae.trim(Zs(Gf(e,t.serializer.getTempAttrs()).innerHTML)):"text"===r.format?(n=e,o=(a=t).getDoc(),a=Kr(K(a.getBody())),o=_r("div",o),ir(o,"data-mce-bogus","all"),pn(o,{position:"fixed",left:"-9999999px",top:"0"}),On(o,n.innerHTML),Xf(o),Zf(o),n=a,a=Wr(n)?n:K(Br(n).dom.body),kn(a,o),n=Zs(o.dom.innerText),Y(o),n):"tree"===r.format?t.serializer.serialize(e,r):((e,t)=>{e=zl(e),e=new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${e}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(e,"")})(t,t.serializer.serialize(e,r)),"text"!==r.format&&!Ws(K(e))&&Z(a)?ae.trim(a):a;var t,r,n,o,a});var s,i},setContent:(e,t)=>{return i=f,l=e,d=t,ee.from(i.getBody()).map(e=>{if(bv(l))return t=i,r=e,n=l,o=d,nv(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n),a=ep({validate:!1},t.schema).serialize(n),r=Zs(Ws(K(r))?a:ae.trim(a)),yv(t,r,o.no_selection),{content:n,html:r};a=i,t=e,o=l,n=d;if(0===(o=Zs(o)).length||/^\s+$/.test(o))return r='<br data-mce-bogus="1">',"TABLE"===t.nodeName?o="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+r+"</li>"),s=zl(a),o=a.schema.isValidChild(t.nodeName.toLowerCase(),s.toLowerCase())?(o=r,a.dom.createHTML(s,jl(a),o)):o||r,yv(a,o,n.no_selection),{content:o,html:o};"raw"!==n.format&&(o=ep({validate:!1},a.schema).serialize(a.parser.parse(o,{isRootContent:!0,insert:!0})));var t,r,n,o,a,s=Ws(K(t))?o:ae.trim(o);return yv(a,s,n.no_selection),{content:s,html:s}}).getOr({content:l,html:bv(d.content)?"":d.content});var i,l,d},insertContent:(e,t)=>vv(f,e,t),addVisual:e=>{{var n=f;const o=n.dom,t=j(e)?e:n.getBody();re(o.select("table,a",t),e=>{switch(e.nodeName){case"TABLE":var t=Hd(n),r=o.getAttrib(e,"border");r&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=$d(n),r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),n.dispatch("VisualAid",{element:e,hasVisual:n.hasVisual})}}},selection:{getContent:(e,t)=>{return[m,t={}]=[f,t],e=e,t={...t,format:e,get:!0,selection:!0,getInner:!0},iy(m,t).fold(g,e=>{t=m;var t,r,i,n,o,a,s,l,d,c,u="text"===(r=e).format?(i=t,ee.from(i.selection.getRng()).map(e=>{const t=ee.from(i.dom.getParent(e.commonAncestorContainer,i.dom.isBlock)),r=i.getBody(),n=t.map(e=>e.nodeName).getOr("div").toLowerCase(),o=K(e.cloneContents());Xf(o),Zf(o);var e=i.dom.add(r,n,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},o.dom),a=wy(e),s=Zs(null!=(s=e.textContent)?s:"");if(i.dom.remove(e),Cy(s,0)||Cy(s,s.length-1)){const i=t.getOr(r),e=wy(i),s=e.indexOf(a);return-1===s?a:(Cy(e,s-1)?" ":"")+a+(Cy(e,s+a.length)?" ":"")}return a}).getOr("")):(o=r,s=(n=t).selection.getRng(),l=n.dom.create("body"),d=n.selection.getSel(),d=Bf(n,Ju(d)),(c=o.contextual?(a=K(n.getBody()),d=d,c=n.schema,(0<(u=em(d,a)).length?yy(a,u):(u=a,a=c,0<(c=d).length&&c[0].collapsed?by():(u=u,c=c[0],a=a,d=K(c.cloneContents()),u=vy(u,c,a),d=pe(u,(e,t)=>(kn(t,e),t),d),0<u.length?kg([d]):d))).dom):s.cloneContents())&&l.appendChild(c),a=n.selection.serializer.serialize(l,o),"tree"!==r.format&&t.selection.isCollapsed()?"":a);return ly(m,u,e)});var m}},autocompleter:{addDecoration:$,removeDecoration:$},raw:{getModel:()=>ee.none()}}),Dy=e=>oe(e.plugins,"rtc"),Ly=e=>e.rtcInstance||Py(e),My=e=>{e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Iy=e=>My(e).init.bindEvents(),Fy=e=>0===e.dom.length?(Y(e),ee.none()):ee.some(e),Uy=(e,t,i,l,d)=>{e.bind(s=>((l?Jp:Qp)(s.dom,l?s.dom.length:0,d),t.filter(rr).map(e=>{var t,r,n,o,a;t=i,r=l,n=d,o=s.dom,e=e.dom,a=(r?o:e).length,r?(eh(o,e,n,!1,!r),t.setStart(e,a)):(eh(e,o,n,!1,!r),t.setEnd(e,a))}))).orThunk(()=>{var e;return e=l,t.filter(e=>Qm.isBookmarkNode(e.dom)).bind(e?Fr:Ir).or(t).filter(rr).map(e=>{var r,n,o;r=e,n=l,o=d,Dr(r).each(e=>{var t=r.dom;n&&Vp(e,ie(t,0),o)?Qp(t,0,o):!n&&qp(e,ie(t,t.length),o)&&Jp(t,t.length,o)})})})},zy=(e,t,r)=>{var n;oe(e,t)&&(0===(n=I(e[t],e=>e!==r)).length?delete e[t]:e[t]=n)},jy=e=>!(!e||!e.ownerDocument)&&Tr(K(e.ownerDocument),K(e)),Hy=(d,n,e,i)=>{let o,a;const r=((r,n)=>{let a,s;const i=(t,e)=>ve(e,e=>r.is(e,t)),l=e=>r.getParents(e,void 0,r.getRoot());return{selectorChangedWithUnbind:(e,t)=>(a||(a={},s={},n.on("NodeChange",e=>{const r=e.element,n=l(r),o={};ne(a,(e,r)=>{i(r,n).each(t=>{s[r]||(re(e,e=>{e(!0,{node:t,selector:r,parents:n})}),s[r]=e),o[r]=e})}),ne(s,(e,t)=>{o[t]||(delete s[t],re(e,e=>{e(!1,{node:r,selector:t,parents:n})}))})})),a[e]||(a[e]=[]),a[e].push(t),i(e,l(n.selection.getStart())).each(()=>{s[e]=a[e]}),{unbind:()=>{zy(a,e,t),zy(s,e,t)}})}})(d,i)["selectorChangedWithUnbind"],t=(e,t)=>{var d;[d,t={}]=[i,t],e=e,t={format:"html",...t,set:!0,selection:!0,content:e},dy(d,t).each(e=>{i=d;var t,r,n,o,a,s,i="raw"!==(t=e).format?(l=i.selection.getRng(),l=(l=i.dom.getParent(l.commonAncestorContainer,i.dom.isBlock))?{context:l.nodeName.toLowerCase()}:{},l=i.parser.parse(t.content,{forced_root_block:!1,...l,...t}),ep({validate:!1},i.schema).serialize(l)):t.content,l=d.selection.getRng();r=(t=l).createContextualFragment(i),n=d.schema,o=ee.from(r.firstChild).map(K),a=ee.from(r.lastChild).map(K),t.deleteContents(),t.insertNode(r),r=o.bind(Ir).filter(rr).bind(Fy),s=a.bind(Fr).filter(rr).bind(Fy),Uy(r,o,t,!0,n),Uy(s,a,t,!1,n),t.collapse(!1),d.selection.setRng(l),ef(d,l),cy(d,i,e)})},s=e=>{var t=c();t.collapse(!!e),u(t)},l=()=>n.getSelection?n.getSelection():n.document.selection,c=()=>{let e;var t=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},r=n.document;if(j(i.bookmark)&&!kf(i)){const d=mf(i);if(d.isSome())return d.map(e=>Bf(i,[e])[0]).getOr(r.createRange())}try{const d=l();d&&!no(d.anchorNode)&&(e=0<d.rangeCount?d.getRangeAt(0):r.createRange(),e=Bf(i,[e])[0])}catch(e){}if(e=e||r.createRange(),ho(e.startContainer)&&e.collapsed){const n=d.getRoot();e.setStart(n,0),e.setEnd(n,0)}return o&&a&&(0===t(e.START_TO_START,e,o)&&0===t(e.END_TO_END,e,o)?e=a:(o=null,a=null)),e},u=(e,t)=>{if((r=e)&&jy(r.startContainer)&&jy(r.endContainer)){var r=l();if(e=i.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){a=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=0<r.rangeCount?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&null!=r&&r.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(t,0,t,1))}i.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},m=()=>{var e=l(),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!t||!r||no(t)||no(r))return!0;var n=d.createRng(),o=d.createRng();try{n.setStart(t,e.anchorOffset),n.collapse(!0),o.setStart(r,e.focusOffset),o.collapse(!0)}catch(e){return!0}return n.compareBoundaryPoints(n.START_TO_START,o)<=0},g={dom:d,win:n,serializer:e,editor:i,expand:(e={type:"word"})=>u(Lg(d).expand(c(),e)),collapse:s,setCursorLocation:(e,t)=>{var r=d.createRng();j(e)&&j(t)?(r.setStart(e,t),r.setEnd(e,t),u(r),s(!1)):(sm(d,r,i.getBody(),!0),u(r))},getContent:e=>{return[e={}]=[e],t=i,r=e.format||"html",e=e,My(t).selection.getContent(r,e);var t,r},setContent:t,getBookmark:(e,t)=>f.getBookmark(e,t),moveToBookmark:e=>f.moveToBookmark(e),select:(e,t)=>{return o=d,r=e,a=t,ee.from(r).bind(n=>ee.from(n.parentNode).map(e=>{var t=o.nodeIndex(n),r=o.createRng();return r.setStart(e,t),r.setEnd(e,t+1),a&&(sm(o,r,n,!0),sm(o,r,n,!1)),r})).each(u),e;var o,r,a},isCollapsed:()=>{var e=c(),t=l();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var e=c(),t=i.getBody().querySelectorAll('[data-mce-selected="1"]');return 0<t.length?we(t,e=>d.isEditable(e.parentElement)):Nf(d,e)},isForward:m,setNode:e=>(t(d.getOuterHTML(e)),e),getNode:()=>{{var n=i.getBody(),o=c();if(!o)return n;let e=o.startContainer,t=o.endContainer;var a=o.startOffset,s=o.endOffset;let r=o.commonAncestorContainer;return o.collapsed||(e===t&&s-a<2&&e.hasChildNodes()&&(r=e.childNodes[a]),X(e)&&X(t)&&(e=e.length===a?Of(e.nextSibling,!0):e.parentNode,t=0===s?Of(t.previousSibling,!1):t.parentNode,e)&&e===t&&(r=e)),o=X(r)?r.parentNode:r,oo(o)?o:n}},getSel:l,setRng:u,getRng:c,getStart:e=>Af(i.getBody(),c(),e),getEnd:e=>Tf(i.getBody(),c(),e),getSelectedBlocks:(e,t)=>{var r,n=d,o=c(),a=e,e=t,s=[],t=n.getRoot(),i=n.getParent(a||Af(t,o,o.collapsed),n.isBlock),l=n.getParent(e||Tf(t,o,o.collapsed),n.isBlock);if(i&&i!==t&&s.push(i),i&&l&&i!==l){const a=new Yn(i,t);for(;(r=a.next())&&r!==l;)n.isBlock(r)&&s.push(r)}return l&&i!==l&&l!==t&&s.push(l),s},normalize:()=>{const e=c(),t=l();if(1<Ju(t).length||!im(i))return e;{const t=Bg(d,e);return t.each(e=>{u(e,m())}),t.getOr(e)}},selectorChanged:(e,t)=>(r(e,t),g),selectorChangedWithUnbind:r,getScrollContainer:()=>{let e,t=d.getRoot();for(;t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:(e,t)=>{var r,n;j(e)?(e=e,n=t,((r=i).inline?Zg:Jg)(r,e,n)):ef(i,c(),t)},placeCaretAt:(e,t)=>u(Sg(e,t,i.getDoc())),getBoundingClientRect:()=>{var e=c();return e.collapsed?ie.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{n=o=a=null,p.destroy()}},f=Qm(g),p=ug(g,i);return g.bookmarkManager=f,g.controlSelection=p,g},$y=(e,t,r)=>{-1===ae.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},Vy=(e,a)=>{const t=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=a&&a.dom?a.dom:se.DOM,l=a&&a.schema?a.schema:La(s),d=oy(s,l);return r=d,c=s,u=i,r.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),r.addAttributeFilter("src,href,style",(t,r)=>{var n="data-mce-"+r,o=c.url_converter,a=c.url_converter_scope;let s=t.length;for(;s--;){const c=t[s];let e=c.attr(n);void 0!==e?(c.attr(r,0<e.length?e:null),c.attr(n,null)):(e=c.attr(r),"style"===r?e=u.serializeStyle(u.parseStyle(e),c.name):o&&(e=o.call(a,e,r,c.name)),c.attr(r,0<e.length?e:null))}}),r.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){var n=t[r];let e=n.attr("class");e&&(e=e.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<e.length?e:null))}}),r.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){const t=e[n];if("bookmark"===t.attr("data-mce-type")&&!r.cleanup){const e=ee.from(t.firstChild).exists(e=>{return!Xs(null!=(e=e.value)?e:"")});e?t.unwrap():t.remove()}}}),r.addNodeFilter("script,style",(e,t)=>{var r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let n=e.length;for(;n--;){var o=e[n],a=o.firstChild,s=null!=(s=null==a?void 0:a.value)?s:"";if("script"===t){const e=o.attr("type");e&&o.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===c.element_format&&a&&0<s.length&&(a.value="// <![CDATA[\n"+r(s)+"\n// ]]>")}else"xhtml"===c.element_format&&a&&0<s.length&&(a.value="\x3c!--\n"+r(s)+"\n--\x3e")}}),r.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.value;c.preserve_cdata&&0===(null==n?void 0:n.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=u.decode(n.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==n?void 0:n.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(n).substr(14))}}),r.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),r.addAttributeFilter("data-mce-type",e=>{re(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(r.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),c.remove_trailing_brs&&(m=c,g=r.schema,r.addNodeFilter("br",(n,e,o)=>{const a=ae.extend({},g.getBlockElements()),s=g.getNonEmptyElements(),i=g.getWhitespaceElements();a.body=1;var l=e=>e.name in a||Xo(g,e);for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.parent;if(r&&l(r)&&t===r.lastChild){let e=t.prev;for(;e;){const m=e.name;if("span"!==m||"bookmark"!==e.attr("data-mce-type")){"br"===m&&(t=null);break}e=e.prev}if(t&&(t.remove(),sv(g,s,i,r))){const n=g.getElementRule(r.name);n&&(n.removeEmpty?r.remove():n.paddEmpty&&ov(m,o,l,r))}}else{let e=t;for(;r&&r.firstChild===e&&r.lastChild===e&&(e=r,!a[r.name]);)r=r.parent;if(e===r){const m=new Mf("#text",3);m.value=Xn,t.replace(m)}}}})),{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(e,t={})=>{var r,n,o,t={format:"html",...t},e=((r,n,o)=>{if(s=r,i=o,j(s)&&s.hasEventListeners("PreProcess")&&!i.no_events){var a=r,s=n,i=o;let e;r=a.dom;let t=s.cloneNode(!0);if((s=document.implementation).createHTMLDocument){const a=s.createHTMLDocument("");ae.each("BODY"===t.nodeName?t.childNodes:[t],e=>{a.body.appendChild(a.importNode(e,!0))}),t="BODY"!==t.nodeName?a.body.firstChild:a.body,e=r.doc,r.doc=a}return s=a,a={...i,node:t},s.dispatch("PreProcess",a),e&&(r.doc=e),t}return n;var s,i})(a,e,t),e=((e,t,r)=>{e=Zs(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||Ws(K(t))?e:ae.trim(e)})(i,e,t),e=((e,t,r)=>{var r=r.selection?{forced_root_block:!1,...r}:r,e=e.parse(t,r),n=e,t=e=>"br"===(null==e?void 0:e.name),r=n.lastChild;if(t(r)){const n=r.prev;t(n)&&(r.remove(),n.remove())}return e})(d,e,t);return"tree"===t.format?e:(r=a,n=s,o=l,t=t,n=n,o=o,e=e,n=ep(n,o).serialize(e),o=n,!t.no_events&&r?(e=r,n={...t,content:o},e.dispatch("PostProcess",n).content):o)},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:C($y,d,t),getTempAttrs:J(t),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var r,c,u,m,g},qy=(e,t)=>{e=Vy(e,t);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs,getNodeFilters:e.getNodeFilters,getAttributeFilters:e.getAttributeFilters,removeNodeFilter:e.removeNodeFilter,removeAttributeFilter:e.removeAttributeFilter}},Wy=(o,e,t={})=>{r=e;var r,t={format:"html",...t,set:!0,content:r};return dy(o,t).map(e=>{n=o,t=e.content,r=e;var t,r,n=Ly(n).editor.setContent(t,r);return cy(o,n.html,e),n.content}).getOr(e)},Ky="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Yy=[],Gy="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),Xy=[],Zy=(t,e)=>{e=I(e,e=>oe(t,e));return _e(e)},Qy=(e,t)=>{const r=ae.makeMap(e.plugins," "),n=I(t,e=>oe(r,e));return _e(n)},Jy=t=>ve(Xy,e=>e.name===t).fold(()=>t,e=>e.replacedWith?t+", replaced by "+e.replacedWith:t),eC=se.DOM,tC=e=>ee.from(e).each(e=>e.destroy()),rC=(()=>{const r={};return{add:(e,t)=>{r[e]=t},get:e=>r[e]||{icons:{}},has:e=>oe(r,e)}})(),nC=fs.ModelManager,oC=(e,t)=>t.dom[e],aC=(e,t)=>parseInt(hn(t,e),10),sC=C(oC,"clientWidth"),iC=C(oC,"clientHeight"),lC=C(aC,"margin-top"),dC=C(aC,"margin-left"),cC=n=>{const o=[],a=()=>{var e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,getArgs:e}},e=()=>ee.from(o[0]),s=()=>{e().each(e=>{e.reposition()})},i=t=>{be(o,e=>e===t).each(e=>{o.splice(e,1)})},t=(r,e=!0)=>{return n.removed||(t=(t=n).inline?t.getBody():t.getContentAreaContainer(),!ee.from(t).map(K).map(Qr).getOr(!1))?{}:(e&&n.dispatch("BeforeOpenNotification",{notification:r}),ve(o,e=>{return!((e=a().getArgs(e)).type!==r.type||e.text!==r.text||e.progressBar||e.timeout||r.progressBar||r.timeout)}).getOrThunk(()=>{n.editorManager.setActive(n);const e=a().open(r,()=>{i(e)},()=>_f(n));return t=e,o.push(t),s(),n.dispatch("OpenNotification",{notification:{...e}}),e;var t}));var t},r=J(o);return(l=n).on("SkinLoaded",()=>{var e=vd(l);e&&t({text:e,type:"warning",timeout:0},!1),s()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(s)}),l.on("remove",()=>{re(o.slice(),e=>{a().close(e)})}),l.addShortcut("alt+F12","Focus to notification",()=>e().map(e=>K(e.getEl())).each(e=>tf(e))),{open:t,close:()=>{e().each(e=>{a().close(e),i(e),s()})},getNotifications:r};var l},uC=fs.PluginManager,mC=fs.ThemeManager,gC=r=>{let n=[];const o=()=>{var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e}},a=(t,r)=>(...e)=>r?r.apply(t,e):void 0,s=t=>{r.dispatch("CloseWindow",{dialog:t}),0===(n=I(n,e=>e!==t)).length&&r.focus()},i=e=>{r.editorManager.setActive(r),uf(r),r.ui.show();var t,e=e();return t=e,n.push(t),r.dispatch("OpenWindow",{dialog:t}),e};return r.on("remove",()=>{re(n,e=>{o().close(e)})}),{open:(e,t)=>i(()=>o().open(e,t,s)),openUrl:e=>i(()=>o().openUrl(e,s)),alert:(e,t,r)=>{var n=o();n.alert(e,a(r||n,t))},confirm:(e,t,r)=>{var n=o();n.confirm(e,a(r||n,t))},close:()=>{ee.from(n[n.length-1]).each(e=>{o().close(e),s(e)})}}},fC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},pC=(e,t)=>{e._skinLoaded?fC(e,t):e.on("SkinLoaded",()=>{fC(e,t)})},hC=(e,t,r)=>{eg(e,t,{message:r}),console.error(r)},vC=(e,t,r)=>r?`Failed to load ${e}: ${r} from url `+t:`Failed to load ${e} url: `+t,bC=(e,...t)=>{var r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},yC=e=>"content/"+e+"/content.css",CC=(r,e)=>{const n=r.editorManager.baseURL+"/skins/content",o=`content${r.editorManager.suffix}.css`;return te(e,e=>{return t=e,tinymce.Resource.has(yC(t))?e:/^[a-z0-9\-]+$/i.test(e)&&!r.inline?n+`/${e}/`+o:r.documentBaseURI.toAbsolute(e);var t})},wC=(n,o)=>{const a={};return{findAll:(e,r=S)=>{e=I((e=e)?Ae(e.getElementsByTagName("img")):[],e=>{var t=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===F.transparentSrc)&&(at(t,"blob:")?!n.isUploaded(t)&&r(e):!!at(t,"data:")&&r(e))}),e=te(e,t=>{const r=t.src;var e;return oe(a,r)?a[r].then(e=>Z(e)?e:{image:t,blobInfo:e.blobInfo}):(e=((r,e)=>{const n=()=>Promise.reject("Invalid data URI");var t,o,a;return at(e,"blob:")?(o=r.getByUri(e),j(o)?Promise.resolve(o):(o=e,(at(o,"blob:")?(t=o,fetch(t).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):at(o,"data:")?(a=o,new Promise((e,t)=>{Pb(a).bind(({type:e,data:t,base64Encoded:r})=>Db(e,t,r)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format")).then(t=>Lb(t).then(e=>Ib(e,!1,e=>ee.some(Fb(r,t,e))).getOrThunk(n))))):at(e,"data:")?Ub(r,e).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(o,r).then(e=>(delete a[r],{image:t,blobInfo:e})).catch(e=>(delete a[r],e)),a[r]=e)});return Promise.all(e)}}},EC=()=>{let r={};const n=(e,t)=>({status:e,resultUri:t}),t=e=>e in r;return{hasBlobUri:t,getResultUri:e=>{e=r[e];return e?e.resultUri:null},isPending:e=>!!t(e)&&1===r[e].status,isUploaded:e=>!!t(e)&&2===r[e].status,markPending:e=>{r[e]=n(1,null)},markUploaded:(e,t)=>{r[e]=n(2,t)},removeFailed:e=>{delete r[e]},destroy:()=>{r={}}}};let xC=0;const kC=(l,s)=>{const n={},o=(t,a)=>new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("POST",s.url),o.withCredentials=s.credentials,o.upload.onprogress=e=>{a(e.loaded/e.total*100)},o.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{var e,t;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&Z(t.location)?r((e=s.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):n("Invalid JSON: "+o.responseText)};var e=new FormData;e.append("file",t.blob(),t.filename()),o.send(e)}),d=H(s.handler)?s.handler:o,c=(e,t)=>({url:t,blobInfo:e,status:!0}),u=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),m=(e,t)=>{ae.each(n[e],e=>{e(t)}),delete n[e]};return{upload:(e,t)=>{return s.url||d!==o?(e=e,r=t,e=ae.grep(e,e=>!l.isUploaded(e.blobUri())),Promise.all(ae.map(e,e=>{if(l.isPending(e.blobUri())){const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})}return a=e,s=d,i=r,l.markPending(a.blobUri()),new Promise(t=>{let r,e;try{const n=()=>{r&&(r.close(),e=$)},o=e=>{n(),l.markUploaded(a.blobUri(),e),m(a.blobUri(),c(a,e)),t(c(a,e))};e=t=>{t<0||100<t||ee.from(r).orThunk(()=>ee.from(i).map(h)).each(e=>{(r=e).progressBar.value(t)})},s(a,e).then(o,e=>{e=Z(e)?{message:e}:e,n(),l.removeFailed(a.blobUri()),m(a.blobUri(),u(a,e)),t(u(a,e))})}catch(e){t(u(a,e))}});var a,s,i}))):new Promise(e=>{e([])});var r}}},_C=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),SC=(e,t)=>kC(t,{url:Ql(e),basePath:Jl(e),credentials:ed(e),handler:td(e)}),NC=c=>{const u=(()=>{let r=[];const a=e=>{var t,r,n;if(e.blob&&e.base64)return n=e.id||"blobid"+xC+++(n=()=>Math.round(4294967295*Rs()).toString(36),"s")+(new Date).getTime().toString(36)+n()+n()+n(),t=e.name||n,r=e.blob,{id:J(n),name:J(t),filename:J(e.filename||t+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:J(r),base64:J(e.base64),blobUri:J(e.blobUri||URL.createObjectURL(r)),uri:J(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")},e=e=>ve(r,e).getOrUndefined(),t=t=>e(e=>e.id()===t);return{create:(e,t,r,n,o)=>{if(Z(e))return a({id:e,name:n,filename:o,blob:t,base64:r});if(de(e))return a(e);throw new Error("Unknown input type")},add:e=>{t(e.id())||r.push(e)},get:t,getByUri:t=>e(e=>e.blobUri()===t),getByData:(t,r)=>e(e=>e.base64()===t&&e.blob().type===r),findFirst:e,removeByUri:t=>{r=I(r,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{re(r,e=>{URL.revokeObjectURL(e.blobUri())}),r=[]}}})();let t,e;const o=EC(),r=[],n=t=>e=>c.selection?t(e):[],a=(e,t,r)=>{let n=0;for(;-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1),-1!==n;);return e},s=(e,t,r)=>{var n=`src="${r}"`+(r===F.transparentSrc?' data-mce-placeholder="1"':"");return e=a(e,`src="${t}"`,n),a(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},m=(t,r)=>{re(c.undoManager.data,e=>{"fragmented"===e.type?e.fragments=te(e.fragments,e=>s(e,t,r)):e.content=s(e.content,t,r)})},i=()=>(t=t||SC(c,o),g().then(n(d=>{var e=te(d,e=>e.blobInfo);return t.upload(e,_C(c)).then(n(e=>{const i=[];let l=!1;e=te(e,(e,t)=>{var r,n,o,{blobInfo:t,image:a}=d[t];let s=!1;return e.status&&Gl(c)?(e.url&&!ot(a.src,e.url)&&(l=!0),u.removeByUri(a.src),Dy(c)||(r=a,n=e.url,o=c.convertURL(n,"src"),m(r.src,n),lr(K(r),{src:Yl(c)?n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime():n,"data-mce-src":o}))):e.error&&(e.error.remove&&(m(a.src,F.transparentSrc),i.push(a),s=!0),r=c,n=e.error.message,pC(r,gs.translate(["Failed to upload image: {0}",n]))),{element:a,status:e.status,uploadUri:e.url,blobInfo:t,removed:s}});return 0<i.length&&!Dy(c)?c.undoManager.transact(()=>{re(An(i),e=>{var n,t=Dr(e);Y(e),t.each((n=c,e=>{var t,r;r=e,(t=n).dom.isEmpty(r.dom)&&j(t.schema.getTextBlockElements()[W(r)])&&kn(e,kr('<br data-mce-bogus="1" />'))})),u.removeByUri(e.dom.src)})}):l&&c.undoManager.dispatchChange(),e}))}))),l=()=>Kl(c)?i():Promise.resolve([]),d=t=>we(r,e=>e(t)),g=()=>(e=e||wC(o,u)).findAll(c.getBody(),d).then(n(e=>{e=I(e,e=>Z(e)?(pC(c,e),!1):"blob"!==e.uriType);return Dy(c)||re(e,e=>{m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e})),f=e=>e.replace(/src="(blob:[^"]+)"/g,(e,r)=>{var t=o.getResultUri(r);if(t)return'src="'+t+'"';let n=u.getByUri(r);return(n=n||pe(c.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0))?'src="data:'+n.blob().type+";base64,"+n.base64()+'"':e});return c.on("SetContent",()=>{(Kl(c)?l:g)()}),c.on("RawSaveContent",e=>{e.content=f(e.content)}),c.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=f(e.content))}),c.on("PostRender",()=>{c.parser.addNodeFilter("img",e=>{re(e,e=>{var t=e.attr("src");t&&!u.getByUri(t)&&(t=o.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:u,addFilter:e=>{r.push(e)},uploadImages:i,uploadImagesAuto:l,scanForImages:g,destroy:()=>{u.destroy(),o.destroy(),e=t=null}}},RC={remove_similar:!0,inherit:!1},AC={selector:"td,th",...RC},TC={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...AC},tablecellverticalalign:{styles:{"vertical-align":"%value"},...AC},tablecellbordercolor:{styles:{borderColor:"%value"},...AC},tablecellclass:{classes:["%value"],...AC},tableclass:{selector:"table",classes:["%value"],...RC},tablecellborderstyle:{styles:{borderStyle:"%value"},...AC},tablecellborderwidth:{styles:{borderWidth:"%value"},...AC}},OC=J(TC),BC=ae.each,PC=se.DOM,DC=e=>j(e)&&de(e),LC=(e,t)=>{const l=t&&t.schema||La({}),d=e=>{var t,e=Z(e)?{name:e,classes:[],attrs:{}}:e,r=PC.create(e.name);return t=r,0<(e=e).classes.length&&PC.addClass(t,e.classes.join(" ")),PC.setAttribs(t,e.attrs),r},c=(t,e,r)=>{let n;var o=e[0],a=DC(o)?o.name:void 0,s=((e,t)=>{e=l.getElementRule(e.nodeName.toLowerCase()),e=null==e?void 0:e.parentsRequired;return!(!e||!e.length)&&(t&&V(e,t)?t:e[0])})(t,a);if(s)a===s?(n=o,e=e.slice(1)):n=s;else if(o)n=o,e=e.slice(1);else if(!r)return t;const i=n?d(n):PC.create("div");i.appendChild(t),r&&ae.each(r,e=>{e=d(e);i.insertBefore(e,t)});a=DC(n)?n.siblings:void 0;return c(i,e,a)},r=PC.create("div");if(0<e.length){const t=e[0],l=d(t),n=DC(t)?t.siblings:void 0;r.appendChild(c(l,e.slice(1),n))}return r},MC=e=>{let t="div";const a={name:t,classes:[],attrs:{},selector:e=ae.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,n,o)=>{switch(t){case"#":a.attrs.id=r;break;case".":a.classes.push(r);break;case":":-1!==ae.inArray("checked disabled enabled read-only required".split(" "),r)&&(a.attrs[r]=r)}if("["===n){const e=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(a.attrs[e[1]]=e[2])}return""})),a.name=t||"div",a},IC=(r,e)=>{let n="",t=kd(r);if(""===t)return"";const o=e=>Z(e)?e.replace(/%(\w+)/g,""):"",a=(e,t)=>PC.getStyle(null!=t?t:r.getBody(),e,!0);if(Z(e)){const n=r.formatter.get(e);if(!n)return"";e=n[0]}if("preview"in e){const r=e.preview;if(!1===r)return"";t=r||t}let s,i=e.block||e.inline||"span";l=e.selector;var l=Z(l)?(l=(l=l.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ae.map(l.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{var e=ae.map(e.split(/(?:~\+|~|\+)/),MC),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[];s=0<l.length?(l[0].name||(l[0].name=i),i=e.selector,LC(l,r)):LC([i],r);const d=PC.select(i,s)[0]||s.firstChild,c=(BC(e.styles,(e,t)=>{e=o(e);e&&PC.setStyle(d,t,e)}),BC(e.attributes,(e,t)=>{e=o(e);e&&PC.setAttrib(d,t,e)}),BC(e.classes,e=>{e=o(e);PC.hasClass(d,e)||PC.addClass(d,e)}),r.dispatch("PreviewFormats"),PC.setStyles(s,{position:"absolute",left:-65535}),r.getBody().appendChild(s),a("fontSize")),u=/px$/.test(c)?parseInt(c,10):0;return BC(t.split(" "),e=>{let t=a(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===$a(t).toLowerCase())||"color"===e&&"#000000"===$a(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===u)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*u+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),r.dispatch("AfterPreviewFormats"),PC.remove(s),n},FC=s=>{const e=(s=>{const r={},n=(e,t)=>{e&&(Z(e)?(Q(t)||(t=[t]),re(t,e=>{D(e.deep)&&(e.deep=!Sm(e)),D(e.split)&&(e.split=!Sm(e)||Nm(e)),D(e.remove)&&Sm(e)&&!Nm(e)&&(e.remove="none"),Sm(e)&&Nm(e)&&(e.mixed=!0,e.block_expand=!0),Z(e.classes)&&(e.classes=e.classes.split(/\s+/))}),r[e]=t):ne(e,(e,t)=>{n(t,e)}))};return n((()=>{const n=s.dom,e=s.schema.type,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(r={inline:"span",styles:{textDecoration:"line-through"},exact:!0},o={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==e?[a,r,o]:[r,a,o]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>G(e)&&e.hasAttribute("href"),onformat:(r,e,t)=>{ae.each(t,(e,t)=>{n.setAttrib(r,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{return null!=(e=null==e?void 0:e.customValue)?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};var r,o,a;return ae.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{t[e]={block:e,remove:"all"}}),t})()),n(OC()),n(xd(s)),{get:e=>j(e)?r[e]:r,has:e=>oe(r,e),register:n,unregister:e=>(e&&r[e]&&delete r[e],r)}})(s),i=Oo({});var t,r,a,n=s;n.addShortcut("meta+b","","Bold"),n.addShortcut("meta+i","","Italic"),n.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)n.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);return n.addShortcut("access+7","",["FormatBlock",!1,"p"]),n.addShortcut("access+8","",["FormatBlock",!1,"div"]),n.addShortcut("access+9","",["FormatBlock",!1,"address"]),(a=s).on("mouseup keydown",e=>{var t,r,n,o;t=a,e=e.keyCode,r=a.selection.getRng().endContainer,r=X(r)&&st(r.data,Xn),n=t.selection,o=t.getBody(),Pv(t,null,r),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==Av||Pv(t,Fu(o,n.getStart()),!0),37!==e&&39!==e||Pv(t,Fu(o,n.getStart()),!0)}),Dy(s)||(t=i,r=s,t.set({}),r.on("NodeChange",e=>{Ab(r,e.element,t.get())}),r.on("FormatApply FormatRemove",e=>{e=ee.from(e.node).map(e=>cm(e)?e:e.startContainer).bind(e=>G(e)?ee.some(e):ee.from(e.parentElement)).getOrThunk(()=>Sb(r));Ab(r,e,t.get())})),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,r)=>{var n;n=s,e=e,t=t,r=r,My(n).formatter.apply(e,t,r)},remove:(e,t,r,n)=>{var o;o=s,e=e,t=t,r=r,n=n,My(o).formatter.remove(e,t,r,n)},toggle:(e,t,r)=>{var n;n=s,e=e,t=t,r=r,My(n).formatter.toggle(e,t,r)},match:(e,t,r,n)=>{return o=s,e=e,t=t,r=r,n=n,My(o).formatter.match(e,t,r,n);var o},closest:e=>{return t=s,e=e,My(t).formatter.closest(e);var t},matchAll:(e,t)=>{return r=s,e=e,t=t,My(r).formatter.matchAll(e,t);var r},matchNode:(e,t,r,n)=>{return o=s,e=e,t=t,r=r,n=n,My(o).formatter.matchNode(e,t,r,n);var o},canApply:e=>{return t=s,e=e,My(t).formatter.canApply(e);var t},formatChanged:(e,t,r,n)=>{return o=s,a=i,e=e,t=t,r=r,n=n,My(o).formatter.formatChanged(a,e,t,r,n);var o,a},getCssText:C(IC,s)}},UC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},zC=i=>{const l=Bo(),d=Oo(0),c=Oo(0),u={data:[],typing:!1,beforeChange:()=>{var e,t,r;e=i,t=d,r=l,My(e).undoManager.beforeChange(t,r)},add:(e,t)=>{return r=i,n=u,o=c,a=d,s=l,e=e,t=t,My(r).undoManager.add(n,o,a,s,e,t);var r,n,o,a,s},dispatchChange:()=>{i.setDirty(!0);var e=_y(i);e.bookmark=pl(i.selection),i.dispatch("change",{level:e,lastLevel:Se(u.data,c.get()).getOrUndefined()})},undo:()=>{return e=i,t=u,r=d,n=c,My(e).undoManager.undo(t,r,n);var e,t,r,n},redo:()=>{return e=i,t=c,r=u.data,My(e).undoManager.redo(t,r);var e,t,r},clear:()=>{var e,t,r;e=i,t=u,r=c,My(e).undoManager.clear(t,r)},reset:()=>{var e,t;e=i,t=u,My(e).undoManager.reset(t)},hasUndo:()=>{return e=i,t=u,r=c,My(e).undoManager.hasUndo(t,r);var e,t,r},hasRedo:()=>{return e=i,t=u,r=c,My(e).undoManager.hasRedo(t,r);var e,t,r},transact:e=>{return t=i,r=u,n=d,e=e,My(t).undoManager.transact(r,n,e);var t,r,n},ignore:e=>{var t,r;t=i,r=d,e=e,My(t).undoManager.ignore(r,e)},extra:(e,t)=>{var r,n,o;r=i,n=u,o=c,e=e,t=t,My(r).undoManager.extra(n,o,e,t)}};if(!Dy(i)){var n=i,o=u,a=d;const s=Oo(!1),m=e=>{Oy(o,!1,a),o.add({},e)};n.on("init",()=>{o.add()}),n.on("BeforeExecCommand",e=>{e=e.command;UC(e)||(By(o,a),o.beforeChange())}),n.on("ExecCommand",e=>{var t=e.command;UC(t)||m(e)}),n.on("ObjectResizeStart cut",()=>{o.beforeChange()}),n.on("SaveContent ObjectResized blur",m),n.on("dragend",m),n.on("keyup",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(t=F.os.isMacOS()&&"Meta"===e.key,(33<=r&&r<=36||37<=r&&r<=40||45===r||e.ctrlKey||t)&&(m(),n.nodeChanged()),46!==r&&8!==r||n.nodeChanged(),s.get()&&o.typing&&!Ay(_y(n),o.data[0])&&(n.isDirty()||n.setDirty(!0),n.dispatch("TypingUndo"),s.set(!1),n.nodeChanged()))}),n.on("keydown",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(33<=r&&r<=36||37<=r&&r<=40||45===r?o.typing&&m(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(r<16||20<r)||224===r||91===r||o.typing||t?(F.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&o.beforeChange():(o.beforeChange(),Oy(o,!0,a),o.add({},e),s.set(!0))))}),n.on("mousedown",e=>{o.typing&&m(e)}),n.on("input",e=>{e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)&&m(e)}),n.on("AddUndo Undo Redo ClearUndos",e=>{e.isDefaultPrevented()||n.nodeChanged()})}return(e=i).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),u;var e},jC=[9,27,le.HOME,le.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,le.DOWN,le.UP,le.LEFT,le.RIGHT].concat(F.browser.isFirefox()?[224]:[]),HC="data-mce-placeholder",$C=e=>"keydown"===e.type||"keyup"===e.type,VC=e=>{e=e.keyCode;return e===le.BACKSPACE||e===le.DELETE},qC=(e,t)=>({from:e,to:t}),WC=(e,t)=>{var e=K(e),r=K(t.container());return yh(e,r).map(e=>({block:e,position:t}))},KC=(t,e)=>on(e,e=>qs(e)||yo(e.dom),e=>U(e,t)).filter(tr).getOr(t),YC=(e,t)=>{e=((e,t)=>{const r=jr(e);return be(r,e=>t.isBlock(W(e))).fold(J(r),e=>r.slice(0,e))})(e,t);return re(e,Y),e},GC=(t,e,r)=>{r=Ep(r,e);return ve(r.reverse(),e=>Ao(t,e)).each(Y)},XC=(e,t,r,n,o)=>{var a,s;return Ao(n,r)?(Ys(r),Du(r.dom)):(a=n,s=o,0===I(Ur(s),e=>!Ao(a,e)).length&&Ao(n,t)&&wn(o,_r("br")),s=Pu(r.dom,ie.before(o.dom)),re(YC(t,n),e=>{wn(o,e)}),GC(n,e,t),s)},ZC=(e,t,r,o)=>{if(Ao(o,r)){if(Ao(o,t)){const e=e=>{const n=(e,r)=>$r(e).fold(()=>r,e=>{return t=e,o.isInline(W(t))?n(e,r.concat(Bs(e))):r;var t});return n(e,[])},n=fe(e(r),(e,t)=>(_n(e,t),t),Ks());Nn(t),kn(t,n)}return Y(r),Du(t.dom)}const n=Lu(r.dom);return re(YC(t,o),e=>{kn(r,e)}),GC(o,e,t),n},QC=(e,t)=>{Ou(e,t.dom).bind(e=>ee.from(e.getNode())).map(K).filter(zs).each(Y)},JC=(e,t,r,n)=>{return QC(!0,t),QC(!1,r),o=t,a=r,(Tr(a,o)?(a=a,o=o,o=Ep(o,a),ee.from(o[o.length-1])):ee.none()).fold(C(ZC,e,t,r,n),C(XC,e,t,r,n));var o,a},e1=(e,t,r,n,o)=>t?JC(e,n,r,o):JC(e,r,n,o),t1=(t,r)=>{const n=K(t.getBody()),e=(o=t.schema,a=n.dom,s=r,((i=t.selection.getRng()).collapsed?(l=o,d=a,c=s,o=i,o=WC(d,ie.fromRangeStart(o)),a=o.bind(e=>Ru(c,d,e.position).bind(e=>WC(d,e).map(e=>{return t=l,r=d,n=c,o=e,B(o.position.getNode())&&!Ao(t,o.block)?Ou(!1,o.block.dom).bind(e=>e.isEqual(o.position)?Ru(n,r,e).bind(e=>WC(r,e)):ee.some(o)).getOr(o):o;var t,r,n,o}))),Wt(o,a,qC).filter(e=>{return r=e,!U(r.from.block,r.to.block)&&((e,t)=>{e=K(e);return U(KC(e,t.from.block),KC(e,t.to.block))})(d,e)&&(r=e,!1===x(r.from.block.dom))&&!1===x(r.to.block.dom)&&(r=e=>js(e)||qo(e.dom)||$s(e))((t=e).from.block)&&r(t.to.block)&&(r=e,!(Tr(r.to.block,r.from.block)||Tr(r.from.block,r.to.block)));var t,r})):ee.none()).map(e=>()=>{e1(n,r,e.from.block,e.to.block,t.schema).each(e=>{t.selection.setRng(e.toRange())})}));var o,a,s,i,l,d,c;return e},r1=(e,t)=>{t=K(t),e=C(U,e);return nn(t,qs,e).isSome()},n1=(e,t)=>{if(e.selection.isCollapsed())return ee.none();var r,n,o,a,s,i=K(e.getBody());if(n=i,o=e.selection.getRng(),a=Pu(n.dom,ie.fromRangeStart(o)).isNone(),s=Bu(n.dom,ie.fromRangeEnd(o)).isNone(),n=n,o=o,!r1(n,o.startContainer)&&!r1(n,o.endContainer)&&a&&s)return r=e,ee.some(()=>{r.setContent(""),r.selection.setCursorLocation()});{var l=i,d=e.selection,c=e.schema;const u=d.getRng();return Wt(yh(l,K(u.startContainer)),yh(l,K(u.endContainer)),(e,t)=>U(e,t)?ee.none():ee.some(()=>{u.deleteContents(),e1(l,!0,e,t,c).each(e=>{d.setRng(e.toRange())})})).getOr(ee.none())}},o1=(e,t,r,n,o)=>ee.from(t._selectionOverrides.showCaret(e,r,n,o)),a1=(e,t)=>{return e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?ee.none():ee.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))},s1=(e,t,r)=>{return t.collapsed?(e=e,n=t,r=r,n=lu(1,e.getBody(),n),n=ie.fromRangeStart(n),o=n.getNode(),(zc(o)?o1(1,e,o,!n.isAtEnd(),!1):(o=n.getNode(!0),zc(o)?o1(1,e,o,!1,!1):(o=Xh(e.dom.getRoot(),n.getNode()),zc(o)?o1(1,e,o,!1,r):ee.none()))).getOr(t)):t;var n,o},i1=e=>yp(e)||pp(e),l1=e=>Cp(e)||hp(e),d1=(t,r,e,n,o,a)=>{o1(n,t,a.getNode(!o),o,!0).each(e=>{if(r.collapsed){const t=r.cloneRange();o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(e)}),n=t.dom,a=e,X(a)&&0===a.data.length&&n.remove(a)},c1=(e,t)=>{{var r=e,n=t;const o=r.selection.getRng();if(!X(o.commonAncestorContainer))return ee.none();const a=n?en.Forwards:en.Backwards,s=ku(r.getBody()),i=C(mu,n?s.next:s.prev),l=n?i1:l1,d=cu(a,r.getBody(),o),c=i(d),u=c&&mh(n,c);if(!u||!gu(d,u))return ee.none();if(l(u))return ee.some(()=>d1(r,o,d.getNode(),a,n,u));const m=i(u);return m&&l(m)&&gu(u,m)?ee.some(()=>d1(r,o,d.getNode(),a,n,m)):ee.none()}},u1=(e,t)=>{e=e.getBody();return t?Du(e).filter(yp):Lu(e).filter(Cp)},m1=e=>{const t=e.selection.getRng();return!t.collapsed&&(u1(e,!0).exists(e=>e.isEqual(ie.fromRangeStart(t)))||u1(e,!1).exists(e=>e.isEqual(ie.fromRangeEnd(t))))},g1=yl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),f1=(a,s,i,l)=>Ru(s,a,i).bind(e=>{{if(n=e.getNode(),j(n)&&(qs(K(n))||$s(K(n)))||((t,e,r,n,o)=>{const a=e=>o.isInline(e.nodeName.toLowerCase())&&!ru(r,n,t);return du(!e,r).fold(()=>du(e,n).fold(T,a),a)})(a,s,i,e,l))return ee.none();if(s&&x(e.getNode())||!s&&x(e.getNode(!0))){var t=l,r=(n=a,i);const o=e.getNode(!s);return yh(K(n),K(r.getNode())).map(e=>Ao(t,e)?g1.remove(e.dom):g1.moveToElement(o)).orThunk(()=>ee.some(g1.moveToElement(o)))}return s&&Cp(i)||!s&&yp(i)?ee.some(g1.moveToPosition(e)):ee.none()}var n}),p1=(e,t)=>ee.from(Xh(e.getBody(),t)),h1=(d,c)=>{var e=d.selection.getNode();return p1(d,e).filter(x).fold(()=>{return e=d.getBody(),t=c,r=d.selection.getRng(),n=d.schema,r=lu(t?1:-1,e,r),r=ie.fromRangeStart(r),l=K(e),(!t&&Cp(r)?ee.some(g1.remove(r.getNode(!0))):t&&yp(r)?ee.some(g1.remove(r.getNode())):!t&&yp(r)&&Dp(l,r,n)?Lp(l,r,n).map(e=>g1.remove(e.getNode())):t&&Cp(r)&&Pp(l,r,n)?Mp(l,r,n).map(e=>g1.remove(e.getNode())):(o=e,i=n,l=a=t,e=(s=r).getNode(!l),l=l?"after":"before",G(e)&&e.getAttribute("data-mce-caret")===l?(e=a,l=s.getNode(!a),(z(l)?ee.none():e&&x(l.nextSibling)?ee.some(g1.moveToElement(l.nextSibling)):!e&&x(l.previousSibling)?ee.some(g1.moveToElement(l.previousSibling)):ee.none()).orThunk(()=>f1(o,a,s,i))):f1(o,a,s,i).bind(e=>{return t=o,r=s,e.fold(e=>ee.some(g1.remove(e)),e=>ee.some(g1.moveToElement(e)),e=>ru(r,e,t)?ee.none():ee.some(g1.moveToPosition(e)));var t,r}))).map(e=>()=>{return e.fold(e=>(o._selectionOverrides.hideFakeCaret(),ih(o,a,K(e)),!0),(n=a=c,e=>{e=n?ie.before(e):ie.after(e);return r.selection.setRng(e.toRange()),!0}),(t=r=o=d,e=>(t.selection.setRng(e.toRange()),!0)));var t,r,n,o,a});var e,t,r,n,o,a,s,i,l},()=>ee.some($))},v1=e=>{var t=e.dom,r=e.selection,n=Xh(e.getBody(),r.getNode());if(yo(n)&&t.isBlock(n)&&t.isEmpty(n)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(ie.before(e).toRange())}return!0},b1=(e,t)=>{return e.selection.isCollapsed()?h1(e,t):(n=t,t=(r=e).selection.getNode(),x(t)&&!Co(t)?p1(r,t.parentNode).filter(x).fold(()=>ee.some(()=>{var e=K(r.getBody());re(Vn(e,".mce-offscreen-selection"),Y),ih(r,n,K(r.selection.getNode())),Ch(r)}),()=>ee.some($)):m1(r)?ee.some(()=>{xh(r,r.selection.getRng(),K(r.getBody()))}):ee.none());var r,n},y1=e=>e.hasOwnProperty("text"),C1=e=>e.hasOwnProperty("marker"),w1=(e,o)=>{var t=(e,t)=>{var r,n;return X(e)?{text:e,offset:t}:(r=o(),t<(n=e.childNodes).length?(e.insertBefore(r,n[t]),{marker:r,before:!0}):(e.appendChild(r),{marker:r,before:!1}))},r=t(e.endContainer,e.endOffset);return{start:t(e.startContainer,e.startOffset),end:r}},E1=e=>{var t,{start:e,end:r}=e,n=new window.Range;return y1(e)?n.setStart(e.text,e.offset):C1(e)&&(e.before?n.setStartBefore(e.marker):n.setStartAfter(e.marker),null!=(t=e.marker.parentNode)&&t.removeChild(e.marker)),y1(r)?n.setEnd(r.text,r.offset):C1(r)&&(r.before?n.setEndBefore(r.marker):n.setEndAfter(r.marker),null!=(t=r.marker.parentNode)&&t.removeChild(r.marker)),n},x1=(e,t)=>{var r;const n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock),a=n.getParent(e.selection.getEnd(),n.isBlock),s=e.getBody();if("div"===(null==(r=null==o?void 0:o.nodeName)?void 0:r.toLowerCase())&&o&&a&&o===s.firstChild&&a===s.lastChild&&!n.isEmpty(s)){const r=o.cloneNode(!1),n=()=>{if((t?vh:hh)(e),s.firstChild!==o){const t=w1(e.selection.getRng(),()=>document.createElement("span"));Array.from(s.childNodes).forEach(e=>r.appendChild(e)),s.appendChild(r),e.selection.setRng(E1(t))}};return ee.some(n)}return ee.none()},k1=(e,t)=>{return e.selection.isCollapsed()?(r=e,n=t,e=ie.fromRangeStart(r.selection.getRng()),Ru(n,r.getBody(),e).filter(e=>(n?gp:fp)(e)).bind(e=>nu(n?0:-1,e)).map(e=>()=>r.selection.select(e))):ee.none();var r,n},_1=X,S1=e=>_1(e)&&e.data[0]===Gs,N1=e=>_1(e)&&e.data[e.data.length-1]===Gs,R1=e=>{return(null!=(e=e.ownerDocument)?e:document).createTextNode(Gs)},A1=(e,t)=>{return e?(e=t,_1(e.previousSibling)?(N1(e.previousSibling)||e.previousSibling.appendData(Gs),e.previousSibling):_1(e)?(S1(e)||e.insertData(0,Gs),e):(o=R1(e),null!=(n=e.parentNode)&&n.insertBefore(o,e),o)):(n=t,_1(n.nextSibling)?(S1(n.nextSibling)||n.nextSibling.insertData(0,Gs),n.nextSibling):_1(n)?(N1(n)||n.appendData(Gs),n):(e=R1(n),n.nextSibling?null!=(r=n.parentNode)&&r.insertBefore(e,n.nextSibling):null!=(r=n.parentNode)&&r.appendChild(e),e));var r,n,o},T1=C(A1,!0),O1=C(A1,!1),B1=(e,t)=>X(e.container())?A1(t,e.container()):A1(t,e.getNode()),P1=(e,t)=>{t=t.get();return t&&e.container()===t&&ti(t)},D1=(t,e)=>e.fold(e=>{Pc(t.get());e=T1(e);return t.set(e),ee.some(ie(e,e.length-1))},e=>Du(e).map(e=>{if(P1(e,t)){const e=t.get();return ie(e,1)}Pc(t.get());e=B1(e,!0);return t.set(e),ie(e,1)}),e=>Lu(e).map(e=>{if(P1(e,t)){const e=t.get();return ie(e,e.length-1)}Pc(t.get());e=B1(e,!1);return t.set(e),ie(e,e.length-1)}),e=>{Pc(t.get());e=O1(e);return t.set(e),ee.some(ie(e,1))}),L1=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e].apply(null,r);if(n.isSome())return n}return ee.none()},M1=yl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),I1=(e,t)=>tu(t,e)||e,F1=(e,t,r)=>{const n=gh(r),o=I1(t,n.container());return uh(e,o,n).fold(()=>Bu(o,n).bind(C(uh,e,o)).map(e=>M1.before(e)),ee.none)},U1=(e,t)=>null===Fu(e,t),z1=(e,t,r)=>uh(e,t,r).filter(C(U1,t)),j1=(e,t,r)=>{const n=fh(r);return z1(e,t,n).bind(e=>Pu(e,n).isNone()?ee.some(M1.start(e)):ee.none())},H1=(e,t,r)=>{const n=gh(r);return z1(e,t,n).bind(e=>Bu(e,n).isNone()?ee.some(M1.end(e)):ee.none())},$1=(e,t,r)=>{const n=fh(r),o=I1(t,n.container());return uh(e,o,n).fold(()=>Pu(o,n).bind(C(uh,e,o)).map(e=>M1.after(e)),ee.none)},V1=e=>!ch(W1(e)),q1=(e,t,r)=>L1([F1,j1,H1,$1],[e,t,r]).filter(V1),W1=e=>e.fold(g,g,g,g),K1=e=>e.fold(J("before"),J("start"),J("end"),J("after")),Y1=e=>e.fold(M1.before,M1.before,M1.after,M1.after),G1=e=>e.fold(M1.start,M1.start,M1.end,M1.end),X1=(r,e,n,t,o,a)=>Wt(uh(e,n,t),uh(e,n,o),(e,t)=>e!==t&&((e,t,r)=>{t=tu(t,e),r=tu(r,e);return j(t)&&t===r})(n,e,t)?M1.after(r?e:t):a).getOr(a),Z1=(e,r)=>e.fold(S,e=>{return t=r,!(K1(e=e)===K1(t)&&W1(e)===W1(t));var t}),Q1=(e,t)=>e?t.fold(d(ee.some,M1.start),ee.none,d(ee.some,M1.after),ee.none):t.fold(ee.none,d(ee.some,M1.before),ee.none,d(ee.some,M1.end)),J1=(e,t,r)=>{var n=e?1:-1;return t.setRng(ie(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},ew=((t=L0=L0||{})[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol",(e,t)=>e===en.Backwards?Ee(t):t),tw=(e,t,r,n)=>{var o=ku(r);let a=n;for(var s,i,l,d=[];a;){i=o,l=a;const r=t===en.Forwards?i.next(l):i.prev(l);if(!r)break;if(B(r.getNode(!1)))return t===en.Forwards?{positions:ew(t,d).concat([r]),breakType:L0.Br,breakAt:ee.some(r)}:{positions:ew(t,d),breakType:L0.Br,breakAt:ee.some(r)};if(r.isVisible()){if(e(a,r)){i=t,l=a,s=r;const e=B(s.getNode(i===en.Forwards))?L0.Br:!1===ru(l,s)?L0.Block:L0.Wrap;return{positions:ew(t,d),breakType:e,breakAt:ee.some(r)}}d.push(r)}a=r}return{positions:ew(t,d),breakType:L0.Eol,breakAt:ee.none()}},rw=(r,n,o,e)=>n(o,e).breakAt.map(e=>{var t=n(o,e).positions;return r===en.Backwards?t.concat(e):[e].concat(t)}).getOr([]),nw=(e,o)=>pe(e,(e,n)=>e.fold(()=>ee.some(n),r=>Wt(Ne(r.getClientRects()),Ne(n.getClientRects()),(e,t)=>{e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?n:r}).or(e)),ee.none()),ow=(t,e)=>Ne(e.getClientRects()).bind(e=>nw(t,e.left)),aw=C(tw,ie.isAbove,-1),sw=C(tw,ie.isBelow,1),iw=C(rw,-1,aw),lw=C(rw,1,sw),dw=(e,t)=>aw(e,t).breakAt.isNone(),cw=(e,t)=>sw(e,t).breakAt.isNone(),uw=(e,t)=>ow(iw(e,t),t),mw=(e,t)=>ow(lw(e,t),t),gw=x,fw=(e,t)=>Math.abs(e.left-t),pw=(e,t)=>Math.abs(e.right-t),hw=(e,o)=>Ye(e,(e,t)=>{var r=Math.min(fw(e,o),pw(e,o)),n=Math.min(fw(t,o),pw(t,o));return n===r&&ze(t,"node")&&gw(t.node)||n<r?t:e}),vw=t=>{var e,r=e=>te(e,e=>{e=ui(e);return e.node=t,e});return G(t)?r(t.getClientRects()):X(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),r(e.getClientRects())):[]},bw=e=>Ce(e,vw),yw=((t=M0=M0||{})[t.Up=-1]="Up",t[t.Down=1]="Down",(e,n,o,t,a,r)=>{let s=0;const i=[],l=t=>{let r=bw([t]);-1===e&&(r=r.reverse());for(let e=0;e<r.length;e++){const t=r[e];if(!o(t,d)){if(0<i.length&&n(t,Xe(i))&&s++,t.line=s,a(t))return!0;i.push(t)}}return!1},d=Xe(r.getClientRects());var c;return d&&(c=r.getNode())&&(l(c),((e,t,r)=>{let n=c;for(;n=eu(n,e,Oi,t);)if(r(n))return})(e,t,l)),i}),Cw=C(yw,M0.Up,fi,pi),ww=C(yw,M0.Down,pi,fi),Ew=e=>Xe(e.getClientRects()),xw=t=>e=>e.line>t,kw=t=>e=>e.line===t,_w=(e,t)=>{e.selection.setRng(t),ef(e,e.selection.getRng())},Sw=(e,t,r)=>ee.some(s1(e,t,r)),Nw=(e,t,r,n,o,a)=>{var s=t===en.Forwards,i=ku(e.getBody()),i=C(mu,s?i.next:i.prev),n=s?n:o;if(!r.collapsed){const n=vi(r);if(a(n))return o1(t,e,n,t===en.Backwards,!1);if(m1(e)){const e=r.cloneRange();return e.collapse(t===en.Backwards),ee.from(e)}}var o=cu(t,e.getBody(),r);return n(o)?a1(e,o.getNode(!s)):(a=i(o),o=di(r),a?n(a=mh(s,a))?o1(t,e,a.getNode(!s),s,!1):(i=i(a))&&n(i)&&gu(a,i)?o1(t,e,i.getNode(!s),s,!1):o?Sw(e,a.toRange(),!1):ee.none():o?ee.some(r):ee.none())},Rw=(t,r,n,e,o,a)=>{var s=cu(r,t.getBody(),n),i=Xe(s.getClientRects()),l=r===M0.Down,d=t.getBody();if(!i)return ee.none();if(m1(t)){const t=l?ie.fromRangeEnd(n):ie.fromRangeStart(n);return(l?mw:uw)(d,t).orThunk(()=>ee.from(t)).map(e=>e.toRange())}var c=(l?ww:Cw)(d,xw(1),s),c=I(c,kw(1)),i=i.left,u=hw(c,i);if(u&&a(u.node)){const n=Math.abs(i-u.left),e=Math.abs(i-u.right);return o1(r,t,u.node,n<e,!1)}if(a=e(s)?s.getNode():o(s)?s.getNode(!0):vi(n)){const n=((e,t,r,n)=>{t=ku(t);let o,a,s,i;var l=[];let d=0;i=1===e?(o=t.next,a=pi,s=fi,ie.after(n)):(o=t.prev,a=fi,s=pi,ie.before(n));var c=Ew(i);do{if(i.isVisible()){const e=Ew(i);if(!s(e,c)){0<l.length&&a(e,Xe(l))&&d++;const t=ui(e);if(t.position=i,t.line=d,r(t))return l;l.push(t)}}}while(i=o(i));return l})(r,d,xw(1),a);let e=hw(I(n,kw(1)),i);if(e)return Sw(t,e.position.toRange(),!1);if(e=Xe(I(n,kw(0))))return Sw(t,e.position.toRange(),!1)}return 0===c.length?Aw(t,l).filter(l?o:e).map(e=>s1(t,e.toRange(),!1)):ee.none()},Aw=(e,t)=>{var r,n=e.selection.getRng(),n=t?ie.fromRangeEnd(n):ie.fromRangeStart(n),o=(o=n.container(),r=e.getBody(),nn(K(o),e=>Hc(e.dom),e=>e.dom===r).map(e=>e.dom).getOr(r));if(t){const e=sw(o,n);return Re(e.positions)}{const e=aw(o,n);return Ne(e.positions)}},Tw=(t,e,r)=>Aw(t,e).filter(r).exists(e=>(t.selection.setRng(e.toRange()),!0)),Ow=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},Bw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Pw=(t,e,r)=>D1(e,r).map(e=>(Ow(t,e),r)),Dw=(t,r,e)=>{var n,o,a,s=t.getBody(),i=(n=t.selection.getRng(),o=s,i=e,a=ie.fromRangeStart(n),n.collapsed?a:(n=ie.fromRangeEnd(n),i?Pu(o,n).getOr(n):Bu(o,a).getOr(a)));return((s,i,l,d)=>{const e=mh(s,d),c=q1(i,l,e);return q1(i,l,e).bind(C(Q1,s)).orThunk(()=>{{var t=s,r=i,n=l,o=c,e=d;const a=mh(t,e);return Ru(t,n,a).map(C(mh,t)).fold(()=>o.map(Y1),e=>q1(r,n,e).map(C(X1,t,r,n,a,e)).filter(C(Z1,o))).filter(V1)}})})(e,C(dh,t),s,i).bind(e=>Pw(t,r,e))},Lw=(e,t,r)=>!!Ed(e)&&Dw(e,t,r).isSome(),Mw=(e,t,r)=>{return!!Ed(t)&&(e=e,o=(t=t).selection.getRng(),o=e?ie.fromRangeEnd(o):ie.fromRangeStart(o),n=t,!!H(n.selection.getSel().modify))&&(e&&oi(o)?J1(!0,t.selection,o):!(e||!ai(o))&&J1(!1,t.selection,o));var n,o},Iw=g=>{const f=Oo(null),p=C(dh,g);return g.on("NodeChange",e=>{var r,n,o,t,a,s,i,l,d,c,u,m;Ed(g)&&(((e,t,r)=>{t=te(Vn(K(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),t=I(t,e),r=I(r,e);re(xe(t,r),C(Bw,!1)),re(xe(r,t),C(Bw,!0))})(p,g.dom,e.parents),t=g,a=f,m=a.get(),t.selection.isCollapsed()&&!t.composing&&m&&(s=ie.fromRangeStart(t.selection.getRng()),!ie.isTextPosition(s)||(u=s,oi(u))||ai(u)||(Ow(t,(u=m,t=s,ie.isTextPosition(t)?(m=u,s=t,Rc(m)&&s.container()===m?(i=m,l=s,d=Tc(i.data.substr(0,l.offset())),c=Tc(i.data.substr(l.offset())),0<(d.text+c.text).length?(Oc(i),ie(i,l.offset()-d.count)):l):Bc(m,s)):(c=u,((i=t).container()===c.parentNode?(e,t)=>{const r=t.container(),n=((e,t)=>{e=A(e,t);return-1===e?ee.none():ee.some(e)})(Ae(r.childNodes),e).map(e=>e<t.offset()?ie(r,t.offset()-1):t).getOr(t);return Pc(e),n}:Bc)(c,i)))),a.set(null))),r=p,n=g,o=f,d=e.parents,n.selection.isCollapsed())&&(d=I(d,r),re(d,e=>{var t=ie.fromRangeStart(n.selection.getRng());q1(r,n.getBody(),t).bind(e=>Pw(n,o,e))}))}),f},Fw=C(Mw,!0),Uw=C(Mw,!1),zw=(t,r,n)=>{var e;return!!Ed(t)&&(e=Aw(t,r).getOrThunk(()=>{var e=t.selection.getRng();return r?ie.fromRangeEnd(e):ie.fromRangeStart(e)}),q1(C(dh,t),t.getBody(),e).exists(e=>{e=Y1(e);return D1(n,e).exists(e=>(Ow(t,e),!0))}))},jw=(t,r)=>e=>D1(r,e).map(e=>()=>Ow(t,e)),Hw=(n,o,a,s)=>{const i=n.getBody(),l=C(dh,n);n.undoManager.ignore(()=>{var e,t,r;n.selection.setRng((e=a,t=s,(r=document.createRange()).setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r)),hh(n),q1(l,i,ie.fromRangeStart(n.selection.getRng())).map(G1).bind(jw(n,o)).each(M)}),n.nodeChanged()},$w=(e,t,r)=>{if(e.selection.isCollapsed()&&Ed(e)){var n=ie.fromRangeStart(e.selection.getRng());{var a=e,o=t,s=r,i=n;e=a.getBody(),t=i.container();const l=tu(t,e)||e,d=C(dh,a),c=q1(d,l,i);return c.bind(e=>s?e.fold(J(ee.some(G1(e))),ee.none,J(ee.some(Y1(e))),ee.none):e.fold(ee.none,J(ee.some(Y1(e))),ee.none,J(ee.some(G1(e))))).map(jw(a,o)).getOrThunk(()=>{const e=Au(s,l,i),t=e.bind(e=>q1(d,l,e));return Wt(c,t,()=>uh(d,l,i).bind(e=>{return o=e,Wt(Du(o),Lu(o),(e,t)=>{const r=mh(!0,e),n=mh(!1,t);return Bu(o,r).forall(e=>e.isEqual(n))}).getOr(!0)?ee.some(()=>{ih(a,s,K(e))}):ee.none();var o})).getOrThunk(()=>t.bind(()=>e.map(e=>()=>{s?Hw(a,o,i,e):Hw(a,o,e,i)})))})}}return ee.none()},Vw=(e,t)=>{const r=K(e.getBody()),n=K(e.selection.getStart()),o=Ep(n,r);return be(o,t).fold(J(o),e=>o.slice(0,e))},qw=e=>1===qr(e),Ww=(e,t)=>{const r=C(jv,e);return Ce(t,e=>r(e)?[e.dom]:[])},Kw=e=>{t=e;var t,r=Vw(t,e=>t.schema.isBlock(W(e)));return Ww(e,r)},Yw=(a,s)=>{const i=I((t=a,Vw(t,e=>{return t.schema.isBlock(W(e))||(e=e,1<qr(e))})),qw);var t;return Re(i).bind(o=>{var e=ie.fromRangeStart(a.selection.getRng());return wh(s,e,o.dom)&&!Tm(o)?ee.some(()=>{var e=s,t=a,r=o,n=i;if(0===(n=Ww(t,n)).length)ih(t,e,r);else{const e=zv(r.dom,n);t.selection.setRng(e.toRange())}}):ee.none()})},Gw=(e,t)=>{var r,n,o=e.selection.getStart(),a=(r=e,n=(a=o).parentElement,B(a)&&!P(n)&&r.dom.isEmpty(n)||Tm(K(o))?zv(o,t):((e,t)=>{var{caretContainer:t,caretPosition:r}=Uv(t);return e.insertNode(t.dom),r})(e.selection.getRng(),t));e.selection.setRng(a.toRange())},Xw=e=>X(e.startContainer),Zw=(e,t)=>{if(e.selection.isCollapsed())return Yw(e,t);var r,n,o=e;if(e=(t=o).selection.getRng(),0===(n=e).startOffset&&Xw(n)&&(n=t,t=e.startContainer.parentElement,!P(t))&&jv(n,K(t))&&(e=(t=n=e).startContainer.parentNode,r=t.endContainer.parentNode,!P(e)&&!P(r)&&e.isEqualNode(r)&&(e=t.endContainer,t.endOffset===(X(e)?e:e.childNodes).length)||!n.endContainer.isEqualNode(n.commonAncestorContainer))){const a=Kw(o);return ee.some(()=>{hh(o);var e=o,t=a;0<(t=xe(t,Kw(e))).length&&Gw(e,t)})}return ee.none()},Qw=e=>{return(n=(t=e).selection.getRng()).collapsed&&(Xw(n)||t.dom.isEmpty(n.startContainer))&&(n=t,t=K(n.selection.getStart()),r=n.schema,!qn(t,e=>Iu(e.dom),e=>r.isBlock(W(e))))&&Gw(e,[]),!0;var t,r,n},Jw=(e,t,r)=>j(r)?ee.some(()=>{e._selectionOverrides.hideFakeCaret(),ih(e,t,K(r))}):ee.none(),eE=(e,t)=>{if(e.selection.isCollapsed()){var r=e,n=t;const a=n?pp:hp,s=n?en.Forwards:en.Backwards,i=cu(s,r.getBody(),r.selection.getRng());return a(i)?Jw(r,n,i.getNode(!n)):ee.from(mh(n,i)).filter(e=>a(e)&&gu(i,e)).bind(e=>Jw(r,n,e.getNode(!n)))}return t=t,o=(e=e).selection.getNode(),Eo(o)?Jw(e,t,o):ee.none();var o},tE=e=>gt(null!=e?e:"").getOr(0),rE=(e,t)=>(e||"table"===W(t)?"margin":"padding")+("rtl"===hn(t,"direction")?"-right":"-left"),nE=e=>{var r,t=aE(e);return!e.mode.isReadOnly()&&(1<t.length||(r=e,e=t,we(e,e=>{var t=rE(sd(r),e),t=bn(e,t).map(tE).getOr(0);return"false"!==r.dom.getContentEditable(e.dom)&&0<t})))},oE=e=>Hs(e)||$s(e),aE=e=>I(An(e.selection.getSelectedBlocks()),e=>{return!oE(e)&&(t=e,!Dr(t).exists(oE))&&on(e,e=>yo(e.dom)||x(e.dom)).exists(e=>yo(e.dom));var t}),sE=(e,i)=>{var t;const l=e["dom"],r=id(e),d=null!=(t=null==(t=/[a-z%]+$/i.exec(r))?void 0:t[0])?t:"px",c=tE(r),u=sd(e);re(aE(e),e=>{var t=l,r=i,n=u,o=c,a=d,e=e.dom,n=rE(n,K(e)),s=tE(t.getStyle(e,n));if("outdent"===r){const r=Math.max(0,s-o);t.setStyle(e,n,r?r+a:"")}else{const r=s+o+a;t.setStyle(e,n,r)}})},iE=e=>sE(e,"outdent"),lE=e=>{if(e.selection.isCollapsed()&&nE(e)){var t=e.dom,r=e.selection.getRng(),n=ie.fromRangeStart(r),r=t.getParent(r.startContainer,t.isBlock);if(null!==r&&Np(K(r),n,e.schema))return ee.some(()=>iE(e))}return ee.none()},dE=(t,r,n)=>Te([lE,b1,c1,(e,t)=>$w(e,r,t),t1,Gh,k1,eE,n1,Zw,x1],e=>e(t,n)).filter(e=>t.selection.isEditable()),cE=e=>void 0===e.touches||1!==e.touches.length?ee.none():ee.some(e.touches[0]),uE=(e,t)=>oe(e,t.nodeName),mE=e=>e.dom.create(zl(e),jl(e)),gE=(e,t,r)=>{var e=K(mE(e)),n=Ks(),r=(kn(e,n),r(t,e),document.createRange());return r.setStartBefore(n.dom),r.setEndBefore(n.dom),r},fE=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),pE=(e,t)=>{t.hasAttribute("data-mce-caret")&&(li(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},hE=(e,t)=>{r=e;var r=ln(K(r.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void pE(e,r)):void(ni(r)&&(pE(e,r),e.undoManager.add()))},vE=x,bE=(e,t,r)=>{const n=ku(e.getBody()),o=C(mu,1===t?n.next:n.prev);if(r.collapsed){const n=e.dom.getParent(r.startContainer,"PRE");if(n&&!o(ie.fromRangeStart(r))){const r=K((e=>{e=e.dom.create(zl(e));return e.innerHTML='<br data-mce-bogus="1">',e})(e));(1===t?En:wn)(K(n),r),e.selection.select(r.dom,!0),e.selection.collapse()}}},yE=(s,i)=>(e=>{const t=((e,t)=>{const r=t?e.getEnd(!0):e.getStart(!0);return ch(r)?!t:t})(s.selection,i)?en.Forwards:en.Backwards,r=e.selection.getRng();return n=t,o=e,a=r,Nw(o,n,a,yp,Cp,vE).orThunk(()=>(bE(e,t,r),ee.none()));var n,o,a})(s).exists(e=>(_w(s,e),!0)),CE=(t,s)=>(e=>{const t=s?1:-1,r=e.selection.getRng();return n=t,o=e,a=r,Rw(o,n,a,e=>yp(e)||vp(e),e=>Cp(e)||bp(e),vE).orThunk(()=>(bE(e,t,r),ee.none()));var n,o,a})(t).exists(e=>(_w(t,e),!0)),wE=(e,t)=>Tw(e,t,t?Cp:yp),EE=(r,n)=>u1(r,!n).map(e=>{var e=e.toRange(),t=r.selection.getRng();return n?e.setStart(t.startContainer,t.startOffset):e.setEnd(t.endContainer,t.endOffset),e}).exists(e=>(_w(r,e),!0)),xE=e=>V(["figcaption"],W(e)),kE=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const a=K(n.getBody()),s=ie.fromRangeStart(n.selection.getRng());return((e,t,r)=>{t=C(U,t);return on(K(e.container()),e=>r.isBlock(W(e)),t).filter(xE)})(s,a,n.schema).exists(()=>{if(e=a,t=o,r=s,(t?cw:dw)(e.dom,r)){const s=gE(n,a,o?kn:xn);return n.selection.setRng(s),!0}var e,t,r;return!1})})(e,t),_E=(e,t)=>{return a=e,(t?ee.from(a.dom.getParent(a.selection.getNode(),"details")).map(e=>{return e=e,r=(t=a).selection.getRng(),r=ie.fromRangeStart(r),!(t.getBody().lastChild!==e||!cw(e,r)||(t.execCommand("InsertNewBlockAfter"),0));var t,r}):ee.from(a.dom.getParent(a.selection.getNode(),"summary")).bind(o=>ee.from(a.dom.getParent(o,"details")).map(e=>{return e=e,r=o,n=(t=a).selection.getRng(),n=ie.fromRangeStart(n),!(t.getBody().firstChild!==e||!dw(r,n)||(t.execCommand("InsertNewBlockBefore"),0));var t,r,n}))).getOr(!1);var a},SE={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},NE=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,v=(e,...t)=>()=>e.apply(null,t),RE=(e,t)=>{return ve((e=e,r=t,Ce((e=e,te(e,e=>({...SE,...e}))),e=>NE(e,r)?[e]:[])),e=>e.action());var r},AE=(e,t)=>{return Te((e=e,r=t,Ce((e=e,te(e,e=>({...SE,...e}))),e=>NE(e,r)?[e]:[])),e=>e.action());var r},TE=(t,e)=>{var e=e?en.Forwards:en.Backwards,r=t.selection.getRng();return Nw(t,e,r,pp,hp,Eo).exists(e=>(_w(t,e),!0))},OE=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return Rw(t,e,r,pp,hp,Eo).exists(e=>(_w(t,e),!0))},BE=(e,t)=>Tw(e,t,t?hp:pp),PE=yl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),DE={...PE,none:e=>PE.none(e)},LE=(e,t,r)=>Ce(jr(e),e=>Rr(e,t)?r(e)?[e]:[]:LE(e,t,r)),ME=(e,t)=>dn(e,"table",t),IE=(e,t,r,n,o=S)=>{const a=1===n;if(!a&&r<=0)return DE.first(e[0]);if(a&&r>=e.length-1)return DE.last(e[e.length-1]);{const a=r+n,s=e[a];return o(s)?DE.middle(t,s):IE(e,t,a,n,o)}},FE=(r,e)=>ME(r,e).bind(e=>{const t=LE(e,"th,td",S);return be(t,e=>U(r,e)).map(e=>({index:e,all:t}))}),UE=["img","br"],zE=e=>{return t=e,Ms.getOption(t).filter(e=>0!==e.trim().length||-1<e.indexOf(Xn)).isSome()||V(UE,W(e))||(t=e,er(t)&&"false"===dr(t,"contenteditable"));var t},jE=(e,t,r,n,o)=>{var a,s,i,r=Vn(K(r),"td,th,caption").map(e=>e.dom),r=I((a=e,e=r,Ce(e,e=>{var t={left:(t=ui(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:t.left,y:a(t),cell:e},{x:t.right,y:a(t),cell:e}]})),e=>t(e,o));return e=r,s=n,i=o,pe(e,(e,n)=>e.fold(()=>ee.some(n),e=>{var t=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-i)),r=Math.sqrt(Math.abs(n.x-s)+Math.abs(n.y-i));return ee.some(r<t?n:e)}),ee.none()).map(e=>e.cell)},HE=C(jE,e=>e.bottom,(e,t)=>e.y<t),$E=C(jE,e=>e.top,(e,t)=>e.y>t),VE=(e,t,r)=>{var n,o,a=e(t,r);return a.breakType===L0.Wrap&&0===a.positions.length||!B(r.getNode())&&a.breakType===L0.Br&&1===a.positions.length?(n=e,o=t,!a.breakAt.exists(e=>n(o,e).breakAt.isSome())):a.breakAt.isNone()},qE=C(VE,aw),WE=C(VE,sw),KE=(t,e,r,n)=>{var o=t.selection.getRng(),a=e?1:-1;return!(!Uc()||!((e,t,r)=>{const n=ie.fromRangeStart(t);return Ou(!e,r).exists(e=>e.isEqual(n))})(e,o,r)||(o1(a,t,r,!e,!1).each(e=>{_w(t,e)}),0))},YE=(a,s,t)=>{n=t.getNode(!!s);const e=co(n)?ee.some(n):ee.none(),r=!1===s;var n;e.fold(()=>_w(a,t.toRange()),o=>Ou(r,a.getBody()).filter(e=>e.isEqual(t)).fold(()=>_w(a,t.toRange()),e=>{var t,r,n;t=s,n=o,(r=a).undoManager.transact(()=>{var e=t?En:wn,e=gE(r,K(n),e);_w(r,e)})}))},GE=(e,t,r,n)=>{var o,a,s,i,l,d,c,u,m,g,f=e.selection.getRng(),f=ie.fromRangeStart(f),p=e.getBody();if(!t&&qE(n,f)){o=p,i=a=r,l=s=f;const n=Ne(l.getClientRects()).bind(e=>HE(i,e.left,e.top)).bind(e=>{return ow(Lu(t=e).map(e=>aw(t,e).positions.concat(e)).getOr([]),l);var t}).orThunk(()=>Ne(s.getClientRects()).bind(e=>nw(iw(o,ie.before(a)),e.left))).getOr(ie.before(a));return YE(e,t,n),!0}if(t&&WE(n,f)){d=p,m=c=r,g=u=f;const n=Re(g.getClientRects()).bind(e=>$E(m,e.left,e.top)).bind(e=>{return ow(Du(t=e).map(e=>[e].concat(sw(t,e).positions)).getOr([]),g);var t}).orThunk(()=>Ne(u.getClientRects()).bind(e=>nw(lw(d,ie.after(c)),e.left))).getOr(ie.after(c));return YE(e,t,n),!0}return!1},XE=(r,n,o)=>ee.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(t=>ee.from(r.dom.getParent(t,"table")).map(e=>o(r,n,e,t))).getOr(!1),ZE=(e,t)=>XE(e,t,KE),QE=(e,t)=>XE(e,t,GE),JE=(t,r,e)=>e.fold(ee.none,ee.none,(e,t)=>{return t=t,an(t,zE).map(e=>{return e=Cg.exact(e,0,e,0),_g(e)})},e=>(t.execCommand("mceTableInsertRowAfter"),ex(t,r,e))),ex=(e,t,r)=>{return JE(e,t,(o=cn,FE(n=r,void 0).fold(()=>DE.none(n),e=>IE(e.all,n,e.index,1,o))));var n,o},tx=(e,t,r)=>{return JE(e,t,(o=cn,FE(n=r,void 0).fold(()=>DE.none(),e=>IE(e.all,n,e.index,-1,o))));var n,o},rx=(t,r)=>{const n=["table","li","dl"],o=K(t.getBody()),a=e=>{var t=W(e);return U(e,o)||V(n,t)},e=t.selection.getRng();return s=K(r?e.endContainer:e.startContainer),i=a,l=["td","th"],((d=i)(i=s)?ee.none():V(l,W(i))?ee.some(i):sn(i,l.join(","),e=>Rr(e,"table")||d(e))).map(e=>(ME(e,a).each(e=>{t.model.table.clearSelectedCells(e.dom)}),t.selection.collapse(!r),(r?ex:tx)(t,a,e).each(e=>{t.selection.setRng(e)}),!0)).getOr(!1);var s,i,l,d},nx=(e,t)=>({container:e,offset:t}),ox=se.DOM,ax=t=>e=>t===e?-1:0,sx=(e,t,r)=>{var n;return X(e)&&0<=t?ee.some(nx(e,t)):(n=Ls(ox),ee.from(n.backwards(e,t,ax(e),r)).map(e=>nx(e.container,e.container.data.length)))},ix=(e,r,n)=>{if(!X(e))return ee.none();const t=e.data;if(0<=r&&r<=t.length)return ee.some(nx(e,r));{const t=Ls(ox);return ee.from(t.backwards(e,r,ax(e),n)).bind(e=>{var t=e.container.data;return ix(e.container,r+t.length,n)})}},lx=(e,t,r)=>{if(!X(e))return ee.none();const n=e.data;var o;return t<=n.length?ee.some(nx(e,t)):(o=Ls(ox),ee.from(o.forwards(e,t,ax(e),r)).bind(e=>lx(e.container,t-n.length,r)))},dx=(e,t,r,n,o)=>{var a,e=Ls(e,(a=e,e=>a.isBlock(e)||V(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===a.getContentEditable(e)));return ee.from(e.backwards(t,r,n,o))},cx=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),ux=(e,r,n,o=!1)=>{if(!(t=r).collapsed||!X(t.startContainer))return ee.none();var t;const a={text:"",offset:0},s=e.getParent(r.startContainer,e.isBlock)||e.getRoot();return dx(e,r.startContainer,r.startOffset,(e,t,r)=>(a.text=r+a.text,a.offset+=t,((e,t,r,n=!1)=>{let o;var a=r.charAt(0);for(o=t-1;0<=o;o--){var s=e.charAt(o);if(!n&&cx(s))return ee.none();if(a===s&&ot(e,r,o,t))break}return ee.some(o)})(a.text,a.offset,n,o).getOr(t)),s).bind(e=>{var t=r.cloneRange();return t.setStart(e.container,e.offset),t.setEnd(r.endContainer,r.endOffset),t.collapsed||(e=t,0!==(e=Zs(e.toString().replace(/\u00A0/g," "))).lastIndexOf(n))?ee.none():ee.some({text:e.substring(n.length),range:t,trigger:n})})},mx=e=>{var t;return 3===e.nodeType?nx(e,e.data.length):0<(t=e.childNodes).length?mx(t[t.length-1]):nx(e,t.length)},gx=(e,t)=>{var r=e.childNodes;return 0<r.length&&t<r.length?gx(r[t],0):0<r.length&&1===e.nodeType&&r.length===t?mx(r[r.length-1]):nx(e,t)},fx=(t,e,r,n={})=>{const o=e(),a=null!=(e=t.selection.getRng().startContainer.nodeValue)?e:"",s=I(o.lookupByTrigger(r.trigger),e=>r.text.length>=e.minChars&&e.matches.getOrThunk(()=>{return n=t.dom,e=>{var t,r,e=gx(e.startContainer,e.startOffset);return e=e,r=null!=(r=(t=n).getParent(e.container,t.isBlock))?r:t.getRoot(),!dx(t,e.container,e.offset,(e,t)=>0===t?-1:t,r).filter(e=>{e=e.container.data.charAt(e.offset-1);return!cx(e)}).isSome()};var n})(r.range,a,r.text));return 0===s.length?ee.none():(e=Promise.all(te(s,t=>t.fetch(r.text,t.maxResults,n).then(e=>({matchText:r.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn})))),ee.some({lookupData:e,context:r}))},px=((t=I0=I0||{})[t.Error=0]="Error",t[t.Value=1]="Value",(e,t,r)=>e.stype===I0.Error?t(e.serror):r(e.svalue)),hx=e=>({stype:I0.Value,svalue:e}),vx=e=>({stype:I0.Error,serror:e}),bx=px,yx=e=>de(e)&&100<Be(e).length?" removed due to size":JSON.stringify(e,null,2),Cx=(e,t)=>vx([{path:e,getErrorInfo:t}]),wx=(n,i)=>({extract:(r,s)=>O(s,n).fold(()=>{return e=r,t=n,Cx(e,()=>'Choice schema did not contain choice key: "'+t+'"');var e,t},e=>{return n=r,t=s,o=i,a=e,O(o,a).fold(()=>{return e=n,t=o,r=a,Cx(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+yx(t));var e,t,r},e=>e.extract(n.concat(["branch: "+a]),t));var n,t,o,a}),toString:()=>"chooseOn("+n+"). Possible values: "+Be(i)}),Ex=o=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");var r={};for(let e=0;e<t.length;e++){var n=t[e];for(const t in n)oe(n,t)&&(r[t]=o(r[t],n[t]))}return r},xx=Ex((e,t)=>ce(e)&&ce(t)?xx(e,t):t),kx=Ex((e,t)=>t),_x=e=>({tag:"defaultedThunk",process:J(e)}),Sx=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},Nx=t=>({extract:(r,e)=>{return(e=t(e)).stype===I0.Error?(e=>{return t=r,e=e,Cx(t,J(e));var t})(e.serror):e},toString:J("val")}),Rx=Nx(hx),Ax=(e,t,r,n)=>n(O(e,t).getOrThunk(()=>r(e))),Tx=(t,r,n,o,a)=>{const s=e=>a.extract(r.concat([o]),e),e=e=>e.fold(()=>hx(ee.none()),e=>{var e=a.extract(r.concat([o]),e),t=ee.some;return e.stype===I0.Value?{stype:I0.Value,svalue:t(e.svalue)}:e});switch(t.tag){case"required":return c=r,u=n,m=o,g=s,O(u,m).fold(()=>{return e=c,t=m,r=u,Cx(e,()=>'Could not find valid *required* value for "'+t+'" in '+yx(r));var e,t,r},g);case"defaultedThunk":return Ax(n,o,t.process,s);case"option":return g=n,d=o,e(O(g,d));case"defaultedOptionThunk":return i=n,d=o,l=t.process,e(O(i,d).map(e=>!0===e?l(i):e));case"mergeWithThunk":return Ax(n,o,J({}),e=>{e=xx(t.process(n),e);return s(e)})}var i,l,d,c,u,m,g},Ox=n=>({extract:(e,t)=>{{var o=e,a=t;const s={},i=[];for(const r of n)Sx(r,(e,t,r,n)=>{r=Tx(r,o,a,e,n);bx(r,e=>{i.push(...e)},e=>{s[t]=e})},(e,t)=>{s[e]=t(a)});return 0<i.length?vx(i):hx(s)}},toString:()=>{return"obj{\n"+te(n,e=>Sx(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}}),Bx=n=>({extract:(r,e)=>{var t,e=te(e,(e,t)=>n.extract(r.concat(["["+t+"]"]),e));return 0<(e=(e=>{const t=[],r=[];return re(e,e=>{px(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}})(e=e)).errors.length?(t=e.errors,d(vx,ye)(t)):hx(e.values)},toString:()=>"array("+n.toString()+")"}),Px=(e,t,r)=>{return r=r,r=(t=t.extract([e],r)).stype===I0.Error?{stype:I0.Error,serror:(e=t.serror,{input:r,errors:e})}:t,px(r,bl.error,bl.value)},Dx=(e,t)=>wx(e,De(t,Ox)),Lx=J(Rx),Mx=(r,n)=>Nx(e=>{var t=typeof e;return r(e)?hx(e):vx(`Expected type: ${n} but got: `+t)}),Ix=Mx(k,"number"),Fx=Mx(Z,"string"),Ux=Mx(ue,"boolean"),zx=Mx(H,"function"),jx=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),Hx=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),$x=(e,t)=>jx(e,e,{tag:"required",process:{}},t),Vx=e=>$x(e,Fx),qx=e=>$x(e,zx),Wx=(e,t)=>jx(e,e,{tag:"option",process:{}},t),Kx=e=>Wx(e,Fx),Yx=(e,t,r)=>jx(e,e,_x(t),r),Gx=(e,t)=>Yx(e,t,Ix),Xx=(e,t,r)=>{return Yx(e,t,(n=r,o=e=>V(n,e)?bl.value(e):bl.error(`Unsupported value: "${e}", choose one of "${n.join(", ")}".`),Nx(e=>o(e).fold(vx,hx))));var n,o},Zx=(e,t)=>Yx(e,t,Ux),Qx=(e,t)=>Yx(e,t,zx),Jx=Vx("type"),ek=qx("fetch"),tk=qx("onAction"),rk=Qx("onSetup",()=>$),nk=Kx("text"),ok=Kx("icon"),ak=Kx("tooltip"),sk=Kx("label"),ik=Zx("active",!1),lk=Zx("enabled",!0),dk=Zx("primary",!1),ck=e=>{return e=e,Yx("type",e,Fx)},uk=Ox([Jx,Vx("trigger"),Gx("minChars",1),jx("columns","columns",_x(1),Lx()),Gx("maxResults",10),Wx("matches",zx),ek,tk,(t=Fx,Yx("highlightOn",[],Bx(t)))]);var mk,gk,t=[lk,ak,ok,nk,rk],fk=[ik].concat(t),pk=[Qx("predicate",T),Xx("scope","node",["node","editor"]),Xx("position","selection",["node","selection","line"])],hk=t.concat([ck("contextformbutton"),dk,tk,Hx("original",g)]),vk=fk.concat([ck("contextformbutton"),dk,tk,Hx("original",g)]),t=t.concat([ck("contextformbutton")]),fk=fk.concat([ck("contextformtogglebutton")]),hk=Dx("type",{contextformbutton:hk,contextformtogglebutton:vk});Ox([ck("contextform"),Qx("initValue",J("")),sk,jx("commands","commands",{tag:"required",process:{}},Bx(hk)),Wx("launch",Dx("type",{contextformbutton:t,contextformtogglebutton:fk}))].concat(pk));const bk=s=>{const o=Bo(),a=Oo(!1),r=o.isSet,n=()=>{r()&&(s.dispatch("AutocompleterEnd"),a.set(!1),o.clear())},i=Ze(()=>{{var e;const t=s.ui.registry.getAll().popups,r=De(t,e=>{return e=e,Px("Autocompleter",uk,e).fold(e=>{throw new Error("Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):e;return te(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})((e=e).errors).join("\n")+"\n\nInput object: "+yx(e.input))},g)}),n=He(Fe(r,e=>e.trigger)),o=Ue(r);return{dataset:r,triggers:n,lookupByTrigger:t=>I(o,e=>e.trigger===t)}}}),l=e=>{var t;t=e,o.get().map(e=>ux(s.dom,s.selection.getRng(),e.trigger,!0).bind(e=>fx(s,i,e,t))).getOrThunk(()=>{return t=s,r=i,e=r(),a=t.selection.getRng(),n=t.dom,o=a,a=e,Te(a.triggers,e=>ux(n,o,e)).bind(e=>fx(t,r,e));var t,r,n,o,e,a}).fold(n,n=>{var e;e=n.context,r()||o.set({trigger:e.trigger,matchLength:e.text.length}),n.lookupData.then(r=>{o.get().map(e=>{var t=n.context;e.trigger===t.trigger&&(o.set({...e,matchLength:t.text.length}),a.get()?(ag(s,{range:t.range}),s.dispatch("AutocompleterUpdate",{lookupData:r})):(a.set(!0),ag(s,{range:t.range}),s.dispatch("AutocompleterStart",{lookupData:r})))})})})},e=()=>o.get().bind(({trigger:e})=>{const n=s.selection.getRng();return ux(s.dom,n,e,a.get()).filter(({range:e})=>{return t=n,e=e,r=t.compareBoundaryPoints(window.Range.START_TO_START,e),t=t.compareBoundaryPoints(window.Range.END_TO_END,e),0<=r&&t<=0;var t,r}).map(({range:e})=>e)});s.addCommand("mceAutocompleterReload",(e,t)=>{t=de(t)?t.fetchOptions:{};l(t)}),s.addCommand("mceAutocompleterClose",n),s.addCommand("mceAutocompleterRefreshActiveRange",()=>{e().each(e=>{ag(s,{range:e})})}),s.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>e().isSome());{var t=s,d={cancelIfNecessary:n,load:l};const c=hs(d.load,50);t.on("input",e=>{"insertCompositionText"===e.inputType&&!t.composing||c.throttle()}),t.on("keydown",e=>{e=e.which;8===e?c.throttle():27===e?(c.cancel(),d.cancelIfNecessary()):38!==e&&40!==e||c.cancel()},!0),t.on("remove",c.cancel)}},yk=Lt().browser.isSafari(),Ck=e=>Ys(K(e)),wk=(e,t)=>{return 0===e.startOffset&&e.endOffset===(null==(e=t.textContent)?void 0:e.length)},Ek=(e,t)=>ee.from(e.getParent(t.container(),"details")),xk=(e,t)=>Ek(e,t).isSome(),kk=(e,t)=>{var r=t.getNode();D(r)||e.selection.setCursorLocation(r,t.offset())},_k=(t,e,r)=>{var n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const e=t.dom.select("summary",n)[0];e&&(r?Du:Lu)(e).each(e=>kk(t,e))}else kk(t,e)},Sk=(r,n,e)=>{const{dom:o,selection:t}=r,a=r.getBody();if("character"!==e)return!1;{const e=ie.fromRangeStart(t.getRng()),s=o.getParent(e.container(),o.isBlock),i=Ek(o,e),l=s&&o.isEmpty(s),d=P(null==s?void 0:s.previousSibling),c=P(null==s?void 0:s.nextSibling);return!!(l&&(n?c:d)&&Au(!n,a,e).exists(e=>xk(o,e)&&!qt(i,Ek(o,e))))||Au(n,a,e).fold(T,e=>{var t=Ek(o,e);if(!xk(o,e)||qt(i,t))return!1;if(n||_k(r,e,!1),s&&l){if(n&&d)return!0;if(!n&&c)return!0;_k(r,e,n),r.dom.remove(s)}return!0})}},Nk=(e,t,r,n)=>{var o,a,s,i,l,d,c,u,m,g=e.selection.getRng(),f=ie.fromRangeStart(g),e=e.getBody();return"selection"===n?(c=g,n=(u=t).startSummary.exists(e=>e.contains(c.startContainer)),g=u.startSummary.exists(e=>e.contains(c.endContainer)),m=u.startDetails.forall(t=>u.endDetails.forall(e=>t!==e)),(n||g)&&!(n&&g)||m):r?(d=f,t.startSummary.exists(e=>{return t=d,r=e,Lu(r).exists(e=>B(e.getNode())&&Pu(r,e).exists(e=>e.isEqual(t))||e.isEqual(t));var t,r})||(i=e,l=f,t.startDetails.exists(t=>Bu(i,l).forall(e=>!t.contains(e.container()))))):(s=f,t.startSummary.exists(e=>{return t=s,e=e,Du(e).exists(e=>e.isEqual(t));var t})||(o=f,(a=t).startDetails.exists(e=>Pu(e,o).forall(t=>a.startSummary.exists(e=>!e.contains(o.container())&&e.contains(t.container()))))))},Rk=(e,t,r)=>{return o=t,a=r,((t,e)=>{var r=ee.from(t.getParent(e.startContainer,"details")),n=ee.from(t.getParent(e.endContainer,"details"));if(r.isSome()||n.isSome()){const e=r.bind(e=>ee.from(t.select("summary",e)[0]));return ee.some({startSummary:e,startDetails:r,endDetails:n})}return ee.none()})((n=e).dom,n.selection.getRng()).fold(()=>Sk(n,o,a),e=>Nk(n,e,o,a)||Sk(n,o,a))||yk&&((l,d,c)=>{const u=l.selection,m=u.getNode(),e=u.getRng(),t=ie.fromRangeStart(e);return!!_o(m)&&("selection"===c&&wk(e,m)||wh(d,t,m)?Ck(m):l.undoManager.transact(()=>{const e=u.getSel();let{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:o}=null!=e?e:{};var a=()=>{j(t)&&j(r)&&j(n)&&j(o)&&null!=e&&e.setBaseAndExtent(t,r,n,o)},s=(e,t)=>{re(e.childNodes,e=>{cm(e)&&t.appendChild(e)})},i=l.dom.create("span",{"data-mce-bogus":"1"});s(m,i),m.appendChild(i),a(),"word"!==c&&"line"!==c||null==e||e.modify("extend",d?"right":"left",c),!u.isCollapsed()&&wk(u.getRng(),i)?Ck(m):(l.execCommand(d?"ForwardDelete":"Delete"),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.anchorOffset,n=null==e?void 0:e.focusNode,o=null==e?void 0:e.focusOffset,s(i,m),a()),l.dom.remove(i)}),!0)})(e,t,r)?ee.some($):ee.none();var n,o,a},Ak=o=>(e,t,r={})=>{var n=e.getBody(),n={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:n,currentTarget:n,eventPhase:Event.AT_TARGET,originalTarget:n,explicitOriginalTarget:n,isTrusted:!1,srcElement:n,cancelable:!1,preventDefault:$,inputType:t},t=Wa(new InputEvent(o));return e.dispatch(o,{...t,...n,...r})},Tk=Ak("input"),Ok=Ak("beforeinput"),Bk=Lt(),Pk=Bk.os,Dk=Pk.isMacOS()||Pk.isiOS(),Lk=Bk.browser.isFirefox(),Mk=(r,n)=>{var e=r.dom,o=r.schema.getMoveCaretBeforeOnEnterElements();if(n){if(/^(LI|DT|DD)$/.test(n.nodeName)){const r=(e=>{for(;e;){if(G(e)||X(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(n.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&n.insertBefore(e.doc.createTextNode(Xn),n.firstChild)}var a=e.createRng();if(n.normalize(),n.hasChildNodes()){const r=new Yn(n,n);let e,t=n;for(;e=r.current();){if(X(e)){a.setStart(e,0),a.setEnd(e,0);break}if(o[e.nodeName.toLowerCase()]){a.setStartBefore(e),a.setEndBefore(e);break}t=e,e=r.next()}e||(a.setStart(t,0),a.setEnd(t,0))}else B(n)?n.nextSibling&&e.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));r.selection.setRng(a),ef(r,a)}},Ik=(e,t)=>{var r=e.getRoot();let n,o=t;for(;o!==r&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){n=o;break}o=o.parentNode}return o!==r?n:r},Fk=e=>ee.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Uk=e=>{e.innerHTML='<br data-mce-bogus="1">'},zk=(e,t)=>{if(zl(e).toLowerCase()===t.tagName.toLowerCase()){var r=e,n=t,t=jl(e);const o=r.dom;ee.from(t.style).map(o.parseStyle).each(e=>{e={...yn(K(n)),...e};o.setStyles(n,e)});r=ee.from(t.class).map(e=>e.split(/\s+/)),e=ee.from(n.className).map(e=>I(e.split(/\s+/),e=>""!==e));Wt(r,e,(t,e)=>{e=I(e,e=>!V(t,e)),e=[...t,...e];o.setAttrib(n,"class",e.join(" "))});const a=["style","class"],s=Ie(t,(e,t)=>!V(a,t));o.setAttribs(n,s)}},jk=(e,t,r,n,o=!0,a,s)=>{var i=e.dom,l=e.schema,d=zl(e),c=r?r.nodeName.toUpperCase():"";let u=t;var m=l.getTextInlineElements(),g=a||"TABLE"===c||"HR"===c?i.create(a||d,s||{}):r.cloneNode(!1);let f=g;if(o){do{if(m[u.nodeName]&&!Iu(u)&&!Gu(u)){const e=u.cloneNode(!1);i.setAttrib(e,"id",""),g.hasChildNodes()?e.appendChild(g.firstChild):f=e,g.appendChild(e)}}while((u=u.parentNode)&&u!==n)}else i.setAttrib(g,"style",null),i.setAttrib(g,"class",null);return zk(e,g),Uk(f),g},Hk=(e,t)=>{e=null==e?void 0:e.parentNode;return j(e)&&e.nodeName===t},$k=e=>j(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Vk=e=>j(e)&&/^(LI|DT|DD)$/.test(e.nodeName),qk=e=>{var t=e.parentNode;return Vk(t)?t:e},Wk=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!G(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},Kk=e=>pe(Fe(yn(K(e)),(e,t)=>t+`: ${e};`),(e,t)=>e+t,""),Yk=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Gk=(e,t)=>j(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Xk=(e,t,r)=>X(t)?e?1===r&&t.data.charAt(r-1)===Gs?0:r:r===t.data.length-1&&t.data.charAt(r)===Gs?t.data.length:r:r,Zk={insert:(r,e)=>{let o,a,n,s,i=!1;const l=r.dom,d=r.schema.getNonEmptyElements(),c=r.selection.getRng(),u=zl(r),m=K(c.startContainer),g=Hr(m,c.startOffset),t=g.exists(e=>er(e)&&!cn(e)),f=c.collapsed&&t,p=(e,t)=>jk(r,o,E,w,ql(r),e,t),h=e=>{var t=Xk(e,o,a);if(X(o)&&(e?0<t:t<o.data.length))return!1;if((o.parentNode!==E&&o!==E||!i||e)&&(!e||!G(o)||o!==E.firstChild)){if(Yk(o,"TABLE")||Yk(o,"HR"))return i&&!e||!i&&e;var r,n=new Yn(o,E);for(X(o)&&(e&&0===t?n.prev():e||t!==o.data.length||n.next());r=n.current();){if(G(r)){if(!r.getAttribute("data-mce-bogus")){const e=r.nodeName.toLowerCase();if(d[e]&&"br"!==e)return!1}}else if(X(r)&&!Jn(r.data))return!1;e?n.prev():n.next()}}return!0},v=()=>{let e;return e=/^(H[1-6]|PRE|FIGURE)$/.test(n)&&"HGROUP"!==x?p(u):p(),((e,t)=>{e=Wl(e);return!z(t)&&(Z(e)?V(ae.explode(e),t.nodeName.toLowerCase()):e)})(r,s)&&Gk(l,s)&&l.isEmpty(E,void 0,{includeZwsp:!0})?e=l.split(s,E):l.insertAfter(e,E),Mk(r,e),e};Bg(l,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),o=c.startContainer,a=c.startOffset;var b,y,C=!(!e||!e.shiftKey),e=!(!e||!e.ctrlKey);G(o)&&o.hasChildNodes()&&!f&&(i=a>o.childNodes.length-1,o=o.childNodes[Math.min(a,o.childNodes.length-1)]||o,a=i&&X(o)?o.data.length:0);const w=Ik(l,o);if(!w||((e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return null!==t&&"false"===e.dom.getContentEditableParent(t)})(r,o))return;C||(o=((r,n,o,a,s)=>{var i;const l=r.dom,d=null!=(u=Ik(l,a))?u:l.getRoot();var c=l.getParent(a,l.isBlock);if(!c||!Gk(l,c)){if(!(c=c||d).hasChildNodes()){const a=l.create(n);return zk(r,a),c.appendChild(a),o.setStart(a,0),o.setEnd(a,0),a}let e,t=a;for(;t&&t.parentNode!==c;)t=t.parentNode;for(;t&&!l.isBlock(t);)t=(e=t).previousSibling;var u=null==(i=null==e?void 0:e.parentElement)?void 0:i.nodeName;if(e&&u&&r.schema.isValidChild(u,n.toLowerCase())){const i=e.parentNode,d=l.create(n);for(zk(r,d),i.insertBefore(d,e),t=e;t&&!l.isBlock(t);){const r=t.nextSibling;d.appendChild(t),t=r}o.setStart(a,s),o.setEnd(a,s)}}return a})(r,u,c,o,a));let E=l.getParent(o,l.isBlock)||l.getRoot();s=j(null==E?void 0:E.parentNode)?l.getParent(E.parentNode,l.isBlock):null,n=E?E.nodeName.toUpperCase():"";const x=s?s.nodeName.toUpperCase():"";if("LI"!==x||e||(s=(E=s).parentNode,n=x),G(s)&&(b=r,y=E,!C)&&y.nodeName.toLowerCase()===zl(b)&&b.dom.isEmpty(y)&&(e=>{let t=y;for(;t&&t!==e&&P(t.nextSibling);){const e=t.parentElement;if(!e||(r=e,!oe(b.schema.getTextBlockElements(),r.nodeName.toLowerCase())))return ko(e);t=e}var r;return!1})(b.getBody()))e=r,C=p,N=E,C=C(zl(e)),(S=e.dom.getParent(N,ko))&&(e.dom.insertAfter(C,S),Mk(e,C),1<(null!=(S=null==(C=null==(S=N.parentElement)?void 0:S.childNodes)?void 0:C.length)?S:0))&&e.dom.remove(N);else if(/^(LI|DT|DD)$/.test(n)&&G(s)&&l.isEmpty(E)){var k=r,_=p,C=s,S=E,e=u,N=k.dom,R=k.selection.getRng(),A=C.parentNode;if(C!==k.getBody()&&A){$k(T=C)&&$k(T.parentNode)&&(e="LI");var T=Vk(S)?Kk(S):void 0;let t=Vk(S)&&T?_(e,{style:Kk(S)}):_(e);if(Wk(C,S,!0)&&Wk(C,S,!1))if(Hk(C,"LI")){const k=qk(C);N.insertAfter(t,k),(null==(_=C.parentNode)?void 0:_.firstChild)===C?N.remove(k):N.remove(C)}else N.replace(t,C);else{if(Wk(C,S,!0))Hk(C,"LI")?(N.insertAfter(t,qk(C)),t.appendChild(N.doc.createTextNode(" ")),t.appendChild(C)):A.insertBefore(t,C);else if(Wk(C,S,!1))N.insertAfter(t,qk(C));else{C=qk(C);const k=R.cloneRange(),_=(k.setStartAfter(S),k.setEndAfter(C),k.extractContents());if("LI"===e&&(A=_).firstChild&&"LI"===A.firstChild.nodeName){const k=I(te(t.children,K),L(ar("br")));t=_.firstChild,N.insertAfter(_,C),re(k,e=>xn(K(t),e)),T&&t.setAttribute("style",T)}else N.insertAfter(_,C),N.insertAfter(t,C)}N.remove(S)}Mk(k,t)}}else if(f||E!==r.getBody()&&Gk(l,E)){var O,_=E.parentNode;let t;if(f)t=p(u),g.fold(()=>{kn(m,K(t))},e=>{wn(e,K(t))}),r.selection.setCursorLocation(t,0);else if(ei(E))t=li(E),l.isEmpty(E)&&Uk(E),zk(r,t),Mk(r,t);else if(h(!1))t=v();else if(h(!0)&&_){const e=ie.fromRangeStart(c),o=bp(e),a=K(E),n=Dp(a,e,r.schema)?Lp(a,e,r.schema).bind(e=>ee.from(e.getNode())):ee.none(),s=(t=_.insertBefore(p(),E),Yk(E,"HR")||o?t:n.getOr(E));Mk(r,s)}else{R=c,(A=R.cloneRange()).setStart(R.startContainer,Xk(!0,R.startContainer,R.startOffset)),A.setEnd(R.endContainer,Xk(!1,R.endContainer,R.endOffset));const e=A.cloneRange(),o=(e.setEndAfter(E),e.extractContents());T=o,re($n(K(T),rr),e=>{e=e.dom;e.nodeValue=Zs(e.data)});{let e=o;for(;X(e)&&(e.data=e.data.replace(/^[\r\n]+/,"")),e=e.firstChild;);}t=o.firstChild,l.insertAfter(o,E),((r,n,o)=>{var a,s,i=[];if(o){let e=o;for(;e=e.firstChild;){if(r.isBlock(e))return;G(e)&&!n[e.nodeName.toLowerCase()]&&i.push(e)}let t=i.length;for(;t--;)(!(e=i[t]).hasChildNodes()||e.firstChild===e.lastChild&&""===(null==(a=e.firstChild)?void 0:a.nodeValue)||(a=r,(s=e)&&"A"===s.nodeName&&a.isEmpty(s)))&&r.remove(e)}})(l,d,t),C=l,(k=E).normalize(),(!(O=k.lastChild)||G(O)&&/^(left|right)$/gi.test(C.getStyle(O,"float",!0)))&&C.add(k,"br"),l.isEmpty(E)&&Uk(E),t.normalize(),l.isEmpty(t)?(l.remove(t),v()):(zk(r,t),Mk(r,t))}l.setAttrib(t,"id",""),r.dispatch("NewBlock",{newBlock:t})}},fakeEventName:"insertParagraph"},Qk=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),ef(e,n)},Jk=(e,t)=>{var r=_r("br");wn(K(t),r),e.undoManager.add()},e_=(e,t)=>{t_(e.getBody(),t)||En(K(t),_r("br"));var r=_r("br");En(K(t),r),Qk(e,r.dom,!1),e.undoManager.add()},t_=(e,t)=>{return r=ie.after(t),!!B(r.getNode())||Bu(e,ie.after(t)).map(e=>B(e.getNode())).getOr(!1);var r},r_=e=>e&&"A"===e.nodeName&&"href"in e,n_=e=>e.fold(T,r_,r_,T),o_=(e,t)=>{t.fold($,C(Jk,e),C(e_,e),$)},a_={insert:(a,s)=>{d=a,i=C(dh,d),c=ie.fromRangeStart(d.selection.getRng());var i=q1(i,d.getBody(),c).filter(n_);if(i.isSome())i.each(C(o_,a));else{var l=a,d=s;const u=l.selection,m=l.dom,g=u.getRng();let e,t=!1,r=(Bg(m,g).each(e=>{g.setStart(e.startContainer,e.startOffset),g.setEnd(e.endContainer,e.endOffset)}),g.startOffset),n=g.startContainer;if(G(n)&&n.hasChildNodes()){const l=r>n.childNodes.length-1;n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=l&&X(n)?n.data.length:0}let o=m.getParent(n,m.isBlock);var c=o&&o.parentNode?m.getParent(o.parentNode,m.isBlock):null,i=c?c.nodeName.toUpperCase():"",d=!(!d||!d.ctrlKey);"LI"!==i||d||(o=c),X(n)&&r>=n.data.length&&(((e,t,r)=>{for(var n,o=new Yn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||X(n)&&0<n.length)return!0;return!1})(l.schema,n,o||m.getRoot())||(e=m.create("br"),g.insertNode(e),g.setStartAfter(e),g.setEndAfter(e),t=!0)),e=m.create("br"),Xi(m,g,e),Qk(l,e,t),l.undoManager.add()}},fakeEventName:"insertLineBreak"},s_=(e,t)=>Fk(e).filter(e=>0<t.length&&Rr(K(e),t)).isSome(),i_=yl([{br:[]},{block:[]},{none:[]}]),l_=(e,t)=>{return e=e,s_(e,Vl(e))},d_=r=>(e,t)=>{return e=e,Fk(e).filter(e=>$s(K(e))).isSome()===r},c_=(r,n)=>(e,t)=>{return e=e,Fk(e).fold(J(""),e=>e.nodeName.toUpperCase())===r.toUpperCase()===n},u_=e=>{e=Ik(e.dom,e.selection.getStart());return z(e)},m_=e=>c_("pre",e),g_=r=>(e,t)=>Ul(e)===r,f_=(e,t)=>{return e=e,s_(e,$l(e))},p_=(e,t)=>t,h_=e=>{var t=zl(e),r=Ik(e.dom,e.selection.getStart());return j(r)&&e.schema.isValidChild(r.nodeName,t)},v_=e=>{var e=e.selection.getRng(),t=K(e.startContainer),t=Hr(t,e.startOffset).map(e=>er(e)&&!cn(e));return e.collapsed&&t.getOr(!0)},b_=(e,t)=>(r,n)=>pe(e,(e,t)=>e&&t(r,n),!0)?ee.some(t):ee.none(),y_=(e,t,r)=>{t.selection.isCollapsed()||t.execCommand("delete"),j(r)&&Ok(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,r),j(r)&&Tk(t,e.fakeEventName))},C_=(e,t)=>{var r,n,o=()=>y_(a_,e,t),a=()=>y_(Zk,e,t),s=(r=e,n=t,L1([b_([l_],i_.none()),b_([m_(!0),u_],i_.none()),b_([c_("summary",!0)],i_.br()),b_([m_(!0),g_(!1),p_],i_.br()),b_([m_(!0),g_(!1)],i_.block()),b_([m_(!0),g_(!0),p_],i_.block()),b_([m_(!0),g_(!0)],i_.br()),b_([d_(!0),p_],i_.br()),b_([d_(!0)],i_.block()),b_([f_],i_.br()),b_([p_],i_.br()),b_([h_],i_.block()),b_([v_],i_.block())],[r,!(!n||!n.shiftKey)]).getOr(i_.none()));switch(Hl(e)){case"linebreak":s.fold(o,o,$);break;case"block":s.fold(a,a,$);break;case"invert":s.fold(a,o,$);break;default:s.fold(o,a,$)}},w_=Lt(),E_=w_.os.isiOS()&&w_.browser.isSafari(),x_=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact(()=>{C_(e,t)}))},k_=Lt(),__=e=>e.stopImmediatePropagation(),S_=e=>e.keyCode===le.PAGE_UP||e.keyCode===le.PAGE_DOWN,N_=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",__,!0):!r&&e.get()&&t.off("NodeChange",__),e.set(r)},R_=(r,n)=>{var e=n.container(),t=n.offset();return X(e)?(e.insertData(t,r),ee.some(ie(e,t+r.length))):uu(n).map(e=>{var t=Sr(r);return(n.isAtEnd()?En:wn)(e,t),ie(t.dom,r.length)})},A_=C(R_,Xn),T_=C(R_," "),O_=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},B_=o=>{const a=ie.fromRangeStart(o.selection.getRng()),s=K(o.getBody());var e,t,r;return o.selection.isCollapsed()?(e=C(dh,o),t=ie.fromRangeStart(o.selection.getRng()),q1(e,o.getBody(),t).bind((r=s,e=>e.fold(e=>Pu(r.dom,ie.before(e)),e=>Du(e),e=>Lu(e),e=>Bu(r.dom,ie.after(e))))).map(e=>()=>{return t=s,r=a,n=o.schema,(e=>($p(t,e,n)?A_:T_)(r))(e).each(O_(o));var t,r,n})):ee.none()},P_=n=>{return Kt(F.browser.isFirefox()&&n.selection.isEditable()&&(e=n.dom,t=n.selection.getRng().startContainer,e.isEditable(e.getParent(t,"summary"))),()=>{var e,t,r=K(n.getBody());n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),r=r,e=ie.fromRangeStart(n.selection.getRng()),t=n.schema,($p(r,e,t)?A_:T_)(e).each(O_(n))});var e,t},D_=e=>{if(e.addShortcut("Meta+P","","mcePrint"),bk(e),Dy(e))return Oo(null);var t=Iw(e);(g=e).on("beforeinput",e=>{g.selection.isEditable()&&!q(e.getTargetRanges(),e=>!Nf(g.dom,e))||e.preventDefault()}),(r=e).on("keyup compositionstart",C(hE,r)),m=t,(u=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=u,r=m,n=e,e=F.os.isMacOS()||F.os.isiOS(),RE([{keyCode:le.RIGHT,action:v(yE,t,!0)},{keyCode:le.LEFT,action:v(yE,t,!1)},{keyCode:le.UP,action:v(CE,t,!1)},{keyCode:le.DOWN,action:v(CE,t,!0)},...e?[{keyCode:le.UP,action:v(EE,t,!1),metaKey:!0,shiftKey:!0},{keyCode:le.DOWN,action:v(EE,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:le.RIGHT,action:v(ZE,t,!0)},{keyCode:le.LEFT,action:v(ZE,t,!1)},{keyCode:le.UP,action:v(QE,t,!1)},{keyCode:le.DOWN,action:v(QE,t,!0)},{keyCode:le.UP,action:v(QE,t,!1)},{keyCode:le.UP,action:v(_E,t,!1)},{keyCode:le.DOWN,action:v(_E,t,!0)},{keyCode:le.RIGHT,action:v(TE,t,!0)},{keyCode:le.LEFT,action:v(TE,t,!1)},{keyCode:le.UP,action:v(OE,t,!1)},{keyCode:le.DOWN,action:v(OE,t,!0)},{keyCode:le.RIGHT,action:v(Lw,t,r,!0)},{keyCode:le.LEFT,action:v(Lw,t,r,!1)},{keyCode:le.RIGHT,ctrlKey:!e,altKey:e,action:v(Fw,t,r)},{keyCode:le.LEFT,ctrlKey:!e,altKey:e,action:v(Uw,t,r)},{keyCode:le.UP,action:v(kE,t,!1)},{keyCode:le.DOWN,action:v(kE,t,!0)}],n).each(e=>{n.preventDefault()}))});{var d=e,c=t;let l=!1;d.on("keydown",e=>{if(l=e.keyCode===le.BACKSPACE,!e.isDefaultPrevented()){var t=d,r=c,n=e;const o=n.keyCode===le.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=t.selection.isCollapsed(),s=a?"character":"selection",i=e=>a?e?"word":"line":"selection";AE([{keyCode:le.BACKSPACE,action:v(lE,t)},{keyCode:le.BACKSPACE,action:v(b1,t,!1)},{keyCode:le.DELETE,action:v(b1,t,!0)},{keyCode:le.BACKSPACE,action:v(c1,t,!1)},{keyCode:le.DELETE,action:v(c1,t,!0)},{keyCode:le.BACKSPACE,action:v($w,t,r,!1)},{keyCode:le.DELETE,action:v($w,t,r,!0)},{keyCode:le.BACKSPACE,action:v(Gh,t,!1)},{keyCode:le.DELETE,action:v(Gh,t,!0)},{keyCode:le.BACKSPACE,action:v(Rk,t,!1,s)},{keyCode:le.DELETE,action:v(Rk,t,!0,s)},...Dk?[{keyCode:le.BACKSPACE,altKey:!0,action:v(Rk,t,!1,i(!0))},{keyCode:le.DELETE,altKey:!0,action:v(Rk,t,!0,i(!0))},{keyCode:le.BACKSPACE,metaKey:!0,action:v(Rk,t,!1,i(!1))}]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:v(Rk,t,!1,i(!0))},{keyCode:le.DELETE,ctrlKey:!0,action:v(Rk,t,!0,i(!0))}],{keyCode:le.BACKSPACE,action:v(k1,t,!1)},{keyCode:le.DELETE,action:v(k1,t,!0)},{keyCode:le.BACKSPACE,action:v(eE,t,!1)},{keyCode:le.DELETE,action:v(eE,t,!0)},{keyCode:le.BACKSPACE,action:v(n1,t,!1)},{keyCode:le.DELETE,action:v(n1,t,!0)},{keyCode:le.BACKSPACE,action:v(t1,t,!1)},{keyCode:le.DELETE,action:v(t1,t,!0)},{keyCode:le.BACKSPACE,action:v(Zw,t,!1)},{keyCode:le.DELETE,action:v(Zw,t,!0)},{keyCode:le.BACKSPACE,action:v(x1,t,!1)},{keyCode:le.DELETE,action:v(x1,t,!0)}],n).filter(e=>t.selection.isEditable()).each(e=>{n.preventDefault(),Ok(t,o).isDefaultPrevented()||(e(),Tk(t,o))})}}),d.on("keyup",e=>{var t,r;e.isDefaultPrevented()||(t=d,e=e,r=l,RE([{keyCode:le.BACKSPACE,action:v(v1,t)},{keyCode:le.DELETE,action:v(v1,t)},...Dk?[{keyCode:le.BACKSPACE,altKey:!0,action:v(Qw,t)},{keyCode:le.DELETE,altKey:!0,action:v(Qw,t)},...r?[{keyCode:Lk?224:91,action:v(Qw,t)}]:[]]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:v(Qw,t)},{keyCode:le.DELETE,ctrlKey:!0,action:v(Qw,t)}]],e)),l=!1})}{var a=e;let o=ee.none();a.on("keydown",e=>{var t,r,n;e.keyCode===le.ENTER&&(E_&&!!(t=a.selection.getRng()).collapsed&&(n=t.startContainer,!!X(n))&&(r=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,n=n.data.charAt(t.startOffset-1),r.test(n))?(t=a,o=ee.some(t.selection.getBookmark()),t.undoManager.add()):x_(a,e))}),a.on("keyup",r=>{r.keyCode===le.ENTER&&o.each(()=>{return e=r,(t=a).undoManager.undo(),o.fold($,e=>t.selection.moveToBookmark(e)),x_(t,e),void(o=ee.none());var t,e})})}(l=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=l,r=e,AE([{keyCode:le.SPACEBAR,action:v(B_,t)},{keyCode:le.SPACEBAR,action:v(P_,t)}],r).each(e=>{r.preventDefault(),Ok(t,"insertText",{data:" "}).isDefaultPrevented()||(e(),Tk(t,"insertText",{data:" "}))}))}),(i=e).on("input",e=>{var t,r,n,o,a;e.isComposing||(t=i,e=K(t.getBody()),t.selection.isCollapsed()&&(e=e,r=ie.fromRangeStart(t.selection.getRng()),n=t.schema,a=r.container(),(X(a)?(o=r.container(),X(o)&&ot(o.data,Xn)?(o=Gp(e,a,!1,n)||(e=>{const t=e.data,r=(()=>{const r=t.split("");return te(r,(e,t)=>Xu(e)&&0<t&&t<r.length-1&&Qu(r[t-1])&&Qu(r[t+1])?" ":e).join("")})();return r!==t&&(e.data=r,!0)})(a)||Xp(e,a,!1,n),Kt(o,r)):Wp(e,r,n)?(o=Gp(e,a,!0,n)||Xp(e,a,!0,n),Kt(o,r)):ee.none()):ee.none()).each(e=>{t.selection.setRng(e.toRange())})))}),(n=e).on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=n,r=e,RE([...(t=t,yc(t)?[{keyCode:le.TAB,action:v(rx,t,!0)},{keyCode:le.TAB,shiftKey:!0,action:v(rx,t,!1)}]:[])],r).each(e=>{r.preventDefault()}))}),s=t,(o=e).on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=o,r=s,n=e,e=F.os.isMacOS()||F.os.isiOS(),RE([{keyCode:le.END,action:v(wE,t,!0)},{keyCode:le.HOME,action:v(wE,t,!1)},...e?[]:[{keyCode:le.HOME,action:v(EE,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:le.END,action:v(EE,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:le.END,action:v(BE,t,!0)},{keyCode:le.HOME,action:v(BE,t,!1)},{keyCode:le.END,action:v(zw,t,!0,r)},{keyCode:le.HOME,action:v(zw,t,!1,r)}],n).each(e=>{n.preventDefault()}))});var o,s,n,i,l,u,m,r,g,f=e,p=t;if(!k_.os.isMacOS()){const h=Oo(!1);f.on("keydown",e=>{S_(e)&&N_(h,f,!0)}),f.on("keyup",e=>{var t,r,n;e.isDefaultPrevented()||(t=f,r=p,n=e,RE([{keyCode:le.PAGE_UP,action:v(zw,t,!1,r)},{keyCode:le.PAGE_DOWN,action:v(zw,t,!0,r)}],n)),S_(e)&&h.get()&&(N_(h,f,!1),f.nodeChanged())})}return t};class L_{constructor(r){let n;this.lastPath=[],this.editor=r;const t=this;"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",e=>{var t=r.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Ng(t,n)||r.dispatch("SelectionChange"),n=t}),r.on("contextmenu",()=>{uf(r),r.dispatch("SelectionChange")}),r.on("SelectionChange",()=>{var e=r.selection.getStart(!0);e&&im(r)&&!t.isSameElementPath(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",e=>{!e.isDefaultPrevented()&&im(r)&&("IMG"===r.selection.getNode().nodeName?ff.setEditorTimeout(r,()=>{r.nodeChanged()}):r.nodeChanged())})}nodeChanged(e={}){var t=this.editor.selection;let r;if(this.editor.initialized&&t&&!Dd(this.editor)&&!this.editor.mode.isReadOnly()){const n=this.editor.getBody(),o=((r=t.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),[]);this.editor.dom.getParent(r,e=>e===n||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:o})}}isSameElementPath(e){let t;var r=this.editor,n=Ee(r.dom.getParents(e,S,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}const M_=Ts("image"),I_=Ts("event"),F_=t=>e=>{e[I_]=t},U_=F_(0),z_=F_(2),j_=F_(1),H_=Ts("mode"),$_=t=>e=>{e[H_]=t},V_=(e,t)=>$_(t)(e),q_=$_(0),W_=$_(2),K_=$_(1),Y_=t=>e=>{return ee.from(e[H_]).exists(e=>e===t)},G_=Y_(0),X_=Y_(1),Z_=["none","copy","link","move"],Q_=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],J_=()=>{const o=new window.DataTransfer;let t="move",r="all";const a={get dropEffect(){return t},set dropEffect(e){V(Z_,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){var t;t=a,ee.from(t[I_]).exists(e=>0===e)&&V(Q_,e)&&(r=e)},get items(){return r=a,{...n=o.items,get length(){return n.length},add:(e,t)=>{if(G_(r)){if(!Z(e))return n.add(e);if(!D(t))return n.add(e,t)}return null},remove:e=>{G_(r)&&n.remove(e)},clear:()=>{G_(r)&&n.clear()}};var r,n},get files(){return X_(a)?Object.freeze({length:0,item:e=>null}):o.files},get types(){return o.types},setDragImage:(e,t,r)=>{var n;G_(a)&&(n={image:e,x:t,y:r},a[M_]=n,o.setDragImage(e,t,r))},getData:e=>X_(a)?"":o.getData(e),setData:(e,t)=>{G_(a)&&o.setData(e,t)},clearData:e=>{G_(a)&&o.clearData(e)}};return q_(a),a},eS=(e,t)=>e.setData("text/html",t),tS="x-tinymce/html",rS=J(tS),nS="\x3c!-- "+tS+" --\x3e",oS=e=>-1!==e.indexOf(nS),aS="%MCEPASTEBIN%",sS=e=>e.dom.get("mcepastebin"),iS=e=>j(e)&&"mcepastebin"===e.id,lS=e=>e===aS,dS=(t,e)=>(ae.each(e,e=>{t=y(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])}),t),cS=e=>dS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?Xn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),uS=(e,t)=>({content:e,cancelled:t}),mS=(e,t)=>(e.insertContent(t,{merge:oc(e),paste:!0}),!0),gS=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),fS=(e,t,r)=>{return!(e.selection.isCollapsed()||!gS(t)||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.execCommand("mceInsertLink",!1,o)}),0));var n,o,a},pS=(e,t,r)=>{return s=e,i=t,!(!gS(i)||!q(bc(s),e=>st(i.toLowerCase(),"."+e.toLowerCase()))||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.insertContent('<img src="'+o+'">')}),0));var n,o,a,s,i},hS=(()=>{let e=0;return()=>"mceclip"+e++})(),vS=(l,d,c,o,e)=>{var t=(()=>{var e=l,t=d,r=c,t=e.dispatch("PastePreProcess",{content:t,internal:r}),n=(o=e,n=t.content,(a=oy({sanitize:hc(o),sandbox_iframes:Ec(o),sandbox_iframes_exclusions:xc(o),convert_unsafe_embeds:kc(o)},o.schema)).addNodeFilter("meta",e=>{ae.each(e,e=>{e.remove()})}),a=a.parse(n,{forced_root_block:!1,isRootContent:!0}),ep({validate:!0},o.schema).serialize(a));if(!e.hasEventListeners("PastePostProcess")||t.isDefaultPrevented())return uS(n,t.isDefaultPrevented());{var o=e,a=r;const s=o.dom.create("div",{style:"display:none"},n),i=o.dispatch("PastePostProcess",{node:s,internal:a});return uS(i.node.innerHTML,i.isDefaultPrevented())}})();if(!t.cancelled){const d=t.content,c=()=>{var e,t,r,n;e=l,t=d,o||!ac(e)?mS(e,t):(r=e,n=t,ae.each([fS,pS,mS],e=>!e(r,n,mS)))};e?Ok(l,"insertFromPaste",{dataTransfer:(t=d,e=J_(),eS(e,t),W_(e),e)}).isDefaultPrevented()||(c(),Tk(l,"insertFromPaste")):c()}},bS=(e,t,r,n)=>{r=r||oS(t);vS(e,t.replace(nS,""),r,!1,n)},yS=(e,t,r)=>{t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=((e,r,t)=>{const n=e.split(/\n\n/),o=(e=>{let t="<"+r;e=Fe(e,(e,t)=>t+'="'+ba.encodeAllRaw(e)+'"');return e.length&&(t+=" "+e.join(" ")),t+">"})(t),a="</"+r+">",s=te(n,e=>e.split(/\n/).join("<br />"));return 1===s.length?s[0]:te(s,e=>o+e+a).join("")})(to(t,ic(e)),zl(e),jl(e));vS(e,t,!1,!0,r)},CS=t=>{var r={};if(t&&t.types)for(let e=0;e<t.types.length;e++){var n=t.types[e];try{r[n]=t.getData(n)}catch(t){r[n]=""}}return r},wS=(e,t)=>t in e&&0<e[t].length,ES=e=>wS(e,"text/html")||wS(e,"text/plain"),xS=(t,e,r)=>{var n,o="paste"===e.type?e.clipboardData:e.dataTransfer;if(Qd(t)&&o){n=t,a=(o=o).items?Ce(Ae(o.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],o=o.files?Ae(o.files):[];var a=I(0<a.length?a:o,(e=>{const t=bc(e);return r=>at(r.type,"image/")&&q(t,e=>{return e=e.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(ae.hasOwn(t,e)?"image/"+t[e]:"image/"+e)===r.type;var t})})(n));if(0<a.length)return e.preventDefault(),o=a,Promise.all(te(o,t=>Lb(t).then(e=>({file:t,uri:e})))).then(e=>{r&&t.selection.setRng(r),re(e,e=>{var i,l;i=t,l=e,Pb(l.uri).each(({data:e,type:t,base64Encoded:r})=>{var n,o,r=r?e:btoa(e),e=l.file,a=i.editorUpload.blobCache,t=a.getByData(r,t),s=null!=t?t:(t=i,a=a,e=e,r=r,s=hS(),n=Yl(t)&&j(e.name),t=n?(t=t,o=e.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i),j(o)?t.dom.encode(o[1]):void 0):s,o=n?e.name:void 0,n=a.create(s,e,r,t,o),a.add(n),n);bS(i,`<img src="${s.blobUri()}">`,!1,!0)})})}),!0}return!1},kS=(e,t,r,n,o)=>{let a=cS(r);var r=wS(t,rS())||oS(r),s=!r&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),i=gS(a);((n=lS(a)||!a.length||s&&!i?!0:n)||i)&&(a=wS(t,"text/plain")&&s?t["text/plain"]:(e=>{const n=La(),t=oy({},n);let o="";const a=n.getVoidElements(),s=ae.makeMap("script noscript style textarea video audio iframe object"," "),i=n.getBlockElements(),l=t=>{var e=t.name,r=t;if("br"!==e){if("wbr"!==e)if(a[e]&&(o+=" "),s[e])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in n.getVoidElements())){let e=t.firstChild;if(e)for(;l(e),e=e.next;);}i[e]&&r.next&&(o+="\n","p"===e)&&(o+="\n")}}else o+="\n"};return e=dS(e,[/<!\[[^\]]+\]>/g]),l(t.parse(e)),o})(a)),lS(a)||(n?yS(e,a,o):bS(e,a,r,o))},_S=(e,t,r)=>{{var a=e,s=t,i=r;let o;a.on("keydown",e=>{var t;t=e,(le.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)}),a.on("paste",e=>{if(!e.isDefaultPrevented()&&(t=e,!F.os.isAndroid()||0!==(null==(t=null==(t=t.clipboardData)?void 0:t.items)?void 0:t.length))){var t;const r="text"===i.get()||o,n=(o=!1,CS(e.clipboardData));!ES(n)&&xS(a,e,s.getLastRng()||a.selection.getRng())||(wS(n,"text/html")?(e.preventDefault(),kS(a,n,n["text/html"],r,!0)):wS(n,"text/plain")&&wS(n,"text/uri-list")?(e.preventDefault(),kS(a,n,n["text/plain"],r,!0)):(s.create(),ff.setEditorTimeout(a,()=>{var e=s.getHtml();s.remove(),kS(a,n,e,r,!1)},0)))}})}var o;(o=e).parser.addNodeFilter("img",(e,t,r)=>{if(!Qd(o)&&!0===(null==(r=r.data)?void 0:r.paste))for(const t of e){const e=t.attr("src");Z(e)&&!t.attr("data-mce-object")&&e!==F.transparentSrc&&(n=e,at(n,"webkit-fake-url")||!lc(o)&&(n=e,at(n,"data:")))&&t.remove()}var n})},SS=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(rS(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},NS=i=>(e,t)=>{const{dom:r,selection:n}=i,o=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e),s=(r.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),r.add(i.getBody(),o),n.getRng());a.focus();e=r.createRng();e.selectNodeContents(a),n.setRng(e),ff.setEditorTimeout(i,()=>{n.setRng(s),r.remove(o),t()},0)},RS=e=>{return{html:(t=e.selection.getContent({contextual:!0}),nS+t),text:e.selection.getContent({format:"text"})};var t},AS=e=>{return!e.selection.isCollapsed()||!!(e=e).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},TS=(e,t)=>{var r;return Lg.getCaretRangeFromPoint(null!=(r=t.clientX)?r:0,null!=(r=t.clientY)?r:0,e.getDoc())},OS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},BS=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,PS=e=>ae.trim(e).replace(BS,$a).toLowerCase(),DS=(e,t,s)=>{const i=rc(e);if(!s&&"all"!==i&&nc(e)){const l=i?i.split(/[, ]/):[];if(l&&"none"!==i){const s=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,n,t,r)=>{var o=s.parseStyle(s.decode(t)),a={};for(let r=0;r<l.length;r++){const n=o[l[r]];let e=n,t=s.getStyle(i,l[r],!0);/color/.test(l[r])&&(e=PS(e),t=PS(t)),t!==e&&(a[l[r]]=n)}t=s.serializeStyle(a,"span");return t?n+' style="'+t+'"'+r:n+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)}return t},LS=o=>{const a=Oo(!1),s=Oo(sc(o)?"text":"html"),i=(s=>{const a=Oo(null);return{create:()=>{var e=s,t=a,{dom:r,selection:n}=e,o=e.getBody(),t=(t.set(n.getRng()),r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},aS));F.browser.isFirefox()&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),t.focus(),n.select(t,!0)},remove:()=>{var e=s,t=a,r=e.dom;if(sS(e)){for(var n,o=t.get();n=sS(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)},getEl:()=>sS(s),getHtml:()=>{{var e=s;const r=e.dom,n=(e,t)=>{e.appendChild(t),r.remove(t,!0)},[o,...a]=I(e.getBody().childNodes,iS);re(a,e=>{n(o,e)});var t=r.select("div[id=mcepastebin]",o);for(let e=t.length-1;0<=e;e--){const a=r.create("div");o.insertBefore(a,t[e]),n(a,t[e])}return o?o.innerHTML:""}},getLastRng:a.get}})(o);var r,e,n,l,t,d,c;t=o,(F.browser.isChromium()||F.browser.isSafari())&&(d=t,c=DS,d.on("PastePreProcess",e=>{e.content=c(d,e.content,e.internal)})),n=o,l=s,n.addCommand("mceTogglePlainTextPaste",()=>{var e,t;e=n,"text"===(t=l).get()?(t.set("html"),sg(e,!1)):(t.set("text"),sg(e,!0)),e.focus()}),n.addCommand("mceInsertClipboardContent",(e,t)=>{t.html&&bS(n,t.html,t.internal,!1),t.text&&yS(n,t.text,!1)}),r=o,t=t=>e=>{t(r,e)},e=Jd(r),H(e)&&r.on("PastePreProcess",t(e)),e=ec(r),H(e)&&r.on("PastePostProcess",t(e)),o.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===s.get()),o.on("PreInit",()=>{var d,c,r,e,t,n;(e=o).on("cut",(n=e,e=>{!e.isDefaultPrevented()&&AS(n)&&n.selection.isEditable()&&SS(e,RS(n),NS(n),()=>{if(F.browser.isChromium()||F.browser.isFirefox()){const e=n.selection.getRng();ff.setEditorTimeout(n,()=>{n.selection.setRng(e),n.execCommand("Delete")},0)}else n.execCommand("Delete")})})),e.on("copy",(t=e,e=>{!e.isDefaultPrevented()&&AS(t)&&SS(e,RS(t),NS(t),$)})),d=o,c=a,Zd(d)&&d.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),Qd(d)||d.on("drop",e=>{var t=e.dataTransfer;t&&(t=t,q(t.files,e=>/^image\//.test(e.type)))&&e.preventDefault()}),d.on("drop",e=>{if(!e.isDefaultPrevented()){const r=TS(d,e);if(!z(r)){const n=CS(e.dataTransfer),o=wS(n,rS());if(ES(n)&&(!(t=n["text/plain"])||0!==t.indexOf("file://"))||!xS(d,e,r)){var t;const a=n[rS()],s=a||n["text/html"]||n["text/plain"],i=((e,t,r,n)=>{var o=e.getParent(r,e=>Yo(t,e));if(!P(e.getParent(r,"summary")))return!0;if(o&&oe(n,"text/html")){const e=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!P(e.querySelector(o.nodeName.toLowerCase()))}return!1})(d.dom,d.schema,r.startContainer,n),l=c.get();l&&!i||s&&(e.preventDefault(),ff.setEditorTimeout(d,()=>{d.undoManager.transact(()=>{(a||l&&i)&&d.execCommand("Delete"),OS(d,r);var e=cS(s);n["text/html"]?bS(d,e,o,!0):yS(d,e,!0)})}))}}}}),d.on("dragstart",e=>{c.set(!0)}),d.on("dragover dragend",e=>{Qd(d)&&!c.get()&&(e.preventDefault(),OS(d,TS(d,e))),"dragend"===e.type&&c.set(!1)}),(r=d).on("input",e=>{if("deleteByDrag"===e.inputType){const e=I(r.dom.select("details"),e=>P(e.querySelector("summary")));re(e,e=>{B(e.firstChild)&&e.firstChild.remove();var t=r.dom.create("summary");t.appendChild(Ks().dom),e.prepend(t)})}}),_S(o,i,s)})},MS=B,IS=X,FS=e=>x(e.dom),US=t=>e=>U(K(t),e),zS=(e,t)=>on(K(e),FS,US(t)),jS=(t,e,r)=>{var e=new Yn(t,e),n=(r?e.next:e.prev).bind(e);let o=t;for(let e=r?t:n();e&&!MS(e);e=n())Ai(e)&&(o=e);return o},HS=e=>{var t=((e,t,r)=>{const n=ie.fromRangeStart(e).getNode(),o=(e=n,t=t,l=r,on(K(e),e=>{return t=e,yo(t.dom)||l.isBlock(W(e));var t},US(t)).getOr(K(t)).dom),a=jS(n,o,!1),s=jS(n,o,!0),i=document.createRange();var l;return zS(a,o).fold(()=>{IS(a)?i.setStart(a,0):i.setStartBefore(a)},e=>i.setStartBefore(e.dom)),zS(s,o).fold(()=>{IS(s)?i.setEnd(s,s.data.length):i.setEndAfter(s)},e=>i.setEndAfter(e.dom)),i})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(uv(t))},$S=((vk=mk=mk||{}).Before="before",vk.After="after",(r,t)=>{return e=I(r,e=>{return t>=e.top&&t<=e.bottom}),pe(e,(e,o)=>e.fold(()=>ee.some(o),e=>{var t=Math.min(o.left,e.left),r=Math.min(o.top,e.top),n=Math.max(o.right,e.right),e=Math.max(o.bottom,e.bottom);return ee.some({top:r,right:n,bottom:e,left:t,width:n-t,height:e-r})}),ee.none()).fold(()=>[[],r],o=>{var{pass:e,fail:t}=ge(r,e=>{return n=e=e,r=t=o,n=Math.max(0,Math.min(n.bottom,r.bottom)-Math.max(n.top,r.top))/Math.min(e.height,t.height),e.top<t.bottom&&e.bottom>t.top&&.5<n;var t,r,n});return[e,t]});var e}),VS=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),qS=(e,s,i,l)=>{const d=e=>Ai(e.node)?ee.some(e):G(e.node)?qS(Ae(e.node.childNodes),s,i,!1):ee.none(),t=(e,o)=>{const a=_e(e,(e,t)=>o(e,s,i)-o(t,s,i));return Te(a,d).map(e=>{return l&&!X(e.node)&&1<a.length?(t=e,r=a[1],n=o,d(r).filter(e=>Math.abs(n(t,s,i)-n(e,s,i))<2&&X(e.node)).getOr(e)):e;var t,r,n})},[r,n]=$S(bw(e),i),{pass:o,fail:a}=ge(n,e=>e.top<i);return t(r,VS).orThunk(()=>t(a,hi)).orThunk(()=>t(o,hi))},WS=(e,r,t)=>((e,t,r)=>{const n=K(e),o=Br(n),a=(e=o,s=t,i=r,ee.from(e.dom.elementFromPoint(s,i)).map(xr).filter(e=>Tr(n,e)).getOr(n));var s,i;{var l=n,d=t,c=r;const u=(t,e)=>{const r=I(t.dom.childNodes,L(e=>G(e)&&e.classList.contains("mce-drag-container")));return e.fold(()=>qS(r,d,c,!0),t=>{var e=I(r,e=>e!==t.dom);return qS(e,d,c,!0)}).orThunk(()=>(U(t,l)?ee.none():Lr(t)).bind(e=>u(e,ee.some(t))))};return u(a,ee.none())}})(e,r,t).filter(e=>jc(e.node)).map(e=>{return t=r,{node:(e=e).node,position:Math.abs(e.left-t)<Math.abs(e.right-t)?mk.Before:mk.After};var t}),KS=e=>{var t,r=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:r.top+(null!=(t=null==e?void 0:e.scrollY)?t:0)-n.clientTop,left:r.left+(null!=(t=null==e?void 0:e.scrollX)?t:0)-n.clientLeft}},YS=e=>({target:e,srcElement:e}),GS=(e,t,r,n)=>{i=e,r=(t=>{const r=J_(),e=(n=t,ee.from(n[H_]));var n;return W_(t),U_(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,n=t,ee.from(n[M_]).each(e=>r.setDragImage(e.image,e.x,e.y)),re(t.types,e=>{"Files"!==e&&r.setData(e,t.getData(e))}),re(t.files,e=>r.items.add(e)),n=t,ee.from(n[I_]).each(e=>{var t;t=r,e=e,F_(e)(t)}),e.each(e=>{V_(t,e),V_(r,e)}),r})(r),("dragstart"===i?(U_(r),q_):"drop"===i?(z_(r),W_):(j_(r),K_))(r);var o,a,s,i=r;return D(n)?(r=e,o=t,a=i,s=p("Function not supported on simulated event."),{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:r,composedPath:s,initEvent:s,preventDefault:$,stopImmediatePropagation:$,stopPropagation:$,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:a,...YS(o)}):(r=e,s=t,a=i,{...n,dataTransfer:a,type:r,...YS(s)})},XS=x,ZS=(gk=[XS,yo],t=>{for(let e=0;e<gk.length;e++)if(gk[e](t))return!0;return!1}),QS=(r,n)=>t=>()=>{var e="left"===r?t.scrollX:t.scrollY;t.scroll({[r]:e+n,behavior:"smooth"})},JS=QS("left",-32),eN=QS("left",32),tN=QS("top",-32),rN=QS("top",32),nN=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},oN=(e,t,r,n,o)=>{"dragstart"===t&&eS(n,e.dom.getOuterHTML(r));r=GS(t,r,n,o);return e.dispatch(t,r)},aN=(e,w)=>{const E=ps((e,t)=>{return n=e,o=t,(r=w)._selectionOverrides.hideFakeCaret(),void WS(r.getBody(),n,o).fold(()=>r.selection.placeCaretAt(n,o),e=>{e=r._selectionOverrides.showCaret(1,e.node,e.position===mk.Before,!1);e?r.selection.setRng(e):r.selection.placeCaretAt(n,o)});var r,n,o},0),x=(w.on("remove",E.cancel),e);return C=>e.on(r=>{const n=Math.max(Math.abs(C.screenX-r.screenX),Math.abs(C.screenY-r.screenY));if(!r.dragging&&10<n){const E=oN(w,"dragstart",r.element,r.dataTransfer,C);if(j(E.dataTransfer)&&(r.dataTransfer=E.dataTransfer),E.isDefaultPrevented())return;r.dragging=!0,w.focus()}if(r.dragging){const n=C.currentTarget===w.getDoc().documentElement,p=(l=r,f=C,u=(u=d=w).inline?KS(u.getBody()):{left:0,top:0},g=(m=d).getBody(),m=m.inline?{left:g.scrollLeft,top:g.scrollTop}:{left:0,top:0},g=d,{pageX:(e={pageX:(g=(d=f).target.ownerDocument!==g.getDoc()?(f=KS(g.getContentAreaContainer()),t=(g=g).getBody(),c=g.getDoc().documentElement,e={left:t.scrollLeft,top:t.scrollTop},t={left:t.scrollLeft||c.scrollLeft,top:t.scrollTop||c.scrollTop},c=g.inline?e:t,{left:d.pageX-f.left+c.left,top:d.pageY-f.top+c.top}):{left:d.pageX,top:d.pageY}).left-u.left+m.left,pageY:g.top-u.top+m.top}).pageX-l.relX,pageY:e.pageY+5});t=r.ghost,f=w.getBody(),t.parentNode!==f&&f.appendChild(t);{c=r.ghost;d=p;g=r.width;u=r.height;m=r.maxX;l=r.maxY;var o=C.clientY;var a=C.clientX;f=w.getContentAreaContainer();var s=w.getWin();r=x;var i=n;let e=0,t=0;c.style.left=d.pageX+"px",c.style.top=d.pageY+"px",m<d.pageX+g&&(e=d.pageX+g-m),l<d.pageY+u&&(t=d.pageY+u-l),c.style.width=g-e+"px",c.style.height=u-t+"px";const h=f.clientHeight,v=f.clientWidth,b=o+f.getBoundingClientRect().top,y=a+f.getBoundingClientRect().left;r.on(e=>{e.intervalId.clear(),e.dragging&&i&&(o+8>=h?e.intervalId.set(rN(s)):o-8<=0?e.intervalId.set(tN(s)):a+8>=v?e.intervalId.set(eN(s)):a-8<=0?e.intervalId.set(JS(s)):b+16>=window.innerHeight?e.intervalId.set(rN(window)):b-16<=0?e.intervalId.set(tN(window)):y+16>=window.innerWidth?e.intervalId.set(eN(window)):y-16<=0&&e.intervalId.set(JS(window)))})}E.throttle(C.clientX,C.clientY)}var l,d,c,e,u,m,g,t,f})},sN=(e,r,n)=>{e.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>oN(r,"dragend",t.element,t.dataTransfer),e=>oN(r,"dragend",t.element,t.dataTransfer,e))}),iN(e)},iN=e=>{e.on(e=>{e.intervalId.clear(),nN(e.ghost)}),e.clear()},lN=t=>{const r=Bo(),e=se.DOM,n=document,o=(m=r,g=t,e=>{var t,r,n,o;0===e.button&&(t=ve(g.dom.getParents(e.target),ZS).getOr(null),j(t))&&(r=g.dom,n=g.getBody(),o=t,XS(o))&&o!==n&&r.isEditable(o.parentElement)&&(n=g.dom.getPos(t),r=g.getBody(),o=g.getDoc().documentElement,m.set({element:t,dataTransfer:J_(),dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(g.inline?r.scrollWidth:o.offsetWidth)-2,maxY:(g.inline?r.scrollHeight:o.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:(r=g,e=(o=t).offsetWidth,n=t.offsetHeight,r=r.dom,o=o.cloneNode(!0),r.setStyles(o,{width:e,height:n}),r.setAttrib(o,"data-mce-selected",null),t=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),r.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:e,height:n}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),t.appendChild(o),t),intervalId:(t=>{const r=Oo(ee.none()),n=()=>r.get().each(e=>clearInterval(e));return{clear:()=>{n(),r.set(ee.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:e=>{n(),r.set(ee.some(setInterval(e,t)))}}})(100)}))}),a=aN(r,t),s=(c=r,o=>{c.on(n=>{var e,t,r;n.intervalId.clear(),n.dragging&&(t=(e=>{var t=e.getSel();if(j(t)){const e=t.getRangeAt(0).startContainer;return X(e)?e.parentNode:e}return null})((e=u).selection),r=n.element,z(t)||t===r||e.dom.isChildOf(t,r)||!e.dom.isEditable(t)||(e=null!=(r=u.getDoc().elementFromPoint(o.clientX,o.clientY))?r:u.getBody(),oN(u,"drop",e,n.dataTransfer,o).isDefaultPrevented())||u.undoManager.transact(()=>{var e,t,r;e=u.dom,t=n.element,r=e.getParent(t.parentNode,e.isBlock),nN(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&Ys(K(r)),(""===(t=n.dataTransfer.getData("text/html"))?ee.none():ee.some(t)).each(e=>u.insertContent(e)),u._selectionOverrides.hideFakeCaret()}),oN(u,"dragend",u.getBody(),n.dataTransfer,o))}),iN(c)}),i=(l=r,e=>sN(l,d,ee.some(e)));var l,d,c,u,m,g;(d=u=t).on("mousedown",o),t.on("mousemove",a),t.on("mouseup",s),e.bind(n,"mousemove",a),e.bind(n,"mouseup",i),t.on("remove",()=>{e.unbind(n,"mousemove",a),e.unbind(n,"mouseup",i)}),t.on("keydown",e=>{e.keyCode===le.ESC&&sN(r,t,ee.none())})},dN=x,cN=(e,t)=>Xh(e.getBody(),t),uN=d=>{const c=d.selection,u=d.dom,m=d.getBody(),o=Fc(d,m,u.isBlock,()=>kf(d)),s="sel-"+u.uniqueId(),i="data-mce-selected";let l;const g=e=>e!==m&&(dN(e)||Eo(e))&&u.isChildOf(e,m)&&u.isEditable(e.parentNode),f=(e,t,r,n=!0)=>d.dispatch("ShowCaret",{target:t,direction:e,before:r}).isDefaultPrevented()?null:(n&&c.scrollIntoView(t,-1===e),o.show(r,t)),t=e=>ri(e)||si(e)||ii(e),p=e=>t(e.startContainer)||t(e.endContainer),h=(r,n)=>{if(r)if(r.collapsed){if(!p(r)){const d=n?1:-1,c=cu(d,m,r),s=c.getNode(!n);if(j(s)){if(jc(s))return f(d,s,!!n&&!c.isAtEnd(),!1);if(ti(s)&&x(s.nextSibling)){const d=u.createRng();return d.setStart(s,0),d.setEnd(s,0),d}}const i=c.getNode(n);if(j(i)){if(jc(i))return f(d,i,!n&&!c.isAtEnd(),!1);if(ti(i)&&x(i.previousSibling)){const d=u.createRng();return d.setStart(i,1),d.setEnd(i,1),d}}}}else{let e=r.startContainer,t=r.startOffset;n=r.endOffset;if(X(e)&&0===t&&dN(e.parentNode)&&(e=e.parentNode,t=u.nodeIndex(e),e=e.parentNode),G(e)&&n===t+1&&e===r.endContainer){const m=e.childNodes[t];if(g(m)){n=m;r=n.cloneNode(!0),r=d.dispatch("ObjectSelected",{target:n,targetClone:r});if(r.isDefaultPrevented())return null;const o=((e,t)=>{const r=K(d.getBody()),n=d.getDoc(),o=ln(r,"#"+s).getOrThunk(()=>{var e=kr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',n);return ir(e,"id",s),kn(r,e),e}),a=u.createRng();Nn(o),Sn(o,[Sr(Xn,n),K(t),Sr(Xn,n)]),a.setStart(o.dom.firstChild,1),a.setEnd(o.dom.lastChild,0),pn(o,{top:u.getPos(e,d.getBody()).y+"px"}),tf(o);t=c.getSel();return t&&(t.removeAllRanges(),t.addRange(a)),a})(n,r.targetClone),a=K(n);return re(Vn(K(d.getBody()),`*[${i}]`),e=>{U(a,e)||mr(e,i)}),u.getAttrib(n,i)||n.setAttribute(i,"1"),l=n,b(),o;return}}}return null},v=()=>{l&&l.removeAttribute(i),ln(K(d.getBody()),"#"+s).each(Y),l=null},b=()=>{o.hide()};if(!Dy(d)){d.on("click",e=>{u.isEditable(e.target)||(e.preventDefault(),d.focus())}),d.on("blur NewBlock",v),d.on("ResizeWindow FullscreenStateChanged",o.reposition),d.on("tap",e=>{var t=e.target,r=cN(d,t);dN(r)?(e.preventDefault(),a1(d,r).each(h)):g(t)&&a1(d,t).each(h)},!0),d.on("mousedown",t=>{var e,r,n,o,a,s,i=t.target;if((i===m||"HTML"===i.nodeName||u.isChildOf(i,m))&&(e=d,r=t.clientX,n=t.clientY,s=K(e.getBody()),s=e.inline?s:K(Br(s).dom.documentElement),e=e.inline,r=r,n=n,o=(a=s).dom.getBoundingClientRect(),r={x:r-(e?o.left+a.dom.clientLeft+dC(a):0),y:n-(e?o.top+a.dom.clientTop+lC(a):0)},n=s,e=r.x,o=r.y,a=sC(n),n=iC(n),0<=e)&&0<=o&&e<=a&&o<=n){v(),b();const l=cN(d,i);dN(l)?(t.preventDefault(),a1(d,l).each(h)):WS(m,t.clientX,t.clientY).each(e=>{t.preventDefault(),(e=f(1,e.node,e.position===mk.Before,!1))&&c.setRng(e),(oo(l)?l:d.getBody()).focus()})}}),d.on("keypress",e=>{le.modifierPressed(e)||dN(c.getNode())&&e.preventDefault()}),d.on("GetSelectionRange",e=>{let t=e.range;l&&(l.parentNode?((t=t.cloneRange()).selectNode(l),e.range=t):l=null)}),d.on("SetSelectionRange",e=>{e.range=(t=e.range,r=d.schema.getVoidElements(),n=u.createRng(),s=t.startContainer,o=t.startOffset,a=t.endContainer,t=t.endOffset,oe(r,s.nodeName.toLowerCase())?0===o?n.setStartBefore(s):n.setStartAfter(s):n.setStart(s,o),oe(r,a.nodeName.toLowerCase())?0===t?n.setEndBefore(a):n.setEndAfter(a):n.setEnd(a,t),n);var t,r,n,o,a,s=h(e.range,e.forward);s&&(e.range=s)}),d.on("AfterSetSelectionRange",e=>{var e=e.range,t=e.startContainer.parentElement;p(e)||G(e=t)&&"mcepastebin"===e.id||b(),e=t,j(e)&&u.hasClass(e,"mce-offscreen-selection")||v()});var e=d;if(lN(e),zd(e)){var a=e;const y=e=>{var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(V(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type)&&pC(a,"Dropped file type is not supported")},C=e=>{bf(a,e.target)&&y(e)},w=()=>{const t=se.DOM,r=a.dom,n=document,o=a.inline?a.getBody():a.getDoc(),e=["drop","dragover"];re(e,e=>{t.bind(n,e,C),r.bind(o,e,y)}),a.on("remove",()=>{re(e,e=>{t.unbind(n,e,C),r.unbind(o,e,y)})})};a.on("init",()=>{ff.setEditorTimeout(a,w,0)})}{var r=d;const E=ps(()=>{var e;!r.removed&&r.getBody().contains(document.activeElement)&&(e=r.selection.getRng()).collapsed&&(e=s1(r,e,!1),r.selection.setRng(e))},0);r.on("focus",()=>{E.throttle()}),r.on("blur",()=>{E.cancel()})}(n=d).on("init",()=>{n.on("focusin",e=>{var t=e.target;if(Eo(t)){const e=Xh(n.getBody(),t),r=x(e)?e:t;n.selection.getNode()!==r&&a1(n,r).each(e=>n.selection.setRng(e))}})})}return{showCaret:f,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(li(e),c.scrollIntoView(e))},hideFakeCaret:b,destroy:()=>{o.destroy(),l=null}};var n},mN=(e,t,r,n,o)=>{if(X(r)&&(n<0||n>r.data.length))return[];var a=o&&X(r)?[((t,e)=>{let r=e;for(let e=t.previousSibling;X(e);e=e.previousSibling)r+=e.data.length;return r})(r,n)]:[n];let s=r;for(;s!==t&&s.parentNode;)a.push(e.nodeIndex(s,o)),s=s.parentNode;return s===t?a.reverse():[]},gN=(e,t,r,n,o,a,s=!1)=>({start:mN(e,t,r,n,s),end:mN(e,t,o,a,s)}),fN=(e,t)=>{const r=t.slice(),n=r.pop();return k(n)?pe(r,(e,t)=>e.bind(e=>ee.from(e.childNodes[t])),ee.some(e)).bind(e=>X(e)&&(n<0||n>e.data.length)?ee.none():ee.some({node:e,offset:n})):ee.none()},pN=(e,t)=>fN(e,t.start).bind(({node:n,offset:o})=>fN(e,t.end).map(({node:e,offset:t})=>{var r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})),hN=(e,t,r)=>{var n;t&&e.isEmpty(t)&&!r(t)&&(n=t.parentNode,e.remove(t,X(t.firstChild)&&Jn(t.firstChild.data)),hN(e,n,r))},vN=(e,t,r,n=!0)=>{var o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(X(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),X(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),hN(e,o,r),o!==a)&&hN(e,a,r)},bN=(e,t)=>ee.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),yN=(e,t,r)=>{r=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:xl(r).concat(e.blockPatterns),inlinePatterns:kl(r).concat(e.inlinePatterns)}},CN=(e,t,r,n)=>{e=e.createRng();return e.setStart(t,0),e.setEnd(r,n),e.toString()},wN=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),EN=(e,t)=>{e=e.createRng();return e.setStartAfter(t.start),e.setEndBefore(t.end),e},xN=(e,t,r)=>{var r=pN(e.getRoot(),r).getOrDie("Unable to resolve path range"),n=r.startContainer,o=r.endContainer,o=0===r.endOffset?o:o.splitText(r.endOffset),n=0===r.startOffset?n:n.splitText(r.startOffset),r=n.parentNode;return{prefix:t,end:o.parentNode.insertBefore(wN(e,t+"-end"),o),start:r.insertBefore(wN(e,t+"-start"),n)}},kN=(e,t,r)=>{hN(e,e.get(t.prefix+"-end"),r),hN(e,e.get(t.prefix+"-start"),r)},_N=e=>0===e.start.length,SN=(n,t,o,e)=>{const a=t.start;var r;return dx(n,e.container,e.offset,(r=a,(e,t)=>{e=e.data.substring(0,t),t=e.lastIndexOf(r.charAt(r.length-1)),e=e.lastIndexOf(r);return-1!==e?e+r.length:-1!==t?t+1:-1}),o).bind(r=>{var e=null!=(e=null==(e=o.textContent)?void 0:e.indexOf(a))?e:-1;if(-1!==e&&r.offset>=e+a.length){const t=n.createRng();return t.setStart(r.container,r.offset-a.length),t.setEnd(r.container,r.offset),ee.some(t)}{const e=r.offset-a.length;return ix(r.container,e,o).map(e=>{var t=n.createRng();return t.setStart(e.container,e.offset),t.setEnd(r.container,r.offset),t}).filter(e=>e.toString()===a).orThunk(()=>SN(n,t,o,nx(r.container,0)))}})},NN=(n,o,s,i)=>{const l=n.dom,d=l.getRoot(),c=s.pattern,u=s.position.container,m=s.position.offset;return ix(u,m-s.pattern.end.length,o).bind(e=>{const a=gN(l,d,e.container,e.offset,u,m,i);if(_N(c))return ee.some({matches:[{pattern:c,startRng:a,endRng:a}],position:e});{const u=RN(n,s.remainingPatterns,e.container,e.offset,o,i),m=u.getOr({matches:[],position:e}),t=m.position,r=((e,t,r,n,o,a=!1)=>{if(0!==t.start.length||a)return sx(r,n,o).bind(r=>SN(e,t,o,r).bind(e=>{var t;if(a){if(e.endContainer===r.container&&e.endOffset===r.offset)return ee.none();if(0===r.offset&&(null==(t=e.endContainer.textContent)?void 0:t.length)===e.endOffset)return ee.none()}return ee.some(e)}));{const t=e.createRng();return t.setStart(r,n),t.setEnd(r,n),ee.some(t)}})(l,c,t.container,t.offset,o,u.isNone());return r.map(e=>{[o,t,r,n=!1]=[l,d,e,i];var t,r,n,o=gN(o,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n);return{matches:m.matches.concat([{pattern:c,startRng:o,endRng:a}]),position:nx(e.startContainer,e.startOffset)}})}})},RN=(a,s,i,l,d,c)=>{const e=a.dom;return sx(i,l,e.getRoot()).bind(t=>{var r=CN(e,d,i,l);for(let e=0;e<s.length;e++){var n=s[e];if(st(r,n.end)){var o=s.slice(),n=(o.splice(e,1),NN(a,d,{pattern:n,remainingPatterns:o,position:t},c));if(n.isNone()&&0<l)return RN(a,s,i,l-1,d,c);if(n.isSome())return n}}return ee.none()})},AN=(t,e,r)=>{t.selection.setRng(r),"inline-format"===e.type?re(e.format,e=>{t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},TN=(e,t,r,n,o,a)=>{var s,i;return s=RN(e,o.inlinePatterns,r,n,t,a).fold(()=>[],e=>e.matches),i=RN(e,(e=o.inlinePatterns,_e(e,(e,t)=>t.end.length-e.end.length)),r,n,t,a).fold(()=>[],e=>e.matches),o=we(s,t=>q(i,e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end)),s.length===i.length?o?s:i:s.length>i.length?s:i},ON=(u,e)=>{if(0!==e.length){const m=u.dom,t=u.selection.getBookmark(),r=((n,e)=>{const o=Ts("mce_textpattern"),a=fe(e,(e,t)=>{var r=xN(n,o+("_end"+e.length),t.endRng);return e.concat([{...t,endMarker:r}])},[]);return fe(a,(e,t)=>{var r=a.length-e.length-1,r=_N(t.pattern)?t.endMarker:xN(n,o+"_start"+r,t.startRng);return e.concat([{...t,startMarker:r}])},[])})(m,e);re(r,e=>{const t=m.getParent(e.startMarker.start,m.isBlock),r=e=>e===t;{var n,o,a,s;_N(e.pattern)?(n=u,o=e.pattern,a=e.endMarker,s=r,a=EN(n.dom,a),vN(n.dom,a,s),AN(n,o,a)):(s=u,n=e.pattern,o=e.startMarker,a=e.endMarker,i=r,l=s.dom,d=EN(l,a),c=EN(l,o),vN(l,c,i),vN(l,d,i),c={prefix:o.prefix,start:o.end,end:a.start},d=EN(l,c),AN(s,n,d))}var i,l,d,c;kN(m,e.endMarker,r),kN(m,e.startMarker,r)}),u.selection.moveToBookmark(t)}},BN=(n,o,t)=>((e,t)=>{if(X(e)&&e.length<=0)return ee.some(nx(e,0));{const r=Ls(ox);return ee.from(r.forwards(e,0,ax(e),t)).map(e=>nx(e.container,0))}})(o,o).map(e=>{const r=e.container;return lx(r,t.start.length,o).each(e=>{var t=n.createRng();t.setStart(r,0),t.setEnd(e.container,e.offset),vN(n,t,e=>e===o)}),r}),PN=a=>(t,e)=>{const r=t.dom,n=e.pattern,o=pN(r.getRoot(),e.range).getOrDie("Unable to resolve path range");return bN(t,o).each(e=>{"block-format"===n.type?(e=>{e=t.formatter.get(e);return Q(e)&&Ne(e).exists(e=>oe(e,"block"))})(n.format)&&t.undoManager.transact(()=>{a(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(()=>{a(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),!0},DN=o=>(e,t)=>{e=e;const r=_e(e,(e,t)=>t.start.length-e.start.length),n=t.replace(Xn," ");return ve(r,e=>o(e,t,n))},LN=(l,d)=>(e,t,r,n,o)=>{var a;void 0===o&&(o=null!=(a=t.textContent)?a:"");const s=e.dom,i=zl(e);return s.is(t,i)?l(r.blockPatterns,o).map(e=>d&&ae.trim(o).length===e.start.length?[]:[{pattern:e,range:gN(s,s.getRoot(),t,0,t,0,n)}]).getOr([]):[]},MN=PN((e,t,r)=>{BN(e,t,r).each(e=>{var e=K(e),t=Is(e);/^\s[^\s]/.test(t)&&Fs(e,t.slice(1))})}),IN=DN((e,t,r)=>0===t.indexOf(e.start)||0===r.indexOf(e.start)),FN=LN(IN,!0),UN=PN(BN),zN=DN((e,t,r)=>t===e.start||r===e.start),jN=LN(zN,!1),HN=(t,r,n)=>{for(let e=0;e<t.length;e++)if(n(t[e],r))return!0;return!1},$N=r=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return e=dc(r).filter(e=>"inline-command"!==e.type&&"block-command"!==e.type||r.queryCommandSupported(e.cmd)),t=cc(r),{inlinePatterns:kl(e),blockPatterns:xl(e),dynamicPatternsLookup:t};var e,t},l=()=>r.options.isSet("text_patterns_lookup"),a=(r.on("keydown",e=>{var t,a;13===e.keyCode&&!le.modifierPressed(e)&&r.selection.isCollapsed()&&(0<(t=_l(o(),"enter")).inlinePatterns.length||0<t.blockPatterns.length||l())&&((n,o)=>{const a=n.selection.getRng();return bN(n,a).map(e=>{var t=Math.max(0,a.startOffset),r=yN(o,e,null!=(r=e.textContent)?r:"");return{inlineMatches:TN(n,e,a.startContainer,t,r,!0),blockMatches:FN(n,e,r,!0)}}).filter(({inlineMatches:e,blockMatches:t})=>0<t.length||0<e.length)})(a=r,t).fold(T,({inlineMatches:n,blockMatches:o})=>(a.undoManager.add(),a.undoManager.extra(()=>{a.execCommand("mceInsertNewLine")},()=>{a.insertContent(Gs,{preserve_zwsp:!0}),ON(a,n),t=a,0!==(e=o).length&&(r=t.selection.getBookmark(),re(e,e=>MN(t,e)),t.selection.moveToBookmark(r));var t,e=a.selection.getRng(),r=sx(e.startContainer,e.startOffset,a.dom.getRoot());a.execCommand("mceInsertNewLine"),r.each(e=>{var t=e.container;t.data.charAt(e.offset-1)===Gn&&(t.deleteData(e.offset-1,1),hN(a.dom,t.parentNode,e=>e===a.dom.getRoot()))})}),!0))&&e.preventDefault()},!0),r.on("keydown",e=>{var t,n;32===e.keyCode&&r.selection.isCollapsed()&&(0<(t=_l(o(),"space")).blockPatterns.length||l())&&((n,o)=>{const a=n.selection.getRng();return bN(n,a).map(e=>{var t=Math.max(0,a.startOffset),t=CN(n.dom,e,a.startContainer,t),r=yN(o,e,t);return jN(n,e,r,!1,t)}).filter(e=>0<e.length)})(n=r,t).fold(T,r=>(n.undoManager.transact(()=>{var t,e;t=n,e=r,re(e,e=>UN(t,e))}),!0))&&e.preventDefault()},!0),()=>{if(r.selection.isCollapsed()){var e=_l(o(),"space");if(0<e.inlinePatterns.length||l()){var a=r,s=e;const i=a.selection.getRng();bN(a,i).map(e=>{const t=Math.max(0,i.startOffset-1),r=CN(a.dom,e,i.startContainer,t),n=yN(s,e,r),o=TN(a,e,i.startContainer,t,n,!1);0<o.length&&a.undoManager.transact(()=>{ON(a,o)})})}}});r.on("keyup",e=>{HN(n,e,(e,t)=>e===t.keyCode&&!le.modifierPressed(t))&&a()}),r.on("keypress",e=>{HN(t,e,(e,t)=>e.charCodeAt(0)===t.charCode)&&ff.setEditorTimeout(r,a)})},VN=a=>{const r=ae.each,n=le.BACKSPACE,o=le.DELETE,s=a.dom,i=a.selection,e=a.parser,t=F.browser,l=t.isFirefox(),d=t.isChromium()||t.isSafari(),c=F.deviceType.isiPhone()||F.deviceType.isiPad(),u=F.os.isMacOS()||F.os.isiOS(),m=(e,t)=>{try{a.getDoc().execCommand(e,!1,String(t))}catch(e){}},g=e=>e.isDefaultPrevented(),f=()=>{a.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{a.inline||s.bind(a.getDoc(),"mousedown mouseup",e=>{var t;e.target===a.getDoc().documentElement&&(t=i.getRng(),a.getBody().focus(),"mousedown"===e.type?ri(t.startContainer)||i.placeCaretAt(e.clientX,e.clientY):i.setRng(t))})},h=()=>{Range.prototype.getClientRects||a.on("mousedown",e=>{if(!g(e)&&"HTML"===e.target.nodeName){const e=a.getBody();e.blur(),ff.setEditorTimeout(a,()=>{e.focus()})}})},v=()=>{const r=$d(a);a.on("click",e=>{var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&s.isEditable(t)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,r)&&0===t.childNodes.length&&s.isEditable(t.parentNode)&&(e.preventDefault(),i.select(t))})},b=()=>{a.on("keydown",e=>{if(!g(e)&&e.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){var t=i.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},y=()=>{Ld(a)||a.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),gd(a)||m("enableObjectResizing",!1)})},C=()=>{a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{a.inline||a.on("keydown",()=>{document.activeElement===document.body&&a.getWin().focus()})},E=()=>{a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",e=>{"HTML"===e.target.nodeName&&(e=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(e),a.selection.normalize(),a.nodeChanged())}))},x=()=>{u&&a.on("keydown",e=>{!le.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},k=()=>{a.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_=()=>{a.on("init",()=>{a.dom.bind(a.getBody(),"submit",e=>{e.preventDefault()})})},S=$;if(Dy(a))d&&(p(),v(),_(),f(),c)&&(w(),E(),k()),l&&(h(),y(),C(),x());else{a.on("keydown",t=>{if(!g(t)&&t.keyCode===le.BACKSPACE){var t=i.getRng(),r=t.startContainer,n=t.startOffset,o=s.getRoot();let e=r;if(t.collapsed&&0===n){for(;e.parentNode&&e.parentNode.firstChild===e&&e.parentNode!==o;)e=e.parentNode;"BLOCKQUOTE"===e.nodeName&&(a.formatter.toggle("blockquote",void 0,e),(t=s.createRng()).setStart(r,0),t.setEnd(r,0),i.setRng(t))}}});{const N=e=>{var t=s.create("body"),e=e.cloneContents();return t.appendChild(e),i.serializer.serialize(t,{format:"html"})};a.on("keydown",e=>{var t,r=e.keyCode;if(!g(e)&&(r===o||r===n)&&a.selection.isEditable()){const n=a.selection.isCollapsed(),o=a.getBody();n&&!Ro(a.schema,o)||!n&&(r=a.selection.getRng(),r=N(r),(t=s.createRng()).selectNode(a.getBody()),r!==N(t))||(e.preventDefault(),a.setContent(""),o.firstChild&&s.isBlock(o.firstChild)?a.selection.setCursorLocation(o.firstChild,0):a.selection.setCursorLocation(o,0),a.nodeChanged())}})}if(F.windowsPhone||a.on("keyup focusin mouseup",e=>{var t;le.modifierPressed(e)||(t=(e=a).getBody(),(e=e.selection.getRng()).startContainer===e.endContainer&&e.startContainer===t&&0===e.startOffset&&e.endOffset===t.childNodes.length)||i.normalize()},!0),d&&(p(),v(),a.on("init",()=>{m("DefaultParagraphSeparator",zl(a))}),_(),b(),e.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),(c?(w(),E(),k):f)()),l){a.on("keydown",e=>{if(!g(e)&&e.keyCode===n&&a.getBody().getElementsByTagName("hr").length&&i.isCollapsed()&&0===i.getRng().startOffset){const a=i.getNode(),n=a.previousSibling;"HR"===a.nodeName?(s.remove(a),e.preventDefault()):n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault())}}),h();{const R=()=>{const e=s.getAttribs(i.getStart().cloneNode(!1));return()=>{const t=i.getStart();t!==a.getBody()&&(s.setAttrib(t,"style",null),r(e,e=>{t.setAttributeNode(e.cloneNode(!0))}))}},A=()=>!i.isCollapsed()&&s.getParent(i.getStart(),s.isBlock)!==s.getParent(i.getEnd(),s.isBlock);a.on("keypress",e=>{var t;return!(!(g(e)||8!==e.keyCode&&46!==e.keyCode)&&A()&&(t=R(),a.getDoc().execCommand("delete",!1),t(),e.preventDefault(),1))}),s.bind(a.getDoc(),"cut",e=>{if(!g(e)&&A()){const e=R();ff.setEditorTimeout(a,()=>{e()})}})}y(),a.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(s.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode;var n=s.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!s.isBlock(r);){if((null==(t=r.parentNode)?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}s.add(r,"br",{"data-mce-bogus":1})}})}),C(),x(),b()}}return{refreshContentEditable:S,isHidden:()=>{var e;return!(!l||a.removed||(e=a.selection.getSel())&&e.rangeCount&&0!==e.rangeCount)}}},qN=se.DOM,WN=e=>Ie(e,e=>!1===D(e)),KN=e=>{var t,r=e.options.get,n=e.editorUpload.blobCache;return WN({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_unsafe_embeds:r("convert_unsafe_embeds"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:(t=e).inline?t.getElement().nodeName.toLowerCase():void 0,sandbox_iframes:r("sandbox_iframes"),sandbox_iframes_exclusions:xc(e),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},YN=e=>{e=e.options.get;return WN({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},GN=e=>(e.inline?e.ui:e.dom).styleSheetLoader,XN=e=>{const t=GN(e),r=cd(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(0<e.contentStyles.length){let t="";ae.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}var s=Promise.all(((r,e,t)=>{var{pass:e,fail:n}=ge(e,e=>tinymce.Resource.has(yC(e))),e=[...e.map(e=>{var t=tinymce.Resource.get(yC(e));return Z(t)?Promise.resolve(GN(r).loadRawCss(e,t)):Promise.resolve()}),GN(r).loadAll(n)];return r.inline?e:e.concat([r.ui.styleSheetLoader.loadAll(t)])})(e,n,r)).then(a).catch(a),i=dd(e);if(i){var l=e;const d=K(l.getBody()),c=Yr(Kr(d)),u=_r("style");ir(u,"type","text/css"),kn(u,Sr(i)),kn(c,u),l.on("remove",()=>{Y(u)})}return s},ZN=e=>{if(!0!==e.removed){n=e,Dy(n)||n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),(n=e).bindPendingEventDelegates(),n.initialized=!0,n.dispatch("Init"),n.focus(!0),e=(r=n).dom.getRoot(),r.inline||im(r)&&r.selection.getStart(!0)!==e||Du(e).each(e=>{var t=e.getNode(),t=co(t)?Du(t).getOr(e):e;r.selection.setRng(t.toRange())}),n.nodeChanged({initial:!0});var r,e=Wd(n);H(e)&&e.call(n,n);{var t=n;const o=Yd(t);o&&ff.setEditorTimeout(t,()=>{var e=!0===o?t:t.editorManager.get(o);e&&!e.destroyed&&(e.focus(),e.selection.scrollIntoView())},100)}}var n},QN=t=>{var e=t.getElement();let r=t.getDoc();t.inline&&(qN.addClass(e,"mce-content-body"),t.contentDocument=r=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);var n,o,a,i,e=t.getBody();e.disabled=!0,t.readonly=Ld(t),t._editableRoot=Md(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===qN.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable="true"),e.disabled=!1,t.editorUpload=NC(t),t.schema=La(YN(t)),t.dom=se(r,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:rd(t),referrerPolicy:nd(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}}),t.parser=(i=t,(e=oy(KN(i),i.schema)).addAttributeFilter("src,href,style,tabindex",(t,r)=>{var n=i.dom,o="data-mce-"+r;let a=t.length;for(;a--;){var s=t[a];let e=s.attr(r);e&&!s.attr(o)&&0!==e.indexOf("data:")&&0!==e.indexOf("blob:")&&("style"===r?((e=n.serializeStyle(n.parseStyle(e),s.name)).length||(e=null),s.attr(o,e),s.attr(r,e)):"tabindex"===r?(s.attr(o,e),s.attr(r,null)):s.attr(o,i.convertURL(e,r,s.name)))}}),e.addNodeFilter("script",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),fc(i)&&e.addNodeFilter("#cdata",e=>{let t=e.length;for(;t--;){var r=e[t];r.type=8,r.name="#comment",r.value="[CDATA["+i.dom.encode(null!=(r=r.value)?r:"")+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",e=>{let t=e.length;for(var r=i.schema.getNonEmptyElements();t--;){const i=e[t];i.isEmpty(r)&&0===i.getAll("br").length&&i.append(new Mf("br",1))}}),e),t.serializer=qy((g=(e=t).options.get,{...KN(e),...YN(e),...WN({remove_trailing_brs:g("remove_trailing_brs"),pad_empty_with_br:g("pad_empty_with_br"),url_converter:g("url_converter"),url_converter_scope:g("url_converter_scope"),element_format:g("element_format"),entities:g("entities"),entity_encoding:g("entity_encoding"),indent:g("indent"),indent_after:g("indent_after"),indent_before:g("indent_before")})}),t),t.selection=Hy(t.dom,t.getWin(),t.serializer,t),t.annotator=Zm(t),t.formatter=FC(t),t.undoManager=zC(t),t._nodeChangeDispatcher=new L_(t),t._selectionOverrides=uN(t);{var s=t;const h=Bo(),v=Oo(!1),b=hs(e=>{s.dispatch("longpress",{...e,type:"longpress"}),v.set(!0)},400);s.on("touchstart",t=>{cE(t).each(e=>{b.cancel();e={x:e.clientX,y:e.clientY,target:t.target};b.throttle(t),v.set(!1),h.set(e)})},!0),s.on("touchmove",e=>{b.cancel(),cE(e).each(n=>{h.on(e=>{var t,r;t=n,e=e,r=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<r||5<t)&&(h.clear(),v.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",t=>{b.cancel(),"touchcancel"!==t.type&&h.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{v.get()?t.preventDefault():s.dispatch("tap",{...t,type:"tap"})})},!0)}(a=e=t).on("click",e=>{a.dom.getParent(e.target,"details")&&e.preventDefault()}),(o=e).parser.addNodeFilter("details",e=>{const t=Cc(o);re(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})}),o.serializer.addNodeFilter("details",e=>{const t=wc(o);re(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})});{var l=t;const y="contenteditable",C=" "+ae.trim(mc(l))+" ",w=" "+ae.trim(uc(l))+" ",E=fE(C),x=fE(w),k=gc(l);0<k.length&&l.on("BeforeSetContent",r=>{{var n=l,o=k;let e=o.length,t=r.content;if("raw"!==r.format){for(;e--;)t=t.replace(o[e],((o,a,s)=>function(e){var t=arguments,r=t[t.length-2],n=0<r?a.charAt(r-1):"";if('"'===n)return e;if(">"===n){const o=a.lastIndexOf("<",r);if(-1!==o&&-1!==a.substring(o,r).indexOf('contenteditable="false"'))return e}return'<span class="'+s+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"})(n,t,uc(n)));r.content=t}}}),l.parser.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var r=e[t];E(r)?r.attr(y,"true"):x(r)&&r.attr(y,"false")}}),l.serializer.addAttributeFilter(y,e=>{let t=e.length;for(;t--;){var r,n=e[t];(E(n)||x(n))&&(r=n.attr("data-mce-content"),0<k.length&&r?((e,t)=>we(e,e=>{e=t.match(e);return null!==e&&e[0].length===t.length}))(k,r)?(n.name="#text",n.type=3,n.raw=!0,n.value=r):n.remove():n.attr(y,null))}})}Dy(t)||((n=t).on("mousedown",e=>{3<=e.detail&&(e.preventDefault(),HS(n))}),g=t,$N(g));var f,d,c,e=D_(t);c=e,(d=t).addCommand("delete",()=>{var e,t;e=d,t=c,dE(e,t,!1).fold(()=>{e.selection.isEditable()&&(hh(e),Ch(e))},M)}),d.addCommand("forwardDelete",()=>{var e,t;e=d,t=c,dE(e,t,!0).fold(()=>{e.selection.isEditable()&&vh(e)},M)}),(f=t).on("NodeChange",()=>{{var o=f,a=o.dom,e=o.selection,s=o.schema,i=s.getBlockElements(),e=e.getStart(),l=o.getBody();let t,r,n=null;var d=zl(o);if(e&&G(e)){var c,u,m,g=l.nodeName.toLowerCase();if(s.isValidChild(g,d.toLowerCase())&&(c=i,g=l,d=e,!q(wp(K(d),K(g)),e=>uE(c,e.dom))))if(l.firstChild===l.lastChild&&B(l.firstChild))(t=mE(o)).appendChild(Ks().dom),l.replaceChild(t,l.firstChild),o.selection.setCursorLocation(t,0),o.nodeChanged();else{let e=l.firstChild;for(;e;)if(G(e)&&(u=s,m=e,Ko(u,m)&&(u=Uo(u.getBlockElements()),zo(u,m))),u=s,m=e,!X(m)&&(!G(m)||(uE(u.getBlockElements(),m)||Gu(m)||Yo(u,m)||Lo(m))))t=null,e=e.nextSibling;else{if(((e,t)=>{if(X(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||uE(e,t.nextSibling)||Lo(t.nextSibling)}return!1})(i,e)){e=(r=e).nextSibling,a.remove(r);continue}if(!t){if(!n&&o.hasFocus()&&(n=w1(o.selection.getRng(),()=>document.createElement("span"))),!e.parentNode){e=null;break}t=mE(o),l.insertBefore(t,e)}e=(r=e).nextSibling,t.appendChild(r)}n&&(o.selection.setRng(E1(n)),o.nodeChanged())}}}});{var u=t;const _=u.dom,S=zl(u),N=null!=(g=pd(u))?g:"",R=(e,t)=>{var r,n,o,a,s;r=e,$C(r)&&(s=r.keyCode,!VC(r))&&(le.metaKeyPressed(r)||r.altKey||112<=s&&s<=123||V(jC,s))||(r=u.getBody(),s=e,e=!($C(s)&&!(VC(s)||"keyup"===s.type&&229===s.keyCode)||(e=_,n=r,o=S,!e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0}))||(a=n.firstElementChild)&&(e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")||o!==a.nodeName.toLowerCase())),""!==_.getAttrib(r,HC)==e&&!t)||(_.setAttrib(r,HC,e?N:null),u.dispatch("PlaceholderToggle",{state:e}),u.on(e?"keydown":"keyup",R),u.off(e?"keyup":"keydown",R))};ut(N)&&u.on("init",e=>{R(e,!0),u.on("change SetContent ExecCommand",R),u.on("paste",e=>ff.setEditorTimeout(u,()=>R(e)))})}LS(t);e=(e=>{const n=e;return t=e,O(t.plugins,"rtc").bind(e=>ee.from(e.setup)).fold(()=>(n.rtcInstance=Py(e),ee.none()),e=>{return n.rtcInstance=(t=J(null),r=J(""),{init:{bindEvents:$},undoManager:{beforeChange:$,add:t,undo:t,redo:t,clear:$,reset:$,hasUndo:T,hasRedo:T,transact:t,ignore:$,extra:$},formatter:{match:T,matchAll:J([]),matchNode:J(void 0),canApply:T,closest:r,apply:$,remove:$,toggle:$,formatChanged:J({unbind:$})},editor:{getContent:r,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:$},selection:{getContent:r},autocompleter:{addDecoration:$,removeDecoration:$},raw:{getModel:J(ee.none())}}),ee.some(()=>e().then(l=>(n.rtcInstance=(()=>{const o=e=>de(e)?e:{},{init:e,undoManager:a,formatter:s,editor:r,selection:n,autocompleter:t,raw:i}=l;return{init:{bindEvents:e.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(e,t,r)=>a.transact(r),ignore:(e,t)=>a.ignore(t),extra:(e,t,r,n)=>a.extra(r,n)},formatter:{match:(e,t,r,n)=>s.match(e,o(t),n),matchAll:s.matchAll,matchNode:s.matchNode,canApply:e=>s.canApply(e),closest:e=>s.closest(e),apply:(e,t,r)=>s.apply(e,o(t)),remove:(e,t,r,n)=>s.remove(e,o(t)),toggle:(e,t,r)=>s.toggle(e,o(t)),formatChanged:(e,t,r,n,o)=>s.formatChanged(t,r,n,o)},editor:{getContent:e=>r.getContent(e),setContent:(e,t)=>({content:r.setContent(e,t),html:""}),insertContent:(e,t)=>(r.insertContent(e),""),addVisual:r.addVisual},selection:{getContent:(e,t)=>n.getContent(t)},autocompleter:{addDecoration:t.addDecoration,removeDecoration:t.removeDecoration},raw:{getModel:()=>ee.some(i.getRawModel())}}})(),l.rtc.isRemote)));var t,r});var t})(t);{var m=t,g=m.getDoc(),p=m.getBody(),g;m.dispatch("PreInit"),Gd(m)||(g.body.spellcheck=!1,qN.setAttrib(p,"spellcheck","false")),m.quirks=VN(m),m.dispatch("PostRender"),void 0!==(g=ud(m))&&(p.dir=g);const A=Xd(m);A&&m.on("BeforeSetContent",t=>{ae.each(A,e=>{t.content=t.content.replace(e,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),m.on("SetContent",()=>{m.addVisual(m.getBody())}),m.on("compositionstart compositionend",e=>{m.composing="compositionstart"===e.type})}p=t,g=_c(p),Z(Sc(p))||!D(g)&&"INVALID"!=("gpl"===(p=g).toLowerCase()||64<=p.length&&p.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/"),e.fold(()=>{const e=(e=>{let t=!1;const r=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(t);XN(t).then(()=>{ZN(t),e()})},e=>{t.setProgressState(!0),XN(t).then(()=>{e().then(e=>{t.setProgressState(!1),ZN(t),Iy(t)},e=>{t.notificationManager.open({type:"error",text:String(e)}),ZN(t),Iy(t)})})})},JN=S,eR=se.DOM,tR=se.DOM,rR=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),nR=e=>{var t=e.getElement();return e.inline?rR(null):(e=t,t=tR.create("div"),tR.insertAfter(t,e),rR(t,t))},oR=async e=>{e.dispatch("ScriptsLoaded");{var r=e;const g=ae.trim(Xl(r)),f=r.ui.registry.getAll().icons,p={...rC.get("default").icons,...rC.get(g).icons};ne(p,(e,t)=>{oe(f,t)||r.ui.registry.addIcon(t,e)})}d=e,l=bd(d),Z(l)?(t=mC.get(l),d.theme=t(d,mC.urls[l])||{},H(d.theme.init)&&d.theme.init(d,mC.urls[l]||d.documentBaseUrl.replace(/\/$/,""))):d.theme={},t=e,l=Cd(t),d=nC.get(l),t.model=d(t,nC.urls[l]);{var s=e;const h=[];re(Fd(s),e=>{var t=s,r=h,e=e.replace(/^\-/,""),n=uC.get(e),o=uC.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=ae.trim(e),n&&-1===ae.inArray(r,e)&&!t.plugins[e])try{var a=n(t,o)||{};t.plugins[e]=a,H(a.init)&&(a.init(t,o),r.push(e))}catch(r){n=t,a=e,o=r;a=gs.translate(["Failed to initialize plugin: {0}",a]),eg(n,"PluginLoadError",{message:a}),bC(a,o),pC(n,a)}})}l=(d=e).getElement(),d.orgDisplay=l.style.display;var t,n,o,a,i,l=await(Z(bd(d))?(n=(l=d).theme.renderUI)?n():nR(l):H(bd(d))?(l=(n=d).getElement(),(i=bd(n)(n,l)).editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||n.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||n.id+"_iframecontainer"),i.height=i.iframeHeight||l.offsetHeight,i):nR(d));if(o=e,a=ee.from(l.api).getOr({}),i={show:ee.from(a.show).getOr($),hide:ee.from(a.hide).getOr($),isEnabled:ee.from(a.isEnabled).getOr(S),setEnabled:t=>{o.mode.isReadOnly()||ee.from(a.setEnabled).each(e=>e(t))}},o.ui={...o.ui,...i},e.editorContainer=l.editorContainer,(d=e).contentCSS=d.contentCSS.concat((c=d,CC(c,ld(c))),(c=d,CC(c,cd(c)))),e.inline)QN(e);else{var d=e,c={editorContainer:l.editorContainer,iframeContainer:l.iframeContainer};{var u=d,e=c;const v=F.browser.isFirefox()?Vd(u):"Rich Text Area",b=u.translate(v),y=cr(K(u.getElement()),"tabindex").bind(gt),C=((e,t,r,n)=>{const o=_r("iframe");return n.each(e=>ir(o,"tabindex",e)),lr(o,r),lr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),yr(o,"tox-edit-area__iframe"),o})(u.id,b,Pl(u),y).dom;C.onload=()=>{C.onload=null,u.dispatch("load")},u.contentAreaContainer=e.iframeContainer,u.iframeElement=C,u.iframeHTML=(e=>{let t=Dl(e)+"<html><head>";Ll(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=Ml(e),n=Il(e),o=e.translate(Vd(e));return Fl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Fl(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(u),eR.add(e.iframeContainer,C)}c.editorContainer&&(c.editorContainer.style.display=d.orgDisplay,d.hidden=eR.isHidden(c.editorContainer)),d.getElement().style.display="none",eR.setAttrib(d.id,"aria-hidden","true"),d.getElement().style.visibility=d.orgVisibility;{var m=d;const w=m.iframeElement,E=()=>{m.contentDocument=w.contentDocument,QN(m)};if(vc(m)||F.browser.isFirefox()){const w=m.getDoc();w.open(),w.write(m.iframeHTML),w.close(),E()}else{e=K(w);const x=Bn(e,"load",JN,()=>{x.unbind(),E()});w.srcdoc=m.iframeHTML}}}},aR=se.DOM,sR=e=>"-"===e.charAt(0),iR=(t,e,r)=>ee.from(e).filter(e=>ut(e)&&!rC.has(e)).map(e=>({url:t.editorManager.baseURL+`/icons/${e}/icons${r}.js`,name:ee.some(e)})),lR=(e,t)=>{var r,o,n,a=ds.ScriptLoader,s=()=>{!e.removed&&(e=>{e=bd(e);return!Z(e)||j(mC.get(e))})(e)&&(e=>{e=Cd(e);return j(nC.get(e))})(e)&&oR(e)};{var i=e,l=t;const g=bd(i);if(Z(g)&&!sR(g)&&!oe(mC.urls,g)){const f=yd(i),p=f?i.documentBaseURI.toAbsolute(f):`themes/${g}/theme${l}.js`;mC.load(g,p).catch(()=>{var e,t,r;e=i,t=p,r=g,hC(e,"ThemeLoadError",vC("theme",t,r))})}}{var d=e,l=t;const h=Cd(d);if("plugin"!==h&&!oe(nC.urls,h)){const v=wd(d),b=Z(v)?d.documentBaseURI.toAbsolute(v):`models/${h}/model${l}.js`;nC.load(h,b).catch(()=>{var e,t,r;e=d,t=b,r=h,hC(e,"ModelLoadError",vC("model",t,r))})}}{l=a;var c=e;const y=od(c),C=ad(c);if(!gs.hasCode(y)&&"en"!==y){const w=ut(C)?C:`${c.editorManager.baseURL}/langs/${y}.js`;l.add(w).catch(()=>{var e,t,r;e=c,t=w,r=y,hC(e,"LanguageLoadError",vC("language",t,r))})}}r=a,o=e,l=t,l=iR(o,"default",l),n=o,n=ee.from(Zl(n)).filter(ut).map(e=>({url:e,name:ee.none()})).orThunk(()=>iR(o,Xl(o),"")),re((t=>{const r=[],n=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return r})([l,n]),n=>{r.add(n.url).catch(()=>{var e,t,r;e=o,t=n.url,r=n.name.getOrUndefined(),hC(e,"IconsLoadError",vC("icons",t,r))})});{var u=e,m=t;const E=(n,o)=>{uC.load(n,o).catch(()=>{var e,t,r;e=u,t=o,r=n,hC(e,"PluginLoadError",vC("plugin",t,r))})};ne(Ud(u),(e,t)=>{E(t,e),u.options.set("plugins",Fd(u).concat(t))}),re(Fd(u),e=>{!(e=ae.trim(e))||uC.urls[e]||sR(e)||E(e,`plugins/${e}/plugin${m}.js`)})}a.loadQueue().then(s,s)},dR=Lt().deviceType,cR=dR.isPhone(),uR=dR.isTablet(),mR=e=>{return z(e)?[]:(e=Q(e)?e:e.split(/[ ,]/),e=te(e,lt),I(e,ut))},gR=(e,t)=>oe(e.sections(),t),fR=(e,t,r,n,o)=>{var a,s,i,l;const d=e?{mobile:(s=null!=(s=o.mobile)?s:{},t=t,{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:O(s,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}})}:{},c=(a=["mobile"],s=s=xx(d,o),t={},o={},Me(s,(e,t)=>V(a,t),Le(t),Le(o)),t=(s={t:t,f:o}).t,o=s.f,{sections:J(t),options:J(o)}),u=ae.extend(r,n,c.options(),(t=c,e&&gR(t,"mobile")?(o=c.sections(),o=O(o,"mobile").getOr({}),ae.extend({},{},o)):{}),{external_plugins:((e,t)=>{t=null!=(t=t.external_plugins)?t:{};return e&&e.external_plugins?ae.extend({},e.external_plugins,t):t})(n,c.options())});return r=e,t=c,o=n,e=u,o=mR(o.forced_plugins),n=mR(e.plugins),l=t,l=gR(l,"mobile")?l.sections().mobile:{},r=r,t=t,i=n,l=l.plugins?mR(l.plugins):n,n=r&&gR(t,"mobile")?l:i,r=o,t=n,l=[...mR(r),...mR(t)],ae.extend(e,{forced_plugins:o,plugins:l})},pR=(e,t)=>{var r,n=e.selection,o=e.dom;return/^ | $/.test(t)?(o=o,n=n.getRng(),r=t,e=e.schema,o=K(o.getRoot()),r=Vp(o,ie.fromRangeStart(n),e)?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),qp(o,ie.fromRangeEnd(n),e)?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")):t},hR=(o,e)=>{if(o.selection.isEditable()){const{content:r,details:a}="string"!=typeof(e=e)?(t=ae.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}};dy(o,{...a,content:pR(o,r),format:"html",set:!1,selection:!0}).each(e=>{n=o,t=e.content,r=a;var t,r,n=Ly(n).editor.insertContent(t,r);cy(o,n,e),o.addVisual()})}var t},vR={"font-size":"size","font-family":"face"},bR=ar("font"),yR=a=>(o,e)=>ee.from(e).map(K).filter(tr).bind(e=>{return r=a,t=o,n=e.dom,wv(K(n),e=>{return t=e,bn(t,r).orThunk(()=>bR(t)?O(vR,r).bind(e=>cr(t,e)):ee.none());var t},e=>U(K(t),e)).or((n=a,e=e.dom,ee.from(se.DOM.getStyle(e,n,!0))));var r,t,n}).getOr(""),CR=yR("font-size"),wR=d(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),yR("font-family")),ER=e=>Du(e.getBody()).bind(e=>{e=e.container();return ee.from(X(e)?e.parentNode:e)}),xR=(e,t)=>{return e=e,t=l(ee.some,t),r=e,ee.from(r.selection.getRng()).bind(e=>{var t=r.getBody();return e.startContainer===t&&0===e.startOffset?ee.none():ee.from(r.selection.getStart(!0))}).orThunk(C(ER,e)).map(K).filter(tr).bind(t);var r},kR=(e,t)=>{var r,n;return/^[0-9.]+$/.test(t)&&1<=(r=parseInt(t,10))&&r<=7?(n=e,n=ae.explode(n.options.get("font_size_style_values")),e=e,0<(e=ae.explode(e.options.get("font_size_classes"))).length?e[r-1]||t:n[r-1]||t):t},_R=(r,e)=>{const t=r.dom,n=r.selection.getRng(),o=e?r.selection.getStart():r.selection.getEnd(),a=e?n.startContainer:n.endContainer,s=Ik(t,a);if(s&&s.isContentEditable){const i=e?wn:En,l=zl(r);((e,t,r,n)=>{const o=e.dom,a=e=>o.isBlock(e)&&e.parentElement===r,s=a(t)?t:o.getParent(n,a,r);return ee.from(s).map(K)})(r,o,s,a).each(e=>{var t=jk(r,a,e.dom,s,!1,l);i(e,K(t)),r.selection.setCursorLocation(t,0),r.dispatch("NewBlock",{newBlock:t}),Tk(r,"insertParagraph")})}},SR=e=>{g=t=>()=>{re("left,center,right,justify".split(","),e=>{t!==e&&m.formatter.remove("align"+e)}),"none"!==t&&(m.formatter.toggle("align"+t,void 0),m.nodeChanged())},(m=c=e).editorCommands.addCommands({JustifyLeft:g("left"),JustifyCenter:g("center"),JustifyRight:g("right"),JustifyFull:g("justify"),JustifyNone:g("none")}),g=t=>()=>{var e=u.selection,e=e.isCollapsed()?[u.dom.getParent(e.getNode(),u.dom.isBlock)]:e.getSelectedBlocks();return q(e,e=>j(u.formatter.matchNode(e,t)))},(u=c).editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state"),(d=e).editorCommands.addCommands({"Cut,Copy,Paste":e=>{var t=d.getDoc();let r;try{t.execCommand(e)}catch(e){r=!0}if((r="paste"!==e||t.queryCommandEnabled(e)?r:!0)||!t.queryCommandSupported(e)){let e=d.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(F.os.isMacOS()||F.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"⌘+")),d.notificationManager.open({text:e,type:"error"})}}}),(l=e).editorCommands.addCommands({mceAddUndoLevel:()=>{l.undoManager.add()},mceEndUndoLevel:()=>{l.undoManager.add()},Undo:()=>{l.undoManager.undo()},Redo:()=>{l.undoManager.redo()}}),(i=e).editorCommands.addCommands({mceSelectNodeDepth:(e,t,r)=>{let n=0;i.dom.getParent(i.selection.getNode(),e=>!G(e)||n++!==r||(i.selection.select(e),!1),i.getBody())},mceSelectNode:(e,t,r)=>{i.selection.select(r)},selectAll:()=>{var e,t=i.dom.getParent(i.selection.getStart(),yo);t&&((e=i.dom.createRng()).selectNodeContents(t),i.selection.setRng(e))}}),(s=e).editorCommands.addCommands({mceCleanup:()=>{var e=s.selection.getBookmark();s.setContent(s.getContent()),s.selection.moveToBookmark(e)},insertImage:(e,t,r)=>{hR(s,s.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{s.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,t,r)=>{hR(s,s.dom.encode(r))},insertHTML:(e,t,r)=>{hR(s,r)},mceInsertContent:(e,t,r)=>{hR(s,r)},mceSetContent:(e,t,r)=>{s.setContent(r)},mceReplaceContent:(e,t,r)=>{s.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,s.selection.getContent({format:"text"})))},mceNewDocument:()=>{s.setContent(tc(s))}}),c=(e,t,r)=>{var r=Z(r)?{href:r}:r,n=a.dom.getParent(a.selection.getNode(),"a");de(r)&&Z(r.href)&&(r.href=r.href.replace(/ /g,"%20"),n&&r.href||a.formatter.remove("link"),r.href)&&a.formatter.apply("link",r,n)},(a=e).editorCommands.addCommands({unlink:()=>{var e;a.selection.isEditable()&&(a.selection.isCollapsed()?(e=a.dom.getParent(a.selection.getStart(),"a"))&&a.dom.remove(e,!0):a.formatter.remove("link"))},mceInsertLink:c,createLink:c}),(r=e).editorCommands.addCommands({Indent:()=>{var e;e=r,sE(e,"indent")},Outdent:()=>{iE(r)}}),r.editorCommands.addCommands({Outdent:()=>nE(r)},"state"),(t=e).editorCommands.addCommands({InsertNewBlockBefore:()=>{var e;e=t,_R(e,!0)},InsertNewBlockAfter:()=>{var e;e=t,_R(e,!1)}}),(n=e).editorCommands.addCommands({insertParagraph:()=>{y_(Zk,n)},mceInsertNewLine:(e,t,r)=>{C_(n,r)},InsertLineBreak:(e,t,r)=>{y_(a_,n)}});var o,n,t,r,a,s,i,l,d,c,u,m,g=e;{var f=g;const h=(e,t)=>{f.formatter.toggle(e,t),f.nodeChanged()};f.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{h(e)},"ForeColor,HiliteColor":(e,t,r)=>{h(e,{value:r})},BackColor:(e,t,r)=>{h("hilitecolor",{value:r})},FontName:(e,t,r)=>{var n=f;r=kR(n,r),n.formatter.toggle("fontname",{value:(e=>{e=e.split(/\s*,\s*/);return te(e,e=>-1===e.indexOf(" ")||at(e,'"')||at(e,"'")?e:`'${e}'`).join(",")})(r)}),n.nodeChanged()},FontSize:(e,t,r)=>{var n;r=r,(n=f).formatter.toggle("fontsize",{value:kR(n,r)}),n.nodeChanged()},LineHeight:(e,t,r)=>{var n;(n=f).formatter.toggle("lineheight",{value:String(r)}),n.nodeChanged()},Lang:(e,t,r)=>{h(e,{value:r.code,customValue:null!=(e=r.customCode)?e:null})},RemoveFormat:e=>{f.formatter.remove(e)},mceBlockQuote:()=>{h("blockquote")},FormatBlock:(e,t,r)=>{h(Z(r)?r:"p")},mceToggleFormat:(e,t,r)=>{h(r)}})}{var p=g;const v=e=>p.formatter.match(e);p.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>v(e),mceBlockQuote:()=>v("blockquote")},"state"),p.editorCommands.addQueryValueHandler("FontName",()=>{return t=p,xR(t,e=>wR(t.getBody(),e.dom)).getOr("");var t}),p.editorCommands.addQueryValueHandler("FontSize",()=>{return t=p,xR(t,e=>CR(t.getBody(),e.dom)).getOr("");var t}),p.editorCommands.addQueryValueHandler("LineHeight",()=>{return t=p,xR(t,r=>{var e=K(t.getBody());return wv(r,e=>bn(e,"line-height"),C(U,e)).getOrThunk(()=>{var e=parseFloat(hn(r,"line-height")),t=parseFloat(hn(r,"font-size"));return String(e/t)})}).getOr("");var t})}(o=e).editorCommands.addCommands({mceRemoveNode:(e,t,r)=>{r=null!=r?r:o.selection.getNode();if(r!==o.getBody()){const e=o.selection.getBookmark();o.dom.remove(r,!0),o.selection.moveToBookmark(e)}},mcePrint:()=>{o.getWin().print()},mceFocus:(e,t,r)=>{var n;(n=o).removed||(!0===r?Sf:e=>{var t=e.selection,r=e.getBody();let n=t.getRng();e.quirks.refreshContentEditable();var o,a,s=t=>{mf(t).each(e=>{t.selection.setRng(e),n=e})},t=(!kf(e)&&e.hasEditableRoot()&&s(e),o=e,t=t.getNode(),o.dom.getParent(t,e=>"true"===o.dom.getContentEditable(e)));t&&e.dom.isChildOf(t,r)?(null===(a=e).dom.getParent(t,e=>"false"===a.dom.getContentEditable(e))&&xf(r),xf(t),e.hasEditableRoot()||s(e),Ef(e,n)):(e.inline||(F.browser.isOpera()||xf(r),e.getWin().focus()),(F.browser.isFirefox()||e.inline)&&(xf(r),Ef(e,n))),Sf(e)})(n)},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})},NR=["toggleview"],RR=e=>V(NR,e.toLowerCase());class AR{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){var o,a=this.editor,s=e.toLowerCase(),n=null==n?void 0:n.skip_focus;return!(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||n?(o=a,mf(o).each(e=>o.selection.setRng(e))):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())||(n=this.commands.exec[s],!H(n))||(n(s,t,r),a.dispatch("ExecCommand",{command:e,ui:t,value:r}),0))}queryCommandState(e){var t;return!(!RR(e)&&this.editor.quirks.isHidden()||this.editor.removed||(e=e.toLowerCase(),t=this.commands.state[e],!H(t)))&&t(e)}queryCommandValue(e){var t;return!(!RR(e)&&this.editor.quirks.isHidden()||this.editor.removed)&&(e=e.toLowerCase(),t=this.commands.value[e],H(t))?t(e):""}addCommands(e,r="exec"){const n=this.commands;ne(e,(t,e)=>{re(e.toLowerCase().split(","),e=>{n[r][e]=t})})}addCommand(e,n,o){e=e.toLowerCase();this.commands.exec[e]=(e,t,r)=>n.call(null!=o?o:this.editor,t,r)}queryCommandSupported(e){e=e.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}const TR="data-mce-contenteditable",OR=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},BR=(e,t)=>{e.dom.contentEditable=t?"true":"false"},PR=e=>e.readonly,DR=t=>{t.parser.addAttributeFilter("contenteditable",e=>{PR(t)&&re(e,e=>{e.attr(TR,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(TR,e=>{PR(t)&&re(e,e=>{e.attr("contenteditable",e.attr(TR))})}),t.serializer.addTempAttr(TR)},LR=["copy"],MR=ae.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class IR{static isNative(e){return!!MR[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||T}fire(e,t){return this.dispatch(e,t)}dispatch(e,r){var n=e.toLowerCase(),o=Ka(n,null!=r?r:{},this.scope),a=(this.settings.beforeFire&&this.settings.beforeFire(o),this.bindings[n]);if(a)for(let e=0,t=a.length;e<t;e++){const r=a[e];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(r,e,n,o){if(e=!1===e?T:e){var a={func:e,removed:!1},s=(o&&ae.extend(a,o),r.toLowerCase().split(" "));let t=s.length;for(;t--;){const r=s[t];let e=this.bindings[r];e||(e=[],this.toggleEvent(r,!0)),e=n?[a,...e]:[...e,a],this.bindings[r]=e}}return this}off(r,n){if(r){var o=r.toLowerCase().split(" ");let t=o.length;for(;t--;){var a=o[t];let e=this.bindings[a];if(!a)return ne(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(e){if(n){const r=ge(e,e=>e.func===n);e=r.fail,this.bindings[a]=e,re(r.pass,e=>{e.removed=!0})}else e.length=0;e.length||(this.toggleEvent(r,!1),delete this.bindings[a])}}}else ne(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();e=this.bindings[e];return!(!e||0===e.length)}}const FR=r=>(r._eventDispatcher||(r._eventDispatcher=new IR({scope:r,toggleEvent:(e,t)=>{IR.isNative(e)&&r.toggleNativeEvent&&r.toggleNativeEvent(e,t)}})),r._eventDispatcher),UR={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(t,e,r){if(this.removed&&"remove"!==t&&"detach"!==t)return Ka(t.toLowerCase(),null!=e?e:{},this);var n=FR(this).dispatch(t,e);if(!1!==r&&this.parent){let e=this.parent();for(;e&&!n.isPropagationStopped();)e.dispatch(t,n,!1),e=e.parent?e.parent():void 0}return n},on(e,t,r){return FR(this).on(e,t,r)},off(e,t){return FR(this).off(e,t)},once(e,t){return FR(this).once(e,t)},hasEventListeners(e){return FR(this).has(e)}},zR=se.DOM;let jR;const HR=(e,t)=>{return"selectionchange"===t?e.getDoc():!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)?e.getDoc().documentElement:(t=hd(e))?(e.eventRoot||(e.eventRoot=zR.select(t)[0]),e.eventRoot):e.getBody()},$R=(e,t,r)=>{var n,o,a,s,i;(i=e).hidden||PR(i)?PR(e)&&(n=e,"click"!==(o=r).type||le.metaKeyPressed(o)?(a=o,V(LR,a.type)&&n.dispatch(o.type,o)):(a=K(o.target),s=n,i=a,dn(i,"a",e=>U(e,K(s.getBody()))).bind(e=>cr(e,"href")).each(e=>{if(o.preventDefault(),/^#/.test(e)){const o=n.dom.select(`${e},[name="${nt(e,"#")}"]`);o.length&&n.selection.scrollIntoView(o[0],!0)}else window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):e.dispatch(t,r)},VR=(o,a)=>{var e,t;o.delegates||(o.delegates={}),o.delegates[a]||o.removed||(e=HR(o,a),hd(o)?(jR||(jR={},o.editorManager.on("removeEditor",()=>{o.editorManager.activeEditor||jR&&(ne(jR,(e,t)=>{o.dom.unbind(HR(o,t))}),jR=null)})),jR[a]||(t=e=>{var t=e.target,r=o.editorManager.get();let n=r.length;for(;n--;){const o=r[n].getBody();o!==t&&!zR.isChildOf(t,o)||$R(r[n],a,e)}},jR[a]=t,zR.bind(e,a,t))):(t=e=>{$R(o,a,e)},zR.bind(e,a,t),o.delegates[a]=t))},qR={...UR,bindPendingEventDelegates(){const t=this;ae.each(t._pendingNativeEvents,e=>{VR(t,e)})},toggleNativeEvent(e,t){var r=this;"focus"===e||"blur"===e||r.removed||(t?r.initialized?VR(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(HR(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){const r=this,e=r.getBody(),t=r.dom;r.delegates&&(ne(r.delegates,(e,t)=>{r.dom.unbind(HR(r,t),t,e)}),delete r.delegates),!r.inline&&e&&t&&(e.onload=null,t.unbind(r.getWin()),t.unbind(r.getDoc())),t&&(t.unbind(e),t.unbind(r.getContainer()))}},WR=e=>Z(e)?{value:e.split(/[ ,]/),valid:!0}:_(e,Z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},KR=(e,t)=>e+(mt(t.message)?"":". "+t.message),YR=e=>e.valid,GR=(e,t,r="")=>{t=t(e);return ue(t)?t?{value:e,valid:!0}:{valid:!1,message:r}:t},XR=["design","readonly"],ZR=(e,t,r,n)=>{var o,a,s,i,l=r[t.get()],r=r[n];try{r.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}l.deactivate(),l.editorReadOnly!==r.editorReadOnly&&(l=e,r=r.editorReadOnly,i=K(l.getBody()),o=i,a="mce-content-readonly",s=r,Er(o,a)&&!s?wr(o,a):s&&yr(o,a),r?(l.selection.controlSelection.hideResizeRect(),l._selectionOverrides.hideFakeCaret(),s=l,ee.from(s.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")}),l.readonly=!0,BR(i,!1),re(Vn(i,'*[contenteditable="true"]'),e=>{ir(e,TR,"true"),BR(e,!1)})):(l.readonly=!1,l.hasEditableRoot()&&BR(i,!0),re(Vn(i,`*[${TR}="true"]`),e=>{mr(e,TR),BR(e,!0)}),OR(l,"StyleWithCSS",!1),OR(l,"enableInlineTableEditing",!1),OR(l,"enableObjectResizing",!1),_f(l)&&l.focus(),l.selection.setRng(l.selection.getRng()),l.nodeChanged())),t.set(n),e.dispatch("SwitchMode",{mode:n})},QR=ae.each,JR=ae.explode,eA={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},tA=ae.makeMap("alt,ctrl,shift,meta,access"),rA=e=>{const t={},r=F.os.isMacOS()||F.os.isiOS();QR(JR(e.toLowerCase(),"+"),e=>{e in tA?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=eA[e]||e.toUpperCase().charCodeAt(0))});var n=[t.keyCode];let o;for(o in tA)t[o]?n.push(o):t[o]=!1;return t.id=n.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class nA{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const r=this;e.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(QR(r.shortcuts,e=>{r.matchShortcut(t,e)&&(r.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type)&&r.executeShortcutAction(e)}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(e,t,r,n){const o=this,a=o.normalizeCommandFunc(r);return QR(JR(ae.trim(e)),e=>{e=o.createShortcut(e,t,a,n);o.shortcuts[e.id]=e}),!0}remove(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(e){const t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:ae.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){e=ae.map(JR(e,">"),rA);return e[e.length-1]=ae.extend(e[e.length-1],{func:r,scope:n||this.editor}),ae.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const oA=se.DOM,aA=ae.extend,sA=ae.each;class iA{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,aA(this,qR);var n=this,e=(this.id=e,this.hidden=!1,((e,t)=>{t=kx(t);return fR(cR||uR,cR,t,e,t)})(r.defaultOptions,t));this.options=((a,e=a)=>{const s={},i={},l=(e,t,r)=>{t=GR(t,r);return YR(t)?(i[e]=t.value,!0):(console.warn(KR(`Invalid value passed for the ${e} option`,t)),!1)},n=e=>oe(s,e);return{register:(t,e)=>{o=e;const r=Z(o.processor)?(t=>{const r=(()=>{switch(t){case"array":return Q;case"boolean":return ue;case"function":return H;case"number":return k;case"object":return de;case"string":return Z;case"string[]":return WR;case"object[]":return e=>_(e,de);case"regexp":return e=>y(e,RegExp);default:return S}})();return e=>GR(e,r,`The value must be a ${t}.`)})(e.processor):e.processor,n=((e,t,r)=>{if(!D(t)){t=GR(t,r);if(YR(t))return t.value;console.error(KR(`Invalid default value passed for the "${e}" option`,t))}})(t,e.default,r);var o;s[t]={...e,default:n,processor:r},O(i,t).orThunk(()=>O(a,t)).each(e=>l(t,e,r))},isRegistered:n,get:e=>O(i,e).orThunk(()=>O(s,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{var r;return n(e)?(r=s[e]).immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):l(e,t,r.processor):(console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1)},unset:e=>{var t=n(e);return t&&delete i[e],t},isSet:e=>oe(i,e),debug:()=>{try{console.log(JSON.parse(JSON.stringify(e,(e,t)=>ue(t)||k(t)||Z(t)||P(t)||Q(t)||ce(t)?t:Object.prototype.toString.call(t))))}catch(e){console.error(e)}}}})(e,t);{var o=n;const p=o.options.register;p("id",{processor:"string",default:o.id}),p("selector",{processor:"string"}),p("target",{processor:"object"}),p("suffix",{processor:"string"}),p("cache_suffix",{processor:"string"}),p("base_url",{processor:"string"}),p("referrer_policy",{processor:"string",default:""}),p("language_load",{processor:"boolean",default:!0}),p("inline",{processor:"boolean",default:!1}),p("iframe_attrs",{processor:"object",default:{}}),p("doctype",{processor:"string",default:"<!DOCTYPE html>"}),p("document_base_url",{processor:"string",default:o.documentBaseUrl}),p("body_id",{processor:Bl(o,"tinymce"),default:"tinymce"}),p("body_class",{processor:Bl(o),default:""}),p("content_security_policy",{processor:"string",default:""}),p("br_in_pre",{processor:"boolean",default:!0}),p("forced_root_block",{processor:e=>{var t=Z(e)&&ut(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),p("forced_root_block_attrs",{processor:"object",default:{}}),p("newline_behavior",{processor:e=>{var t=V(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),p("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),p("no_newline_selector",{processor:"string",default:""}),p("keep_styles",{processor:"boolean",default:!0}),p("end_container_on_empty_block",{processor:e=>ue(e)||Z(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),p("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),p("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),p("font_size_classes",{processor:"string",default:""}),p("automatic_uploads",{processor:"boolean",default:!0}),p("images_reuse_filename",{processor:"boolean",default:!1}),p("images_replace_blob_uris",{processor:"boolean",default:!0}),p("icons",{processor:"string",default:""}),p("icons_url",{processor:"string",default:""}),p("images_upload_url",{processor:"string",default:""}),p("images_upload_base_path",{processor:"string",default:""}),p("images_upload_credentials",{processor:"boolean",default:!1}),p("images_upload_handler",{processor:"function"}),p("language",{processor:"string",default:"en"}),p("language_url",{processor:"string",default:""}),p("entity_encoding",{processor:"string",default:"named"}),p("indent",{processor:"boolean",default:!0}),p("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),p("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),p("indent_use_margin",{processor:"boolean",default:!1}),p("indentation",{processor:"string",default:"40px"}),p("content_css",{processor:e=>{var t=!1===e||Z(e)||_(e,Z);return t?Z(e)?{value:te(e.split(","),lt),valid:t}:!Q(e)&&!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Rd(o)?[]:["default"]}),p("content_style",{processor:"string"}),p("content_css_cors",{processor:"boolean",default:!1}),p("font_css",{processor:e=>{var t=Z(e)||_(e,Z);return t?{value:Q(e)?e:te(e.split(","),lt),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),p("inline_boundaries",{processor:"boolean",default:!0}),p("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),p("object_resizing",{processor:e=>{var t=ue(e)||Z(e);return t?!1===e||Nl.isiPhone()||Nl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Rl}),p("resize_img_proportional",{processor:"boolean",default:!0}),p("event_root",{processor:"string"}),p("service_message",{processor:"string"}),p("theme",{processor:e=>!1===e||Z(e)||H(e),default:"silver"}),p("theme_url",{processor:"string"}),p("formats",{processor:"object"}),p("format_empty_lines",{processor:"boolean",default:!1}),p("format_noneditable_selector",{processor:"string",default:""}),p("preview_styles",{processor:e=>{var t=!1===e||Z(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),p("custom_ui_selector",{processor:"string",default:""}),p("hidden_input",{processor:"boolean",default:!0}),p("submit_patch",{processor:"boolean",default:!0}),p("encoding",{processor:"string"}),p("add_form_submit_trigger",{processor:"boolean",default:!0}),p("add_unload_trigger",{processor:"boolean",default:!0}),p("custom_undo_redo_levels",{processor:"number",default:0}),p("disable_nodechange",{processor:"boolean",default:!1}),p("readonly",{processor:"boolean",default:!1}),p("editable_root",{processor:"boolean",default:!0}),p("plugins",{processor:"string[]",default:[]}),p("external_plugins",{processor:"object"}),p("forced_plugins",{processor:"string[]"}),p("model",{processor:"string",default:o.hasPlugin("rtc")?"plugin":"dom"}),p("model_url",{processor:"string"}),p("block_unsupported_drop",{processor:"boolean",default:!0}),p("visual",{processor:"boolean",default:!0}),p("visual_table_class",{processor:"string",default:"mce-item-table"}),p("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),p("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),p("setup",{processor:"function"}),p("init_instance_callback",{processor:"function"}),p("url_converter",{processor:"function",default:o.convertURL}),p("url_converter_scope",{processor:"object",default:o}),p("urlconverter_callback",{processor:"function"}),p("allow_conditional_comments",{processor:"boolean",default:!1}),p("allow_html_data_urls",{processor:"boolean",default:!1}),p("allow_svg_data_urls",{processor:"boolean"}),p("allow_html_in_named_anchor",{processor:"boolean",default:!1}),p("allow_script_urls",{processor:"boolean",default:!1}),p("allow_unsafe_link_target",{processor:"boolean",default:!1}),p("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),p("fix_list_elements",{processor:"boolean",default:!1}),p("preserve_cdata",{processor:"boolean",default:!1}),p("remove_trailing_brs",{processor:"boolean",default:!0}),p("pad_empty_with_br",{processor:"boolean",default:!1}),p("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),p("element_format",{processor:"string",default:"html"}),p("entities",{processor:"string"}),p("schema",{processor:"string",default:"html5"}),p("convert_urls",{processor:"boolean",default:!0}),p("relative_urls",{processor:"boolean",default:!0}),p("remove_script_host",{processor:"boolean",default:!0}),p("custom_elements",{processor:Ol}),p("extended_valid_elements",{processor:"string"}),p("invalid_elements",{processor:"string"}),p("invalid_styles",{processor:Ol}),p("valid_children",{processor:"string"}),p("valid_classes",{processor:Ol}),p("valid_elements",{processor:"string"}),p("valid_styles",{processor:Ol}),p("verify_html",{processor:"boolean",default:!0}),p("auto_focus",{processor:e=>Z(e)||!0===e}),p("browser_spellcheck",{processor:"boolean",default:!1}),p("protect",{processor:"array"}),p("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),p("deprecation_warnings",{processor:"boolean",default:!0}),p("a11y_advanced_options",{processor:"boolean",default:!1}),p("api_key",{processor:"string"}),p("license_key",{processor:"string"}),p("paste_block_drop",{processor:"boolean",default:!1}),p("paste_data_images",{processor:"boolean",default:!0}),p("paste_preprocess",{processor:"function"}),p("paste_postprocess",{processor:"function"}),p("paste_webkit_styles",{processor:"string",default:"none"}),p("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),p("paste_merge_formats",{processor:"boolean",default:!0}),p("smart_paste",{processor:"boolean",default:!0}),p("paste_as_text",{processor:"boolean",default:!1}),p("paste_tab_spaces",{processor:"number",default:4}),p("text_patterns",{processor:e=>_(e,de)||!1===e?{value:Sl(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),p("text_patterns_lookup",{processor:e=>{return H(e)?{value:(t=e,e=>{e=t(e);return Sl(e)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),p("noneditable_class",{processor:"string",default:"mceNonEditable"}),p("editable_class",{processor:"string",default:"mceEditable"}),p("noneditable_regexp",{processor:e=>_(e,Tl)?{value:e,valid:!0}:Tl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),p("table_tab_navigation",{processor:"boolean",default:!0}),p("highlight_on_focus",{processor:"boolean",default:!0}),p("xss_sanitization",{processor:"boolean",default:!0}),p("details_initial_state",{processor:e=>{var t=V(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),p("details_serialized_state",{processor:e=>{var t=V(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),p("init_content_sync",{processor:"boolean",default:!1}),p("newdocument_content",{processor:"string",default:""}),p("sandbox_iframes",{processor:"boolean",default:!0}),p("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),p("convert_unsafe_embeds",{processor:"boolean",default:!0}),o.on("ScriptsLoaded",()=>{p("directionality",{processor:"string",default:gs.isRtl()?"rtl":void 0}),p("placeholder",{processor:"string",default:Al.getAttrib(o.getElement(),"placeholder")})})}var a=this.options.get;if(a("deprecation_warnings")){var s=t,i=e,l=(s=s,l=Zy(s,Ky),!1!==(s=s.forced_root_block)&&""!==s||l.push("forced_root_block (false only)"),_e(l)),d=(s=i,Qy(s,Gy)),c=0<d.length,u=0<l.length,m="mobile"===i.theme;if(c||u||m){const s="\n- ",i=m?`

Themes:
- mobile`:"",h=c?`

Plugins:
- `+d.join(s):"",v=u?`

Options:
- `+l.join(s):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+i+h+v)}var g=t,f=e,s=(g=g,Zy(g,Yy)),i=(g=f,Qy(g,Xy.map(e=>e.name))),m=0<i.length,c=0<s.length;if(m||c){const g="\n- ",f=m?`

Plugins:
- `+i.map(Jy).join(g):"",b=c?`

Options:
- `+s.join(g):"";console.warn("The following deprecated features are currently enabled but will be removed soon."+f+b)}}d=a("suffix"),d&&(r.suffix=d),this.suffix=r.suffix,u=a("base_url"),u&&r._setBaseUrl(u),this.baseUri=r.baseURI,l=nd(n),l&&(ds.ScriptLoader._setReferrerPolicy(l),se.DOM.styleSheetLoader._setReferrerPolicy(l)),t=Id(n),j(t)&&se.DOM.styleSheetLoader._setContentCssCors(t),fs.languageLoad=a("language_load"),fs.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new q0(Ll(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Rd(n),this.hasVisual=jd(n),this.shortcuts=new nA(this),this.editorCommands=new AR(this),SR(this),e=a("cache_suffix"),e&&(F.cacheSuffix=e.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(f=(()=>{const e={},t={},r={},n={},o={},a={},s={},i={},l=(r,n)=>(e,t)=>{r[e.toLowerCase()]={...t,type:n}};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(r,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(a,"contexttoolbar"),addContextForm:l(a,"contextform"),addSidebar:l(s,"sidebar"),addView:l(i,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:s,views:i})}})()).addAutocompleter,addButton:f.addButton,addContextForm:f.addContextForm,addContextMenu:f.addContextMenu,addContextToolbar:f.addContextToolbar,addIcon:f.addIcon,addMenuButton:f.addMenuButton,addMenuItem:f.addMenuItem,addNestedMenuItem:f.addNestedMenuItem,addSidebar:f.addSidebar,addSplitButton:f.addSplitButton,addToggleButton:f.addToggleButton,addGroupToolbarButton:f.addGroupToolbarButton,addToggleMenuItem:f.addToggleMenuItem,addView:f.addView,getAll:f.getAll},styleSheetLoader:void 0,show:$,hide:$,setEnabled:$,isEnabled:S},this.mode=(a=>{const s=Oo("design"),i=Oo({design:{activate:$,deactivate:$,editorReadOnly:!1},readonly:{activate:$,deactivate:$,editorReadOnly:!0}});return(e=a).serializer?DR(e):e.on("PreInit",()=>{DR(e)}),(t=a).on("ShowCaret",e=>{PR(t)&&e.preventDefault()}),t.on("ObjectSelected",e=>{PR(t)&&e.preventDefault()}),{isReadOnly:()=>PR(a),set:e=>{var t=a,r=i.get(),n=s,o=e;if(o!==n.get()){if(!oe(r,o))throw new Error(`Editor mode '${o}' is invalid`);t.initialized?ZR(t,n,r,o):t.on("init",()=>ZR(t,n,r,o))}},get:()=>s.get(),register:(e,t)=>{i.set(((e,t,r)=>{if(V(XR,t))throw new Error("Cannot override default mode "+t);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(i.get(),e,t))}};var t,e})(n),r.dispatch("SetupEditor",{editor:this}),g=qd(n);H(g)&&g.call(n,n)}render(){{var t=this,e,r,n=t.id;gs.setCode(od(t));const o=()=>{aR.unbind(window,"ready",o),t.render()};if(Qa.Event.domLoaded){if(t.getElement()){const a=K(t.getElement()),s=gr(a);t.on("remove",()=>{me(a.dom.attributes,e=>mr(a,e.name)),lr(a,s)}),t.ui.styleSheetLoader=(e=a,r=t,ta.forElement(e,{contentCssCors:Id(r),referrerPolicy:nd(r)})),Rd(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const i=t.getElement().form||aR.getParent(n,"form");i&&(t.formElement=i,Ad(t)&&!mo(t.getElement())&&(aR.insertAfter(aR.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=e=>{t.dispatch(e.type,e)},aR.bind(i,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!Td(t)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)))),t.windowManager=gC(t),t.notificationManager=cC(t),"xml"===t.options.get("encoding")&&t.on("GetContent",e=>{e.save&&(e.content=aR.encode(e.content))}),Od(t)&&t.on("submit",()=>{t.initialized&&t.save()}),Bd(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),lR(t,t.suffix)}}else aR.bind(window,"ready",o)}}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return kf(this)}translate(e){return gs.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(j(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:S,default:t})),n.isSet(e)||D(t)?n.get(e):t}hasPlugin(e,t){return!(!V(Fd(this),e)||t&&void 0===uC.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(oA.show(this.getContainer()),oA.hide(this.id)),this.load(),this.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(oA.hide(e.getContainer()),oA.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){var t,r=this.getElement();return!this.removed&&r?(e={...e,load:!0},t=mo(r)?r.value:r.innerHTML,t=this.setContent(t,e),e.no_events||this.dispatch("LoadContent",{...e,element:r}),t):""}save(e={}){const t=this;let r=t.getElement();if(!r||!t.initialized||t.removed)return"";const n={...e,save:!0,element:r};let o=t.getContent(n);var a={...n,content:o};if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,mo(r))r.value=o;else{!e.is_removing&&t.inline||(r.innerHTML=o);const n=oA.getParent(t.id,"form");n&&sA(n.elements,e=>e.name!==t.id||(e.value=o,!1))}return a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return Wy(this,e,t)}getContent(e){return[n,e={}]=[this,e],t=e.format||"html",e={...e,format:t,get:!0,getInner:!0},iy(n,e).fold(g,e=>{r=n,t=e;var t,r=Ly(r).editor.getContent(t);return ly(n,r,e)});var n,t}insertContent(e,t){t&&(e=aA({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Wy(this,this.startContent,{format:"raw"}):Wy(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||oA.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=oA.get(this.id)),this.targetElm}getWin(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow}getDoc(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument}getBody(){var e,t=this.getDoc();return null!=(e=null!=(e=this.bodyElement)?e:null==t?void 0:t.body)?e:null}convertURL(e,t,r){var n=this.options.get,o=Kd(this);return H(o)?o.call(this,e,r,!0,t):!n("convert_urls")||"link"===r||de(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length||"http"!==(o=new q0(e)).protocol&&"https"!==o.protocol&&""!==o.protocol?e:n("relative_urls")?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){var t;t=t=this,e=e,My(t).editor.addVisual(e)}setEditableRoot(e){var t;e=e,(t=this)._editableRoot!==e&&(t._editableRoot=e,t.readonly||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),t.dispatch("EditableRootStateChange",{state:e}))}hasEditableRoot(){return this._editableRoot}remove(){var e,t,r,n,o;(e=this).removed||({_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement(),n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&j(null==o?void 0:o.nextSibling)&&eC.remove(o.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&n&&(o=e,eC.setStyle(o.id,"display",o.orgDisplay)),e.dispatch("detach"),eC.remove(e.getContainer()),tC(t),tC(r),e.destroy())}destroy(e){var t=this,{selection:r,dom:n}=t;if(!t.destroyed)if(e||t.removed){e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),tC(r),tC(n)),(r=(e=t).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),eC.unbind(r,"submit reset",e.formEventDelegate));var o=t;if((n=o).contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,r=o.selection){const o=r.dom;n.selection=r.win=r.dom=o.doc=null}t.destroyed=!0}else t.remove()}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const lA=se.DOM,dA=ae.each;let cA,uA=!1,mA=[];const gA=t=>{const r=t.type;dA(vA.get(),e=>{switch(r){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t)}})},fA=e=>{var t;e!==uA&&(t=se.DOM,e?(t.bind(window,"resize",gA),t.bind(window,"scroll",gA)):(t.unbind(window,"resize",gA),t.unbind(window,"scroll",gA)),uA=e)},pA=t=>{var e=mA;return mA=I(mA,e=>t!==e),vA.activeEditor===t&&(vA.activeEditor=0<mA.length?mA[0]:null),vA.focusedEditor===t&&(vA.focusedEditor=null),e.length!==mA.length},hA="CSS1Compat"!==document.compatMode,vA={...UR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:gs,activeEditor:null,focusedEditor:null,setup(){const t=this;let r="",n="",e=q0.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)r=o.base||o.baseURL,n=o.suffix;else{const t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){const o=t[e].src||"";if(""!==o){const a=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==a.indexOf(".min")&&(n=".min"),r=o.substring(0,o.lastIndexOf("/"));break}}}if(!r&&document.currentScript){const t=document.currentScript.src;-1!==t.indexOf(".min")&&(n=".min"),r=t.substring(0,t.lastIndexOf("/"))}}var a;t.baseURL=new q0(e).toAbsolute(r),t.documentBaseURL=e,t.baseURI=new q0(t.baseURL),t.suffix=n,(a=t).on("AddEditor",C(Cf,a)),a.on("RemoveEditor",C(wf,a))},overrideDefaults(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(t&&(this.suffix=t),(this.defaultOptions=e).plugin_base_urls);void 0!==t&&ne(t,(e,t)=>{fs.PluginManager.urls[t]=e})},init(s){const i=this;let r;const l=ae.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let d=e=>{r=e};const t=()=>{let n=0;const o=[];let a;var e;lA.unbind(window,"ready",t),(e=s.onpageload)&&e.apply(i,[]),a=Oe((e=s,F.browser.isIE()||F.browser.isEdge()?(bC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):hA?(bC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Z(e.selector)?lA.select(e.selector):j(e.target)?[e.target]:[])),ae.each(a,e=>{(e=i.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(pA(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(a=ae.grep(a,e=>!i.get(e.id))).length?d([]):dA(a,e=>{{var t;(r=e,s.inline&&r.tagName.toLowerCase()in l)?bC("Could not initialize inline editor on invalid inline target element",e):(r=(e=>{let t=e.id;return t||(t=O(e,"name").filter(e=>!lA.get(e)).getOrThunk(lA.uniqueId),e.setAttribute("id",t)),t})(e),t=s,r=new iA(r,t,i),o.push(r),r.on("init",()=>{++n===a.length&&d(o)}),r.targetElm=r.targetElm||e,r.render())}var r})};return lA.bind(window,"ready",t),new Promise(t=>{r?t(r):d=e=>{t(e)}})},get(t){return 0===arguments.length?mA.slice(0):Z(t)?ve(mA,e=>e.id===t).getOr(null):k(t)&&mA[t]?mA[t]:null},add(e){const r=this,t=r.get(e.id);return t===e||(null===t&&mA.push(e),fA(!0),r.activeEditor=e,r.dispatch("AddEditor",{editor:e}),cA)||(cA=e=>{var t=r.dispatch("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",cA)),e},createEditor(e,t){return this.add(new iA(e,t,this))},remove(e){const t=this;let r;if(e){if(!Z(e))return r=e,P(t.get(r.id))?null:(pA(r)&&t.dispatch("RemoveEditor",{editor:r}),0===mA.length&&window.removeEventListener("beforeunload",cA),r.remove(),fA(0<mA.length),r);dA(lA.select(e),e=>{(r=t.get(e.id))&&t.remove(r)})}else for(let e=mA.length-1;0<=e;e--)t.remove(mA[e])},execCommand(e,t,r){var n,o=de(r)?null!=(n=r.id)?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(o)){const e=r.options;new iA(o,e,this).render()}return!0;case"mceRemoveEditor":{const e=this.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=this.get(o);return e?e.isHidden()?e.show():e.hide():this.execCommand("mceAddEditor",!1,r),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{dA(mA,e=>{e.save()})},addI18n:(e,t)=>{gs.add(e,t)},translate:e=>gs.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new q0(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new q0(this.baseURL)}},bA=(vA.setup(),(()=>{const t=Bo();return{FakeClipboardItem:t=>({items:t,types:Be(t),getType:e=>O(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})()),yA=Math.min,CA=Math.max,wA=Math.round,EA=(e,t,r)=>{let n=t.x,o=t.y;var a=e.w,e=e.h,s=t.w,t=t.h,r=(r||"").split("");return"b"===r[0]&&(o+=t),"r"===r[1]&&(n+=s),"c"===r[0]&&(o+=wA(t/2)),"c"===r[1]&&(n+=wA(s/2)),"b"===r[3]&&(o-=e),"r"===r[4]&&(n-=a),"c"===r[3]&&(o-=wA(e/2)),"c"===r[4]&&(n-=wA(a/2)),xA(n,o,a,e)},xA=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),kA={inflate:(e,t,r)=>xA(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:EA,findBestRelativePosition:(t,r,n,o)=>{for(let e=0;e<o.length;e++){var a=EA(t,r,o[e]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[e]}return null},intersect:(e,t)=>{var r=CA(e.x,t.x),n=CA(e.y,t.y),o=yA(e.x+e.w,t.x+t.w),e=yA(e.y+e.h,t.y+t.h);return o-r<0||e-n<0?null:xA(r,n,o-r,e-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,a=e.x+e.w,s=e.y+e.h;var e=t.x+t.w,i=t.y+t.h,l=CA(0,t.x-n),t=CA(0,t.y-o),e=CA(0,a-e),i=CA(0,s-i);return n+=l,o+=t,r&&(a+=l,s+=t,n-=e,o-=i),a-=e,s-=i,xA(n,o,a-n,s-o)},create:xA,fromClientRect:e=>xA(e.left,e.top,e.width,e.height)},_A=(()=>{const a={},i={},r={};return{load:(t,r)=>{const n=`Script at URL "${r}" failed to load`,o=`Script at URL "${r}" did not call \`tinymce.Resource.add('${t}', data)\` within 1 second`;var e;return void 0!==a[t]?a[t]:(e=new Promise((a,s)=>{const e=(()=>{let r=!1,n=null;const e=t=>(...e)=>{r||(r=!0,null!==n&&(clearTimeout(n),n=null),t.apply(null,e))},t=e(a),o=e(s);return{start:(...e)=>{r||null!==n||(n=setTimeout(()=>o.apply(null,e),1e3))},resolve:t,reject:o}})();i[t]=e.resolve,ds.ScriptLoader.loadScript(r).then(()=>e.start(o),()=>e.reject(n))}),a[t]=e)},add:(e,t)=>{void 0!==i[e]&&(i[e](t),delete i[e]),a[e]=Promise.resolve(t),r[e]=t},has:e=>e in r,get:e=>r[e],unload:e=>{delete a[e],delete r[e]}}})();let SA;try{const n="__storage_test__";(SA=window.localStorage).setItem(n,n),SA.removeItem(n)}catch(n){SA=(()=>{let r={},n=[];var e={getItem:e=>r[e]||null,setItem:(e,t)=>{n.push(e),r[e]=String(t)},key:e=>n[e],removeItem:t=>{n=n.filter(e=>e===t),delete r[t]},clear:()=>{n=[],r={}},length:0};return Object.defineProperty(e,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),e})()}var hk={geom:{Rect:kA},util:{Delay:ff,Tools:ae,VK:le,URI:q0,EventDispatcher:IR,Observable:UR,I18n:gs,LocalStorage:SA,ImageUploader:r=>{const e=EC(),n=SC(r,e);return{upload:(e,t=!0)=>n.upload(e,t?_C(r):void 0)}}},dom:{EventUtils:Qa,TreeWalker:Yn,TextSeeker:Ls,DOMUtils:se,ScriptLoader:ds,RangeUtils:Lg,Serializer:qy,StyleSheetLoader:ea,ControlSelection:ug,BookmarkManager:Qm,Selection:Hy,Event:Qa.Event},html:{Styles:Va,Entities:ba,Node:Mf,Schema:La,DomParser:oy,Writer:Jf,Serializer:ep},Env:F,AddOnManager:fs,Annotator:Zm,Formatter:FC,UndoManager:zC,EditorCommands:AR,WindowManager:gC,NotificationManager:cC,EditorObservable:qR,Shortcuts:nA,Editor:iA,FocusManager:gf,EditorManager:vA,DOM:se.DOM,ScriptLoader:ds.ScriptLoader,PluginManager:uC,ThemeManager:mC,ModelManager:nC,IconManager:rC,Resource:_A,FakeClipboard:bA,trim:ae.trim,isArray:ae.isArray,is:ae.is,toArray:ae.toArray,makeMap:ae.makeMap,each:ae.each,map:ae.map,grep:ae.grep,inArray:ae.inArray,extend:ae.extend,walk:ae.walk,resolve:ae.resolve,explode:ae.explode,_addCacheSuffix:ae._addCacheSuffix},t=ae.extend(vA,hk),NA=(fk=t,window.tinymce=fk,window.tinyMCE=fk,t);if("object"==typeof module)try{module.exports=NA}catch(NA){}}();