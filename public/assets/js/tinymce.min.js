!function(){"use strict";function o(e){var t;return null===e?"null":void 0===e?"undefined":"object"==(t=typeof e)&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}function a(e){return{eq:e}}function s(l){return a(function(e,t){var r,n=Object.keys(e),o=Object.keys(t);if(!m(p(f),function(e){return d(e,r)}).eq(n,o))return!1;for(var a=n.length,s=0;s<a;s++){var i=n[s];if(!l.eq(e[i],t[i]))return!1}return!0})}var d=function(e,t){return Array.prototype.slice.call(e).sort(t)},m=function(r,n){return a(function(e,t){return r.eq(n(e),n(t))})},f=a(function(e,t){return e===t}),p=function(o){return a(function(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(!o.eq(e[n],t[n]))return!1;return!0})},i=a(function(e,t){var r;return e===t||(r=o(e))===o(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?p(i).eq(e,t):"object"===r&&s(i).eq(e,t))});const l=Object.getPrototypeOf,h=(e,t,r)=>{return!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name};var e=r=>e=>{return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&h(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t)===r;var t},t=t=>e=>typeof e===t,r=t=>e=>t===e;const v=(e,t)=>F(e)&&h(e,t,(e,t)=>l(e)===t),z=e("string"),F=e("object"),re=e=>v(e,Object),j=e("array"),y=r(null),ne=t("boolean"),C=r(void 0),oe=e=>null==e,H=e=>!oe(e),$=t("function"),w=t("number"),x=(r,n)=>{if(j(r)){for(let e=0,t=r.length;e<t;++e)if(!n(r[e]))return!1;return!0}return!1},V=()=>{},_=(t,r)=>(...e)=>t(r.apply(null,e)),S=(t,r)=>e=>t(r(e)),q=e=>()=>e,N=e=>e,A=(e,t)=>e===t;function E(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}const M=t=>e=>!t(e),ae=e=>()=>{throw new Error(e)},se=e=>e(),ie=e=>{e()},u=q(!1),le=q(!0);class I{constructor(e,t){this.tag=e,this.value=t}static some(e){return new I(!0,e)}static none(){return I.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?I.some(e(this.value)):I.none()}bind(e){return this.tag?e(this.value):I.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:I.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return H(e)?I.some(e):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const de=Array.prototype.slice,ce=Array.prototype.indexOf,me=Array.prototype.push,ue=(e,t)=>ce.call(e,t),D=(e,t)=>-1<ue(e,t),W=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},T=(t,r)=>{var n=t.length,o=new Array(n);for(let e=0;e<n;e++){var a=t[e];o[e]=r(a,e)}return o},K=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},fe=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},ge=(r,n)=>{var o=[],a=[];for(let e=0,t=r.length;e<t;e++){var s=r[e];(n(s,e)?o:a).push(s)}return{pass:o,fail:a}},O=(r,n)=>{var o=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];n(a,e)&&o.push(a)}return o},pe=(e,r,n)=>(fe(e,(e,t)=>{n=r(n,e,t)}),n),he=(e,r,n)=>(K(e,(e,t)=>{n=r(n,e,t)}),n),ve=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var a=r[e];if(n(a,e))return I.some(a);if(o(a,e))break}return I.none()},be=(e,t)=>ve(e,t,u),ye=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return I.some(e);return I.none()},Ce=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!j(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);me.apply(n,r[e])}return n},we=(e,t)=>Ce(T(e,t)),Ee=(r,n)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==n(r[e],e))return!1;return!0},xe=e=>{e=de.call(e,0);return e.reverse(),e},ke=(e,t)=>O(e,e=>!D(t,e)),_e=(r,n)=>{var o={};for(let e=0,t=r.length;e<t;e++){var a=r[e];o[String(a)]=n(a,e)}return o},Se=(e,t)=>{e=de.call(e,0);return e.sort(t),e},Ne=(e,t)=>0<=t&&t<e.length?I.some(e[t]):I.none(),Re=e=>Ne(e,0),Ae=e=>Ne(e,e.length-1),De=$(Array.from)?Array.from:e=>de.call(e),Te=(t,r)=>{for(let e=0;e<t.length;e++){var n=r(t[e],e);if(n.isSome())return n}return I.none()},Oe=(r,n)=>{const o=[];var a=$(n)?t=>W(o,e=>n(e,t)):e=>D(o,e);for(let e=0,t=r.length;e<t;e++){var s=r[e];a(s)||o.push(s)}return o},Be=Object.keys,Pe=Object.hasOwnProperty,Y=(r,n)=>{var o=Be(r);for(let e=0,t=o.length;e<t;e++){var a=o[e];n(r[a],a)}},Le=(e,r)=>Me(e,(e,t)=>({k:t,v:r(e,t)})),Me=(e,r)=>{const n={};return Y(e,(e,t)=>{e=r(e,t);n[e.k]=e.v}),n},Ie=r=>(e,t)=>{r[t]=e},Fe=(e,r,n,o)=>{Y(e,(e,t)=>{(r(e,t)?n:o)(e,t)})},Ue=(e,t)=>{var r={};return Fe(e,t,Ie(r),V),r},ze=(e,r)=>{const n=[];return Y(e,(e,t)=>{n.push(r(e,t))}),n},He=e=>ze(e,N),g=(e,t)=>G(e,t)?I.from(e[t]):I.none(),G=(e,t)=>Pe.call(e,t),$e=(e,t)=>G(e,t)&&void 0!==e[t]&&null!==e[t],Ve=e=>{const t={};return K(e,e=>{t[e]={}}),Be(t)},qe=e=>void 0!==e.length,We=Array.isArray;const Ke=(r,n,o)=>{if(!r)return!1;if(o=o||r,qe(r)){for(let e=0,t=r.length;e<t;e++)if(!1===n.call(o,r[e],e,r))return!1}else for(const e in r)if(G(r,e)&&!1===n.call(o,r[e],e,r))return!1;return!0},Ye=(r,n)=>{const o=[];return Ke(r,(e,t)=>{o.push(n(e,t,r))}),o},Ge=(r,n)=>{const o=[];return Ke(r,(e,t)=>{n&&!n(e,t,r)||o.push(e)}),o};const Xe=(t,r,e,n)=>{let o=C(e)?t[0]:e;for(let e=0;e<t.length;e++)o=r.call(n,o,t[e],e);return o},Ze=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++)if(n.call(o,r[e],e,r))return e;return-1},Qe=e=>e[e.length-1],Je=t=>{let r=!1,n;return(...e)=>(r||(r=!0,n=t.apply(null,e)),n)},et=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e];if(n.test(r))return n}};const tt=()=>rt(0,0),rt=(e,t)=>({major:e,minor:t}),nt={nu:rt,detect:(e,t)=>{t=String(t).toLowerCase();if(0===e.length)return tt();{var r=t;const n=et(e,r);return n?(e=e=>Number(r.replace(n,"$"+e)),rt(e(1),e(2))):{major:0,minor:0};return}},unknown:tt},ot=(e,t)=>{const r=String(t).toLowerCase();return be(e,e=>e.search(r))},at=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,st=(e,t)=>{return lt(e,t)?(t=t.length,e.substring(t)):e},it=(e,t,r=0,n)=>{e=e.indexOf(t,r);return-1!==e&&(!!C(n)||e+t.length<=n)},lt=(e,t)=>at(e,t,0),dt=(e,t)=>at(e,t,e.length-t.length);e=t=>e=>e.replace(t,"");const ct=e(/^\s+|\s+$/g),mt=e(/^\s+/g),ut=e(/\s+$/g),ft=e=>0<e.length,gt=e=>!ft(e),pt=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?I.none():I.some(e)};r=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,t=t=>e=>it(e,t),e=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>it(e,"edge/")&&it(e,"chrome")&&it(e,"safari")&&it(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,r],search:e=>it(e,"chrome")&&!it(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>it(e,"msie")||it(e,"trident")},{name:"Opera",versionRegexes:[r,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:t("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:t("firefox")},{name:"Safari",versionRegexes:[r,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(it(e,"safari")||it(e,"mobile/"))&&it(e,"applewebkit")}],r=[{name:"Windows",search:t("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>it(e,"iphone")||it(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:t("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:t("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:t("linux"),versionRegexes:[]},{name:"Solaris",search:t("sunos"),versionRegexes:[]},{name:"FreeBSD",search:t("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:t("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}];const ht={browsers:q(e),oses:q(r)},vt="Edge",bt="Chromium",yt="IE",Ct="Opera",wt="Firefox",Et="Safari";const xt=e=>{const t=e.current;var e=e.version,r=e=>()=>t===e;return{current:t,version:e,isEdge:r(vt),isChromium:r(bt),isIE:r(yt),isOpera:r(Ct),isFirefox:r(wt),isSafari:r(Et)}},kt={unknown:()=>xt({current:void 0,version:nt.unknown()}),nu:xt,edge:q(vt),chromium:q(bt),ie:q(yt),opera:q(Ct),firefox:q(wt),safari:q(Et)},_t="Windows",St="iOS",Nt="Android",Rt="Linux",At="macOS",Dt="Solaris",Tt="FreeBSD",Ot="ChromeOS";const Bt=e=>{const t=e.current;var e=e.version,r=e=>()=>t===e;return{current:t,version:e,isWindows:r(_t),isiOS:r(St),isAndroid:r(Nt),isMacOS:r(At),isLinux:r(Rt),isSolaris:r(Dt),isFreeBSD:r(Tt),isChromeOS:r(Ot)}},Pt={unknown:()=>Bt({current:void 0,version:nt.unknown()}),nu:Bt,windows:q(_t),ios:q(St),android:q(Nt),linux:q(Rt),macos:q(At),solaris:q(Dt),freebsd:q(Tt),chromeos:q(Ot)};const Lt={detect:(t,e,r)=>{const o=ht.browsers();var n,a,s,i,l,d,c,m=ht.oses(),e=e.bind(e=>{return n=o,e=e,Te(e.brands,t=>{const r=t.brand.toLowerCase();return be(n,e=>{return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(e=>({current:e.name,version:nt.nu(parseInt(t.version,10),0)}))});var n}).orThunk(()=>{return e=o,r=t,ot(e,r).map(e=>{var t=nt.detect(e.versionRegexes,r);return{current:e.name,version:t}});var e,r}).fold(kt.unknown,kt.nu),m=(m=m,n=t,ot(m,n).map(e=>{var t=nt.detect(e.versionRegexes,n);return{current:e.name,version:t}}).fold(Pt.unknown,Pt.nu)),u=(s=e,i=t,r=r,u=(a=m).isiOS()&&!0===/ipad/i.test(i),l=a.isiOS()&&!u,d=a.isiOS()||a.isAndroid(),c=d||r("(pointer:coarse)"),r=u||!l&&d&&r("(min-device-width:768px)"),d=l||d&&!r,s=s.isSafari()&&a.isiOS()&&!1===/safari/i.test(i),i=!d&&!r&&!s,{isiPad:q(u),isiPhone:q(l),isTablet:q(r),isPhone:q(d),isTouch:q(c),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:q(s),isDesktop:q(i)});return{browser:e,os:m,deviceType:u}}},Mt=e=>window.matchMedia(e).matches;let It=Je(()=>Lt.detect(window.navigator.userAgent,I.from(window.navigator.userAgentData),Mt));var t=window.navigator.userAgent,e=It(),r=e.browser,n=e.os,e=e.deviceType,t=-1!==t.indexOf("Windows Phone");const U={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:r.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!r.isIE(),windowsPhone:t,browser:{current:r.current,version:r.version,isChromium:r.isChromium,isEdge:r.isEdge,isFirefox:r.isFirefox,isIE:r.isIE,isOpera:r.isOpera,isSafari:r.isSafari},os:{current:n.current,version:n.version,isAndroid:n.isAndroid,isChromeOS:n.isChromeOS,isFreeBSD:n.isFreeBSD,isiOS:n.isiOS,isLinux:n.isLinux,isMacOS:n.isMacOS,isSolaris:n.isSolaris,isWindows:n.isWindows},deviceType:{isDesktop:e.isDesktop,isiPad:e.isiPad,isiPhone:e.isiPhone,isPhone:e.isPhone,isTablet:e.isTablet,isTouch:e.isTouch,isWebView:e.isWebView}},Ft=/^\s*|\s*$/g,Ut=e=>oe(e)?"":(""+e).replace(Ft,"");t=G;function zt(e,r,n,o){o=o||this,e&&(n&&(e=e[n]),Ke(e,(e,t)=>!1!==r.call(o,e,t,n)&&(zt(e,r,n,o),!0)))}const B={trim:Ut,isArray:We,is:(e,t)=>t?!("array"!==t||!We(e))||typeof e===t:void 0!==e,toArray:r=>{if(We(r))return r;var n=[];for(let e=0,t=r.length;e<t;e++)n[e]=r[e];return n},makeMap:(e,t,r={})=>{var n=z(e)?e.split(t||","):e||[];let o=n.length;for(;o--;)r[n[o]]={};return r},each:Ke,map:Ye,grep:Ge,inArray:(r,n)=>{if(r)for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},hasOwn:t,extend:(t,...r)=>{for(let e=0;e<r.length;e++){var n,o=r[e];for(const a in o)G(o,a)&&void 0!==(n=o[a])&&(t[a]=n)}return t},walk:zt,resolve:(e,r=window)=>{var n=e.split(".");for(let e=0,t=n.length;e<t&&(r=r[n[e]]);e++);return r},explode:(e,t)=>j(e)?e:""===e?[]:Ye(e.split(t||","),Ut),_addCacheSuffix:e=>{var t=U.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},jt=(e,t,r=A)=>e.exists(e=>r(e,t)),Ht=(e,t,r=A)=>$t(e,t,r).getOr(e.isNone()&&t.isNone()),$t=(e,t,r)=>e.isSome()&&t.isSome()?I.some(r(e.getOrDie(),t.getOrDie())):I.none(),Vt=(e,t)=>e?I.some(t):I.none(),qt="undefined"!=typeof window?window:Function("return this;")(),Wt=(e,r)=>{e=e.split(".");{var n=e;let t=null!=(e=r)?e:qt;for(let e=0;e<n.length&&void 0!==t&&null!==t;++e)t=t[n[e]];return t}},Kt=(e,t)=>{r=e,t=t;var r=Wt(r,t);if(null==r)throw new Error(e+" not available on this browser");return r},Yt=Object.getPrototypeOf,Gt=e=>{var t=Wt("ownerDocument.defaultView",e);return F(e)&&(t=t,Kt("HTMLElement",t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Yt(e).constructor.name))},Xt=8,Zt=1,X=e=>{return e.dom.nodeName.toLowerCase()},Qt=e=>e.dom.nodeType;r=t=>e=>Qt(e)===t;const Jt=e=>er(e)&&Gt(e.dom),er=r(Zt),tr=r(3),rr=r(9),nr=r(11),or=t=>e=>er(e)&&X(e)===t,ar=(e,t,r)=>{if(!(z(r)||ne(r)||w(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},sr=(e,t,r)=>{ar(e.dom,t,r)},ir=(e,t)=>{const r=e.dom;Y(t,(e,t)=>{ar(r,t,e)})},lr=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},dr=(e,t)=>I.from(lr(e,t)),cr=(e,t)=>{e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},mr=(e,t)=>{e.dom.removeAttribute(t)},ur=e=>he(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),fr=(e,t)=>{e=lr(e,t);return void 0===e||""===e?[]:e.split(" ")},gr=e=>void 0!==e.dom.classList,pr=e=>fr(e,"class"),hr=(e,t)=>{var r="class";return t=fr(e,r).concat([t]),sr(e,r,t.join(" ")),!0},vr=(e,t)=>{return e=e,r="class",n=t,0<(t=O(fr(e,r),e=>e!==n)).length?sr(e,r,t.join(" ")):mr(e,r),!1;var r,n},br=(e,t)=>(D(pr(e),t)?vr:hr)(e,t),yr=(e,t)=>{gr(e)?e.dom.classList.add(t):hr(e,t)},Cr=e=>{0===(gr(e)?e.dom.classList:pr(e)).length&&mr(e,"class")},wr=(e,t)=>{gr(e)?e.dom.classList.remove(t):vr(e,t),Cr(e)},Er=(e,t)=>gr(e)&&e.dom.classList.contains(t);const xr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}};const Z={fromHtml:(e,t)=>{var r,t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw r="HTML does not have a single root node",console.error(r,e),new Error(r);return xr(t.childNodes[0])},fromTag:(e,t)=>{t=(t||document).createElement(e);return xr(t)},fromText:(e,t)=>{t=(t||document).createTextNode(e);return xr(t)},fromDom:xr,fromPoint:(e,t,r)=>I.from(e.dom.elementFromPoint(t,r)).map(xr)},kr=(e,t)=>{const r=[];var n=e=>(r.push(e),t(e));let o=t(e);for(;(o=o.bind(n)).isSome(););return r},_r=(e,t)=>{e=e.dom;if(e.nodeType!==Zt)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Sr=e=>e.nodeType!==Zt&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Nr=(e,t)=>{t=void 0===t?document:t.dom;return Sr(t)?[]:T(t.querySelectorAll(e),Z.fromDom)},k=(e,t)=>e.dom===t.dom,Rr=(e,t)=>{e=e.dom,t=t.dom;return e!==t&&e.contains(t)},Ar=e=>Z.fromDom(e.dom.ownerDocument),Dr=e=>rr(e)?e:Ar(e),Tr=e=>Z.fromDom(Dr(e).dom.defaultView),Or=e=>I.from(e.dom.parentNode).map(Z.fromDom),Br=e=>I.from(e.dom.parentElement).map(Z.fromDom),Pr=(e,t)=>{var r=$(t)?t:u;let n=e.dom;for(var o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,s=Z.fromDom(a);if(o.push(s),!0===r(s))break;n=a}return o},Lr=e=>I.from(e.dom.previousSibling).map(Z.fromDom),Mr=e=>I.from(e.dom.nextSibling).map(Z.fromDom),Ir=e=>xe(kr(e,Lr)),Fr=e=>kr(e,Mr),Ur=e=>T(e.dom.childNodes,Z.fromDom),zr=(e,t)=>{e=e.dom.childNodes;return I.from(e[t]).map(Z.fromDom)},jr=e=>zr(e,0),Hr=e=>zr(e,e.dom.childNodes.length-1),$r=e=>e.dom.childNodes.length,Vr=e=>nr(e)&&H(e.dom.host),qr=e=>Z.fromDom(e.dom.getRootNode()),Wr=e=>{if(Vr(e))return e;e=Dr(e);if(null==(e=e.dom.head))throw new Error("Head is not available yet");return Z.fromDom(e)},Kr=e=>Z.fromDom(e.dom.host),Yr=e=>{if(H(e.target)){var t=Z.fromDom(e.target);if(er(t)&&(t=t,H(t.dom.shadowRoot))&&(e.composed&&e.composedPath)){t=e.composedPath();if(t)return Re(t)}}return I.from(e.target)},Gr=e=>{const t=tr(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{e=qr(e);return Vr(e)?I.some(e):I.none()})(Z.fromDom(t)).fold(()=>r.body.contains(t),S(Gr,Kr))};var Xr=(e,t,r,n,o)=>e(r,n)?I.some(r):$(o)&&o(r)?I.none():t(r,n,o);const Zr=(e,t,r)=>{let n=e.dom;for(var o=$(r)?r:u;n.parentNode;){n=n.parentNode;var a=Z.fromDom(n);if(t(a))return I.some(a);if(o(a))break}return I.none()},Qr=(e,t,r)=>{return Xr((e,t)=>t(e),Zr,e,t,r)},Jr=(t,r)=>{var n,e,o=t.dom;return o.parentNode?(o=Z.fromDom(o.parentNode),n=e=>!k(t,e)&&r(e),e=e=>n(Z.fromDom(e)),be(o.dom.childNodes,e).map(Z.fromDom)):I.none()},en=(e,n)=>{const o=t=>{for(let e=0;e<t.childNodes.length;e++){var r=Z.fromDom(t.childNodes[e]);if(n(r))return I.some(r);r=o(t.childNodes[e]);if(r.isSome())return r}return I.none()};return o(e.dom)},tn=(e,t,r)=>Zr(e,e=>_r(e,t),r),rn=(e,t)=>{return e=void 0===e?document:e.dom,Sr(e)?I.none():I.from(e.querySelector(t)).map(Z.fromDom)},nn=(e,t,r)=>{return Xr((e,t)=>_r(e,t),tn,e,t,r)},on=e=>nn(e,"[contenteditable]"),an=(e,t=!1)=>Gr(e)?e.dom.isContentEditable:on(e).fold(q(t),e=>"true"===sn(e)),sn=e=>e.dom.contentEditable,ln=e=>void 0!==e.style&&$(e.style.getPropertyValue),dn=(e,t,r)=>{if(!z(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);ln(e)&&e.style.setProperty(t,r)},cn=(e,t)=>{ln(e)&&e.style.removeProperty(t)},mn=(e,t,r)=>{e=e.dom;dn(e,t,r)},un=(e,t)=>{const r=e.dom;Y(t,(e,t)=>{dn(r,t,e)})},fn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Gr(e)?n:gn(r,t)},gn=(e,t)=>ln(e)?e.style.getPropertyValue(t):"",pn=(e,t)=>{e=e.dom,e=gn(e,t);return I.from(e).filter(e=>0<e.length)},hn=e=>{var t={},r=e.dom;if(ln(r))for(let e=0;e<r.style.length;e++){var n=r.style.item(e);t[n]=r.style[n]}return t},vn=(e,t)=>{var r=e.dom;cn(r,t),jt(dr(e,"style").map(ct),"")&&mr(e,"style")},bn=e=>e.dom.offsetWidth,yn=(t,r)=>{Or(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},Cn=(e,t)=>{Mr(e).fold(()=>{Or(e).each(e=>{En(e,t)})},e=>{yn(e,t)})},wn=(t,r)=>{jr(t).fold(()=>{En(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},En=(e,t)=>{e.dom.appendChild(t.dom)},xn=(e,t)=>{yn(e,t),En(t,e)},kn=(r,n)=>{K(n,(e,t)=>{t=0===t?r:n[t-1];Cn(t,e)})},_n=(t,e)=>{K(e,e=>{En(t,e)})},Sn=e=>{e.dom.textContent="",K(Ur(e),e=>{Q(e)})},Q=e=>{e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Nn=e=>{var t=Ur(e);0<t.length&&kn(e,t),Q(e)},Rn=(e,t)=>{t=(t||document).createElement("div");return t.innerHTML=e,Ur(Z.fromDom(t))},An=e=>T(e,Z.fromDom),Dn=e=>e.dom.innerHTML,Tn=(e,t)=>{var r=Ar(e).dom,n=Z.fromDom(r.createDocumentFragment()),t=Rn(t,r);_n(n,t),Sn(e),En(e,n)},On=(a,s)=>e=>{var t,r,n,o;a(e)&&s((t=e,e=Z.fromDom(Yr(t).getOr(t.target)),r=()=>t.stopPropagation(),n=()=>t.preventDefault(),o=_(n,r),{target:e,x:t.clientX,y:t.clientY,stop:r,prevent:n,kill:o,raw:t}))},Bn=(e,t,r,n)=>{var o=!1;return r=On(r,n),e.dom.addEventListener(t,r,o),{unbind:E(Pn,e,t,r,o)}},Pn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Ln=(r,n)=>{return{left:r,top:n,translate:(e,t)=>Ln(r+e,n+t)}},Mn=Ln,In=e=>{e=e.getBoundingClientRect();return Mn(e.left,e.top)},Fn=(e,t)=>void 0!==e?e:void 0!==t?t:0,Un=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Mn(r.offsetLeft,r.offsetTop):Gr(e)?In(t):Mn(0,0)},zn=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return Mn(t,e)},jn=(e,t,r)=>{r=(void 0!==r?r.dom:document).defaultView;r&&r.scrollTo(e,t)},Hn=(e,t)=>{It().browser.isSafari()&&$(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},$n=e=>{e=void 0===e?window:e;return It().browser.isFirefox()?I.none():I.from(e.visualViewport)},Vn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),qn=e=>{const r=void 0===e?window:e;e=r.document;const n=zn(Z.fromDom(e));return $n(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return Vn(n.left,n.top,t,e)},e=>Vn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},Wn=(e,t)=>{let r=[];return K(Ur(e),e=>{r=(r=t(e)?r.concat([e]):r).concat(Wn(e,t))}),r},Kn=(e,t)=>Nr(t,e),Yn=(e,t,r)=>Zr(e,t,r).isSome(),Gn=(e,t)=>en(e,t).isSome();class Xn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(r,e,n,t){if(r){if(!t&&r[e])return r[e];if(r!==this.rootNode){let t=r[n];if(t)return t;for(let e=r.parentNode;e&&e!==this.rootNode;e=e.parentNode)if(t=e[n])return t}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t)for(let e=r.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return r}t=e.parentNode;if(t&&t!==this.rootNode)return t}}}const Zn="\ufeff",Qn=" ",Jn=e=>e===Zn;const eo=/^[ \t\r\n]*$/,to=e=>eo.test(e),ro=e=>"\n"===e||"\r"===e,no=(e,t=4,o=!0,a=!0)=>{r=" ";var r,t=(t=t)<=0?"":new Array(t+1).join(r);const s=e.replace(/\t/g,t);return he(s,(e,t)=>{return-1!==" \f\t\v".indexOf(t)||t===Qn?e.pcIsSpace||""===e.str&&o||e.str.length===s.length-1&&a||(r=s,(n=e.str.length+1)<r.length&&0<=n&&ro(r[n]))?{pcIsSpace:!1,str:e.str+Qn}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:ro(t),str:e.str+t};var r,n},{pcIsSpace:!1,str:""}).str};n=t=>e=>!!e&&e.nodeType===t;const oo=e=>!!e&&!Object.getPrototypeOf(e),J=n(1),ao=e=>J(e)&&Jt(Z.fromDom(e));e=e=>{const t=e.toLowerCase();return e=>H(e)&&e.nodeName.toLowerCase()===t};const so=e=>{const t=e.map(e=>e.toLowerCase());return e=>{return!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),D(t,e))}};t=(o,e)=>{const a=e.toLowerCase().split(" ");return t=>{if(J(t)){var r=t.ownerDocument.defaultView;if(r)for(let e=0;e<a.length;e++){var n=r.getComputedStyle(t,null);if((n?n.getPropertyValue(o):null)===a[e])return!0}}return!1}};const io=e=>J(e)&&e.hasAttribute("data-mce-bogus"),lo=e=>J(e)&&"TABLE"===e.tagName;var co,r=t=>e=>{if(ao(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1};const mo=so(["textarea","input"]),P=n(3),uo=n(4),fo=n(7),go=n(8),po=n(9),ho=n(11),R=e("br"),vo=e("img"),bo=r("true"),b=r("false"),yo=so(["td","th"]),Co=so(["td","th","caption"]),wo=so(["video","audio","object","embed"]),Eo=e("li"),xo=e("details"),ko=e("summary"),_o={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},So=(co="data-mce-bookmark",e=>J(e)&&e.hasAttribute(co)),No=(e,t,r)=>to(e.data)&&!((e,t,r)=>{t=Z.fromDom(t),e=Z.fromDom(e);const n=r.getWhitespaceElements();return Yn(e,e=>G(n,X(e)),E(k,t))})(e,t,r),Ro=(e,t,r,n)=>P(e)&&!No(e,t,r)&&(!n.includeZwsp||!(e=>{for(const t of e)if(!Jn(t))return!1;return!0})(e.data)),Ao=(e,t,r,n)=>{return $(n.isContent)&&n.isContent(t)||(o=t,a=e,J(o)&&G(a.getNonEmptyElements(),o.nodeName))||So(t)||(a=t,J(a)&&"A"===a.nodeName&&!a.hasAttribute("href")&&(a.hasAttribute("name")||a.hasAttribute("id")))||Ro(t,r,e,n)||b(t)||bo(t)&&(o=t,Br(Z.fromDom(o)).exists(e=>!an(e)));var o,a},Do=(e,t,r)=>{var n={..._o,...r};if(n.checkRootAsContent&&Ao(e,t,t,n))return!1;let o=t.firstChild,a=0;if(!o)return!0;var s=new Xn(o,t);do{if(n.skipBogus&&J(o)){var i=o.getAttribute("data-mce-bogus");if(i){o=s.next("all"===i);continue}}if(go(o))o=s.next(!0);else{if(R(o))a++;else if(Ao(e,o,t,n))return!1;o=s.next()}}while(o);return a<=1},To=(e,t,r)=>Do(e,t.dom,{checkRootAsContent:!0,...r}),Oo=(e,t,r)=>Ao(e,t,t,{includeZwsp:_o.includeZwsp,...r}),Bo=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Po=e=>{const t=Bo(I.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(I.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(I.some(e))}}},Lo=()=>{const t=Po(V);return{...t,on:e=>t.get().each(e)}},Mo=e=>{e=e.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},Io=e=>"html"!==Mo(e),Fo=e=>Io(e.nodeName),Uo=e=>Mo(e.nodeName),zo=["svg","math"],jo=()=>{const e=Lo(),r=()=>e.get().map(Uo).getOr("html");return{track:t=>(Fo(t)?e.set(t):e.get().exists(e=>!e.contains(t))&&e.clear(),r()),current:r,reset:()=>{e.clear()}}},Ho="data-mce-block",$o=e=>{return T((e=e,O(Be(e),e=>!/[A-Z]/.test(e))),e=>{const t=CSS.escape(e);return t+":"+T(zo,e=>`not(${e} ${t})`).join(":")}).join(",")},Vo=(e,t)=>H(t.querySelector(e))?(t.setAttribute(Ho,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ho),!1),qo=(e,t)=>{var r=$o(e.getTransparentElements());const n=$o(e.getBlockElements());return O(t.querySelectorAll(r),e=>Vo(n,e))},Wo=(t,r,e)=>{var n,o=e?"lastChild":"firstChild";for(let e=r[o];e;e=e[o])if(Do(t,e,{checkRootAsContent:!0}))return void(null!=(n=e.parentNode)&&n.removeChild(e))},Ko=(i,e,t)=>{const r=i.getBlockElements(),n=Z.fromDom(e),o=e=>X(e)in r,a=e=>k(e,n);K(An(t),n=>{Zr(n,o,a).each(t=>{r=n,e=e=>o(e)&&!i.isValidChild(X(t),X(e));var e,r=O(Ur(r),e);0<r.length&&(e=Br(t),K(r,s=>{Zr(s,o,a).each(e=>{var t,r,n,o,a;t=i,e=e.dom,r=s.dom,o=document.createRange(),(a=e.parentNode)&&(o.setStartBefore(e),o.setEndBefore(r),n=o.extractContents(),Wo(t,n,!0),o.setStartAfter(r),o.setEndAfter(e),o=o.extractContents(),Wo(t,o,!1),Do(t,n,{checkRootAsContent:!0})||a.insertBefore(n,e),Do(t,r,{checkRootAsContent:!0})||a.insertBefore(r,e),Do(t,o,{checkRootAsContent:!0})||a.insertBefore(o,e),a.removeChild(e))})}),e.each(e=>qo(i,e.dom)))})})},Yo=(n,e,t)=>{K([...t,...Jo(n,e)?[e]:[]],e=>K(Kn(Z.fromDom(e),e.nodeName.toLowerCase()),e=>{var t,r;t=n,r=e.dom,Qo(t,r)&&!Xo(r)&&Nn(e)}))},Go=(e,t)=>{var r=qo(e,t);Ko(e,t,r),Yo(e,t,r)},Xo=e=>e.hasAttribute(Ho),Zo=(e,t)=>G(e.getTransparentElements(),t),Qo=(e,t)=>J(t)&&Zo(e,t.nodeName),Jo=(e,t)=>Qo(e,t)&&Xo(t),ea=(e,t)=>1===t.type&&Zo(e,t.name)&&z(t.attr(Ho)),ta=It().browser,ra=e=>be(e,er),na=e=>ta.isFirefox()&&"table"===X(e)?ra(Ur(e)).filter(e=>"caption"===X(e)).bind(n=>ra(Fr(n)).map(e=>{var e=e.dom.offsetTop,t=n.dom.offsetTop,r=n.dom.offsetHeight;return e<=t?-r:0})).getOr(0):0,oa=(e,t)=>e.children&&D(e.children,t),aa=(e,d={})=>{let t=0;const c={},r=Z.fromDom(e),m=Dr(r);const u=e=>{En(Wr(r),e)},n=e=>{var t=Wr(r);rn(t,"#"+e).each(Q)},f=e=>g(c,e).getOrThunk(()=>({id:"mce-u"+t++,passed:[],failed:[],count:0})),o=l=>new Promise((e,t)=>{let r;var n=B._addCacheSuffix(l);const o=f(n),a=((c[n]=o).count++,(e,t)=>{K(e,ie),o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)});var s=()=>a(o.passed,2),i=()=>a(o.failed,3);e&&o.passed.push(e),t&&o.failed.push(t),1!==o.status&&(2===o.status?s():3===o.status?i():(o.status=1,e=Z.fromTag("link",m.dom),ir(e,{rel:"stylesheet",type:"text/css",id:o.id}),d.contentCssCors&&sr(e,"crossOrigin","anonymous"),d.referrerPolicy&&sr(e,"referrerpolicy",d.referrerPolicy),(r=e.dom).onload=s,r.onerror=i,u(e),sr(e,"href",n)))});const a=e=>{const t=B._addCacheSuffix(e);g(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})};return{load:o,loadRawCss:(e,t)=>{var r=f(e),e=((c[e]=r).count++,Z.fromTag("style",m.dom));ir(e,{rel:"stylesheet",type:"text/css",id:r.id}),e.dom.innerHTML=t,u(e)},loadAll:e=>{return Promise.allSettled(T(e,e=>o(e).then(q(e)))).then(e=>{e=ge(e,e=>"fulfilled"===e.status);return 0<e.fail.length?Promise.reject(T(e.fail,e=>e.reason)):T(e.pass,e=>e.value)})},unload:a,unloadRawCss:t=>{g(c,t).each(e=>{0==--e.count&&(delete c[t],n(e.id))})},unloadAll:e=>{K(e,e=>{a(e)})},_setReferrerPolicy:e=>{d.referrerPolicy=e},_setContentCssCors:e=>{d.contentCssCors=e}}};const sa=(()=>{const n=new WeakMap;return{forElement:(e,t)=>{const r=qr(e).dom;return I.from(n.get(r)).getOrThunk(()=>{var e=aa(r,t);return n.set(r,e),e})}}})(),ia=(e,t)=>H(e)&&(Oo(t,e)||t.isInline(e.nodeName.toLowerCase())),la=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),da=(e,t,r)=>{return P(e)&&0<e.data.length&&(e=e,t=t,r=r,n=new Xn(e,t).prev(!1),e=new Xn(e,t).next(!1),t=C(n)||ia(n,r),n=C(e)||ia(e,r),t)&&n;var n},ca=e=>!!J(e)&&0<e.childNodes.length,ma=e=>ho(e)||po(e),ua=(t,e,r,n)=>{var o,a=n||e;if(!J(e)||!la(e)){var s=e.childNodes;for(let e=s.length-1;0<=e;e--)ua(t,s[e],r,a);J(e)&&1===(n=e.childNodes).length&&la(n[0])&&null!=(o=e.parentNode)&&o.insertBefore(n[0],e),ma(e)||Oo(r,e)||ca(e)||da(e,a,r)||t.remove(e)}return e},fa=B.makeMap,ga=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ha=/[<>&\"\']/g,va=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ba={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ya={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ca={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},wa=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(let e=0;e<n.length;e+=2){var o,a=String.fromCharCode(parseInt(n[e],t));ya[a]||(o="&"+n[e+1]+";",r[a]=o,r[o]=a)}return r}},Ea=wa("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),xa=(e,t)=>e.replace(t?ga:pa,e=>ya[e]||e);const ka=(e,t)=>e.replace(t?ga:pa,e=>1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ya[e]||"&#"+e.charCodeAt(0)+";"),_a=(e,t,r)=>{const n=r||Ea;return e.replace(t?ga:pa,e=>ya[e]||n[e]||e)};const Sa={encodeRaw:xa,encodeAllRaw:e=>(""+e).replace(ha,e=>ya[e]||e),encodeNumeric:ka,encodeNamed:_a,getEncodeFunc:(e,t)=>{const r=wa(t)||Ea;e=fa(e.replace(/\+/g,","));return e.named&&e.numeric?(e,t)=>e.replace(t?ga:pa,e=>void 0!==ya[e]?ya[e]:void 0!==r[e]?r[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):e.named?t?(e,t)=>_a(e,t,r):_a:e.numeric?ka:xa},decode:e=>e.replace(va,(e,t)=>{return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ba[t]||String.fromCharCode(t):Ca[e]||Ea[e]||(t=e,(e=Z.fromTag("div").dom).innerHTML=t,e.textContent)||e.innerText||t})},Na=(e,t)=>(e=B.trim(e))?e.split(t||" "):[],Ra=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Aa=e=>{const r=e=>{return j(e)?T(e,r):(t=e,F(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(e.source,e.flags):F(e)?Le(e,r):e);var t};return r(e)},Da=e=>{const t=/^(~)?(.+)$/;return we(Na(e,","),e=>{e=t.exec(e);return e?[{cloneName:"~"===e[1]?"span":"div",name:e[2]}]:[]})},Ta=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),Oa=e=>{let t,r;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(r=[r,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));e=[t,r].join(" ");return{blockContent:t,phrasingContent:r,flowContent:e}},Ba=e=>{var{blockContent:e,phrasingContent:t,flowContent:r}=Oa(e),n=e=>Object.freeze(e.split(" "));return Object.freeze({blockContent:n(e),phrasingContent:n(t),flowContent:n(r)})},Pa={html4:Je(()=>Ba("html4")),html5:Je(()=>Ba("html5")),"html5-strict":Je(()=>Ba("html5-strict"))},La=(e,t)=>{var{blockContent:e,phrasingContent:r,flowContent:n}=Pa[e]();return"blocks"===t?I.some(e):"phrasing"===t?I.some(r):"flow"===t?I.some(n):I.none()},Ma=e=>{const i=Ta(e),{phrasingContent:t,flowContent:r}=Oa(e),s={},l=(e,t,r)=>{s[e]={attributes:_e(t,q({})),attributesOrder:t,children:_e(r,q({}))}},n=(e,t="",r="")=>{var n=Na(r),o=Na(e);let a=o.length;for(var s=[...i,...Na(t)];a--;)l(o[a],s.slice(),n)};var o=(e,t)=>{var r=Na(e),n=Na(t);let o=r.length;for(;o--;){var a=s[r[o]];for(let e=0,t=n.length;e<t;e++)a.attributes[n[e]]={},a.attributesOrder.push(n[e])}};return"html5-strict"!==e&&(K(Na("acronym applet basefont big font strike tt"),e=>{n(e,"",t)}),K(Na("center dir isindex noframes"),e=>{n(e,"",r)})),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),n("dd div","",r),n("address dt caption","","html4"===e?t:r),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),n("blockquote","cite",r),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",r),n("dl","","dt dd"),n("a","href target rel media hreflang type","html4"===e?t:r),n("q","cite",t),n("ins del","cite datetime",r),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",r),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),n("param","name value"),n("map","name",[r,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",r),n("th","colspan rowspan headers scope abbr",r),n("form","accept-charset action autocomplete enctype method name novalidate target",r),n("fieldset","disabled form name",[r,"legend"].join(" ")),n("label","form for",t),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:t),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[r,"li"].join(" ")),n("noscript","",r),"html4"!==e&&(n("wbr"),n("ruby","",[t,"rt rp"].join(" ")),n("figcaption","",r),n("mark rt rp bdi","",t),n("summary","",[t,"h1 h2 h3 h4 h5 h6"].join(" ")),n("canvas","width height",r),n("data","value",t),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[t,"option"].join(" ")),n("article section nav aside main header footer","",r),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[r,"figcaption"].join(" ")),n("time","datetime",t),n("dialog","open",r),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",t),n("progress","value max",t),n("meter","value min max low high optimum",t),n("details","open",[r,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name"),l("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(o("script","language xml:space"),o("style","xml:space"),o("object","declare classid code codebase codetype archive standby align border hspace vspace"),o("embed","align name hspace vspace"),o("param","valuetype type"),o("a","charset name rev shape coords"),o("br","clear"),o("applet","codebase archive code object alt name width height align hspace vspace"),o("img","name longdesc align border hspace vspace"),o("iframe","longdesc frameborder marginwidth marginheight scrolling align"),o("font basefont","size color face"),o("input","usemap align"),o("select"),o("textarea"),o("h1 h2 h3 h4 h5 h6 div p legend caption","align"),o("ul","type compact"),o("li","type"),o("ol dl menu dir","compact"),o("pre","width xml:space"),o("hr","align noshade size width"),o("isindex","prompt"),o("table","summary width frame rules cellspacing cellpadding align bgcolor"),o("col","width align char charoff valign"),o("colgroup","width align char charoff valign"),o("thead","align char charoff valign"),o("tr","align char charoff valign bgcolor"),o("th","axis align char charoff valign nowrap bgcolor width height"),o("form","accept"),o("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),o("tfoot","align char charoff valign"),o("tbody","align char charoff valign"),o("area","nohref"),o("body","background bgcolor text link vlink alink")),"html4"!==e&&(o("input button select textarea","autofocus"),o("input textarea","placeholder"),o("a","download"),o("link script img","crossorigin"),o("img","loading"),o("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==e&&K([s.video,s.audio],e=>{delete e.children.audio,delete e.children.video}),K(Na("a form meter progress dfn"),e=>{s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,s},Ia=e=>{return I.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(e=>({preset:"@"===e[1],name:e[2]}))},Fa=e=>{const r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return we(Na(e,","),e=>{var t,e=r.exec(e);return e?[{operation:(t=e[1])?"-"===t?"remove":"add":"replace",name:e[2],validChildren:we(Na(e[3],"|"),e=>Ia(e).toArray())}]:[]})},Ua=(m,e)=>{const u=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return we(Na(e,","),e=>{e=u.exec(e);if(e){var t=e[1],r=e[2],n=e[3],o=e[4],e=e[5];const s={attributes:{},attributesOrder:[]};if(m.each(e=>{return e=e,r=s,Y(e.attributes,(e,t)=>{r.attributes[t]=e}),void r.attributesOrder.push(...e.attributesOrder);var r}),"#"===t?s.paddEmpty=!0:"-"===t&&(s.removeEmpty=!0),"!"===o&&(s.removeEmptyAttrs=!0),e){t=e;var a=s;const i=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,l=/[*?+]/,{attributes:d,attributesOrder:c}=a;K(Na(t,"|"),e=>{var t,r,n,o,e=i.exec(e);e&&(t={},o=e[1],r=e[2].replace(/[\\:]:/g,":"),n=e[3],e=e[4],"!"===o&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(r),t.required=!0),"-"===o?(delete d[r],c.splice(B.inArray(c,r),1)):(n&&("="===n?(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:r,value:e}),t.defaultValue=e):"~"===n?(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:r,value:e}),t.forcedValue=e):"<"===n&&(t.validValues=B.makeMap(e,"?"))),l.test(r)?(o=t,a.attributePatterns=a.attributePatterns||[],o.pattern=Ra(r),a.attributePatterns.push(o)):(d[r]||c.push(r),d[r]=t)))})}if(n&&(s.outputName=r),"@"===r){if(!m.isNone())return[];m=I.some(s)}return[n?{name:r,element:s,aliasName:n}:{name:r,element:s}]}return[]})},za={},ja=B.makeMap,Ha=B.each,$a=B.extend,Va=B.explode,qa=(e,t={})=>{e=ja(e," ",ja(e.toUpperCase()," "));return $a(e,t)},Wa=e=>qa("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Ka=(e,r)=>{if(e){const n={};return z(e)&&(e={"*":e}),Ha(e,(e,t)=>{n[t]=n[t.toUpperCase()]=("map"===r?ja:Va)(e,/[, ]/)}),n}},Ya=(o={})=>{const l={},d={};let a=[];const c={},t={};var e=(t,r,n)=>{var e=o[t];if(e)return ja(e,/[, ]/,ja(e.toUpperCase(),/[, ]/));{let e=za[t];return e||(e=qa(r,n),za[t]=e),e}};const m=null!=(n=o.schema)?n:"html5",r=Ma(m);!1===o.verify_html&&(o.valid_elements="*[*]");var n=Ka(o.valid_styles),s=Ka(o.invalid_styles,"map"),i=Ka(o.valid_classes,"map"),u=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=e("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),h="td th iframe video audio object script code";const v=e("non_empty_elements",h+" pre svg textarea summary",g);var h=e("move_caret_before_on_enter_elements",h+" table",g),b="h1 h2 h3 h4 h5 h6",y=e("text_block_elements",b+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure");const C=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",y),w=e("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");var E=e("transparent_elements","a ins del canvas map"),e=e("wrap_block_elements","pre "+b);Ha("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{t[e]=new RegExp("</"+e+"[^>]*>","gi")});const x=e=>{var t=I.from(l["@"]);const n=/[*?+]/;K(Ua(t,null!=e?e:""),({name:e,element:t,aliasName:r})=>{r&&(l[r]=t),n.test(e)?((r=t).pattern=Ra(e),a.push(r)):l[e]=t})},k=e=>{a=[],K(Be(l),e=>{delete l[e]}),x(e)},_=(r,e)=>{delete za.text_block_elements,delete za.block_elements;var t=!!e.extends&&!P(e.extends);const n=e.extends;if(d[r]=n?d[n]:{},c[r]=null!==n&&void 0!==n?n:r,v[r.toUpperCase()]={},v[r]={},t||(C[r.toUpperCase()]={},C[r]={}),n&&!l[r]&&l[n]?(delete(t=Aa(l[n])).removeEmptyAttrs,delete t.removeEmpty,l[r]=t):l[r]={attributesOrder:[],attributes:{}},j(e.attributes)){const o=e=>{a.attributesOrder.push(e),a.attributes[e]={}},a=null!=(t=l[r])?t:{};delete a.attributesDefault,delete a.attributesForced,delete a.attributePatterns,delete a.attributesRequired,a.attributesOrder=[],a.attributes={},K(e.attributes,e=>{const r=Ta(m);Ia(e).each(({preset:e,name:t})=>{e?"global"===t&&K(r,o):o(t)})}),l[r]=a}if(ne(e.padEmpty)&&((t=null!=(t=l[r])?t:{}).paddEmpty=e.padEmpty,l[r]=t),j(e.children)){const s={},i=e=>{s[e]={}};K(e.children,e=>{Ia(e).each(({preset:e,name:t})=>{e?(e=t,La(m,e).each(e=>{K(e,i)})):i(t)})}),d[r]=s}n&&Y(d,(e,t)=>{e[n]&&(d[t]=e=$a({},d[t]),e[r]=e[n])})},S=e=>{K(Da(null!=e?e:""),({name:e,cloneName:t})=>{_(e,{extends:t})})},N=e=>{F(e)?Y(e,(e,t)=>_(t,e)):z(e)&&S(e)},R=e=>{K(Fa(null!=e?e:""),({operation:t,name:e,validChildren:r})=>{const n="replace"===t?{"#comment":{}}:d[e],o=e=>{"remove"===t?delete n[e]:n[e]={}};K(r,({preset:e,name:t})=>{e?(e=t,La(m,e).each(e=>{K(e,o)})):o(t)}),d[e]=n})},A=e=>{var t=l[e];if(t)return t;let r=a.length;for(;r--;){var n=a[r];if(n.pattern.test(e))return n}};b=q(n),n=q(s),s=q(i),i=q(p);const D=q(C);var p=q(y),y=q(w),g=q(Object.seal(g)),f=q(f),T=q(v),h=q(h),u=q(u),E=q(E);const O=q(e);e=q(Object.seal(t));const B=(e,t)=>{e=A(e);if(e){if(!t)return!0;if(e.attributes[t])return!0;var r=e.attributePatterns;if(r){let e=r.length;for(;e--;)if(r[e].pattern.test(t))return!0}}return!1},P=e=>G(D(),e),L=e=>!lt(e,"#")&&B(e)&&!P(e);var M=q(c);return o.valid_elements?(k(o.valid_elements),Ha(r,(e,t)=>{d[t]=e.children})):(Ha(r,(e,t)=>{l[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},d[t]=e.children}),Ha(Na("strong/b em/i"),e=>{e=Na(e,"/");l[e[1]].outputName=e[0]}),Ha(w,(e,t)=>{l[t]&&(o.padd_empty_block_inline_children&&(l[t].paddInEmptyBlock=!0),l[t].removeEmpty=!0)}),Ha(Na("ol ul blockquote a table tbody"),e=>{l[e]&&(l[e].removeEmpty=!0)}),Ha(Na("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{l[e]&&(l[e].paddEmpty=!0)}),Ha(Na("span"),e=>{l[e].removeEmptyAttrs=!0})),delete l.svg,N(o.custom_elements),R(o.valid_children),x(o.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),Ha({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{l[t]&&(l[t].parentsRequired=Na(e))}),o.invalid_elements&&Ha(Va(o.invalid_elements),e=>{l[e]&&delete l[e]}),A("span")||x("span[!data-mce-type|*]"),{type:m,children:d,elements:l,getValidStyles:b,getValidClasses:s,getBlockElements:D,getInvalidStyles:n,getVoidElements:g,getTextBlockElements:p,getTextInlineElements:y,getBoolAttrs:i,getElementRule:A,getSelfClosingElements:f,getNonEmptyElements:T,getMoveCaretBeforeOnEnterElements:h,getWhitespaceElements:u,getTransparentElements:E,getSpecialElements:e,isValidChild:(e,t)=>{e=d[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:B,isBlock:P,isInline:L,isWrapper:e=>G(O(),e)||L(e),getCustomElements:M,addValidElements:x,setValidElements:k,addCustomElements:N,addValidChildren:R}},Ga=e=>{return{value:(e=e,st(e,"#").toUpperCase())}},Xa=e=>{e=e.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Za=e=>{e=Xa(e.red)+Xa(e.green)+Xa(e.blue);return Ga(e)},Qa=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ja=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,es=(e,t,r,n)=>{return{red:parseInt(e,10),green:parseInt(t,10),blue:parseInt(r,10),alpha:parseFloat(n)}},ts=e=>Qa.test(e)?"rgb":Ja.test(e)?"rgba":"other",rs=e=>{var t=Qa.exec(e);return null!==t?I.some(es(t[1],t[2],t[3],"1")):null!==(t=Ja.exec(e))?I.some(es(t[1],t[2],t[3],t[4])):I.none()},ns=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,os=e=>rs(e).map(Za).map(e=>"#"+e.value).getOr(e),as=(v={},e)=>{const b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,y=/\s*([^:]+):\s*([^;]+);?/g,C=/\s+$/,w={};let t,l;const E=Zn;e&&(t=e.getValidStyles(),l=e.getInvalidStyles());var r=(`\\" \\' \\; \\: ; : `+E).split(" ");for(let e=0;e<r.length;e++)w[r[e]]=E+e,w[E+e]=r[e];const x={parse:e=>{const d={};let r=!1;const s=v.url_converter,i=v.url_converter_scope||x;var t=(t,r,n)=>{var o=d[t+"-top"+r];if(o){var a=d[t+"-right"+r];if(a){var s=d[t+"-bottom"+r];if(s){var i=d[t+"-left"+r];if(i){var l=[o,a,s,i];let e=l.length-1;for(;e--&&l[e]===l[e+1];);-1<e&&n||(d[t+r]=-1===e?l[0]:l.join(" "),delete d[t+"-top"+r],delete d[t+"-right"+r],delete d[t+"-bottom"+r],delete d[t+"-left"+r])}}}}};const n=t=>{var r=d[t];if(r){var n=-1<r.indexOf(",")?[r]:r.split(" ");let e=n.length;for(;e--;)if(n[e]!==n[0])return!1;return d[t]=n[0],!0}};const o=e=>(r=!0,w[e]),l=(e,t)=>(r&&(e=e.replace(/\uFEFF[0-9]/g,e=>w[e])),e=t?e:e.replace(/\\([\'\";:])/g,"$1")),a=e=>String.fromCharCode(parseInt(e.slice(1),16));var c,m,u,f,g=e=>e.replace(/\\[0-9a-f]+/gi,a),p=(e,t,r,n,o,a)=>{if(o=o||a)return"'"+(o=l(o)).replace(/\'/g,"\\'")+"'";if(t=l(t||r||n||""),!v.allow_script_urls){a=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!v.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return"url('"+(t=s?s.call(i,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,o));c=y.exec(e);){y.lastIndex=c.index+c[0].length;var h=c[1].replace(C,"").toLowerCase();let t=c[2].replace(C,"");h&&t&&(h=g(h),t=g(t),-1===h.indexOf(E))&&-1===h.indexOf('"')&&(v.allow_script_urls||"behavior"!==h&&!/expression\s*\(|\/\*|\*\//.test(t))&&("font-weight"===h&&"700"===t?t="bold":"color"!==h&&"background-color"!==h||(t=t.toLowerCase()),"rgb"===ts(t)&&rs(t).each(e=>{t=os(ns(e)).toLowerCase()}),t=t.replace(b,p),d[h]=r?l(t,!0):t)}t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),t="border",m="border-width",u="border-style",f="border-color",n(m)&&n(u)&&n(f)&&(d[t]=d[m]+" "+d[u]+" "+d[f],delete d[m],delete d[u],delete d[f]),"medium none"===d.border&&delete d.border,"none"===d["border-image"]&&delete d["border-image"]}return d},serialize:(a,s)=>{let i="";var e=(e,t)=>{var r=t[e];if(r)for(let e=0,t=r.length;e<t;e++){var n=r[e],o=a[n];o&&(i+=(0<i.length?" ":"")+n+": "+o+";")}};return s&&t?(e("*",t),e(s,t)):Y(a,(e,t)=>{var r,n,o;!e||(r=t,n=s,l&&n&&((o=l["*"])&&o[r]||(o=l[n])&&o[r]))||(i+=(0<i.length?" ":"")+t+": "+e+";")}),i}};return x},ss={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},is=e=>e.isDefaultPrevented===le||e.isDefaultPrevented===u,ls=e=>{return oe(e.preventDefault)||(e=e)instanceof Event||$(e.initEvent)},ds=(t,e)=>{var r=null!=e?e:{};for(const n in t)G(ss,n)||(r[n]=t[n]);return H(t.composedPath)&&(r.composedPath=()=>t.composedPath()),H(t.getModifierState)&&(r.getModifierState=e=>t.getModifierState(e)),H(t.getTargetRanges)&&(r.getTargetRanges=()=>t.getTargetRanges()),r},cs=(e,t,r,n)=>{const o=ds(t,n);return o.type=e,oe(o.target)&&(o.target=null!=(n=o.srcElement)?n:r),ls(t)&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=le,$(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=le,$(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=le,o.stopPropagation()},is(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?le:u,o.isPropagationStopped=!0===o.cancelBubble?le:u,o.isImmediatePropagationStopped=u)),o},ms=/^(?:mouse|contextmenu)|click/,us=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},fs=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},gs=(e,t)=>{var r,n,o,t=cs(e.type,e,document,t);return o=e,H(o)&&ms.test(o.type)&&C(e.pageX)&&!C(e.clientX)&&(r=(o=t.target.ownerDocument||document).documentElement,o=o.body,(n=t).pageX=e.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),n.pageY=e.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),t},ps=(e,t,r)=>{const n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{const a=()=>{fs(e,"DOMContentLoaded",a),fs(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():us(e,"DOMContentLoaded",a),r.domLoaded||us(e,"load",a)}};class hs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,e,a,s){const i=this;let l;const d=window;var c=e=>{i.executeHandlers(gs(e||d.event),m)};if(!o||P(o)||go(o))return a;let m;o[i.expando]?m=o[i.expando]:(m=i.count++,o[i.expando]=m,i.events[m]={}),s=s||o;var u=e.split(" ");let f=u.length;for(;f--;){let e=u[f],t=c,r=!1,n=!1;"DOMContentLoaded"===e&&(e="ready"),i.domLoaded&&"ready"===e&&"complete"===o.readyState?a.call(s,gs({type:e})):(i.hasFocusIn||"focusin"!==e&&"focusout"!==e||(r=!0,n="focusin"===e?"focus":"blur",t=e=>{e=gs(e||d.event);e.type="focus"===e.type?"focusin":"focusout",i.executeHandlers(e,m)}),(l=i.events[m][e])?"ready"===e&&i.domLoaded?a(gs({type:e})):l.push({func:a,scope:s}):(i.events[m][e]=l=[{func:a,scope:s}],l.fakeName=n,l.capture=r,l.nativeHandler=t,"ready"===e?ps(o,t,i):us(o,n||e,t,r)))}return o=l=null,a}unbind(r,n,o){if(r&&!P(r)&&!go(r)){var e=r[this.expando];if(e){let t=this.events[e];if(n){var a=n.split(" ");let e=a.length;for(;e--;){var s,i,l,d,c=a[e],m=t[c];if(m){if(o){let e=m.length;for(;e--;)m[e].func===o&&(s=m.nativeHandler,i=m.fakeName,l=m.capture,(d=m.slice(0,e).concat(m.slice(e+1))).nativeHandler=s,d.fakeName=i,d.capture=l,t[c]=d)}o&&0!==m.length||(delete t[c],fs(r,m.fakeName||c,m.nativeHandler,m.capture))}}}else Y(t,(e,t)=>{fs(r,e.fakeName||t,e.nativeHandler,e.capture)}),t={};for(const u in t)if(G(t,u))return this;delete this.events[e];try{delete r[this.expando]}catch(e){r[this.expando]=null}}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(e&&!P(e)&&!go(e)){var n=gs({type:t,target:e},r);do{var o=e[this.expando];o&&this.executeHandlers(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped())}return this}clean(t){if(t&&!P(t)&&!go(t)&&(t[this.expando]&&this.unbind(t),t=t.getElementsByTagName?t:t.document)&&t.getElementsByTagName){this.unbind(t);var r=t.getElementsByTagName("*");let e=r.length;for(;e--;)(t=r[e])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(r,e){var e=this.events[e],n=e&&e[r.type];if(n)for(let e=0,t=n.length;e<t;e++){var o=n[e];if(o&&!1===o.func.call(o.scope,r)&&r.preventDefault(),r.isImmediatePropagationStopped())return}}}hs.Event=new hs;const vs=B.each,bs=B.grep,ys="data-mce-style",Cs=B.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ws=(e,t,r)=>{oe(r)||""===r?mr(e,t):sr(e,t,r)},Es=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),xs=(r,n)=>{let o=0;if(r)for(let e=r.nodeType,t=r.previousSibling;t;t=t.previousSibling){var a=t.nodeType;n&&P(t)&&(a===e||!t.data.length)||(o++,e=a)}return o},ks=(e,t)=>{var r=lr(t,"style"),e=e.serialize(e.parse(r),X(t));ws(t,ys,e)},_s=(e,t)=>w(e)?G(Cs,t)?e+"":e+"px":e,Ss=(e,t,r)=>{t=Es(t);oe(r)||""===r?vn(e,t):mn(e,t,_s(r,t))},ee=(d,s={})=>{const n={},e=window,o={};let M=0;const a=sa.forElement(Z.fromDom(d),{contentCssCors:s.contentCssCors,referrerPolicy:s.referrerPolicy}),l=[],i=s.schema||Ya({}),c=as({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),m=s.ownEvents?new hs:hs.Event,t=i.getBlockElements();const u=e=>e&&d&&z(e)?d.getElementById(e):e,f=e=>{e=u(e);return H(e)?Z.fromDom(e):null},g=(e,t,r="")=>{let n;var o,e=f(e);return H(e)&&er(e)&&(o=U[t],n=o&&o.get?o.get(e.dom,t):lr(e,t)),H(n)?n:r},p=e=>{e=u(e);return oe(e)?[]:e.attributes},h=(e,o,a)=>{x(e,e=>{var t,r,n;J(e)&&(e=Z.fromDom(e),t=""===a?null:a,r=lr(e,o),(n=U[o])&&n.set?n.set(e.dom,t,o):ws(e,o,t),r!==t)&&s.onSetAttrib&&s.onSetAttrib({attrElm:e.dom,attrName:o,attrValue:t})})};const v=()=>s.root_element||d.body;const r=(n,o)=>{{var a=d.body,s=(n=u(n),o);let t=0,r=0;var i,o=a.ownerDocument;if(s=s||a,n){if(s===a&&n.getBoundingClientRect&&"static"===fn(Z.fromDom(a),"position"))return i=n.getBoundingClientRect(),t=i.left+(o.documentElement.scrollLeft||a.scrollLeft)-o.documentElement.clientLeft,r=i.top+(o.documentElement.scrollTop||a.scrollTop)-o.documentElement.clientTop,{x:t,y:r};let e=n;for(;e&&e!==s&&e.nodeType&&!oa(e,s);){var l=e;t+=l.offsetLeft||0,r+=l.offsetTop||0,e=l.offsetParent}for(e=n.parentNode;e&&e!==s&&e.nodeType&&!oa(e,s);)t-=e.scrollLeft||0,r-=e.scrollTop||0,e=e.parentNode;r+=na(Z.fromDom(n))}return{x:t,y:r}}};const b=(e,t,r)=>{var n,e=u(e);if(!oe(e)&&(ao(e)||(n=e,J(n)&&"http://www.w3.org/2000/svg"===n.namespaceURI)))return r?fn(Z.fromDom(e),Es(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),e.style?e.style[t]:void 0)},y=e=>{e=u(e);if(!e)return{w:0,h:0};let t=b(e,"width"),r=b(e,"height");return t&&-1!==t.indexOf("px")||(t="0"),r&&-1!==r.indexOf("px")||(r="0"),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}};const C=(e,t)=>{return!!e&&(e=j(e)?e:[e],W(e,e=>_r(Z.fromDom(e),t)))},w=(e,t,r,n)=>{var o=[];let a=u(e);n=void 0===n;var s=r||("BODY"!==v().nodeName?v().parentNode:null);if(z(t))if("*"===t)t=J;else{const i=t;t=e=>C(e,i)}for(;a&&!(a===s||oe(a.nodeType)||po(a)||ho(a));){if(!t||t(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null};const E=(t,r,n)=>{let o=r;if(t){z(r)&&(o=e=>C(e,r));for(let e=t[n];e;e=e[n])if($(o)&&o(e))return e}return null};const x=function(e,r,t){const n=null!=t?t:this;if(j(e)){const o=[];return vs(e,(e,t)=>{e=u(e);e&&o.push(r.call(n,e,t))}),o}return!!(t=u(e))&&r.call(n,t)},k=(e,t)=>{x(e,r=>{Y(t,(e,t)=>{h(r,t,e)})})},_=(e,t)=>{x(e,e=>{e=Z.fromDom(e);Tn(e,t)})},S=(e,r,n,o,a)=>x(e,e=>{var t=z(r)?d.createElement(r):r;return H(n)&&k(t,n),o&&(!z(o)&&o.nodeType?t.appendChild(o):z(o)&&_(t,o)),a?t:e.appendChild(t)}),N=(e,t,r)=>S(d.createElement(e),e,t,r,!0);var I=Sa.decode;const R=Sa.encodeAllRaw;const A=(e,r)=>x(e,e=>{const t=Z.fromDom(e);return r&&K(Ur(t),e=>{tr(e)&&0===e.dom.length?Q(e):yn(t,e)}),Q(t),t.dom});const D=(e,t,n)=>{x(e,e=>{if(J(e)){const r=Z.fromDom(e);e=t.split(" ");K(e,e=>{var t;H(n)?(n?yr:wr)(r,e):(t=r,e=e,e=gr(t)?t.dom.classList.toggle(e):br(t,e),Cr(t))})}})};const T=(n,o,a)=>x(o,e=>{var t;const r=j(o)?n.cloneNode(!0):n;return a&&vs(bs(e.childNodes),e=>{r.appendChild(e)}),null!=(t=e.parentNode)&&t.replaceChild(r,e),e});const O=()=>d.createRange();const B=(t,r,n,o)=>{if(j(t)){let e=t.length;for(var a=[];e--;)a[e]=B(t[e],r,n,o);return a}return!s.collect||t!==d&&t!==e||l.push([t,r,n,o]),m.bind(t,r,n,o||L)},P=(t,r,n)=>{if(j(t)){let e=t.length;for(var o=[];e--;)o[e]=P(t[e],r,n);return o}if(0<l.length&&(t===d||t===e)){let e=l.length;for(;e--;){var[a,s,i]=l[e];t!==a||r&&r!==s||n&&n!==i||m.unbind(a,s,i)}}return m.unbind(t,r,n)};const F=e=>{var t;return e&&ao(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null};const L={doc:d,settings:s,win:e,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:l,styles:c,schema:i,events:m,isBlock:e=>z(e)?G(t,e):J(e)&&(G(t,e.nodeName)||Jo(i,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:v,getViewPort:e=>{e=qn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:e=>{var e=u(e),t=r(e),e=y(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:y,getParent:(e,t,r)=>{e=w(e,t,r,!1);return e&&0<e.length?e[0]:null},getParents:w,get:u,getNext:(e,t)=>E(e,t,"nextSibling"),getPrev:(e,t)=>E(e,t,"previousSibling"),select:(e,t)=>{var r,t=null!=(t=null!=(t=u(t))?t:s.root_element)?t:d;return r=t,$(r.querySelectorAll)?De(t.querySelectorAll(e)):[]},is:C,add:S,create:N,createHTML:(e,t,r="")=>{let n="<"+e;for(const o in t)$e(t,o)&&(n+=" "+o+'="'+R(t[o])+'"');return gt(r)&&G(i.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var t,r=d.createElement("div"),n=d.createDocumentFragment();for(n.appendChild(r),e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n.removeChild(r),n},remove:A,setStyle:(e,t,r)=>{x(e,e=>{e=Z.fromDom(e);Ss(e,t,r),s.update_styles&&ks(c,e)})},getStyle:b,setStyles:(e,t)=>{x(e,e=>{const r=Z.fromDom(e);Y(t,(e,t)=>{Ss(r,t,e)}),s.update_styles&&ks(c,r)})},removeAllAttribs:e=>x(e,t=>{var r=t.attributes;for(let e=r.length-1;0<=e;e--)t.removeAttributeNode(r.item(e))}),setAttrib:h,setAttribs:k,getAttrib:g,getPos:r,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:e=>{if(L!==ee.DOM&&d===document){if(n[e])return;n[e]=!0}let t=d.getElementById("mceDefaultStyles");var r;t||((t=d.createElement("style")).id="mceDefaultStyles",t.type="text/css",(r=d.head).firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(d.createTextNode(e))},loadCSS:e=>{e=e||"",K(e.split(","),e=>{o[e]=!0,a.load(e).catch(V)})},addClass:(e,t)=>{D(e,t,!0)},removeClass:(e,t)=>{D(e,t,!1)},hasClass:(e,t)=>{const r=f(e);e=t.split(" ");return H(r)&&Ee(e,e=>Er(r,e))},toggleClass:D,show:e=>{x(e,e=>vn(Z.fromDom(e),"display"))},hide:e=>{x(e,e=>mn(Z.fromDom(e),"display","none"))},isHidden:e=>{e=f(e);return H(e)&&jt(pn(e,"display"),"none")},uniqueId:e=>(e||"mce_")+M++,setHTML:_,getOuterHTML:e=>{var t,e=f(e);return H(e)?J(e.dom)?e.dom.outerHTML:(e=e,t=Z.fromTag("div"),e=Z.fromDom(e.dom.cloneNode(!0)),En(t,e),Dn(t)):""},setOuterHTML:(e,t)=>{x(e,e=>{J(e)&&(e.outerHTML=t)})},decode:I,encode:R,insertAfter:(e,t)=>{const n=u(t);return x(e,e=>{var t=null===n||void 0===n?void 0:n.parentNode,r=null===n||void 0===n?void 0:n.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},replace:T,rename:(t,e)=>{if(t.nodeName===e.toUpperCase())return t;{const r=N(e);return vs(p(t),e=>{h(r,e.nodeName,g(t,e.nodeName))}),T(r,t,!0),r}},findCommonAncestor:(e,t)=>{let r=e;for(;r;){let e=t;for(;e&&r!==e;)e=e.parentNode;if(r===e)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:x,getAttribs:p,isEmpty:(e,t,r)=>{return re(t)?Do(i,e,{...r,isContent:e=>{e=e.nodeName.toLowerCase();return Boolean(t[e])}}):Do(i,e,r)},createRng:O,nodeIndex:xs,split:(e,t,r)=>{let n=O();var o,a,s;if(e&&t&&e.parentNode&&t.parentNode)return s=e.parentNode,n.setStart(s,xs(e)),n.setEnd(t.parentNode,xs(t)),o=n.extractContents(),(n=O()).setStart(t.parentNode,xs(t)+1),n.setEnd(s,xs(e)+1),a=n.extractContents(),s.insertBefore(ua(L,o,i),e),r?s.insertBefore(r,e):s.insertBefore(t,e),s.insertBefore(ua(L,a,i),e),A(e),r||t},bind:B,unbind:P,fire:(e,t,r)=>m.dispatch(e,t,r),dispatch:(e,t,r)=>m.dispatch(e,t,r),getContentEditable:F,getContentEditableParent:t=>{var r=v();let n=null;for(let e=t;e&&e!==r&&null===(n=F(e));e=e.parentNode);return n},isEditable:e=>{return!!H(e)&&(e=J(e)?e:e.parentElement,H(e))&&ao(e)&&an(Z.fromDom(e))},destroy:()=>{if(0<l.length){let e=l.length;for(;e--;){var[t,r,n]=l[e];m.unbind(t,r,n)}}Y(o,(e,t)=>{a.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},U=((r,o,a)=>{const n=o.keep_values;var e={style:{set:(e,t)=>{e=Z.fromDom(e);n&&ws(e,ys,t),mr(e,"style"),z(t)&&un(e,r.parse(t))},get:e=>{var e=Z.fromDom(e),t=lr(e,ys)||lr(e,"style");return r.serialize(r.parse(t),X(e))}}};return n&&(e.href=e.src={set:(e,t,r)=>{var n=Z.fromDom(e),e=($(o.url_converter)&&H(t)&&(t=o.url_converter.call(o.url_converter_scope||a(),String(t),r,e)),"data-mce-"+r);ws(n,e,t),ws(n,r,t)},get:(e,t)=>{e=Z.fromDom(e);return lr(e,"data-mce-"+t)||lr(e,t)}}),e})(c,s,q(L));return L},Ns=(ee.DOM=ee(document),ee.nodeIndex=xs,ee.DOM);class Rs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(s){return new Promise((e,t)=>{const r=Ns;let n;const o=()=>{r.remove(a),n&&(n.onerror=n.onload=n=null)};const a=r.uniqueId();(n=document.createElement("script")).id=a,n.type="text/javascript",n.src=B._addCacheSuffix(s),this.settings.referrerPolicy&&r.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),e()},n.onerror=()=>{o(),t("Failed to load script: "+s)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(r){const n=this;return n.queue.push(r),void 0===n.states[r]&&(n.states[r]=0),new Promise((e,t)=>{n.scriptLoadedCallbacks[r]||(n.scriptLoadedCallbacks[r]=[]),n.scriptLoadedCallbacks[r].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(t,r)=>{g(n.scriptLoadedCallbacks,r).each(e=>{K(e,e=>e[t](r))}),delete n.scriptLoadedCallbacks[r]},o=e=>{e=O(e,e=>"rejected"===e.status);return 0<e.length?Promise.reject(we(e,({reason:e})=>j(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(T(e,t=>2===n.states[t]?(r("resolve",t),Promise.resolve()):3===n.states[t]?(r("reject",t),Promise.reject(t)):(n.states[t]=1,n.loadScript(t).then(()=>{n.states[t]=2,r("resolve",t);var e=n.queue;return 0<e.length?(n.queue=[],a(e).then(o)):Promise.resolve()},()=>(n.states[t]=3,r("reject",t),Promise.reject(t)))))),s=e=>(n.loading=!0,a(e).then(e=>{n.loading=!1;var t=n.queueLoadedCallbacks.shift();return I.from(t).each(ie),o(e)})),i=Ve(e);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(e,t)})}):s(i)}}Rs.ScriptLoader=new Rs;const As={},Ds=Bo("en"),Ts=()=>g(As,Ds.get());const Os={getData:()=>Le(As,e=>({...e})),setCode:e=>{e&&Ds.set(e)},getCode:()=>Ds.get(),add:(e,s)=>{let i=As[e];i||(As[e]=i={});const l=T(Be(s),e=>e.toLowerCase());Y(s,(e,t)=>{var r,n,o,a=t.toLowerCase();a!==t&&(r=l,n=a,-1!==(o=r.indexOf(n)))&&r.indexOf(n,o+1)>o?(G(s,a)||(i[a]=e),i[t]=e):i[a]=e})},translate:e=>{const t=Ts().getOr({}),r=e=>$(e)?Object.prototype.toString.call(e):n(e)?"":""+e,n=e=>""===e||null==e;var o,a=e=>{e=r(e);return G(t,e)?r(t[e]):g(t,e.toLowerCase()).map(r).getOr(e)},s=e=>e.replace(/{context:\w+}$/,"");if(n(e))return"";if(o=e,F(o)&&G(o,"raw"))return r(e.raw);if(o=e,j(o)&&1<o.length){const i=e.slice(1);return s(a(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>G(i,t)?r(i[t]):e))}return s(a(e))},isRtl:()=>Ts().bind(e=>g(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>G(As,e)},Bs=()=>{const r=[],n={},o={},a=[],s=(t,r)=>{var e=O(a,e=>e.name===t&&e.state===r);K(e,e=>e.resolve())},i=e=>G(n,e),e=e=>G(o,e);const l=(e,t)=>{var r=Os.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||Rs.ScriptLoader.add(n[e]+"/langs/"+r+".js")};const d=(t,r="added")=>"added"===r&&e(t)||"loaded"===r&&i(t)?Promise.resolve():new Promise(e=>{a.push({name:t,state:r,resolve:e})});return{items:r,urls:n,lookup:o,get:e=>{if(o[e])return o[e].instance},requireLangPack:(e,t)=>{!1!==Bs.languageLoad&&(i(e)?l(e,t):d(e,"loaded").then(()=>l(e,t)))},add:(e,t)=>(r.push(t),o[e]={instance:t},s(e,"added"),t),remove:e=>{delete n[e],delete o[e]},createUrl:(e,t)=>z(t)?z(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,t)=>{if(n[e])return Promise.resolve();let r=z(t)?t:t.prefix+t.resource+t.suffix;0!==r.indexOf("/")&&-1===r.indexOf("://")&&(r=Bs.baseURL+"/"+r),n[e]=r.substring(0,r.lastIndexOf("/"));t=()=>(s(e,"loaded"),Promise.resolve());return o[e]?t():Rs.ScriptLoader.add(r).then(t)},waitFor:d}},Ps=(Bs.languageLoad=!0,Bs.baseURL="",Bs.PluginManager=Bs(),Bs.ThemeManager=Bs(),Bs.ModelManager=Bs(),(t,r)=>{let n=null;return{cancel:()=>{y(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{y(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}}),Ls=(t,r)=>{let n=null;const o=()=>{y(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...e)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,e)},r)}}},Ms=q("mce-annotation"),Is=q("data-mce-annotation"),Fs=q("data-mce-annotation-uid"),Us=q("data-mce-annotation-active"),zs=q("data-mce-annotation-classes"),js=q("data-mce-annotation-attrs"),Hs=t=>e=>k(e,t),$s=(n,e)=>{var t=n.selection.getRng(),r=Z.fromDom(t.startContainer),o=Z.fromDom(n.getBody()),e=e.fold(()=>"."+Ms(),e=>`[${Is()}="${e}"]`),t=zr(r,t.startOffset).getOr(r);return nn(t,e,Hs(o)).bind(e=>dr(e,""+Fs()).bind(r=>dr(e,""+Is()).map(e=>{var t=qs(n,r);return{uid:r,name:e,elements:t}})))},Vs=(e,t)=>{return cr(e,"data-mce-bogus")||(e=e,r='[data-mce-bogus="all"]',t=Hs(t),tn(e,r,t).isSome());var r},qs=(e,t)=>{const r=Z.fromDom(e.getBody());e=Kn(r,`[${Fs()}="${t}"]`);return O(e,e=>!Vs(e,r))},Ws=(e,t)=>{const n=Z.fromDom(e.getBody());e=Kn(n,`[${Is()}="${t}"]`);const o={};return K(e,e=>{var t,r;Vs(e,n)||(t=lr(e,Fs()),r=g(o,t).getOr([]),o[t]=r.concat([e]))}),o},Ks=(n,t)=>{const o=Bo({}),a=()=>({listeners:[],previous:Lo()}),l=(e,t)=>{s(e,e=>(t(e),e))},s=(e,t)=>{var r=o.get(),t=t(g(r,e).getOrThunk(a));r[e]=t,o.set(r)},d=(e,t)=>{K(qs(n,e),e=>{t?sr(e,Us(),"true"):mr(e,Us())})},e=Ls(()=>{var e=Se(t.getNames());K(e,r=>{s(r,s=>{const i=s.previous.get();return $s(n,I.some(r)).fold(()=>{i.each(e=>{var t;t=r,l(t,e=>{K(e.listeners,e=>e(!1,t))}),s.previous.clear(),d(e,!1)})},({uid:e,name:t,elements:r})=>{var n,o,a;jt(i,e)||(i.each(e=>d(e,!1)),n=t,o=e,a=r,l(n,e=>{K(e.listeners,e=>e(!0,n,{uid:o,nodes:T(a,e=>e.dom)}))}),s.previous.set(e),d(e,!0))}),{previous:s.previous,listeners:s.listeners}})})},30);n.on("remove",()=>{e.cancel()}),n.on("NodeChange",()=>{e.throttle()});return{addListener:(e,t)=>{s(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}},Ys=(e,r)=>{const o=Is();e.serializer.addTempAttr(Us()),e.serializer.addAttributeFilter(o,e=>{for(const n of e)t=n,I.from(t.attr(o)).bind(r.lookup).each(e=>{var t,r;!1===e.persistent&&("span"===n.name?n.unwrap():((t=n).attr(Fs(),null),t.attr(Is(),null),t.attr(Us(),null),e=I.from(t.attr(js())).map(e=>e.split(",")).getOr([]),r=I.from(t.attr(zs())).map(e=>e.split(",")).getOr([]),K(e,e=>t.attr(e,null)),e=null!=(e=null==(e=t.attr("class"))?void 0:e.split(" "))?e:[],e=ke(e,[Ms()].concat(r)),t.attr("class",0<e.length?e.join(" "):null),t.attr(zs(),null),t.attr(js(),null)))});var t})},Gs=(e,t,r)=>Math.min(Math.max(e,t),r),Xs=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Zs=0;const Qs=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Xs())+ ++Zs+String(t)},Js=(t,e)=>{K(e,e=>{wr(t,e)})},ei=(e,t)=>Z.fromDom(e.dom.cloneNode(t)),ti=e=>ei(e,!1),ri=e=>ei(e,!0),ni=(e,t)=>{var t=((e,t)=>{t=Z.fromTag(t),e=ur(e);return ir(t,e),t})(e,t),r=(Cn(e,t),Ur(e));return _n(t,r),Q(e),t},oi=(e,t,r=u)=>{const n=new Xn(e,t),o=e=>{let t;for(;(t=n[e]())&&!P(t)&&!r(t););return I.from(t).filter(P)};return{current:()=>I.from(n.current()).filter(P),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ai=(a,e)=>{const s=e||(e=>a.isBlock(e)||R(e)||b(e)),i=(e,t,r,n)=>{if(P(e)){t=n(e,t,e.data);if(-1!==t)return I.some({container:e,offset:t})}return r().bind(e=>i(e.container,e.offset,r,n))};return{backwards:(e,t,r,n)=>{const o=oi(e,null!=n?n:a.getRoot(),s);return i(e,t,()=>o.prev().map(e=>({container:e,offset:e.length})),r).getOrNull()},forwards:(e,t,r,n)=>{const o=oi(e,null!=n?n:a.getRoot(),s);return i(e,t,()=>o.next().map(e=>({container:e,offset:0})),r).getOrNull()}}};const si=((r,n)=>{const t=e=>r(e)?I.from(e.dom.nodeValue):I.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get "+n+" value of a "+n+" node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom.nodeValue=t}}})(tr,"text"),ii=e=>si.get(e),li=(e,t)=>si.set(e,t);n=t=>{let r;return e=>(r=r||_e(t,le),G(r,X(e)))};const di=e=>er(e)&&"br"===X(e),ci=n(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),mi=n(["ul","ol","dl"]),ui=n(["li","dd","dt"]),fi=n(["thead","tbody","tfoot"]),gi=n(["td","th"]),pi=n(["pre","script","textarea","style"]),hi=e=>{var t=Kn(e,"br"),e=O((e=>{var t=[];let r=e.dom;for(;r;)t.push(Z.fromDom(r)),r=r.lastChild;return t})(e).slice(-1),di);t.length===e.length&&K(e,Q)},vi=()=>{var e=Z.fromTag("br");return sr(e,"data-mce-bogus","1"),e},bi=e=>{Sn(e),En(e,vi())},yi=Zn,Ci=Jn,wi=e=>e.replace(/\uFEFF/g,""),Ei=J,xi=P,ki=e=>(xi(e)&&(e=e.parentNode),Ei(e)&&e.hasAttribute("data-mce-caret")),_i=e=>xi(e)&&Ci(e.data),Si=e=>ki(e)||_i(e),Ni=e=>e.firstChild!==e.lastChild||!R(e.firstChild),Ri=e=>{var t=e.container();return!!P(t)&&(t.data.charAt(e.offset())===yi||e.isAtStart()&&_i(t.previousSibling))},Ai=e=>{var t=e.container();return!!P(t)&&(t.data.charAt(e.offset()-1)===yi||e.isAtEnd()&&_i(t.nextSibling))},Di=e=>xi(e)&&e.data[0]===yi,Ti=e=>xi(e)&&e.data[e.data.length-1]===yi,Oi=e=>{var t,e=e.getElementsByTagName("br"),e=e[e.length-1];io(e)&&null!=(t=e.parentNode)&&t.removeChild(e)},Bi=e=>e&&e.hasAttribute("data-mce-caret")?(Oi(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Pi=e=>ki(e.startContainer),Li=Math.round,Mi=e=>e?{left:Li(e.left),top:Li(e.top),bottom:Li(e.bottom),right:Li(e.right),width:Li(e.width),height:Li(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ii=(e,t)=>(e=Mi(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Fi=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Ui=(e,t,r)=>0<=e&&e<=Math.min(t.height,r.height)/2,zi=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&Ui(t.top-e.bottom,e,t)},ji=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Ui(t.bottom-e.top,e,t),Hi=(e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom,$i=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),e=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-e)*(r-e))},Vi=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},qi=(e,t)=>{var r;return J(e)&&e.hasChildNodes()?(r=e.childNodes)[Gs(t,0,r.length-1)]:e};const Wi=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ki=e=>z(e)&&768<=e.charCodeAt(0)&&Wi.test(e);const Yi=bo,Gi=b,Xi=R,Zi=P,Qi=so(["script","style","textarea"]),Ji=so(["img","input","textarea","hr","iframe","video","audio","object","embed"]),el=so(["table"]),tl=Si,rl=e=>!tl(e)&&(Zi(e)?!Qi(e.parentNode):Ji(e)||Xi(e)||el(e)||ol(e)),nl=e=>J(e)&&"true"===e.getAttribute("unselectable"),ol=e=>!nl(e)&&Gi(e);const al=(e,t)=>rl(e)&&((t,r)=>{for(let e=t.parentNode;e&&e!==r;e=e.parentNode){if(ol(e))return!1;if(Yi(e))return!0}return!0})(e,t),sl=J;r=rl;const il=t("display","block table");var ll,e=t("float","left right");ll=[sl,r,M(e)];const dl=t=>{for(let e=0;e<ll.length;e++)if(!ll[e](t))return!1;return!0},cl=M(t("white-space","pre pre-line pre-wrap")),ml=P,ul=R,fl=ee.nodeIndex,gl=(e,t)=>{if(!(t<0&&J(e)&&e.hasChildNodes()))return qi(e,t)},pl=e=>e?e.createRange():ee.DOM.createRng(),hl=e=>z(e)&&/[\r\n\t ]/.test(e),vl=e=>!!e.setStart&&!!e.setEnd,bl=e=>{var t=e.startContainer,r=e.startOffset;if(hl(e.toString())&&cl(t.parentNode)&&P(t)){e=t.data;if(hl(e[r-1])||hl(e[r+1]))return!0}return!1},yl=e=>{var t=e.ownerDocument,r=pl(t),t=t.createTextNode(Qn),n=e.parentNode,e=(n.insertBefore(t,e),r.setStart(t,0),r.setEnd(t,1),Mi(r.getBoundingClientRect()));return n.removeChild(t),e},Cl=e=>{var t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;return t===r&&P(r)&&0===n&&1===o?((t=e.cloneRange()).setEndAfter(r),El(t)):null},wl=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,El=e=>{let t;var r=e.getClientRects();return t=0<r.length?Mi(r[0]):Mi(e.getBoundingClientRect()),!vl(e)&&ul(e)&&wl(t)?yl(e):wl(t)&&vl(e)&&null!=(r=Cl(e))?r:t},xl=(e,t)=>{e=Ii(e,t);return e.width=1,e.right=e.left+1,e},L=(t,r,e)=>{const n=()=>e=e||(e=>{const t=[],n=e=>{0===e.height||0<t.length&&Fi(e,t[t.length-1])||t.push(e)};var r=(e,t)=>{var r=pl(e.ownerDocument);if(t<e.data.length){if(Ki(e.data[t]))return;if(Ki(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!bl(r)))return void n(xl(El(r),!1))}0<t&&(r.setStart(e,t-1),r.setEnd(e,t),bl(r)||n(xl(El(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),bl(r)||n(xl(El(r),!0)))},o=e.container(),a=e.offset();if(ml(o))r(o,a);else if(sl(o))if(e.isAtEnd()){var s=gl(o,a);ml(s)&&r(s,s.data.length),dl(s)&&!ul(s)&&n(xl(El(s),!1))}else{s=gl(o,a);if(ml(s)&&r(s,0),dl(s)&&e.isAtEnd())return n(xl(El(s),!1)),t;o=gl(e.container(),e.offset()-1);!dl(o)||ul(o)||!il(o)&&!il(s)&&dl(s)||n(xl(El(o),!1)),dl(s)&&n(xl(El(s),!0))}return t})(L(t,r));return{container:q(t),offset:q(r),toRange:()=>{var e=pl(t.ownerDocument);return e.setStart(t,r),e.setEnd(t,r),e},getClientRects:n,isVisible:()=>0<n().length,isAtStart:()=>(ml(t),0===r),isAtEnd:()=>ml(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:e=>e&&t===e.container()&&r===e.offset(),getNode:e=>gl(t,e?r-1:r)}},kl=(L.fromRangeStart=e=>L(e.startContainer,e.startOffset),L.fromRangeEnd=e=>L(e.endContainer,e.endOffset),L.after=e=>L(e.parentNode,fl(e)+1),L.before=e=>L(e.parentNode,fl(e)),L.isAbove=(e,t)=>$t(Re(t.getClientRects()),Ae(e.getClientRects()),zi).getOr(!1),L.isBelow=(e,t)=>$t(Ae(t.getClientRects()),Re(e.getClientRects()),ji).getOr(!1),L.isAtStart=e=>!!e&&e.isAtStart(),L.isAtEnd=e=>!!e&&e.isAtEnd(),L.isTextPosition=e=>!!e&&P(e.container()),L.isElementPosition=e=>!L.isTextPosition(e),(e,t)=>{P(t)&&0===t.data.length&&e.remove(t)}),_l=(e,t,r)=>{var n,o,a,s,i;ho(r)?(n=e,o=t,a=r,s=I.from(a.firstChild),i=I.from(a.lastChild),o.insertNode(a),s.each(e=>kl(n,e.previousSibling)),i.each(e=>kl(n,e.nextSibling))):(o=e,a=r,t.insertNode(a),kl(o,a.previousSibling),kl(o,a.nextSibling))},Sl=P,Nl=io,Rl=ee.nodeIndex,Al=e=>{e=e.parentNode;return Nl(e)?Al(e):e},Dl=e=>e?Xe(e.childNodes,(e,t)=>(Nl(t)&&"BR"!==t.nodeName?e=e.concat(Dl(t)):e.push(t),e),[]):[],Tl=t=>e=>t===e,Ol=e=>{return(Sl(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let n,t;n=Dl(Al(e)),t=Ze(n,Tl(e),e),n=n.slice(0,t+1);var r=Xe(n,(e,t,r)=>(Sl(t)&&Sl(n[r-1])&&e++,e),0);return n=Ge(n,so([e.nodeName])),Ze(n,Tl(e),e)-r})(e)+"]"},Bl=(e,t)=>{let r=[],n=t.container(),o=t.offset(),a;Sl(n)?a=((e,t)=>{let r=e;for(;(r=r.previousSibling)&&Sl(r);)t+=r.data.length;return t})(n,o):(t=n.childNodes,o>=t.length?(a="after",o=t.length-1):a="before",n=t[o]),r.push(Ol(n));t=((t,r,n)=>{var o=[];for(let e=r.parentNode;e&&e!==t&&(!n||!n(e));e=e.parentNode)o.push(e);return o})(e,n),t=Ge(t,M(io));return(r=r.concat(Ye(t,e=>Ol(e)))).reverse().join("/")+","+a},Pl=(e,r)=>{if(!r)return null;var r=r.split(","),n=r[0].split("/"),r=1<r.length?r[1]:"before",n=Xe(n,(e,t)=>{t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!t)return null;"text()"===t[1]&&(t[1]="#text");{var n=t[1];t=parseInt(t[2],10);let r=Dl(e);return r=Ge(r,(e,t)=>!Sl(e)||!Sl(r[t-1])),(r=Ge(r,so([n])))[t]}},e);if(!n)return null;if(Sl(n)||!n.parentNode){var o=n;var a=parseInt(r,10);let e=o,t=0;for(;Sl(e);){var s=e.data.length;if(a>=t&&a<=t+s){o=e,a-=t;break}if(!Sl(e.nextSibling)){o=e,a=s;break}t+=s,e=e.nextSibling}return Sl(o)&&a>o.data.length&&(a=o.data.length),L(o,a)}{let e;return e="after"===r?Rl(n)+1:Rl(n),L(n.parentNode,e)}},Ll=b,Ml=(t,e,r,n,o)=>{var a=o?n.startContainer:n.endContainer;let s=o?n.startOffset:n.endOffset;var i=[],l=t.getRoot();if(P(a))i.push(r?((t,r,e)=>{let n=t(r.data.slice(0,e)).length;for(let e=r.previousSibling;e&&P(e);e=e.previousSibling)n+=t(e.data).length;return n})(e,a,s):s);else{let e=0;o=a.childNodes;s>=o.length&&o.length&&(e=1,s=Math.max(0,o.length-1)),i.push(t.nodeIndex(o[s],r)+e)}for(let e=a;e&&e!==l;e=e.parentNode)i.push(t.nodeIndex(e,r));return i},Il=(e,t,r)=>{let n=0;return B.each(e.select(t),e=>{if("all"!==e.getAttribute("data-mce-bogus")){if(e===r)return!1;n++}}),n},Fl=(e,t)=>{var r,n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;J(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(t?o:o-1,r.length-1)])&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))},Ul=e=>(Fl(e,!0),Fl(e,!1),e),zl=(e,t)=>{if(J(e)&&(e=qi(e,t),Ll(e)))return e;if(Si(e)){t=(e=P(e)&&ki(e)?e.parentNode:e).previousSibling;if(Ll(t))return t;if(t=e.nextSibling,Ll(t))return t}},jl=(e,t,r)=>{var n,o,a,s,i=r.getNode(),l=r.getRng();return"IMG"===i.nodeName||Ll(i)?{name:n=i.nodeName,index:Il(r.dom,n,i)}:(n=l,(i=zl(n.startContainer,n.startOffset)||zl(n.endContainer,n.endOffset))?{name:o=i.tagName,index:Il(r.dom,o,i)}:(o=e,i=t,e=l,l=(t=r).dom,r=Ml(l,o,i,e,!0),a=t.isForward(),s=Pi(e)?{isFakeCaret:!0}:{},t.isCollapsed()?{start:r,forward:a,...s}:{start:r,end:Ml(l,o,i,e,!1),forward:a,...s}))},Hl=(e,t,r)=>{t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",t,"&#xFEFF;"):e.create("span",t)},$l=(e,t)=>{var r=e.dom;let n=e.getRng();var o=r.uniqueId(),a=e.isCollapsed(),s=e.getNode(),i=s.nodeName,l=e.isForward();return"IMG"===i?{name:i,index:Il(r,i,s)}:(i=Ul(n.cloneRange()),a||(i.collapse(!1),s=Hl(r,o+"_end",t),_l(r,i,s)),(n=Ul(n)).collapse(!0),a=Hl(r,o+"_start",t),_l(r,n,a),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l})},Vl=(e,t,r=!1)=>{return 2===t?jl(wi,r,e):3===t?(n=(r=e).getRng(),{start:Bl(r.dom.getRoot(),L.fromRangeStart(n)),end:Bl(r.dom.getRoot(),L.fromRangeEnd(n)),forward:r.isForward()}):t?{rng:(n=e).getRng(),forward:n.isForward()}:$l(e,!1);var n},ql=E(jl,N,!0),Wl=r=>{var e=e=>e(r),t=q(r),n=()=>o;const o={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:le,isError:u,map:e=>Yl.value(e(r)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(r)},toOptional:()=>I.some(r)};return o},Kl=r=>{var e=()=>t;const t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:u,isError:le,map:e,mapError:e=>Yl.error(e(r)),bind:e,exists:u,forall:le,getOr:N,or:N,getOrThunk:se,orThunk:se,getOrDie:ae(String(r)),each:V,toOptional:I.none};return t};const Yl={value:Wl,error:Kl,fromOption:(e,t)=>e.fold(()=>Kl(t),Wl)};const Gl=a=>{if(!j(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");const s=[],i={};return K(a,(e,t)=>{var r=Be(e);if(1!==r.length)throw new Error("one and only one name per case");const n=r[0],o=e[n];if(void 0!==i[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!j(o))throw new Error("case arguments must be an array");s.push(n),i[n]=(...r)=>{var e=r.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+o.length+" ("+o+"), got "+e);return{fold:(...e)=>{if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{const t=Be(e);if(s.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+t.join(","));if(Ee(s,e=>D(t,e)))return e[n].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+s.join(", "))},log:e=>{console.log(e,{constructors:s,constructor:n,params:r})}}}}),i},Xl=(Gl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),e=>{const t=[],r=[];return K(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}}),Zl=e=>"inline-command"===e.type||"inline-format"===e.type,Ql=e=>"block-command"===e.type||"block-format"===e.type,Jl=o=>{var e;const a=e=>Yl.error({message:e,pattern:o});var t=(t,r,e)=>{if(void 0===o.format)return void 0!==o.cmd?z(o.cmd)?Yl.value(e(o.cmd,o.value)):a(t+" pattern has non-string `cmd` parameter"):a(t+" pattern is missing both `format` and `cmd` parameters");{let e;if(j(o.format)){if(!Ee(o.format,z))return a(t+" pattern has non-string items in the `format` array");e=o.format}else{if(!z(o.format))return a(t+" pattern has non-string `format` parameter");e=[o.format]}return Yl.value(r(e))}};if(!F(o))return a("Raw pattern is not an object");if(!z(o.start))return a("Raw pattern is missing `start` parameter");if(void 0!==o.end){if(!z(o.end))return a("Inline pattern has non-string `end` parameter");if(0===o.start.length&&0===o.end.length)return a("Inline pattern has empty `start` and `end` parameters");let r=o.start,n=o.end;return 0===n.length&&(n=r,r=""),t("Inline",e=>({type:"inline-format",start:r,end:n,format:e}),(e,t)=>({type:"inline-command",start:r,end:n,cmd:e,value:t}))}if(void 0!==o.replacement)return z(o.replacement)?0===o.start.length?a("Replacement pattern has empty `start` parameter"):Yl.value({type:"inline-command",start:"",end:o.start,cmd:"mceInsertContent",value:o.replacement}):a("Replacement pattern has non-string `replacement` parameter");{const r=null!=(e=o.trigger)?e:"space";return 0===o.start.length?a("Block pattern has empty `start` parameter"):t("Block",e=>({type:"block-format",start:o.start,format:e[0],trigger:r}),(e,t)=>({type:"block-command",start:o.start,cmd:e,value:t,trigger:r}))}},ed=e=>O(e,Ql),td=e=>O(e,Zl),rd=(e,r)=>({...e,blockPatterns:O(e.blockPatterns,e=>{return t=r,("block-command"===(e=e).type||"block-format"===e.type)&&e.trigger===t;var t})}),nd=e=>{e=Xl(T(e,Jl));return K(e.errors,e=>console.error(e.message,e.pattern)),e.values},od=It().deviceType,ad=od.isTouch(),sd=ee.DOM,id=e=>{e=0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return he(e,(e,t)=>{var t=t.split("="),r=t[0],t=1<t.length?t[1]:r;return e[ct(r)]=ct(t),e},{})},ld=e=>v(e,RegExp);n=t=>e=>e.options.get(t);const dd=e=>z(e)||F(e),cd=(n,o="")=>e=>{var t,r=z(e);return r?-1!==e.indexOf("=")?(t=id(e),{value:g(t,n.id).getOr(o),valid:r}):{value:e,valid:r}:{valid:!1,message:"Must be a string."}},md=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:cd(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:cd(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{var t=z(e)&&ft(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{var t=D(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>ne(e)||z(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{var t=!1===e||z(e)||x(e,z);return t?z(e)?{value:T(e.split(","),ct),valid:t}:!j(e)&&!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ic(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{var t=z(e)||x(e,z);return t?{value:j(e)?e:T(e.split(","),ct),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{var t=ne(e)||z(e);return t?!1===e||od.isiPhone()||od.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!ad}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||z(e)||$(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{var t=!1===e||z(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:dd}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:dd}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:dd}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:dd}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>z(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>{return x(e,F)||!1===e?(e=!1===e?[]:e,{value:nd(e),valid:!0}):{valid:!1,message:"Must be an array of objects or false."}},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:e=>{return $(e)?{value:(t=e,e=>{e=t(e);return nd(e)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>x(e,ld)?{value:e,valid:!0}:ld(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:e=>{var t=D(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:e=>{var t=D(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Os.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:sd.getAttrib(e.getElement(),"placeholder")})})},ud=n("iframe_attrs"),fd=n("doctype"),gd=n("document_base_url"),pd=n("body_id"),hd=n("body_class"),vd=n("content_security_policy"),bd=n("br_in_pre"),yd=n("forced_root_block"),Cd=n("forced_root_block_attrs"),wd=n("newline_behavior"),Ed=n("br_newline_selector"),xd=n("no_newline_selector"),kd=n("keep_styles"),_d=n("end_container_on_empty_block"),Sd=n("automatic_uploads"),Nd=n("images_reuse_filename"),Rd=n("images_replace_blob_uris"),Ad=n("icons"),Dd=n("icons_url"),Td=n("images_upload_url"),Od=n("images_upload_base_path"),Bd=n("images_upload_credentials"),Pd=n("images_upload_handler"),Ld=n("content_css_cors"),Md=n("referrer_policy"),Id=n("language"),Fd=n("language_url"),Ud=n("indent_use_margin"),zd=n("indentation"),jd=n("content_css"),Hd=n("content_style"),$d=n("font_css"),Vd=n("directionality"),qd=n("inline_boundaries_selector"),Wd=n("object_resizing"),Kd=n("resize_img_proportional"),Yd=n("placeholder"),Gd=n("event_root"),Xd=n("service_message"),Zd=n("theme"),Qd=n("theme_url"),Jd=n("model"),ec=n("model_url"),tc=n("inline_boundaries"),rc=n("formats"),nc=n("preview_styles"),oc=n("format_empty_lines"),ac=n("format_noneditable_selector"),sc=n("custom_ui_selector"),ic=n("inline"),lc=n("hidden_input"),dc=n("submit_patch"),cc=n("add_form_submit_trigger"),mc=n("add_unload_trigger"),uc=n("custom_undo_redo_levels"),fc=n("disable_nodechange"),gc=n("readonly"),pc=n("editable_root"),hc=n("content_css_cors"),vc=n("plugins"),bc=n("external_plugins"),yc=n("block_unsupported_drop"),Cc=n("visual"),wc=n("visual_table_class"),Ec=n("visual_anchor_class"),xc=n("iframe_aria_text"),kc=n("setup"),_c=n("init_instance_callback"),Sc=n("urlconverter_callback"),Nc=n("auto_focus"),Rc=n("browser_spellcheck"),Ac=n("protect"),Dc=n("paste_block_drop"),Tc=n("paste_data_images"),Oc=n("paste_preprocess"),Bc=n("paste_postprocess"),Pc=n("newdocument_content"),Lc=n("paste_webkit_styles"),Mc=n("paste_remove_styles_if_webkit"),Ic=n("paste_merge_formats"),Fc=n("smart_paste"),Uc=n("paste_as_text"),zc=n("paste_tab_spaces"),jc=n("allow_html_data_urls"),Hc=n("text_patterns"),$c=n("text_patterns_lookup"),Vc=n("noneditable_class"),qc=n("editable_class"),Wc=n("noneditable_regexp"),Kc=n("preserve_cdata"),Yc=n("highlight_on_focus"),Gc=n("xss_sanitization"),Xc=n("init_content_sync"),Zc=e=>B.explode(e.options.get("images_file_types")),Qc=n("table_tab_navigation"),Jc=n("details_initial_state"),em=n("details_serialized_state"),tm=n("sandbox_iframes"),rm=e=>e.options.get("sandbox_iframes_exclusions"),nm=n("convert_unsafe_embeds"),om=n("license_key"),am=n("api_key"),sm=J,im=P,lm=e=>{var t=e.parentNode;t&&t.removeChild(e)},dm=e=>{var t=wi(e);return{count:e.length-t.length,text:t}},cm=e=>{for(var t;-1!==(t=e.data.lastIndexOf(yi));)e.deleteData(t,1)},mm=(e,t)=>(pm(e),t),um=(e,t)=>{const r=t.container();var n=((e,t)=>{e=ue(e,t);return-1===e?I.none():I.some(e)})(De(r.childNodes),e).map(e=>e<t.offset()?L(r,t.offset()-1):t).getOr(t);return pm(e),n},fm=(e,t)=>{return im(e)&&t.container()===e?(r=e,n=t,o=dm(r.data.substr(0,n.offset())),a=dm(r.data.substr(n.offset())),0<(o.text+a.text).length?(cm(r),L(r,n.offset()-o.count)):n):mm(e,t);var r,n,o,a},gm=(e,t)=>{return L.isTextPosition(t)?fm(e,t):(e=e,((t=t).container()===e.parentNode?um:mm)(e,t))},pm=e=>{sm(e)&&Si(e)&&(Ni(e)?e.removeAttribute("data-mce-caret"):lm(e)),im(e)&&(cm(e),0===e.data.length)&&lm(e)},hm=b,vm=wo,bm=yo,ym=(e,t,r)=>{var n,o=Ii(t.getBoundingClientRect(),r);let a,s,i=(s="BODY"===e.tagName?(n=e.ownerDocument.documentElement,a=e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop):(n=e.getBoundingClientRect(),a=e.scrollLeft-n.left,e.scrollTop-n.top),o.left+=a,o.right+=a,o.top+=s,o.bottom+=s,o.width=1,t.offsetWidth-t.clientWidth);return 0<i&&(r&&(i*=-1),o.left+=i,o.right+=i),o},Cm=(e,i,l,d)=>{const c=Lo();let m,u;const f=yd(e),g=e.dom;const p=()=>{var r,e=i,n=Kn(Z.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<n.length;t++){var o,a=n[t].dom;let e=a.previousSibling;Ti(e)&&(1===(o=e.data).length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(o.length-1,1)),e=a.nextSibling,Di(e)&&(1===e.data.length?null!=(r=e.parentNode)&&r.removeChild(e):e.deleteData(0,1))}u&&(pm(u),u=null),c.on(e=>{g.remove(e.caret),c.clear()}),m&&(clearInterval(m),m=void 0)};return{show:(e,t)=>{let r;var n,o,a,s;return p(),bm(t)?null:(l(t)?(n=f,a=e,(s=(null!=(s=(o=t).ownerDocument)?s:document).createElement(n)).setAttribute("data-mce-caret",a?"before":"after"),s.setAttribute("data-mce-bogus","all"),s.appendChild(vi().dom),n=o.parentNode,a?null!=n&&n.insertBefore(s,o):o.nextSibling?null!=n&&n.insertBefore(s,o.nextSibling):null!=n&&n.appendChild(s),a=s,o=ym(i,t,e),g.setStyle(a,"top",o.top),g.setStyle(a,"caret-color","transparent"),u=a,n=g.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"}),g.setStyles(n,{...o}),g.add(i,n),c.set({caret:n,element:t,before:e}),e&&g.addClass(n,"mce-visual-caret-before"),m=setInterval(()=>{c.on(e=>{d()?g.toggleClass(e.caret,"mce-visual-caret-hidden"):g.addClass(e.caret,"mce-visual-caret-hidden")})},500),(r=t.ownerDocument.createRange()).setStart(a,0),r.setEnd(a,0)):(u=((e,t)=>{var r=(null!=(r=e.ownerDocument)?r:document).createTextNode(yi),n=e.parentNode;if(t){t=e.previousSibling;if(xi(t)){if(Si(t))return t;if(Ti(t))return t.splitText(t.data.length-1)}null!=n&&n.insertBefore(r,e)}else{t=e.nextSibling;if(xi(t)){if(Si(t))return t;if(Di(t))return t.splitText(1),t}e.nextSibling?null!=n&&n.insertBefore(r,e.nextSibling):null!=n&&n.appendChild(r)}return r})(t,e),r=t.ownerDocument.createRange(),Em(u.nextSibling)?(r.setStart(u,0),r.setEnd(u,0)):(r.setStart(u,1),r.setEnd(u,1))),r)},hide:p,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(e=>{var t=ym(i,e.element,e.before);g.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(m)}},wm=()=>U.browser.isFirefox(),Em=e=>hm(e)||vm(e),xm=e=>{return(Em(e)||lo(e)&&wm())&&Br(Z.fromDom(e)).exists(an)},km=bo,_m=b,Sm=wo,Nm=t("display","block table table-cell table-caption list-item"),Rm=Si,Am=ki,Dm=J,Tm=P,Om=rl,Bm=e=>0<e,Pm=e=>e<0,Lm=(e,t)=>{for(var r;r=e(t);)if(!Am(r))return r;return null},Mm=(e,t,r,n,o)=>{var a=new Xn(e,n),n=_m(e)||Am(e);let s;if(Pm(t)){if(n&&r(s=Lm(a.prev.bind(a),!0)))return s;for(;s=Lm(a.prev.bind(a),o);)if(r(s))return s}if(Bm(t)){if(n&&r(s=Lm(a.next.bind(a),!0)))return s;for(;s=Lm(a.next.bind(a),o);)if(r(s))return s}return null},Im=(e,t)=>{return Zr(Z.fromDom(e),e=>km(e.dom),e=>e.dom===t).map(e=>e.dom).getOr(t)},Fm=(e,t)=>{for(;e&&e!==t;){if(Nm(e))return e;e=e.parentNode}return null},Um=(e,t,r)=>Fm(e.container(),r)===Fm(t.container(),r),zm=(e,t)=>{var r;return t&&(r=t.container(),t=t.offset(),Dm(r))?I.from(r.childNodes[t+e]):I.none()};var jm,r=(e,t)=>{var r=(null!=(r=t.ownerDocument)?r:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r};const Hm=(e,t,r)=>{var n,o,a,s=e?"previousSibling":"nextSibling";let i=r;for(;i&&i!==t;){let e=i[s];if(e&&Rm(e)&&(e=e[s]),_m(e)||Sm(e)){if(n=t,o=e,a=i,Fm(o,n)===Fm(a,n))return e;break}if(Om(e))break;i=i.parentNode}return null},$m=E(r,!0),Vm=E(r,!1),qm=(e,t,r)=>{let n;var o=E(Hm,!0,t),t=E(Hm,!1,t),a=r.startContainer,s=r.startOffset;if(ki(a)){var i=Tm(a)?a.parentNode:a,l=i.getAttribute("data-mce-caret");if("before"===l&&(n=i.nextSibling,xm(n)))return $m(n);if("after"===l&&(n=i.previousSibling,xm(n)))return Vm(n)}if(r.collapsed&&P(a)){if(Rm(a)){if(1===e){if(n=t(a))return $m(n);if(n=o(a))return Vm(n)}if(-1===e){if(n=o(a))return Vm(n);if(n=t(a))return $m(n)}return r}if(Ti(a)&&s>=a.data.length-1)return 1===e&&(n=t(a))?$m(n):r;if(Di(a)&&s<=1)return-1===e&&(n=o(a))?Vm(n):r;if(s===a.data.length)return(n=t(a))?$m(n):r;if(0===s)return(n=o(a))?Vm(n):r}return r},Wm=(e,t)=>zm(e?0:-1,t).filter(_m),Km=(e,t,r)=>{t=qm(e,t,r);return-1===e?L.fromRangeStart(t):L.fromRangeEnd(t)},Ym=e=>I.from(e.getNode()).map(Z.fromDom),Gm=e=>I.from(e.getNode(!0)).map(Z.fromDom),Xm=(e,t)=>{let r=t;for(;r=e(r);)if(r.isVisible())return r;return r},Zm=(e,t)=>{t=Um(e,t);return!(t||!R(e.getNode()))||t},Qm=((e=jm=jm||{})[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards",b),Jm=P,eu=J,tu=R,ru=rl,nu=e=>{return Ji(e)||(e=e,!!ol(e)&&!he(De(e.getElementsByTagName("*")),(e,t)=>e||Yi(t),!1))},ou=al,au=(e,t)=>{var r=[];let n=e;for(;n&&n!==t;)r.push(n),n=n.parentNode;return r},su=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,iu=(e,t)=>{if(Bm(e)){if(ru(t.previousSibling)&&!Jm(t.previousSibling))return L.before(t);if(Jm(t))return L(t,0)}if(Pm(e)){if(ru(t.nextSibling)&&!Jm(t.nextSibling))return L.after(t);if(Jm(t))return L(t,t.data.length)}return!Pm(e)||tu(t)?L.before(t):L.after(t)},lu=(e,t)=>{var r=t.nextSibling;return r&&ru(r)?Jm(r)?L(r,0):L.before(r):du(jm.Forwards,L.after(t),e)},du=(e,t,r)=>{let n,o,a,s;if(!eu(r)||!t)return null;if(t.isEqual(L.after(r))&&r.lastChild){if(s=L.after(r.lastChild),Pm(e)&&ru(r.lastChild)&&eu(r.lastChild))return tu(r.lastChild)?L.before(r.lastChild):s}else s=t;t=s.container();let i=s.offset();if(Jm(t)){if(Pm(e)&&0<i)return L(t,--i);if(Bm(e)&&i<t.length)return L(t,++i);n=t}else{if(Pm(e)&&0<i&&(o=su(t,i-1),ru(o)))return!nu(o)&&(a=Mm(o,e,ou,o))?Jm(a)?L(a,a.data.length):L.after(a):Jm(o)?L(o,o.data.length):L.before(o);if(Bm(e)&&i<t.childNodes.length&&(o=su(t,i),ru(o)))return tu(o)?lu(r,o):!nu(o)&&(a=Mm(o,e,ou,o))?Jm(a)?L(a,0):L.before(a):Jm(o)?L(o,0):L.after(o);n=o||s.getNode()}if(n&&(Bm(e)&&s.isAtEnd()||Pm(e)&&s.isAtStart())&&(n=Mm(n,e,le,r,!0),ou(n,r)))return iu(e,n);o=n&&Mm(n,e,ou,r);t=Qe(O(au(t,r),Qm));return!t||o&&t.contains(o)?o?iu(e,o):null:s=Bm(e)?L.after(t):L.before(t)},cu=t=>({next:e=>du(jm.Forwards,e,t),prev:e=>du(jm.Backwards,e,t)}),mu=e=>L.isTextPosition(e)?0===e.offset():rl(e.getNode()),uu=e=>{var t;return L.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):rl(e.getNode(!0))},fu=(e,t)=>!L.isTextPosition(e)&&!L.isTextPosition(t)&&e.getNode()===t.getNode(!0),gu=(e,t,r)=>{return e?!fu(t,r)&&(e=t,!(!L.isTextPosition(e)&&R(e.getNode())))&&uu(t)&&mu(r):!fu(r,t)&&mu(t)&&uu(r)},pu=(e,t,r)=>{t=cu(t);return I.from(e?t.next(r):t.prev(r))},hu=(t,r,n)=>pu(t,r,n).bind(e=>Um(n,e,r)&&gu(t,n,e)?pu(t,r,e):I.some(e)),vu=(t,r,e,n)=>hu(t,r,e).bind(e=>n(e)?vu(t,r,e,n):I.some(e)),bu=(e,t)=>{var r,n=e?t.firstChild:t.lastChild;return P(n)?I.some(L(n,e?0:n.data.length)):n?rl(n)?I.some(e?L.before(n):(r=n,R(r)?L.before(r):L.after(r))):(r=t,t=n,t=(n=e)?L.before(t):L.after(t),pu(n,r,t)):I.none()},yu=E(pu,!0),Cu=E(pu,!1),wu=E(bu,!0),Eu=E(bu,!1),xu="_mce_caret",ku=e=>J(e)&&e.id===xu,_u=(e,t)=>{let r=t;for(;r&&r!==e;){if(ku(r))return r;r=r.parentNode}return null},Su=e=>G(e,"name"),Nu=e=>B.isArray(e.start),Ru=e=>!(!Su(e)&&ne(e.forward))||e.forward,Au=(e,t)=>(J(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Du=(e,t,r)=>{return!(t.hasChildNodes()||!_u(e,t)||(e=r,t=(null!=(t=(r=t).ownerDocument)?t:document).createTextNode(yi),r.appendChild(t),e.setStart(t,0),e.setEnd(t,0),0))},Tu=(e,r,t,n)=>{var o=t[r?"start":"end"],a=e.getRoot();if(o){let t=a,e=o[0];for(let e=o.length-1;t&&1<=e;e--){var s=t.childNodes;if(Du(a,t,n))return!0;if(o[e]>s.length-1)return!!Du(a,t,n)||((e,t)=>Eu(e).fold(u,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)))(t,n);t=s[o[e]]}P(t)&&(e=Math.min(o[0],t.data.length)),J(t)&&(e=Math.min(o[0],t.childNodes.length)),r?n.setStart(t,e):n.setEnd(t,e)}return!0},Ou=e=>P(e)&&0<e.data.length,Bu=(r,n,o)=>{var a=r.get(o.id+"_"+n),s=null==a?void 0:a.parentNode,i=o.keep;if(a&&s){let e,t;if(t="start"===n?i?a.hasChildNodes()?(e=a.firstChild,1):Ou(a.nextSibling)?(e=a.nextSibling,0):Ou(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=s,r.nodeIndex(a)+1):(e=s,r.nodeIndex(a)):i?a.hasChildNodes()?(e=a.firstChild,1):Ou(a.previousSibling)?(e=a.previousSibling,a.previousSibling.data.length):(e=s,r.nodeIndex(a)):(e=s,r.nodeIndex(a)),!i){var l,s=a.previousSibling,i=a.nextSibling;for(B.each(B.grep(a.childNodes),e=>{P(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});l=r.get(o.id+"_"+n);)r.remove(l,!0);P(i)&&P(s)&&!U.browser.isOpera()&&(a=s.data.length,s.appendData(i.data),r.remove(i),e=s,t=a)}return I.some(L(e,t))}return I.none()},Pu=(e,t)=>{var r,n,o,a,s,i,l,d,c,m,e=e.dom;if(t){if(Nu(t))return c=t,m=(d=e).createRng(),Tu(d,!0,c,m)&&Tu(d,!1,c,m)?I.some({range:m,forward:Ru(c)}):I.none();if(d=t,z(d.start))return i=e,l=t,m=I.from(Pl(i.getRoot(),l.start)),c=I.from(Pl(i.getRoot(),l.end)),$t(m,c,(e,t)=>{var r=i.createRng();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),{range:r,forward:Ru(l)}});if(s=t,G(s,"id"))return n=e,o=t,s=Bu(n,"start",o),a=Bu(n,"end",o),$t(s,a.or(s),(e,t)=>{var r=n.createRng();return r.setStart(Au(n,e.container()),e.offset()),r.setEnd(Au(n,t.container()),t.offset()),{range:r,forward:Ru(o)}});if(Su(t))return r=e,a=t,I.from(r.select(a.name)[a.index]).map(e=>{var t=r.createRng();return t.selectNode(e),{range:t,forward:!0}});if(s=t,G(s,"rng"))return I.some({range:t.rng,forward:Ru(t)})}return I.none()},Lu=(e,t,r)=>Vl(e,t,r),Mu=(r,e)=>{Pu(r,e).each(({range:e,forward:t})=>{r.setRng(e,t)})},Iu=e=>J(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type");var Fu;Fu=Qn;const Uu=e=>Fu===e,zu=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),ju=e=>!zu(e)&&!Uu(e)&&!Jn(e),Hu=t=>{var r=[];if(t)for(let e=0;e<t.rangeCount;e++)r.push(t.getRangeAt(e));return r},$u=e=>{return O((e=e,we(e,e=>{e=Vi(e);return e?[Z.fromDom(e)]:[]})),gi)},Vu=(e,t)=>{t=t;t=Kn(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:$u(e)},qu=e=>Vu(Hu(e.selection.getSel()),Z.fromDom(e.getBody())),Wu=(e,t)=>tn(e,"table",t),Ku=t=>jr(t).fold(q([t]),e=>[t].concat(Ku(e))),Yu=t=>Hr(t).fold(q([t]),e=>"br"===X(e)?Lr(e).map(e=>[t].concat(Yu(e))).getOr([]):[t].concat(Yu(e))),Gu=(r,e)=>{return $t((n=(t=e).startContainer,t=t.startOffset,P(n)?0===t?I.some(Z.fromDom(n)):I.none():I.from(n.childNodes[t]).map(Z.fromDom)),(t=(n=e).endContainer,n=n.endOffset,P(t)?n===t.data.length?I.some(Z.fromDom(t)):I.none():I.from(t.childNodes[n-1]).map(Z.fromDom)),(e,t)=>{e=be(Ku(r),E(k,e)),t=be(Yu(r),E(k,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,n},Xu=(e,t,r,n)=>{var o=r,a=new Xn(r,o),s=Ue(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!D(["td","th","table"],t.toLowerCase()));let i=r;do{if(P(i)&&0!==B.trim(i.data).length)return void(n?t.setStart(i,0):t.setEnd(i,i.data.length));if(s[i.nodeName])return void(n?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i))}while(i=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Zu=e=>{e=e.selection.getSel();return H(e)&&0<e.rangeCount},Qu=(r,n)=>{var e=qu(r);0<e.length?K(e,e=>{var e=e.dom,t=r.dom.createRng();t.setStartBefore(e),t.setEndAfter(e),n(t,!0)}):n(r.selection.getRng(),!1)},Ju=(e,t,r)=>{t=$l(e,t);r(t),e.moveToBookmark(t)},ef=e=>w(null==e?void 0:e.nodeType),tf=e=>J(e)&&!Iu(e)&&!ku(e)&&!io(e),rf=(e,t)=>{var r;return!(!tf(t)||/^(TD|TH)$/.test(t.nodeName)||(e=e.getAttrib(t,"data-mce-selected"),r=parseInt(e,10),isNaN(r)))&&0<r},nf=(e,t,r)=>{var{selection:n,dom:o}=e,a=n.getNode(),s=b(a),s=(Ju(n,!0,()=>{t()}),s&&b(a));if(s&&o.isChildOf(a,e.getBody()))e.selection.select(a);else if(r(n.getStart())){var i=o;var l=n;var d=l.getRng(),{startContainer:s,startOffset:e}=d,a=l.getNode();if(!rf(i,a)&&J(s)){r=s.childNodes,o=i.getRoot();let t;e<r.length?(n=r[e],t=new Xn(n,null!=(a=i.getParent(n,i.isBlock))?a:o)):(s=r[r.length-1],(t=new Xn(s,null!=(e=i.getParent(s,i.isBlock))?e:o)).next(!0));for(let e=t.current();e;e=t.next()){if("false"===i.getContentEditable(e))return;if(P(e)&&!lf(e))return void(d.setStart(e,0),l.setRng(d))}}return}},of=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(J(e)||!lf(e))return e}},af=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Jo(e,t),sf=(e,t,r)=>e.schema.isValidChild(t,r),lf=(e,t=!1)=>{return!(!H(e)||!P(e))&&(t=t?e.data.replace(/ /g," "):e.data,to(t))},df=(e,t)=>{var r,n,o=e.dom;return tf(t)&&"false"===o.getContentEditable(t)&&(e=e,r=t,n="[data-mce-cef-wrappable]",e=ac(e),n=gt(e)?n:n+","+e,_r(Z.fromDom(r),n))&&0===o.select('[contenteditable="true"]',t).length},cf=(e,r)=>$(e)?e(r):e=H(r)?e.replace(/%(\w+)/g,(e,t)=>r[t]||e):e,mf=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),uf=(t,r)=>{if(oe(t))return null;{let e=String(t);return"color"!==r&&"backgroundColor"!==r||(e=os(e)),"fontWeight"===r&&700===t&&(e="bold"),e="fontFamily"===r?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e}},ff=(e,t,r)=>{e=e.getStyle(t,r);return uf(e,r)},gf=(t,e)=>{let r;return t.getParent(e,e=>!!J(e)&&!!(r=t.getStyle(e,"text-decoration"))&&"none"!==r),r},pf=(e,t,r)=>e.getParents(t,r,e.getRoot()),hf=(e,t,r)=>{e=e.formatter.get(t);return H(e)&&W(e,r)},vf=(t,e,n)=>{const r=["inline","block","selector","attributes","styles","classes"],o=e=>Ue(e,(e,t)=>W(r,e=>e===t));return hf(t,e,e=>{const r=o(e);return hf(t,n,e=>{var t,e=o(e);return t=r,s(i).eq(t,e)})})},bf=e=>$e(e,"block"),yf=e=>$e(e,"selector"),Cf=e=>$e(e,"inline"),wf=e=>yf(e)&&!1!==e.expand&&!Cf(e),Ef=e=>0<(e=>{var t=[];let r=e;for(;r;){if(P(r)&&r.data!==yi||1<r.childNodes.length)return[];J(r)&&t.push(r),r=r.firstChild}return t})(e).length,xf=e=>ku(e.dom)&&Ef(e.dom),kf=Iu,_f=pf,Sf=lf,Nf=af,Rf=(e,t)=>{let r=t;for(;r;){if(J(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Af=(e,t,r,n)=>{var o=t.data;if(e){for(let e=r;0<e;e--)if(n(o.charAt(e-1)))return e}else for(let e=r;e<o.length;e++)if(n(o.charAt(e)))return e;return-1},Df=(e,t,r)=>Af(e,t,r,e=>Uu(e)||zu(e)),Tf=(e,t,r)=>Af(e,t,r,ju),Of=(o,e,t,r,a,n)=>{let s;const i=o.getParent(t,o.isBlock)||e,l=(e,t,r)=>{var n=ai(o),n=a?n.backwards:n.forwards;return I.from(n(e,t,(e,t)=>kf(e.parentNode)?-1:(s=e,r(a,e,t)),i))};return l(t,r,Df).bind(e=>n?l(e.container,e.offset+(a?-1:0),Tf):I.some(e)).orThunk(()=>s?I.some({container:s,offset:a?0:s.length}):I.none())},Bf=(r,n,o,e,t)=>{var t=e[t],a=(P(e)&&gt(e.data)&&t&&(e=t),_f(r,e));for(let t=0;t<a.length;t++)for(let e=0;e<n.length;e++){var s=n[e];if((!H(s.collapsed)||s.collapsed===o.collapsed)&&(yf(s)&&r.is(a[t],s.selector)))return a[t]}return e},Pf=(t,e,r,n)=>{let o=r;const a=t.getRoot();var s,e=e[0];if((o=bf(e)?e.wrapper?null:t.getParent(r,e.block,a):o)||(s=null!=(s=t.getParent(r,"LI,TD,TH,SUMMARY"))?s:a,o=t.getParent(P(r)?r.parentNode:r,e=>e!==a&&Nf(t.schema,e),s)),!(o=o&&bf(e)&&e.wrapper?_f(t,o,"ul,ol").reverse()[0]||o:o))for(o=r;o&&o[n]&&!t.isBlock(o[n])&&(o=o[n],!mf(o,"br")););return o||r},Lf=(e,t,r,n)=>{var o=r.parentNode;return!H(r[n])&&(!(o!==t&&!oe(o)&&!e.isBlock(o))||Lf(e,t,o,n))},Mf=(t,e,r,n,o)=>{let a=r;var s,i=o?"previousSibling":"nextSibling",l=t.getRoot();if(!P(r)||Sf(r)||!(o?0<n:n<r.data.length))for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let e=a[i];e;e=e[i]){var d=P(e)&&!Lf(t,l,e,i);if(!kf(e)&&(s=e,!R(s)||!s.getAttribute("data-mce-bogus")||s.nextSibling)&&!Sf(e,d))return a}if(a===l||a.parentNode===l){r=a;break}a=a.parentNode}return r},If=e=>kf(e.parentNode)||kf(e),Ff=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:a,endContainer:s,endOffset:i}=t;var l=r[0];return J(o)&&o.hasChildNodes()&&(o=qi(o,a),P(o))&&(a=0),J(s)&&s.hasChildNodes()&&(s=qi(s,t.collapsed?i:i-1),P(s))&&(i=s.data.length),o=Rf(e,o),s=Rf(e,s),If(o)&&(o=kf(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,P(o))&&(a=t.collapsed?o.length:0),If(s)&&(s=kf(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,P(s))&&(i=t.collapsed?0:s.length),t.collapsed&&(Of(e,e.getRoot(),o,a,!0,n).each(({container:e,offset:t})=>{o=e,a=t}),Of(e,e.getRoot(),s,i,!1,n).each(({container:e,offset:t})=>{s=e,i=t})),(Cf(l)||l.block_expand)&&(Cf(l)&&P(o)&&0!==a||(o=Mf(e,r,o,a,!0)),Cf(l)&&P(s)&&i!==s.data.length||(s=Mf(e,r,s,i,!1))),wf(l)&&(o=Bf(e,r,t,o,"previousSibling"),s=Bf(e,r,t,s,"nextSibling")),(bf(l)||yf(l))&&(o=Pf(e,r,o,"previousSibling"),s=Pf(e,r,s,"nextSibling"),bf(l))&&(e.isBlock(o)||(o=Mf(e,r,o,a,!0),P(o)&&(a=0)),e.isBlock(s)||(s=Mf(e,r,s,i,!1),P(s)&&(i=s.data.length))),J(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),J(s)&&s.parentNode&&(i=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:i}},Uf=(r,e,i)=>{const n=e.startOffset,o=qi(e.startContainer,n),a=e.endOffset,s=qi(e.endContainer,a-1),l=e=>{var t=e[0],t=(P(t)&&t===o&&n>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===a&&0<e.length&&t===s&&P(t)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n};var t,c,e=(e,t)=>r.getParent(e,e=>e.parentNode===t,t),m=(r,n,o)=>{var a=o?"nextSibling":"previousSibling";for(let e=r,t=void e.parentNode;e&&e!==n;e=t){t=e.parentNode;var s=d(e===r?e:e[a],a);s.length&&(o||s.reverse(),i(l(s)))}};return o===s?i(l([o])):(c=null!=(c=r.findCommonAncestor(o,s))?c:r.getRoot(),r.isChildOf(o,s)?m(o,c,!0):r.isChildOf(s,o)?m(s,c):(t=e(o,c)||o,e=e(s,c)||s,m(o,t,!0),(c=d(t===o?t:t.nextSibling,"nextSibling",e===s?e.nextSibling:e)).length&&i(l(c)),void m(s,e)))},zf=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],jf=(r,n,o,a)=>Or(n).fold(()=>"skipping",e=>{return"br"===a||(t=n,tr(t)&&ii(t)===yi)?"valid":(t=n,er(t)&&Er(t,Ms())?"existing":ku(n.dom)?"caret":W(zf,e=>_r(n,e))?"valid-block":sf(r,o,a)&&sf(r,X(e),o)?"valid":"invalid-child");var t}),Hf=(e,t)=>{var r=Ff(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)},$f=(e,t,r,n,o,a)=>{const{uid:s=t,...i}=r;yr(e,Ms()),sr(e,""+Fs(),s),sr(e,""+Is(),n);var l,{attributes:r={},classes:t=[]}=o(s,i);ir(e,r),l=e,n=t,K(n,e=>{yr(l,e)}),a&&(0<t.length&&sr(e,""+zs(),t.join(",")),0<(o=Be(r)).length)&&sr(e,""+js(),o.join(","))},Vf=(e,t,r,n,o)=>{e=Z.fromTag("span",e);return $f(e,t,r,n,o,!1),e},qf=(r,e,n,o,a,s)=>{const i=[],l=Vf(r.getDoc(),n,s,o,a),d=Lo(),c=()=>{d.clear()},m=e=>{K(e,t)},t=e=>{switch(jf(r,e,"span",X(e))){case"invalid-child":c();var t=Ur(e);m(t),c();break;case"valid-block":c(),$f(e,n,s,o,a,!0);break;case"valid":t=d.get().getOrThunk(()=>{var e=ti(l);return i.push(e),d.set(e),e});xn(e,t)}};return Uf(r.dom,e,e=>{c();e=T(e,Z.fromDom),m(e)}),i},Wf=n=>{const o=(()=>{const r={};return{register:(e,t)=>{r[e]={name:e,settings:t}},lookup:e=>g(r,e).map(e=>e.settings),getNames:()=>Be(r)}})(),r=(Ys(n,o),Ks(n,o)),a=or("span"),s=e=>{K(e,e=>{var t,r;a(e)?Nn(e):(t=e,wr(t,Ms()),mr(t,""+Fs()),mr(t,""+Is()),mr(t,""+Us()),e=dr(t,""+js()).map(e=>e.split(",")).getOr([]),r=dr(t,""+zs()).map(e=>e.split(",")).getOr([]),K(e,e=>mr(t,e)),Js(t,r),mr(t,""+zs()),mr(t,""+js()))})};return{register:(e,t)=>{o.register(e,t)},annotate:(t,r)=>{o.lookup(t).each(e=>{var o,a,s,i;a=t,s=e,i=r,(o=n).undoManager.transact(()=>{var e=o.selection,t=e.getRng(),r=0<qu(o).length;const n=Qs("mce-annotation");t.collapsed&&!r&&Hf(o,t),e.getRng().collapsed&&!r?(t=Vf(o.getDoc(),n,i,a,s.decorate),Tn(t,Qn),e.getRng().insertNode(t.dom),e.select(t.dom)):Ju(e,!1,()=>{Qu(o,e=>{qf(o,e,n,a,s.decorate,i)})})})})},annotationChanged:(e,t)=>{r.addListener(e,t)},remove:e=>{$s(n,I.some(e)).each(({elements:e})=>{var t=n.selection.getBookmark();s(e),n.selection.moveToBookmark(t)})},removeAll:e=>{var t=n.selection.getBookmark();Y(Ws(n,e),(e,t)=>{s(e)}),n.selection.moveToBookmark(t)},getAll:e=>{e=Ws(n,e);return Le(e,e=>T(e,e=>e.dom))}}},Kf=e=>({getBookmark:E(Lu,e),moveToBookmark:E(Mu,e)}),Yf=(Kf.isBookmarkNode=Iu,(t,r,e)=>!e.collapsed&&W(e.getClientRects(),e=>Hi(e,t,r))),Gf=(e,t,r)=>{e.dispatch(t,r)},Xf=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},Zf=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},Qf=(e,t)=>e.dispatch("BeforeSetContent",t),Jf=(e,t)=>e.dispatch("SetContent",t),eg=(e,t)=>e.dispatch("BeforeGetContent",t),tg=(e,t)=>e.dispatch("GetContent",t),rg=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},ng=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),te={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||te.metaKeyPressed(e),metaKeyPressed:e=>U.os.isMacOS()||U.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},og="data-mce-selected",ag=Math.abs,sg=Math.round,ig={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},lg=(n,c)=>{const m=c.dom,u=c.getDoc(),f=document,g=c.getBody();let p,h,v,b,y,C,w,I,F,E,x,k,l,_,S,N,R;const d=e=>H(e)&&(vo(e)||m.is(e,"figure.image")),A=e=>wo(e)||m.hasClass(e,"mce-preview-object"),e=e=>{var t,r,n,o=e.target;t=e,r=c.selection.getRng(),("longpress"===(n=t).type||0===n.type.indexOf("touch")?(n=t.touches[0],!d(t.target)||Yf(n.clientX,n.clientY,r)):!d(t.target)||Yf(t.clientX,t.clientY,r))||e.isDefaultPrevented()||c.selection.select(o)},D=e=>m.hasClass(e,"mce-preview-object")&&H(e.firstElementChild)?[e,e.firstElementChild]:m.is(e,"figure.image")?[e.querySelector("img")]:[e],r=e=>{var t=Wd(c);return!!t&&"false"!==e.getAttribute("data-mce-resize")&&e!==c.getBody()&&(m.hasClass(e,"mce-preview-object")&&H(e.firstElementChild)?_r(Z.fromDom(e.firstElementChild),t):_r(Z.fromDom(e),t))},a=(e,t,r)=>{H(r)&&(e=D(e),K(e,e=>{e.style[t]||!c.schema.isValid(e.nodeName.toLowerCase(),t)?m.setStyle(e,t,r):m.setAttrib(e,t,""+r)}))},T=(e,t,r)=>{a(e,"width",t),a(e,"height",r)},O=e=>{let t,r,n;var o,a,s,i;t=e.screenX-C,r=e.screenY-w,_=t*b[2]+E,S=r*b[3]+x,_=_<5?5:_,S=S<5?5:S,(n=(d(p)||A(p))&&!1!==Kd(c)?!te.modifierPressed(e):te.modifierPressed(e))&&(ag(t)>ag(r)?(S=sg(_*k),_=sg(S/k)):(_=sg(S/k),S=sg(_*k))),T(h,_,S),e=0<(e=b.startPos.x+t)?e:0,o=0<(o=b.startPos.y+r)?o:0,m.setStyles(v,{left:e,top:o,display:"block"}),v.innerHTML=_+" &times; "+S,b[2]<0&&h.clientWidth<=_&&m.setStyle(h,"left",I+(E-_)),b[3]<0&&h.clientHeight<=S&&m.setStyle(h,"top",F+(x-S)),(t=g.scrollWidth-N)+(r=g.scrollHeight-R)!=0&&m.setStyles(v,{left:e-t,top:o-r}),l||(e=c,o=p,a=E,s=x,i="corner-"+b.name,e.dispatch("ObjectResizeStart",{target:o,width:a,height:s,origin:i}),l=!0)},B=()=>{var e,t,r,n,o=l;l=!1,o&&(a(p,"width",_),a(p,"height",S)),m.unbind(u,"mousemove",O),m.unbind(u,"mouseup",B),f!==u&&(m.unbind(f,"mousemove",O),m.unbind(f,"mouseup",B)),m.remove(h),m.remove(v),m.remove(y),s(p),o&&(o=c,e=p,t=_,r=S,n="corner-"+b.name,o.dispatch("ObjectResized",{target:e,width:t,height:r,origin:n}),m.setAttrib(p,"style",m.getAttrib(p,"style"))),c.nodeChanged()},s=e=>{L();var t=m.getPos(e,g);const s=t.x,i=t.y;t=e.getBoundingClientRect();const l=t.width||t.right-t.left,d=t.height||t.bottom-t.top;p!==e&&(P(),p=e,_=S=0);t=c.dispatch("ObjectSelected",{target:e});r(e)&&!t.isDefaultPrevented()?Y(ig,(o,a)=>{const t=e=>{var r,t,n=D(p)[0];C=e.screenX,w=e.screenY,E=n.clientWidth,x=n.clientHeight,k=x/E,(b=o).name=a,b.startPos={x:l*o[0]+s,y:d*o[1]+i},N=g.scrollWidth,R=g.scrollHeight,y=m.add(g,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),m.setStyles(y,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),h=(r=m,e=p,A(e)?r.create("img",{src:U.transparentSrc}):lo(e)?(n=lt(b.name,"n")?Re:Ae,t=e.cloneNode(!0),n(r.select("tr",t)).each(e=>{var t=r.select("td,th",e);r.setStyle(e,"height",null),K(t,e=>r.setStyle(e,"height",null))}),t):e.cloneNode(!0)),m.addClass(h,"mce-clonedresizable"),m.setAttrib(h,"data-mce-bogus","all"),h.contentEditable="false",m.setStyles(h,{left:s,top:i,margin:0}),T(h,l,d),h.removeAttribute(og),g.appendChild(h),m.bind(u,"mousemove",O),m.bind(u,"mouseup",B),f!==u&&(m.bind(f,"mousemove",O),m.bind(f,"mouseup",B)),v=m.add(g,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},E+" &times; "+x)};var e=m.get("mceResizeHandle"+a);e&&m.remove(e),e=m.add(g,"div",{id:"mceResizeHandle"+a,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+a+"-resize; margin:0; padding:0"}),m.bind(e,"mousedown",e=>{e.stopImmediatePropagation(),e.preventDefault(),t(e)}),o.elm=e,m.setStyles(e,{left:l*o[0]+s-e.offsetWidth/2,top:d*o[1]+i-e.offsetHeight/2})}):P(!1)},o=Ps(s,0),P=(e=!0)=>{o.cancel(),L(),p&&e&&p.removeAttribute(og),Y(ig,(e,t)=>{t=m.get("mceResizeHandle"+t);t&&(m.unbind(t),m.remove(t))})},i=(e,t)=>m.isChildOf(e,t),t=e=>{if(!(l||c.removed||c.composing)){var e="mousedown"===e.type?e.target:n.getNode(),e=nn(Z.fromDom(e),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>m.isEditable(e.parentElement)||"IMG"===e.nodeName&&m.isEditable(e)).getOrUndefined(),t=H(e)?m.getAttrib(e,og,"1"):"1";if(K(m.select(`img[${og}],hr[${og}]`),e=>{e.removeAttribute(og)}),H(e)&&i(e,g)&&c.hasFocus()){M();var r=n.getStart(!0);if(i(r,e)&&i(n.getEnd(!0),e))return m.setAttrib(e,og,t),void o.throttle(e)}P()}},L=()=>{Y(ig,e=>{e.elm&&(m.unbind(e.elm),delete e.elm)})},M=()=>{try{c.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};c.on("init",()=>{M(),c.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",t),c.on("keyup compositionend",e=>{p&&"TABLE"===p.nodeName&&t(e)}),c.on("hide blur",P),c.on("contextmenu longpress",e,!0)}),c.on("remove",L);return{isResizable:r,showResizeRect:s,hideResizeRect:P,updateResizeRect:t,destroy:()=>{o.cancel(),p=h=y=null}}},dg=(e,t,r)=>{var n,o,e=e.document.createRange();return n=e,t.fold(e=>{n.setStartBefore(e.dom)},(e,t)=>{n.setStart(e.dom,t)},e=>{n.setStartAfter(e.dom)}),o=e,r.fold(e=>{o.setEndBefore(e.dom)},(e,t)=>{o.setEnd(e.dom,t)},e=>{o.setEndAfter(e.dom)}),e},cg=(e,t,r,n,o)=>{e=e.document.createRange();return e.setStart(t.dom,r),e.setEnd(n.dom,o),e},mg=Gl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ug=(e,t,r)=>t(Z.fromDom(r.startContainer),r.startOffset,Z.fromDom(r.endContainer),r.endOffset),fg=(e,t)=>{o=e;var o,e=t.match({domRange:e=>({ltr:q(e),rtl:I.none}),relative:(e,t)=>({ltr:Je(()=>dg(o,e,t)),rtl:Je(()=>I.some(dg(o,t,e)))}),exact:(e,t,r,n)=>({ltr:Je(()=>cg(o,e,t,r,n)),rtl:Je(()=>I.some(cg(o,r,n,e,t)))})});{const r=(t=e).ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>mg.rtl(Z.fromDom(e.endContainer),e.endOffset,Z.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>ug(0,mg.ltr,r)):ug(0,mg.ltr,r)}};mg.ltr,mg.rtl;const gg={create:(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n})},pg=(e,t,r)=>{return e.caretPositionFromPoint?(n=e,o=t,a=r,I.from(null==(s=n.caretPositionFromPoint)?void 0:s.call(n,o,a)).bind(e=>{var t;return null===e.offsetNode?I.none():((t=n.createRange()).setStart(e.offsetNode,e.offset),t.collapse(),I.some(t))})):e.caretRangeFromPoint?(s=e,o=t,a=r,I.from(null==(e=s.caretRangeFromPoint)?void 0:e.call(s,o,a))):I.none();var n,o,a,s},hg=(e,t,r)=>{e=e.document;return pg(e,t,r).map(e=>gg.create(Z.fromDom(e.startContainer),e.startOffset,Z.fromDom(e.endContainer),e.endOffset))};n=Gl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);const vg={before:n.before,on:n.on,after:n.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(N,N,N)},bg=Gl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);const yg={domRange:bg.domRange,relative:bg.relative,exact:bg.exact,exactFromRange:e=>bg.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>Z.fromDom(e.startContainer),relative:(e,t)=>vg.getStart(e),exact:(e,t,r,n)=>e});return Tr(e)},range:gg.create},Cg=(e,t)=>{var r=X(e);return"input"===r?vg.after(e):D(["br","img"],r)?0===t?vg.before(e):vg.after(e):vg.on(e,t)},wg=(e,t)=>{e=e.fold(vg.before,Cg,vg.after),t=t.fold(vg.before,Cg,vg.after);return yg.relative(e,t)},Eg=(e,t,r,n)=>{e=Cg(e,t),t=Cg(r,n);return yg.relative(e,t)},xg=(e,t)=>{const r=(t||document).createDocumentFragment();return K(e,e=>{r.appendChild(e.dom)}),Z.fromDom(r)},kg=e=>{const o=yg.getWin(e).dom;var t=(e,t,r,n)=>cg(o,e,t,r,n),e=e.match({domRange:e=>{var t=Z.fromDom(e.startContainer),r=Z.fromDom(e.endContainer);return Eg(t,e.startOffset,r,e.endOffset)},relative:wg,exact:Eg});return fg(o,e).match({ltr:t,rtl:t})},_g=(e,t,r)=>{var n=Tr(Z.fromDom(r));return n=n.dom,e=e,t=t,hg(n,e,t).map(e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},Sg=(e,t)=>H(e)&&H(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Ng=(e,t,r)=>null!==((e,t,r)=>{let n=e;for(;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null})(e,t,r),Rg=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Xn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(R(o))return!0;return!1},Ag=(e,t,r,n,o)=>{var a,s=e.getRoot(),i=e.schema.getNonEmptyElements(),l=o.parentNode;let d;if(!l)return I.none();var c=e.getParent(l,e.isBlock)||s;if(n&&R(o)&&t&&e.isEmpty(c))return I.some(L(l,e.nodeIndex(o)));for(var m,u,f=new Xn(o,c);a=f[n?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||(m=a,u=s,Si(m)&&!Ng(m,u,ku)))return I.none();if(P(a)&&0<a.data.length)return((e,t,r)=>Ng(e,t,e=>e.nodeName===r))(a,s,"A")?I.none():I.some(L(a,n?a.data.length:0));if(e.isBlock(a)||i[a.nodeName.toLowerCase()])return I.none();d=a}return!go(d)&&r&&d?I.some(L(d,0)):I.none()},Dg=(e,t,r,n)=>{var o=e.getRoot();let a,s=!1,i=r?n.startContainer:n.endContainer,l=r?n.startOffset:n.endOffset;var n=J(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let c=r;if(Si(i))return I.none();if(J(i)&&l>i.childNodes.length-1&&(c=!1),po(i)&&(i=o,l=0),i===o){if(c&&(a=i.childNodes[0<l?l-1:0])){if(Si(a))return I.none();if(d[a.nodeName]||lo(a))return I.none()}if(i.hasChildNodes()){if(l=Math.min(!c&&0<l?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=P(i)&&n?i.data.length:0,!t&&i===o.lastChild&&lo(i))return I.none();if(((e,t)=>{let r=t;for(;r&&r!==e;){if(b(r))return!0;r=r.parentNode}return!1})(o,i)||Si(i))return I.none();if(xo(i))return I.none();if(i.hasChildNodes()&&!lo(i)){a=i;var m=new Xn(i,o);do{if(b(a)||Si(a)){s=!1;break}if(P(a)&&0<a.data.length){l=c?0:a.data.length,i=a,s=!0;break}if(d[a.nodeName.toLowerCase()]&&!Co(a)){l=e.nodeIndex(a),i=a.parentNode,c||l++,s=!0;break}}while(a=c?m.next():m.prev())}}}return t&&(P(i)&&0===l&&Ag(e,n,t,!0,i).each(e=>{i=e.container(),l=e.offset(),s=!0}),J(i))&&(a=(a=i.childNodes[l])||i.childNodes[l-1])&&R(a)&&(r=a,o="A",(null==(r=r.previousSibling)?void 0:r.nodeName)!==o)&&!Rg(e,a,!1)&&!Rg(e,a,!0)&&Ag(e,n,t,!0,a).each(e=>{i=e.container(),l=e.offset(),s=!0}),c&&!t&&P(i)&&l===i.data.length&&Ag(e,n,t,!1,i).each(e=>{i=e.container(),l=e.offset(),s=!0}),s&&i?I.some(L(i,l)):I.none()},Tg=(e,t)=>{const r=t.collapsed,n=t.cloneRange(),o=L.fromRangeStart(t);return Dg(e,r,!0,n).each(e=>{r&&L.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||Dg(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),Sg(t,n)?I.none():I.some(n)},Og=(e,t)=>e.splitText(t),Bg=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;return t===n&&P(t)?0<r&&r<t.data.length&&(n=Og(t,r),t=n.previousSibling,o>r?(o-=r,e=Og(n,o).previousSibling,t=n=e,o=e.data.length,r=0):o=0):(P(t)&&0<r&&r<t.data.length&&(t=Og(t,r),r=0),P(n)&&0<o&&o<n.data.length&&(e=Og(n,o).previousSibling,n=e,o=e.data.length)),{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},Pg=n=>{return{walk:(e,t)=>Uf(n,e,t),split:Bg,expand:(e,t={type:"word"})=>{var r;return"word"===t.type?(t=Ff(n,e,[{inline:"span"}]),(r=n.createRng()).setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),r):e},normalize:t=>Tg(n,t).fold(u,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))}};Pg.compareRanges=Sg,Pg.getCaretRangeFromPoint=_g,Pg.getSelectedNode=Vi,Pg.getNode=qi;const Lg=((r,n)=>{var e=e=>{var t=n(e);return t<=0||null===t?(e=fn(e,r),parseFloat(e)||0):t};const o=(r,e)=>he(e,(e,t)=>{t=fn(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!w(t)&&!t.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+t);e=e.dom;ln(e)&&(e.style[r]=t+"px")},get:e,getOuter:e,aggregate:o,max:(e,t,r)=>{e=o(e,r);return e<t?t-e:0}}})("height",e=>{var t=e.dom;return Gr(e)?t.getBoundingClientRect().height:t.offsetHeight}),Mg=()=>Z.fromDom(document),Ig=(r,e)=>{return r.view(e).fold(q([]),e=>{var t=r.owner(e),t=Ig(r,t);return[e].concat(t)})};var Fg=Object.freeze({__proto__:null,view:e=>{return(e.dom===document?I.none():I.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(Z.fromDom)},owner:e=>Dr(e)});const Ug=e=>{var t=Mg(),t=zn(t),r=((e,t)=>{e=t.owner(e);return Ig(t,e)})(e,Fg),e=Un(e),r=pe(r,(e,t)=>{t=Un(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});return Mn(r.left+e.left+t.left,r.top+e.top+t.top)},zg=e=>"textarea"===X(e),jg=(e,t)=>{o=(a=e).dom.ownerDocument,s=o.body,i=o.defaultView,o=o.documentElement;var r,n,o,a,s=s===a.dom?Mn(s.offsetLeft,s.offsetTop):(r=Fn(null==i?void 0:i.pageYOffset,o.scrollTop),i=Fn(null==i?void 0:i.pageXOffset,o.scrollLeft),n=Fn(o.clientTop,s.clientTop),o=Fn(o.clientLeft,s.clientLeft),Un(a).translate(i-o,r-n)),i=(a=e,Lg.get(a));return{element:e,bottom:s.top+i,height:i,pos:s,cleanup:t}},Hg=(e,t)=>{e=e,t=t;var r,e=0===(r=Ur(e)).length||zg(e)?{element:e,offset:t}:t<r.length&&!zg(r[t])?{element:r[t],offset:0}:(r=r[r.length-1],zg(r)?{element:e,offset:t}:"img"===X(r)?{element:r,offset:1}:tr(r)?{element:r,offset:ii(r).length}:{element:r,offset:Ur(r).length});const n=Z.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+yi+"</span>");return yn(e.element,n),jg(n,()=>Q(n))},$g=(d,c,m,u)=>{{var e=d,t=(e,t)=>{{var r=d,n=c,o=m,a=u,s=Z.fromDom(r.getBody()),i=Z.fromDom(r.getDoc()),l=(bn(s),Hg(Z.fromDom(o.startContainer),o.startOffset));Vg(r,i,n,l,a),l.cleanup()}},r=m,n=r.startContainer,o=r.startOffset,a=r.endContainer,s=r.endOffset,i=(t(Z.fromDom(n),Z.fromDom(a)),e.dom.createRng());i.setStart(n,o),i.setEnd(a,s),e.selection.setRng(r)}},Vg=(e,t,r,n,o)=>{var a,s={elm:n.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",s).isDefaultPrevented()||(a=zn(t).top,r(e,t,a,n,o),e.dispatch("AfterScrollIntoView",s))},qg=(e,t,r,n)=>{var o=Z.fromDom(e.getDoc());Vg(e,o,r,(e=t,jg(Z.fromDom(e),V)),n)},Wg=(e,t,r,n,o)=>{var a=t.pos;n?jn(a.left,a.top,o):(n=a.top-r+t.height,jn(-e.getBody().getBoundingClientRect().left,n,o))},Kg=(e,t,r,n,o,a)=>{var s=n+r,i=o.pos.top,l=o.bottom,d=n<=l-i;i<r?Wg(e,o,n,!1!==a,t):s<i?(r=d?!1!==a:!0===a,Wg(e,o,n,r,t)):s<l&&!d&&Wg(e,o,n,!0===a,t)},Yg=(e,t,r,n,o)=>{var a=Tr(t).dom.innerHeight;Kg(e,t,r,a,n,o)},Gg=(e,t,r,n,o)=>{var a=Tr(t).dom.innerHeight,e=(Kg(e,t,r,a,n,o),Ug(n.element)),t=qn(window);e.top<t.y?Hn(n.element,!1!==o):e.top>t.bottom&&Hn(n.element,!0===o)},Xg=(e,t,r)=>$g(e,Yg,t,r),Zg=(e,t,r)=>qg(e,t,Yg,r),Qg=(e,t,r)=>$g(e,Gg,t,r),Jg=(e,t,r)=>qg(e,t,Gg,r),ep=(e,t,r)=>{(e.inline?Xg:Qg)(e,t,r)},tp=(e,t=!1)=>e.dom.focus({preventScroll:t}),rp=e=>{var t=qr(e).dom;return e.dom===t.activeElement},np=(e=Mg())=>I.from(e.dom.activeElement).map(Z.fromDom),op=(e,t)=>{t=tr(t)?ii(t).length:Ur(t).length+1;return t<e?t:e<0?0:e},ap=e=>yg.range(e.start,op(e.soffset,e.start),e.finish,op(e.foffset,e.finish)),sp=(e,t)=>!oo(t.dom)&&(Rr(e,t)||k(e,t)),ip=t=>e=>sp(t,e.start)&&sp(t,e.finish),lp=e=>yg.range(Z.fromDom(e.startContainer),e.startOffset,Z.fromDom(e.endContainer),e.endOffset),dp=e=>{e=e.getSelection();return(e&&0!==e.rangeCount?I.from(e.getRangeAt(0)):I.none()).map(lp)},cp=(e,t)=>I.from(t).filter(ip(e)).map(ap),mp=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),I.some(t)}catch(e){return I.none()}},up=e=>{var t,r=e.inline||U.browser.isFirefox()?(t=Z.fromDom(e.getBody()),r=Tr(t),dp(r.dom).filter(ip(t))):I.none();e.bookmark=r.isSome()?r:e.bookmark},fp=t=>{return(t.bookmark||I.none()).bind(e=>cp(Z.fromDom(t.getBody()),e)).bind(mp)};const gp={isEditorUIElement:e=>{e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},pp={setEditorTimeout:(e,t,r)=>{return n=()=>{e.removed||t()},r=r,w(r)||(r=0),setTimeout(n,r);var n},setEditorInterval:(e,t,r)=>{o=()=>{e.removed?clearInterval(n):t()},r=r,w(r)||(r=0);const n=setInterval(o,r);var o;return n}},hp=a=>{const s=Ps(()=>{up(a)},0);a.on("init",()=>{if(a.inline){var e=a;var t=s;const o=()=>{t.throttle()};ee.DOM.bind(document,"mouseup",o),e.on("remove",()=>{ee.DOM.unbind(document,"mouseup",o)})}var r,n;r=a,e=s,n=e,r.on("mouseup touchend",e=>{n.throttle()}),r.on("keyup NodeChange AfterSetSelectionRange",e=>{"nodechange"===(e=e).type&&e.selectionChange||up(r)})}),a.on("remove",()=>{s.cancel()})};let vp;const bp=ee.DOM,yp=e=>{e=e.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Cp=(r,e)=>{const n=sc(r);return null!==bp.getParent(e,e=>{return t=e,J(t)&&gp.isEditorUIElement(t)||!!n&&r.dom.is(e,n);var t})},wp=e=>{try{var t=qr(Z.fromDom(e.getElement()));return np(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},Ep=(r,e)=>{const t=e.editor,n=(hp(t),(e,t)=>{Yc(e)&&!0!==e.inline&&t(Z.fromDom(e.getContainer()),"tox-edit-focus")});t.on("focusin",()=>{var e=r.focusedEditor;yp(wp(t))&&n(t,yr),e!==t&&(e&&e.dispatch("blur",{focusedEditor:t}),r.setActive(t),(r.focusedEditor=t).dispatch("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",()=>{pp.setEditorTimeout(t,()=>{var e=r.focusedEditor;yp(wp(t))&&e===t||n(t,wr),Cp(t,wp(t))||e!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),vp||(vp=e=>{const t=r.activeEditor;t&&Yr(e).each(e=>{e.ownerDocument!==document||e===document.body||Cp(t,e)||r.focusedEditor!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})},bp.bind(document,"focusin",vp))},xp=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&vp&&(bp.unbind(document,"focusin",vp),vp=null)},kp=(t,e)=>{return((e=e).collapsed?I.from(qi(e.startContainer,e.startOffset)).map(Z.fromDom):I.none()).bind(e=>fi(e)?I.some(e):Rr(t,e)?I.none():I.some(t))},_p=(t,e)=>{kp(Z.fromDom(t.getBody()),e).bind(e=>wu(e.dom)).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))},Sp=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Np=e=>{return rp(e)||(t=e,np(qr(t)).filter(e=>t.dom.contains(e.dom)).isSome());var t},Rp=e=>{var t;return e.inline?(t=(t=e).getBody())&&Np(Z.fromDom(t)):(t=e,H(t.iframeElement)&&rp(Z.fromDom(t.iframeElement)))},Ap=e=>{return Rp(e)||(t=e,e=qr(Z.fromDom(t.getElement())),np(e).filter(e=>!yp(e.dom)&&Cp(t,e.dom)).isSome());var t},Dp=e=>e.editorManager.setActive(e),Tp=(e,t)=>{if(!e.removed)if(t)Dp(e);else{t=e;var e=t.selection,n=t.getBody();let r=e.getRng();t.quirks.refreshContentEditable();var o,a,s=t=>{fp(t).each(e=>{t.selection.setRng(e),r=e})},e=(!Rp(t)&&t.hasEditableRoot()&&s(t),o=t,e=e.getNode(),o.dom.getParent(e,e=>"true"===o.dom.getContentEditable(e)));e&&t.dom.isChildOf(e,n)?(null===(a=t).dom.getParent(e,e=>"false"===a.dom.getContentEditable(e))&&Sp(n),Sp(e),t.hasEditableRoot()||s(t),_p(t,r)):(t.inline||(U.browser.isOpera()||Sp(n),t.getWin().focus()),(U.browser.isFirefox()||t.inline)&&(Sp(n),_p(t,r))),Dp(t)}},Op=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Bp=(e,t,r,n,o)=>{var a=r?t.startContainer:t.endContainer;const s=r?t.startOffset:t.endOffset;return I.from(a).map(Z.fromDom).map(e=>n&&t.collapsed?e:zr(e,o(e,s)).getOr(e)).bind(e=>er(e)?I.some(e):Or(e).filter(er)).map(e=>e.dom).getOr(e)},Pp=(e,t,r=!1)=>Bp(e,t,!0,r,(e,t)=>Math.min($r(e),t)),Lp=(e,t,r=!1)=>Bp(e,t,!1,r,(e,t)=>0<t?t-1:t),Mp=(e,t)=>{for(var r=e;e&&P(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Ip=(r,e)=>T(e,e=>{var t=r.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e}),Fp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Up=(r,n,e)=>{var t=e?"lastChild":"firstChild",o=e?"prev":"next";if(r[t])return r[t];if(r!==n){let t=r[o];if(t)return t;for(let e=r.parent;e&&e!==n;e=e.parent)if(t=e[o])return t}},zp=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class jp{static create(e,t){const r=new jp(e,Fp[e]||1);return t&&Y(t,(e,t)=>{r.attr(t,e)}),r}constructor(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(t,r){const n=this;if(!z(t))return H(t)&&Y(t,(e,t)=>{n.attr(t,e)}),n;var o=n.attributes;if(o){if(void 0===r)return o.map[t];if(null===r){if(t in o.map){delete o.map[t];let e=o.length;for(;e--;)if(o[e].name===t)return o.splice(e,1),n}}else{if(t in o.map){let e=o.length;for(;e--;)if(o[e].name===t){o[e].value=r;break}}else o.push({name:t,value:r});o.map[t]=r}return n}}clone(){var e=new jp(this.name,this.type),r=this.attributes;if(r){var n=[];n.map={};for(let e=0,t=r.length;e<t;e++){var o=r[e];"id"!==o.name&&(n[n.length]={name:o.name,value:o.value},n.map[o.name]=o.value)}e.attributes=n}return e.value=this.value,e}wrap(e){return this.parent&&(this.parent.insert(e,this),e.append(this)),this}unwrap(){for(let e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){var e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):r&&(r.next=t),e.lastChild===this?(e.lastChild=r)&&(r.next=null):t&&(t.prev=r),this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,(e.next=t).prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,(e.prev=t).next=e),e.parent=n,e}getAll(t){var r=[];for(let e=this.firstChild;e;e=Up(e,this))e.name===t&&r.push(e);return r}children(){var t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){if(this.firstChild){var t=[];for(let e=this.firstChild;e;e=Up(e,this))t.push(e);let e=t.length;for(;e--;){var r=t[e];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(e,t={},r){var n,o;let a=this.firstChild;if(zp(this))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(zp(a))return!1}if(8===a.type)return!1;if(3===a.type&&(n=a,o=void 0,o=null!=(o=n.value)?o:"",!to(o)||(n=n.parent)&&("span"!==n.name||n.attr("style"))&&/^[ ]+$/.test(o)))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&to(null!=(n=a.value)?n:""))return!1;if(r&&r(a))return!1}while(a=Up(a,this));return!0}walk(e){return Up(this,null,e)}}const Hp=B.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),$p=e=>z(e.nodeValue)&&e.nodeValue.includes(yi),Vp=e=>`${0===e.length?"":T(e,e=>`[${e}]`).join(",")+","}[data-mce-bogus="all"]`,qp=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>$p(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Wp=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>{return $p(e)&&(e=e.parentNode)&&G(Hp,e.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),Kp=e=>null!==qp(e).nextNode(),Yp=e=>null!==Wp(e).nextNode(),Gp=(e,t)=>null!==t.querySelector(Vp(e)),Xp=(r,e)=>{var t;K((t=r,e.querySelectorAll(Vp(t))),e=>{const t=Z.fromDom(e);"all"===lr(t,"data-mce-bogus")?Q(t):K(r,e=>{cr(t,e)&&mr(t,e)})})};t=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()};const Zp=_(t,qp),Qp=_(t,Wp),Jp=(r,e)=>{e=[{condition:E(Gp,e),action:E(Xp,e)},{condition:Kp,action:Zp},{condition:Yp,action:Qp}];let n=r,o=!1;return K(e,({condition:e,action:t})=>{e(n)&&(o||(n=r.cloneNode(!0),o=!0),t(n))}),n},eh=e=>{e=Kn(e,"[data-mce-bogus]");K(e,e=>{("all"===lr(e,"data-mce-bogus")?Q:di(e)?(yn(e,Z.fromText(Zn)),Q):Nn)(e)})},th=e=>{e=Kn(e,"input");K(e,e=>{mr(e,"name")})},rh=(e,t)=>{var r=e.getDoc(),e=qr(Z.fromDom(e.getBody())),r=Z.fromTag("div",r),e=(sr(r,"data-mce-bogus","all"),un(r,{position:"fixed",left:"-9999999px",top:"0"}),Tn(r,t.innerHTML),eh(r),th(r),t=e,Vr(t)?t:Z.fromDom(Dr(t).dom.body)),t=(En(e,r),wi(r.dom.innerText));return Q(r),t},nh=(e,t,r)=>{let n;return n="raw"===t.format?B.trim(wi(Jp(r,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?rh(e,r):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{e=yd(e),e=new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${e}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(e,"")})(e,e.serializer.serialize(r,t)),"text"!==t.format&&!pi(Z.fromDom(r))&&z(n)?B.trim(n):n},oh=B.makeMap,ah=e=>{const a=[],s=(e=e||{}).indent,i=oh(e.indent_before||""),l=oh(e.indent_after||""),d=Sa.getEncodeFunc(e.entity_encoding||"raw",e.entities),c="xhtml"!==e.element_format;return{start:(e,r,t)=>{var n;if(s&&i[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n"),a.push("<",e),r)for(let e=0,t=r.length;e<t;e++){var o=r[e];a.push(" ",o.name,'="',d(o.value,!0),'"')}!t||c?a[a.length]=">":a[a.length]=" />",t&&s&&l[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},end:e=>{a.push("</",e,">"),s&&l[e]&&0<a.length&&0<(e=a[a.length-1]).length&&"\n"!==e&&a.push("\n")},text:(e,t)=>{0<e.length&&(a[a.length]=t?e:d(e))},cdata:e=>{a.push("<![CDATA[",e,"]]>")},comment:e=>{a.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{t?a.push("<?",e," ",d(t),"?>"):a.push("<?",e,"?>"),s&&a.push("\n")},doctype:e=>{a.push("<!DOCTYPE",e,">",s?"\n":"")},reset:()=>{a.length=0},getContent:()=>a.join("").replace(/\n$/,"")}},sh=(t={},f=Ya())=>{const g=ah(t);t.validate=!("validate"in t)||t.validate;return{serialize:e=>{const m=t.validate,r={3:e=>{var t;g.text(null!=(t=e.value)?t:"",e.raw)},8:e=>{g.comment(null!=(e=e.value)?e:"")},7:e=>{g.pi(e.name,e.value)},10:e=>{g.doctype(null!=(e=e.value)?e:"")},4:e=>{g.cdata(null!=(e=e.value)?e:"")},11:e=>{let t=e;if(t=t.firstChild)for(;u(t),t=t.next;);}},u=(g.reset(),t=>{var n=r[t.type];if(n)n(t);else{var n=t.name,o=n in f.getVoidElements();let r=t.attributes;if(m&&r&&1<r.length){var a=[],s=(a.map={},f.getElementRule(t.name));if(s){for(let e=0,t=s.attributesOrder.length;e<t;e++){var i,l=s.attributesOrder[e];l in r.map&&(i=r.map[l],a.map[l]=i,a.push({name:l,value:i}))}for(let e=0,t=r.length;e<t;e++){var d,c=r[e].name;c in a.map||(d=r.map[c],a.map[c]=d,a.push({name:c,value:d}))}r=a}}if(g.start(n,r,o),Io(n))z(t.value)&&g.text(t.value,!0),g.end(n);else if(!o){let e=t.firstChild;if(e)for("pre"!==n&&"textarea"!==n||3!==e.type||"\n"!==(null==(o=e.value)?void 0:o[0])||g.text("\n",!0);u(e),e=e.next;);g.end(n)}}});return 1!==e.type||t.inner?3===e.type?r[3](e):r[11](e):u(e),g.getContent()}}},ih=new Set,lh=(K(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{ih.add(e)}),new Set),dh=(K(["background-color"],e=>{lh.add(e)}),["font","text-decoration","text-emphasis"]),ch=(e,t)=>{return Be(e.parseStyle(e.getAttrib(t,"style")))},mh=(e,t)=>W(ch(e,t),e=>{return e=e,ih.has(e)}),uh=(e,t)=>mh(e,t)&&W(ch(e,t),e=>{return e=e,lh.has(e)}),fh=(r,n,o)=>{var e=ch(r,n);const a=ch(r,o),s=e=>{var t=null!=(t=r.getStyle(n,e))?t:"",e=null!=(e=r.getStyle(o,e))?e:"";return ft(t)&&ft(e)&&t!==e};return W(e,t=>{var e=e=>W(e,e=>e===t);return!e(a)&&e(dh)?(e=a,e=O(e,t=>W(dh,e=>lt(t,e))),W(e,s)):s(t)})};r=(r,n,o)=>I.from(o.container()).filter(P).exists(e=>{var t=r?0:-1;return n(e.data.charAt(o.offset()+t))});const gh=E(r,!0,zu),ph=E(r,!1,zu),hh=e=>{e=e.container();return P(e)&&(0===e.data.length||Ci(e.data)&&Kf.isBookmarkNode(e.parentNode))};e=(t,r)=>e=>zm(t?0:-1,e).filter(r).isSome(),n=e=>vo(e)&&"block"===fn(Z.fromDom(e),"display"),t=e=>{return b(e)&&(e=e,!(J(e)&&"all"===e.getAttribute("data-mce-bogus")))};const vh=e(!0,n),bh=e(!1,n),yh=e(!0,wo),Ch=e(!1,wo),wh=e(!0,lo),Eh=e(!1,lo),xh=e(!0,t),kh=e(!1,t),_h=(e,t)=>{return e=e,r=t,n=u,Rr(r,e)?Pr(e,e=>n(e)||k(e,r)).slice(0,-1):[];var r,n},Sh=(e,t)=>[e].concat(_h(e,t)),Nh=(e,t,r)=>vu(e,t,r,hh),Rh=t=>e=>t.isBlock(X(e)),Ah=(e,t,r)=>be(Sh(Z.fromDom(t.container()),e),Rh(r));r=(e,r,n,o)=>Nh(e,r.dom,n).forall(t=>Ah(r,n,o).fold(()=>!Um(t,n,r.dom),e=>!Um(t,n,r.dom)&&Rr(e,Z.fromDom(t.container())))),n=(t,r,n,e)=>Ah(r,n,e).fold(()=>Nh(t,r.dom,n).forall(e=>!Um(e,n,r.dom)),e=>Nh(t,e.dom,n).isNone());const Dh=E(n,!1),Th=E(n,!0),Oh=E(r,!1),Bh=E(r,!0),Ph=e=>Ym(e).exists(di),Lh=(e,t,r,n)=>{var o=O(Sh(Z.fromDom(r.container()),t),e=>n.isBlock(X(e))),o=Re(o).getOr(t);return pu(e,o.dom,r).filter(Ph)},Mh=(e,t,r)=>Ym(t).exists(di)||Lh(!0,e,t,r).isSome(),Ih=(e,t,r)=>Gm(t).exists(di)||Lh(!1,e,t,r).isSome(),Fh=E(Lh,!1),Uh=E(Lh,!0),zh=e=>L.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),jh=(e,t,r)=>{t=O(Sh(Z.fromDom(t.container()),e),e=>r.isBlock(X(e)));return Re(t).getOr(e)},Hh=(e,t,r)=>zh(t)?ph(t):ph(t)||Cu(jh(e,t,r).dom,t).exists(ph),$h=(e,t,r)=>zh(t)?gh(t):gh(t)||yu(jh(e,t,r).dom,t).exists(gh),Vh=e=>Ym(e).bind(e=>Qr(e,er)).exists(e=>{return e=fn(e,"white-space"),D(["pre","pre-wrap"],e)}),qh=(e,t,r)=>{return n=e,o=t,Cu(n.dom,o).isNone()||(n=e,o=t,yu(n.dom,o).isNone())||Dh(e,t,r)||Th(e,t,r)||Ih(e,t,r)||Mh(e,t,r);var n,o},Wh=(t,r)=>e=>{return e=new Xn(e,t)[r](),H(e)&&b(e)&&Nm(e)},Kh=(e,t,r)=>!Vh(t)&&(qh(e,t,r)||Hh(e,t,r)||$h(e,t,r)),Yh=(e,t,r)=>{return!Vh(t)&&(Dh(e,t,r)||Oh(e,t,r)||Ih(e,t,r)||Hh(e,t,r)||(r=e,e=t,t=Cu(r.dom,e).getOr(e),r=Wh(r.dom,"prev"),e.isAtStart()&&(r(e.container())||r(t.container()))))},Gh=(e,t,r)=>{return!Vh(t)&&(Th(e,t,r)||Bh(e,t,r)||Mh(e,t,r)||$h(e,t,r)||(r=e,e=t,t=yu(r.dom,e).getOr(e),r=Wh(r.dom,"next"),e.isAtEnd()&&(r(e.container())||r(t.container()))))},Xh=(e,t,r)=>{return Yh(e,t,r)||Gh(e,(t=(e=t).container(),n=e.offset(),P(t)&&n<t.data.length?L(t,n+1):e),r);var n},Zh=(e,t)=>Uu(e.charAt(t)),Qh=(e,t)=>zu(e.charAt(t)),Jh=(e,t,r,n)=>{var o=t.data,a=L(t,0);return r||!Zh(o,0)||Xh(e,a,n)?!!(r&&Qh(o,0)&&Yh(e,a,n))&&(t.data=Qn+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},ev=e=>{var t=e.data,r=(e=>{const r=e.split("");return T(r,(e,t)=>Uu(e)&&0<t&&t<r.length-1&&ju(r[t-1])&&ju(r[t+1])?" ":e).join("")})(t);return r!==t&&(e.data=r,!0)},tv=(e,t,r,n)=>{var o=t.data,a=L(t,o.length-1);return r||!Zh(o,o.length-1)||Xh(e,a,n)?!!(r&&Qh(o,o.length-1)&&Gh(e,a,n))&&(t.data=o.slice(0,-1)+Qn,!0):(t.data=o.slice(0,-1)+" ",!0)},rv=(e,t,r)=>{var n,o=t.container();return P(o)?(e=>{e=e.container();return P(e)&&it(e.data,Qn)})(t)?(n=Jh(e,o,!1,r)||ev(o)||tv(e,o,!1,r),Vt(n,t)):Xh(e,t,r)?(n=Jh(e,o,!0,r)||tv(e,o,!0,r),Vt(n,t)):I.none():I.none()},nv=(e,t,r,n)=>{var o,a,s;0!==r&&(s=Z.fromDom(e),s=Zr(s,e=>n.isBlock(X(e))).getOr(s),o=e.data.slice(t,t+r),a=t+r>=e.data.length&&Gh(s,L(e,e.data.length),n),s=0===t&&Yh(s,L(e,0),n),e.replaceData(t,r,no(o,4,s,a)))},ov=(e,t,r)=>{var n=e.data.slice(t),n=n.length-mt(n).length;nv(e,t,n,r)},av=(e,t,r)=>{var n=e.data.slice(0,t),n=n.length-ut(n).length;nv(e,t-n,n,r)},sv=(e,t,r,n,o=!0)=>{var a=ut(e.data).length,s=o?e:t,t=o?t:e;return o?s.appendData(t.data):s.insertData(0,t.data),Q(Z.fromDom(t)),n&&ov(s,a,r),s},iv=(e,t)=>{return e=e,n=(r=t).container(),o=r.offset(),!L.isTextPosition(r)&&n===e.parentNode&&o>L.before(e).offset()?L(t.container(),t.offset()-1):t;var r,n,o},lv=e=>{return rl(e.previousSibling)?I.some((t=e.previousSibling,P(t)?L(t,t.data.length):L.after(t))):e.previousSibling?Eu(e.previousSibling):I.none();var t},dv=e=>{return rl(e.nextSibling)?I.some((t=e.nextSibling,P(t)?L(t,0):L.before(t))):e.nextSibling?wu(e.nextSibling):I.none();var t},cv=(r,n)=>lv(n).orThunk(()=>dv(n)).orThunk(()=>{return t=r,e=n,I.from(e.previousSibling||e.parentNode).bind(e=>Cu(t,L.before(e))).orThunk(()=>yu(t,L.after(e)));var t,e}),mv=(r,n)=>dv(n).orThunk(()=>lv(n)).orThunk(()=>{return e=r,t=n,yu(e,L.after(t)).orThunk(()=>Cu(e,L.before(t)));var e,t}),uv=(e,t,r)=>{return t=t,n=r,(e?mv:cv)(t,n).map(E(iv,r));var n},fv=(t,r,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),r)})},gv=(e,t)=>t&&G(e.schema.getBlockElements(),X(t)),pv=(e,t,o,a)=>{const r=Lr(e).filter(tr),n=Mr(e).filter(tr);return Q(e),e=r,s=n,i=t,l=(e,t,r)=>{var e=e.dom,t=t.dom,n=e.data.length;return sv(e,t,o,a),r.container()===t?L(e,n):r},(e.isSome()&&s.isSome()&&i.isSome()?I.some(l(e.getOrDie(),s.getOrDie(),i.getOrDie())):I.none()).orThunk(()=>(a&&(r.each(e=>av(e.dom,e.dom.length,o)),n.each(e=>ov(e.dom,0,o))),t));var s,i,l},hv=(n,t,e,r=!0,o=!1)=>{var a,s=uv(t,n.getBody(),e.dom),i=Zr(e,E(gv,n),(a=n.getBody(),e=>e.dom===a));const l=pv(e,s,n.schema,(s=n,e=e,G(s.schema.getTextInlineElements(),X(e))));n.dom.isEmpty(n.getBody())?(n.setContent(""),n.selection.setCursorLocation()):i.bind(e=>{return t=n.schema,e=e,r=o,To(t,e)?(t=Z.fromHtml('<br data-mce-bogus="1">'),r?K(Ur(e),e=>{xf(e)||Q(e)}):Sn(e),En(e,t),I.some(L.before(t.dom))):I.none();var t,r}).fold(()=>{r&&fv(n,t,l)},e=>{r&&fv(n,t,I.some(e))})},vv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,bv=(e,t)=>_r(Z.fromDom(t),qd(e))&&!Jo(e.schema,t)&&e.dom.isEditable(t),yv=e=>{return"rtl"===ee.DOM.getStyle(e,"direction",!0)||(e=null!=(e=e.textContent)?e:"",vv.test(e))},Cv=(e,t,r)=>{e=e,t=t,r=r;r=O(ee.DOM.getParents(r.container(),"*",t),e);return I.from(r[r.length-1])},wv=(e,t)=>{var r=t.container(),n=t.offset();return e?_i(r)?P(r.nextSibling)?L(r.nextSibling,0):L.after(r):Ri(t)?L(r,n+1):t:_i(r)?P(r.previousSibling)?L(r.previousSibling,r.previousSibling.data.length):L.before(r):Ai(t)?L(r,n-1):t},Ev=E(wv,!0),xv=E(wv,!1),kv=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},_v=e=>kv(e,"Delete"),Sv=e=>kv(e,"ForwardDelete"),Nv=e=>ci(e)||ui(e),Rv=(e,t)=>{return Rr(e,t)?Qr(t,Nv,(r=e,e=>jt(Or(e),r,k))):I.none();var r},Av=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Dv=(o,a,s)=>$t(wu(s),Eu(s),(e,t)=>{const r=wv(!0,e),n=wv(!1,t);e=wv(!1,a);return o?yu(s,e).exists(e=>e.isEqual(n)&&a.isEqual(r)):Cu(s,e).exists(e=>e.isEqual(r)&&a.isEqual(n))}).getOr(!0),Tv=e=>{var t;return t=e,(Qt(t)===Xt||"#comment"===X(t)?Lr:Hr)(e).bind(Tv).orThunk(()=>I.some(e))},Ov=(t,e,r,n=!0)=>{e.deleteContents();var o,e=Tv(r).getOr(r);const a=Z.fromDom(null!=(e=t.dom.getParent(e.dom,t.dom.isBlock))?e:r.dom);a.dom===t.getBody()?Av(t,n):To(t.schema,a,{checkRootAsContent:!1})&&(bi(a),n)&&t.selection.setCursorLocation(a.dom,0),k(r,a)||(e=jt(Or(a),r)?[]:(o=a,Or(o).map(Ur).map(e=>O(e,e=>!k(o,e))).getOr([])),K(e.concat(Ur(r)),e=>{k(e,a)||Rr(e,a)||!To(t.schema,e)||Q(e)}))},Bv=e=>Kn(e,"td,th"),Pv=(e,t)=>Wu(Z.fromDom(e),t),Lv=e=>{return o=e,$t(o.startTable,o.endTable,(t,r)=>{var e=Gn(t,e=>k(e,r)),n=Gn(r,e=>k(e,t));return e||n?{...o,startTable:e?I.none():o.startTable,endTable:n?I.none():o.endTable,isSameTable:!1,isMultiTable:!1}:o}).getOr(o);var o},Mv=(e,t)=>({start:e,end:t}),Iv=Gl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Fv=(e,t)=>nn(Z.fromDom(e),"td,th",t),Uv=e=>!k(e.start,e.end),zv=(e,r)=>Wu(e.start,r).bind(t=>Wu(e.end,r).bind(e=>Vt(k(t,e),t))),jv=e=>t=>zv(t,e).map(e=>({rng:t,table:e,cells:Bv(e)})),Hv=(e,t,r,n)=>{var o,a;return r.collapsed||!e.forall(Uv)?I.none():t.isSameTable?(t=e.bind(jv(n)),I.some({start:t,end:t})):(e=Fv(r.startContainer,n),t=Fv(r.endContainer,n),r=e.bind((a=n,t=>Wu(t,a).bind(e=>Ae(Bv(e)).map(e=>Mv(t,e))))).bind(jv(n)),e=t.bind((o=n,t=>Wu(t,o).bind(e=>Re(Bv(e)).map(e=>Mv(e,t))))).bind(jv(n)),I.some({start:r,end:e}))},$v=(e,t)=>ye(e,e=>k(e,t)),Vv=r=>$t($v(r.cells,r.rng.start),$v(r.cells,r.rng.end),(e,t)=>r.cells.slice(e,t+1)),qv=(e,n,o)=>e.exists(e=>{return t=e,r=o,!Uv(t)&&zv(t,r).exists(e=>{e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&Gu(e.start,n);var t,r}),Wv=(e,t)=>{var{startTable:t,endTable:r}=t;const n=e.cloneRange();return t.each(e=>n.setStartAfter(e.dom)),r.each(e=>n.setEndBefore(e.dom)),n},Kv=(e,t)=>{r=e;var r,n,o,a,s,i,l,d,c,m,e=e=>k(r,e),u=(m=t,u=e,l=Fv(m.startContainer,u),m=Fv(m.endContainer,u),$t(l,m,Mv)),f=(l=t,m=e,f=Pv(l.startContainer,m),l=Pv(l.endContainer,m),m=f.isSome(),o=l.isSome(),i=$t(f,l,k).getOr(!1),n=!i&&m&&o,Lv({startTable:f,endTable:l,isStartInTable:m,isEndInTable:o,isSameTable:i,isMultiTable:n}));return qv(u,t,e)?u.map(e=>Iv.singleCellTable(t,e.start)):f.isMultiTable?(l=u,d=f,c=t,m=e,Hv(l,d,c,m).bind(({start:e,end:t})=>{var r,e=e.bind(Vv).getOr([]),t=t.bind(Vv).getOr([]);return 0<e.length&&0<t.length?(r=Wv(c,d),I.some(Iv.multiTable(e,t,r))):I.none()})):(o=u,a=f,s=t,i=e,Hv(o,a,s,i).bind(({start:e,end:t})=>e.or(t)).bind(e=>{var t=a["isSameTable"],r=Vv(e).getOr([]);return t&&e.cells.length===r.length?I.some(Iv.fullTable(e.table)):0<r.length?t?I.some(Iv.partialTable(r,I.none())):(e=Wv(s,a),I.some(Iv.partialTable(r,I.some({...a,rng:e})))):I.none()}))},Yv=e=>K(e,e=>{mr(e,"contenteditable"),bi(e)}),Gv=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),Jv(e,o,t,!1).each(e=>e())},Xv=e=>{var t=qu(e);const r=Z.fromDom(e.selection.getNode());yo(r.dom)&&To(e.schema,r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),1<t.length&&W(t,e=>k(e,r))&&sr(r,"data-mce-selected","1")},Zv=(i,l,t)=>I.some(()=>{const s=i.selection.getRng();var e=t.bind(({rng:e,isStartInTable:t})=>{a=i,o=t?e.endContainer:e.startContainer;var r,n,o=I.from(a.dom.getParent(o,a.dom.isBlock)).map(Z.fromDom),a=(e.deleteContents(),r=i,n=t,o.filter(E(To,i.schema)).each(e=>{n?Q(e):(bi(e),r.selection.setCursorLocation(e.dom,0))}),t?l[0]:l[l.length-1]);return Gv(i,a,s,t),To(i.schema,a)?I.none():I.some(t?l.slice(1):l.slice(0,-1))}).getOr(l);Yv(e),Xv(i)}),Qv=(n,o,a,s)=>I.some(()=>{var e=n.selection.getRng(),t=o[0],r=a[a.length-1],e=(Gv(n,t,e,!0),Gv(n,r,e,!1),To(n.schema,t)?o:o.slice(1)),t=To(n.schema,r)?a:a.slice(0,-1);Yv(e.concat(t)),s.deleteContents(),Xv(n)}),Jv=(e,t,r,n=!0)=>I.some(()=>{Ov(e,t,r,n)}),eb=(e,t)=>I.some(()=>hv(e,!1,t)),tb=(n,o,a,e)=>nb(o,e).fold(()=>{return t=n,e=o,r=a,Kv(e,r).bind(e=>e.fold(E(Jv,t),E(eb,t),E(Zv,t),E(Qv,t)));var t,e,r},e=>{return t=n,e=e,ob(t,e);var t}),rb=(e,t)=>be(Sh(t,e),gi),nb=(e,t)=>be(Sh(t,e),or("caption")),ob=(e,t)=>I.some(()=>{bi(t),e.selection.setCursorLocation(t.dom,0)}),ab=(l,d,c,m,u)=>hu(c,l.getBody(),u).fold(()=>I.some(V),e=>{return o=m,a=c,s=u,i=e,wu(o.dom).bind(t=>Eu(o.dom).map(e=>a?s.isEqual(t)&&i.isEqual(e):s.isEqual(e)&&i.isEqual(t))).getOr(!0)?(r=l,n=m,ob(r,n)):(r=d,t=m,n=e,nb(r,Z.fromDom(n.getNode())).fold(()=>I.some(V),e=>Vt(!k(e,t),V)));var t,r,n,o,a,s,i}),sb=(a,s,i,e)=>{const l=L.fromRangeStart(a.selection.getRng());return rb(i,e).bind(e=>{return To(a.schema,e,{checkRootAsContent:!1})?ob(a,e):(t=a,r=i,n=s,o=e,e=l,hu(n,t.getBody(),e).bind(e=>rb(r,Z.fromDom(e.getNode())).bind(e=>k(e,o)?I.none():I.some(V))));var t,r,n,o})},ib=(e,t)=>(e?wh:Eh)(t),lb=(a,s,e)=>{const i=Z.fromDom(a.getBody());return nb(i,e).fold(()=>sb(a,s,i,e).orThunk(()=>{return Vt((e=a,t=s,r=L.fromRangeStart(e.selection.getRng()),ib(t,r)||pu(t,e.getBody(),r).exists(e=>ib(t,e))),V);var e,t,r}),e=>{return t=a,r=s,n=i,e=e,o=L.fromRangeStart(t.selection.getRng()),To(t.schema,e)?ob(t,e):ab(t,n,r,e,o);var t,r,n,o})},db=(e,t)=>{var r,n=Z.fromDom(e.selection.getStart(!0)),o=qu(e);return e.selection.isCollapsed()&&0===o.length?lb(e,t,n):(t=e,e=n,n=o,o=Z.fromDom(t.getBody()),r=t.selection.getRng(),0!==n.length?Zv(t,n,I.none()):tb(t,o,r,e))},cb=(e,t)=>{let r=t;for(;r&&r!==e;){if(bo(r)||b(r))return r;r=r.parentNode}return null},mb=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ub=B.each,fb=e=>{const o=e.dom,r=new Set(e.serializer.getTempAttrs());const a=t=>W(mb,e=>lt(t,e))||r.has(t);return{compare:(e,t)=>{if(e.nodeName!==t.nodeName||e.nodeType!==t.nodeType)return!1;var r=t=>{const r={};return ub(o.getAttribs(t),e=>{e=e.nodeName.toLowerCase();"style"===e||a(e)||(r[e]=o.getAttrib(t,e))}),r},n=(e,t)=>{for(const n in e)if(G(e,n)){var r=t[n];if(C(r))return!1;if(e[n]!==r)return!1;delete t[n]}for(const o in t)if(G(t,o))return!1;return!0};if(J(e)&&J(t)){if(!n(r(e),r(t)))return!1;if(!n(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style"))))return!1}return!Iu(e)&&!Iu(t)},isAttributeInternal:a}},gb=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),pb=e=>"summary"===e.name,hb=(r,n,o,a)=>{var s=o.name;for(let e=0,t=r.length;e<t;e++){var i,l=r[e];l.name===s&&((i=a.nodes[s])?i.nodes.push(o):a.nodes[s]={filter:l,nodes:[o]})}if(o.attributes)for(let e=0,t=n.length;e<t;e++){var d,c=n[e],m=c.name;m in o.attributes.map&&((d=a.attributes[m])?d.nodes.push(o):a.attributes[m]={filter:c,nodes:[o]})}},vb=(e,a)=>{var t=(e,o)=>{Y(e,r=>{const n=De(r.nodes);K(r.filter.callbacks,e=>{for(let e=n.length-1;0<=e;e--){var t=n[e];(o?void 0!==t.attr(r.filter.name):t.name===r.filter.name)&&!oe(t.parent)||n.splice(e,1)}0<n.length&&e(n,r.filter.name,a)})})};t(e.nodes,!1),t(e.attributes,!0)},bb=(e,t,r,n={})=>{e=((t,r,n)=>{const o={nodes:{},attributes:{}};if(n.firstChild){var a=e=>{hb(t,r,e,o)};let e=n;for(;e=e.walk();)a(e)}return o})(e,t,r);vb(e,n)},yb=(e,t,r,n)=>{(e.pad_empty_with_br||t.insert)&&r(n)?(e=new jp("br",1),t.insert&&e.attr("data-mce-bogus","1"),n.empty().append(e)):n.empty().append(new jp("#text",3)).value=Qn},Cb=e=>{return wb(e,"#text")&&(null==(e=null==e?void 0:e.firstChild)?void 0:e.value)===Qn},wb=(e,t)=>{var r=null==e?void 0:e.firstChild;return H(r)&&r===e.lastChild&&r.name===t},Eb=(r,e,t,n)=>n.isEmpty(e,t,e=>{var t=r;return!0===(null==(t=t.getElementRule(e.name))?void 0:t.paddEmpty)}),xb=(e,t)=>H(e)&&(t(e)||"br"===e.name),kb=t=>{let r;for(let e=t;e;e=e.parent){var n=e.attr("contenteditable");if("false"===n)break;"true"===n&&(r=e)}return I.from(r)},_b=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{for(const n of e.children())r&&!t.isValidChild(r.name,n.name)&&_b(n,t,r);e.unwrap()}},Sb=(n,o,a,s=V)=>{var i=o.getTextBlockElements(),l=o.getNonEmptyElements(),d=o.getWhitespaceElements();const c=B.makeMap("tr,td,th,tbody,thead,tfoot,table,summary");var m,u=new Set;for(let e=0;e<n.length;e++){var f=n[e];let t,r;if(f.parent&&!u.has(f))if(i[f.name]&&"li"===f.parent.name){let e=f.next;for(;e&&i[e.name];)e.name="li",u.add(e),f.parent.insert(e,f.parent),e=e.next;f.unwrap()}else{var g,p=[f];for(t=f.parent;t&&!o.isValidChild(t.name,f.name)&&(m=t)!==a&&!c[m.name];t=t.parent)p.push(t);if(t&&1<p.length)if(Rb(o,f,t))_b(f,o);else{p.reverse(),s(v=p[0].clone());let e=v;for(let t=0;t<p.length-1;t++){o.isValidChild(e.name,p[t].name)&&0<t?(s(r=p[t].clone()),e.append(r)):r=e;for(let e=p[t].firstChild;e&&e!==p[t+1];){var h=e.next;r.append(e),e=h}e=r}Eb(o,l,d,v)?t.insert(f,p[0],!0):(t.insert(v,p[0],!0),t.insert(f,v)),t=p[0],(Eb(o,l,d,t)||wb(t,"br"))&&t.empty().remove()}else if(f.parent)if("li"===f.name){let e=f.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(f);continue}if((e=f.next)&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(f,e.firstChild,!0);continue}var v=new jp("ul",1);s(v),f.wrap(v)}else o.isValidChild(f.parent.name,"div")&&o.isValidChild("div",f.name)?(s(g=new jp("div",1)),f.wrap(g)):_b(f,o)}}},Nb=(e,t)=>{let r=e;for(;r;){if(r.name===t)return!0;r=r.parent}return!1},Rb=(e,t,r=t.parent)=>!(!r||(!e.children[t.name]||e.isValidChild(r.name,t.name))&&("a"!==t.name||!Nb(r,"a"))&&(!pb(r)||!gb(t)||(null==r?void 0:r.firstChild)===t&&(null==r?void 0:r.lastChild)===t)),Ab=a=>{const s=L.fromRangeStart(a),i=L.fromRangeEnd(a),l=a.commonAncestorContainer;return pu(!1,l,i).map(e=>{return!Um(s,i,l)&&Um(s,e,l)?(t=s.container(),r=s.offset(),n=e.container(),e=e.offset(),(o=document.createRange()).setStart(t,r),o.setEnd(n,e),o):a;var t,r,n,o}).getOr(a)},Db=e=>e.collapsed?e:Ab(e),Tb=(e,t)=>{return e.getBlockElements()[t.name]&&(e=t,H(e.firstChild))&&e.firstChild===e.lastChild&&("br"===(e=t.firstChild).name||e.value===Qn)},Ob=(e,t)=>{let r=t.firstChild,n=t.lastChild;var o;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),t=e,e=n,o=t.getNonEmptyElements(),H(e)&&(e.isEmpty(o)||Tb(t,e))&&(n=null===n||void 0===n?void 0:n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name)},Bb=e=>{return H(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((e=e.firstChild).data===Qn||R(e))},Pb=e=>{return 0<e.length&&(!(t=e[e.length-1]).firstChild||Bb(t))?e.slice(0,-1):e;var t},Lb=(e,t)=>{t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},Mb=(e,t)=>{e=L.after(e),t=cu(t).prev(e);return t?t.toRange():null},Ib=(t,e,r)=>{const n=t.parentNode;n&&B.each(e,e=>{n.insertBefore(e,t)});e=t;return e=L.before(e),(r=cu(r).next(e))?r.toRange():null},Fb=(e,n,o,t)=>{s=n,t=t,e=(e=e).serialize(t),t=s.createFragment(e),e=(s=t).firstChild,t=s.lastChild,e&&"META"===e.nodeName&&null!=(r=e.parentNode)&&r.removeChild(e),t&&"mce_marker"===t.id&&null!=(r=t.parentNode)&&r.removeChild(t);e=s;const a=Lb(n,o.startContainer);var r,t=Pb((r=e.firstChild,O(null!=(r=null==r?void 0:r.childNodes)?r:[],e=>"LI"===e.nodeName)));var s=n.getRoot(),e=e=>{var t=L.fromRangeStart(o),r=cu(n.getRoot()),e=1===e?r.prev(t):r.next(t),r=null==e?void 0:e.getNode();return!r||Lb(n,r)!==a};if(a){if(e(1))return Ib(a,t,s);if(e(2))return e=a,l=t,d=s,n.insertAfter(l.reverse(),e),Mb(l[0],d);{var i=a;e=t;var l=s;var d=o;t=i,s=(d=d).cloneRange(),d=d.cloneRange(),s.setStartBefore(t),d.setEndAfter(t);t=[s.cloneContents(),d.cloneContents()];const c=i.parentNode;return c&&(c.insertBefore(t[0],i),B.each(e,e=>{c.insertBefore(e,i)}),c.insertBefore(t[1],i),c.removeChild(i)),Mb(e[e.length-1],l)}}return null},Ub=["pre"],zb=yo,jb=(e,t,o)=>{I.from(e.getParent(t,"td,th")).map(Z.fromDom).each(e=>{var r,n;r=e,n=o,Hr(r).each(t=>{Lr(t).each(e=>{n.isBlock(X(r))&&di(t)&&n.isBlock(X(e))&&Q(t)})})})},Hb=(e,t)=>{const d=e.schema.getTextInlineElements(),c=e.dom;if(t){const m=e.getBody(),u=fb(e),f="*[data-mce-fragment]";t=c.select(f);B.each(t,t=>{const r=e=>H(d[e.nodeName.toLowerCase()]),n=e=>1===e.childNodes.length;var e;if(e=t,!(mh(c,e)||uh(c,e))&&r(t)&&n(t)){const o=ch(c,t),a=(e,t)=>Ee(e,e=>D(t,e)),s=e=>n(t)&&c.is(e,f)&&r(e)&&(e.nodeName===t.nodeName&&a(o,ch(c,e))||s(e.children[0])),i=e=>H(e)&&e!==m&&(u.compare(t,e)||i(e.parentElement)),l=e=>H(e)&&e!==m&&c.is(e,f)&&(fh(c,t,e)||l(e.parentElement));(s(t.children[0])||i(t.parentElement)&&!l(t.parentElement))&&c.remove(t,!0)}})}},$b=(t,r)=>{let n;var o=t.dom,a=t.selection;if(r){a.scrollIntoView(r);var s=cb(t.getBody(),r);if(s&&"false"===o.getContentEditable(s))o.remove(r),a.select(s);else{let e=o.createRng();var i,s=r.previousSibling,s=(P(s)?(e.setStart(s,null!=(i=null==(i=s.nodeValue)?void 0:i.length)?i:0),i=r.nextSibling,P(i)&&(s.appendData(i.data),null!=(s=i.parentNode))&&s.removeChild(i)):(e.setStartBefore(r),e.setEndBefore(r)),o.getParent(r,o.isBlock));o.remove(r),s&&o.isEmpty(s)&&(i=zb(s),Sn(Z.fromDom(s)),e.setStart(s,0),e.setEnd(s,0),i||s.getAttribute("data-mce-fragment")||!(n=(e=>{e=L.fromRangeStart(e);return null==(e=cu(t.getBody()).next(e))?void 0:e.toRange()})(e))?o.add(s,o.create("br",i?{}:{"data-mce-bogus":"1"})):(e=n,o.remove(s))),a.setRng(e)}}},Vb=e=>{var t,r,n=e.dom,o=Db(e.selection.getRng()),a=(e.selection.setRng(o),n.getParent(o.startContainer,zb));n=n,t=o,r=a,!!H(r)&&r===n.getParent(t.endContainer,zb)&&Gu(Z.fromDom(r),t)?Jv(e,o,Z.fromDom(a)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset==1&&P(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},qb=(r,n,o)=>{var a=r.selection,s=r.dom,i=r.parser,t=o.merge,l=sh({validate:!0},r.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===(n=o.preserve_zwsp?n:wi(n)).indexOf("{$caret}")&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,d);let e=a.getRng();var c,m,u,f=e.startContainer,g=r.getBody(),f=(f===g&&a.isCollapsed()&&s.isBlock(g.firstChild)&&(f=r,p=g.firstChild,H(p))&&!f.schema.getVoidElements()[p.nodeName]&&s.isEmpty(g.firstChild)&&((e=s.createRng()).setStart(g.firstChild,0),e.setEnd(g.firstChild,0),a.setRng(e)),a.isCollapsed()||Vb(r),a.getNode()),p={context:f.nodeName.toLowerCase(),data:o.data,insert:!0};const h=i.parse(n,p);if(!0===o.paste&&Ob(r.schema,h)&&(g=s,c=f,!!Lb(g,c)))(e=Fb(l,s,a.getRng(),h))&&a.setRng(e);else{!0===o.paste&&(g=s,c=h,o=f,v=r.getBody(),C=c.firstChild,c=c.lastChild,c=C===("bookmark"===c.attr("data-mce-type")?c.prev:c),u=D(Ub,C.name),!(!c||!u))&&(c="false"!==C.attr("contenteditable"),g=(null==(u=g.getParent(o,g.isBlock))?void 0:u.nodeName.toLowerCase())===C.name,u=I.from(cb(v,o)).forall(bo),c)&&g&&u&&null!=(C=h.firstChild)&&C.unwrap();{var v=h;let e=v;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}let e=h.lastChild;if(e&&"mce_marker"===e.attr("id")){var b=e;for(e=e.prev;e;e=e.walk(!0))if(3===e.type||!s.isBlock(e.name)){e.parent&&r.schema.isValidChild(e.parent.name,"span")&&e.parent.insert(b,e,"br"===e.name);break}}if(r._selectionOverrides.showBlockCaretContainer(f),p.invalid||(o=s,g=f,u=h,W(u.children(),gb)&&"SUMMARY"===(null==(u=o.getParent(g,o.isBlock))?void 0:u.nodeName))){r.selection.setContent(d);let e=a.getNode(),t;var y=r.getBody();for(po(e)?e=t=y:t=e;t&&t!==y;)t=(e=t).parentNode;n=e===y?y.innerHTML:s.getOuterHTML(e);var C=i.parse(n),g=(t=>{for(let e=t;e;e=e.walk())if("mce_marker"===e.attr("id"))return I.some(e);return I.none()})(C),o=g.bind(kb).getOr(C),d=(g.each(e=>e.replace(h)),h.children());const x=null!=(g=h.parent)?g:C;h.unwrap();g=O(d,e=>Rb(r.schema,e,x));Sb(g,r.schema,o),bb(i.getNodeFilters(),i.getAttributeFilters(),C),n=l.serialize(C),e===y?s.setHTML(y,n):s.setOuterHTML(e,n)}else n=l.serialize(h),d=r,g=n,"all"===(o=f).getAttribute("data-mce-bogus")?null!=(m=o.parentNode)&&m.insertBefore(d.dom.createFragment(g),o):(m=o.firstChild,i=o.lastChild,!m||m===i&&"BR"===m.nodeName?d.dom.setHTML(o,g):d.selection.setContent(g,{no_events:!0}));Hb(r,t),$b(r,s.get("mce_marker")),l=r.getBody(),B.each(l.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),jb(s,a.getStart(),r.schema);var w=r.schema,E=r.getBody(),f=a.getStart();f=Pr(Z.fromDom(f),e=>k(e,Z.fromDom(E))),Ne(f,f.length-2).filter(er).fold(()=>Go(w,E),e=>Go(w,e.dom))}return n},Wb=e=>e instanceof jp,Kb=(e,t,r)=>{var n;e.dom.setHTML(e.getBody(),t),!0!==r&&(n=e,Rp(n))&&wu(n.getBody()).each(e=>{var t=e.getNode(),t=lo(t)?wu(t).getOr(e):e;n.selection.setRng(t.toRange())})},Yb=(i,l,d)=>I.from(i.getBody()).map(e=>{return Wb(l)?(r=i,n=e,o=l,a=d,bb(r.parser.getNodeFilters(),r.parser.getAttributeFilters(),o),s=sh({validate:!1},r.schema).serialize(o),n=wi(pi(Z.fromDom(n))?s:B.trim(s)),Kb(r,n,a.no_selection),{content:o,html:n}):(s=i,r=e,a=l,o=d,0===(a=wi(a)).length||/^\s+$/.test(a)?(n='<br data-mce-bogus="1">',"TABLE"===r.nodeName?a="<tr><td>"+n+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(a="<li>"+n+"</li>"),t=yd(s),a=s.schema.isValidChild(r.nodeName.toLowerCase(),t.toLowerCase())?(a=n,s.dom.createHTML(t,Cd(s),a)):a||n,Kb(s,a,o.no_selection),{content:a,html:a}):("raw"!==o.format&&(a=sh({validate:!1},s.schema).serialize(s.parser.parse(a,{isRootContent:!0,insert:!0}))),t=pi(Z.fromDom(r))?a:B.trim(a),Kb(s,t,o.no_selection),{content:t,html:t}));var t,r,n,o,a,s}).getOr({content:l,html:Wb(d.content)?"":d.content}),Gb=e=>$(e)?e:u,Xb=(i,l,e)=>{var t=l(i);const d=Gb(e);return t.orThunk(()=>{if(d(i))return I.none();{var t=i,r=l,n=d;let e=t.dom;for(var o=Gb(n);e.parentNode;){e=e.parentNode;var a=Z.fromDom(e),s=r(a);if(s.isSome())return s;if(o(a))break}return I.none()}})},Zb=mf,Qb=(t,r,e)=>{var n=t.formatter.get(e);if(n)for(let e=0;e<n.length;e++){var o=n[e];if(yf(o)&&!1===o.inherit&&t.dom.is(r,o.selector))return!0}return!1},Jb=(t,e,r,n,o)=>{const a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,e=>!!Qb(t,e,r)||e.parentNode===a||!!r0(t,e,r,n,!0)),!!r0(t,e,r,n,o))},e0=(e,t,r)=>!(!Cf(r)||!Zb(t,r.inline))||!(!bf(r)||!Zb(t,r.block))||!!yf(r)&&J(t)&&e.is(t,r.selector),t0=(t,r,e,n,o,a)=>{var s=e[n],i="attributes"===n;if($(e.onmatch))return e.onmatch(r,e,n);if(s)if(qe(s)){for(let e=0;e<s.length;e++)if(i?t.getAttrib(r,s[e]):ff(t,r,s[e]))return!0}else for(const m in s)if(G(s,m)){var l=i?t.getAttrib(r,m):ff(t,r,m),d=cf(s[m],a),c=oe(l)||gt(l);if(!c||!oe(d)){if(o&&c&&!e.exact)return!1;if((!o||e.exact)&&!Zb(l,uf(d,m)))return!1}}return!0},r0=(t,r,e,n,o)=>{var a=t.formatter.get(e),s=t.dom;if(a&&J(r))for(let e=0;e<a.length;e++){var i=a[e];if(e0(t.dom,r,i)&&t0(s,r,i,"attributes",o,n)&&t0(s,r,i,"styles",o,n)){var l=i.classes;if(l)for(let e=0;e<l.length;e++)if(!t.dom.hasClass(r,cf(l[e],n)))return;return i}}},n0=(e,t,r,n,o)=>{var a;return n?Jb(e,n,t,r,o):(n=e.selection.getNode(),!!Jb(e,n,t,r,o)||!((a=e.selection.getStart())===n||!Jb(e,a,t,r,o)))},o0=(n,t)=>{const r=e=>k(e,Z.fromDom(n.getBody()));return I.from(n.selection.getStart(!0)).bind(e=>Xb(Z.fromDom(e),r=>Te(t,e=>{return t=r,e=e,r0(n,t.dom,e)?I.some(e):I.none();var t}),r)).getOrNull()},a0=(o,a,e)=>he(e,(e,t)=>{n=o,r=t;var r,n=hf(n,r,t=>{const r=e=>$(e)||1<e.length&&"%"===e.charAt(0);return W(["styles","attributes"],e=>g(t,e).exists(e=>{e=j(e)?e:He(e);return W(e,r)}))});return o.formatter.matchNode(a,t,{},n)?e.concat([t]):e},[]),s0=yi,i0=e=>{if(e){var t=new Xn(e,e);for(let e=t.current();e;e=t.next())if(P(e))return e}return null},l0=e=>{var t=Z.fromTag("span");return ir(t,{id:xu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&En(t,Z.fromText(s0)),t},d0=(e,t,r)=>{var n,o,a,s,i,l=e.dom,d=e.selection;Ef(t)?hv(e,!1,Z.fromDom(t),r,!0):(e=d.getRng(),r=l.getParent(t,l.isBlock),n=e.startContainer,o=e.startOffset,a=e.endContainer,s=e.endOffset,i=(e=>{e=i0(e);return e&&e.data.charAt(0)===s0&&e.deleteData(0,1),e})(t),l.remove(t,!0),n===i&&0<o&&e.setStart(i,o-1),a===i&&0<s&&e.setEnd(i,s-1),r&&l.isEmpty(r)&&bi(Z.fromDom(r)),d.setRng(e))},c0=(e,t,r)=>{var n=e.dom,o=e.selection;if(t)d0(e,t,r);else if(!(t=_u(e.getBody(),o.getStart())))for(;t=n.get(xu);)d0(e,t,r)},m0=(e,t)=>(e.appendChild(t),t),u0=(e,t)=>{e=pe(e,(e,t)=>m0(e,t.cloneNode(!1)),t),t=null!=(t=e.ownerDocument)?t:document;return m0(e,t.createTextNode(s0))},f0=e=>li(e,ii(e).replace(new RegExp(Qn+"$")," ")),g0=(t,e)=>{const r=()=>{null===e||t.dom.isEmpty(e)||Lr(Z.fromDom(e)).each(e=>{tr(e)?f0(e):en(e,e=>tr(e)).each(e=>{tr(e)&&f0(e)})})};t.once("input",e=>{e.data&&!zu(e.data)&&(e.isComposing?t.once("compositionend",()=>{r()}):r())})},p0=(r,n,o,a)=>{var s=r.dom,i=r.selection;let l=!1;var d=r.formatter.get(n);if(d){var c=i.getRng(),m=c.startContainer,u=c.startOffset;let e=m;P(m)&&(u!==m.data.length&&(l=!0),e=e.parentNode);var f,g,p,h,v,b,y,C,w=[];let t;for(;e;){if(r0(r,e,n,o,a)){t=e;break}e.nextSibling&&(l=!0),w.push(e),e=e.parentNode}t&&(l?(u=i.getBookmark(),c.collapse(!0),m=Ff(s,c,d,!0),m=Bg(m),r.formatter.remove(n,o,m,a),i.moveToBookmark(u)):(c=_u(r.getBody(),t),d=H(c)?s.getParents(t.parentNode,le,c):[],m=l0(!1).dom,u=r,b=m,y=null!=c?c:t,C=u.dom,(u=C.getParent(y,E(af,u.schema)))&&C.isEmpty(u)?null!=(u=y.parentNode)&&u.replaceChild(b,y):(hi(Z.fromDom(y)),C.isEmpty(y)?null!=(u=y.parentNode)&&u.replaceChild(b,y):C.insertAfter(b,y)),f=r,u=m,C=t,g=n,b=o,y=a,p=f.formatter,h=f.dom,v=O(Be(p.get()),e=>e!==g&&!it(e,"removeformat")),v=a0(f,C,v),C=0<O(v,e=>!vf(f,e,g)).length?(v=C.cloneNode(!1),h.add(u,v),p.remove(g,b,v,y),h.remove(v),I.some(v)):I.none(),u=u0([...w,...C.toArray(),...d],m),c&&d0(r,c,H(c)),i.setCursorLocation(u,1),g0(r,m),s.isEmpty(t)&&s.remove(t)))}},h0=(e,t,r)=>{var n=e.selection,o=e.getBody();c0(e,null,r),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==s0||c0(e,_u(o,n.getStart()),!0),37!==t&&39!==t||c0(e,_u(o,n.getStart()),!0)},v0=e=>P(e)&&dt(e.data,Qn),b0=e=>{var t=l0(!1),e=u0(e,t.dom);return{caretContainer:t,caretPosition:L(e,0)}},y0=(e,t)=>{var{caretContainer:t,caretPosition:r}=b0(t);return yn(Z.fromDom(e),t),Q(Z.fromDom(e)),r},C0=(e,t)=>{return!ku(t.dom)&&(e=e.schema.getTextInlineElements(),G(e,X(t)))&&!ku(t.dom)&&!io(t.dom)},w0={},E0=so(["pre"]);var x0;e="pre",t=e=>{var t,r=e.selection.getRng();r.collapsed||(r=e.selection.getSelectedBlocks(),e=O(O(r,E0),(t=r,e=>{e=e.previousSibling;return E0(e)&&D(t,e)})),K(e,e=>{var t,r;t=e.previousSibling,e=e,e=Z.fromDom(e),r=Dr(e).dom,Q(e),_n(Z.fromDom(t),[Z.fromTag("br",r),Z.fromTag("br",r),...Ur(e)])}))},w0[e]||(w0[e]=[]),w0[e].push(t);const k0=["fontWeight","fontStyle","color","fontSize","fontFamily"],_0=e=>be(e,e=>{return Cf(e)&&"span"===e.inline&&(e=e,F(e.styles))&&W(Be(e.styles),e=>D(k0,e))}),S0=(e,t)=>{e=e.get(t);return j(e)?_0(e):I.none()},N0=(e,t)=>Cu(t,L.fromRangeStart(e)).isNone(),R0=(e,t)=>!1===yu(t,L.fromRangeEnd(e)).exists(e=>!R(e.getNode())||yu(t,e).isSome()),A0=t=>e=>Eo(e)&&t.isEditable(e),D0=e=>O((e=>{var t,r=e.getSelectedBlocks();const n=e.getRng();return e.isCollapsed()?[]:1===r.length?N0(n,r[0])&&R0(n,r[0])?r:[]:(e=Re(r).filter(e=>N0(n,e)).toArray(),t=Ae(r).filter(e=>R0(n,e)).toArray(),r=r.slice(1,-1),e.concat(r).concat(t))})(e),A0(e.dom)),T0=e=>O(e.getSelectedBlocks(),A0(e.dom)),O0=B.each,B0=e=>J(e)&&!Iu(e)&&!ku(e)&&!io(e),P0=(t,r)=>{for(let e=t;e;e=e[r]){if(P(e)&&ft(e.data))return t;if(J(e)&&!Iu(e))return e}return t},L0=(e,t,r)=>{var n=fb(e),o=ao(t)&&e.dom.isEditable(t),a=ao(r)&&e.dom.isEditable(r);if(o&&a){const l=P0(t,"previousSibling");var s=P0(r,"nextSibling");if(n.compare(l,s)){for(let e=l.nextSibling;e&&e!==s;){var i=e;e=e.nextSibling,l.appendChild(i)}return e.dom.remove(s),B.each(B.grep(s.childNodes),e=>{l.appendChild(e)}),l}}return r},M0=(e,t,r,n)=>{n&&!1!==t.merge_siblings&&(t=null!=(t=L0(e,of(n),n))?t:n,L0(e,t,of(t,!0)))},I0=(e,t,r)=>{O0(e.childNodes,e=>{B0(e)&&(t(e)&&r(e),e.hasChildNodes())&&I0(e,t,r)})},F0=(t,r)=>e=>!(!e||!ff(t,e,r)),U0=(r,n,o)=>e=>{var t;r.setStyle(e,n,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=r,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},z0=Gl([{keep:[]},{rename:["name"]},{removed:[]}]),j0=/^(src|href|style)$/,H0=B.each,$0=mf,V0=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),q0=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];return J(n)&&(t=n.childNodes.length-1,!r&&o&&o--,n=n.childNodes[o>t?t:o]),P(n)&&r&&o>=n.data.length&&(n=new Xn(n,e.getBody()).next()||n),n=P(n)&&!r&&0===o?new Xn(n,e.getBody()).prev()||n:n},W0=(e,t)=>{var t=t?"firstChild":"lastChild",r=e[t];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[t]||r:e},K0=(e,t,r,n)=>{e=e.create(r,n);return null!=(r=t.parentNode)&&r.insertBefore(e,t),e.appendChild(t),e},Y0=(e,t,r,n,o)=>{t=Z.fromDom(t),e=Z.fromDom(e.create(n,o)),n=(r?Fr:Ir)(t);return _n(e,n),(r?(yn(t,e),wn):(Cn(t,e),En))(e,t),e.dom},G0=(t,e,r)=>{var n=e.parentNode;let o;const a=t.dom,s=yd(t);!bf(r)||n!==a.getRoot()||r.list_block&&$0(e,r.list_block)||K(De(e.childNodes),e=>{sf(t,s,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=K0(a,e,s),a.setAttribs(o,Cd(t))):o=null}),n=r,yf(n)&&Cf(n)&&jt(g(n,"mixed"),!0)&&!$0(r.inline,e)||a.remove(e,!0)},X0=(e,t,r)=>w(e)?{name:t,value:null}:{name:e,value:cf(t,r)},Z0=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Q0=(n,o,a,s,i)=>{let l=!1;H0(a.styles,(e,t)=>{var{name:t,value:e}=X0(t,e,s),r=uf(e,t);(a.remove_similar||y(e)||!J(i)||$0(ff(n,i,t),r))&&n.setStyle(o,t,""),l=!0}),l&&Z0(n,o)},J0=(e,t,n,r,o)=>{const a=e.dom;var s=fb(e),i=e.schema;if(Cf(t)&&Zo(i,t.inline)&&Jo(i,r)&&r.parentElement===e.getBody())return G0(e,r,t),z0.removed();if(!t.ceFalseOverride&&r&&"false"===a.getContentEditableParent(r))return z0.keep();if(r&&!e0(a,r,t)&&(i=r,!t.links||"A"!==i.nodeName))return z0.keep();const l=r,d=t.preserve_attributes;if(Cf(t)&&"all"===t.remove&&j(d)){i=O(a.getAttribs(l),e=>D(d,e.name.toLowerCase()));if(a.removeAllAttribs(l),K(i,e=>a.setAttrib(l,e.name,e.value)),0<i.length)return z0.rename("span")}if("all"!==t.remove){Q0(a,l,t,n,o),H0(t.attributes,(e,r)=>{var{name:r,value:e}=X0(r,e,n);if(t.remove_similar||y(e)||!J(o)||$0(a.getAttrib(o,r),e)){if("class"===r){e=a.getAttrib(l,r);if(e){let t="";if(K(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void a.setAttrib(l,r,t)}}j0.test(r)&&l.removeAttribute("data-mce-"+r),"style"===r&&so(["li"])(l)&&"none"===a.getStyle(l,"list-style-type")?(l.removeAttribute(r),a.setStyle(l,"list-style-type","none")):("class"===r&&l.removeAttribute("className"),l.removeAttribute(r))}}),H0(t.classes,e=>{e=cf(e,n),J(o)&&!a.hasClass(o,e)||a.removeClass(l,e)});var c=a.getAttribs(l);for(let e=0;e<c.length;e++){var m=c[e].nodeName;if(!s.isAttributeInternal(m))return z0.keep()}}return"none"!==t.remove?(G0(e,l,t),z0.removed()):z0.keep()},ey=(r,n,e,t,o,a,s,i)=>{let l,d;var c=r.dom;if(e){var m=e.parentNode;for(let e=t.parentNode;e&&e!==m;e=e.parentNode){let t=c.clone(e,!1);for(let e=0;e<n.length&&null!==(t=((t,e,r,n)=>J0(t,e,r,n,n).fold(q(n),e=>{return t.dom.createFragment().appendChild(n),t.dom.rename(n,e)},q(null)))(r,n[e],i,t));e++);t&&(l&&t.appendChild(l),d=d||t,l=t)}!a||s.mixed&&c.isBlock(e)||(t=null!=(a=c.split(e,t))?a:t),l&&d&&(null!=(e=o.parentNode)&&e.insertBefore(l,o),d.appendChild(o),Cf(s))&&M0(r,s,0,l)}return t},ty=(o,r,n,e,a)=>{const s=o.formatter.get(r),i=s[0],l=o.dom;var d,t,c,m=o.selection;const u=e=>{var t=((r,e,n,o,a)=>{let s;return e.parentNode&&K(pf(r.dom,e.parentNode).reverse(),e=>{var t;!s&&J(e)&&"_start"!==e.id&&"_end"!==e.id&&(t=r0(r,e,n,o,a))&&!1!==t.split&&(s=e)}),s})(o,e,r,n,a);return ey(o,s,t,e,e,!0,i,n)},f=e=>Iu(e)&&J(e)&&("_start"===e.id||"_end"===e.id),g=t=>W(s,e=>ny(o,e,n,t,t)),p=t=>{var r=De(t.childNodes),e=g(t)||W(s,e=>e0(l,t,e)),n=t.parentNode;if(!e&&H(n)&&wf(i)&&g(n),i.deep&&r.length)for(let e=0;e<r.length;e++)p(r[e]);K(["underline","line-through","overline"],e=>{J(t)&&o.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&gf(l,t.parentNode)===e&&ny(o,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},void 0,t)})},h=t=>{var r=l.get(t?"_start":"_end");if(r){let e=r[t?"firstChild":"lastChild"];return f(e)&&(e=e[t?"firstChild":"lastChild"]),P(e)&&0===e.data.length&&(e=t?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),l.remove(r,!0),e}return null},v=e=>{let t,r,n=Ff(l,e,s,e.collapsed);if(i.split){if(n=Bg(n),t=q0(o,n,!0),r=q0(o,n),t!==r){if(t=W0(t,!0),r=W0(r,!1),V0(l,t,r))return e=I.from(t.firstChild).getOr(t),u(Y0(l,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0);if(V0(l,r,t))return e=I.from(r.lastChild).getOr(r),u(Y0(l,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1);t=K0(l,t,"span",{id:"_start","data-mce-type":"bookmark"}),r=K0(l,r,"span",{id:"_end","data-mce-type":"bookmark"});e=l.createRng();e.setStartAfter(t),e.setEndBefore(r),Uf(l,e,e=>{K(e,e=>{Iu(e)||Iu(e.parentNode)||u(e)})}),u(t),u(r),t=h(!0),r=h()}else t=r=u(t);n.startContainer=t.parentNode||t,n.startOffset=l.nodeIndex(t),n.endContainer=r.parentNode||r,n.endOffset=l.nodeIndex(r)+1}Uf(l,n,e=>{K(e,p)})};e?ef(e)?((t=l.createRng()).setStartBefore(e),t.setEndAfter(e),v(t)):v(e):(m.isCollapsed()&&Cf(i)&&!qu(o).length?p0(o,r,n,a):(nf(o,()=>Qu(o,v),e=>Cf(i)&&n0(o,r,n,e)),o.nodeChanged()),d=o,c=n,"removeformat"===(t=r)?K(T0(d.selection),t=>{K(k0,e=>d.dom.setStyle(t,e,"")),Z0(d.dom,t)}):S0(d.formatter,t).each(t=>{K(T0(d.selection),e=>Q0(d.dom,e,t,c,null))})),Zf(o,r,e,n)},ry=(e,t,r,n,o)=>{(n||e.selection.isEditable())&&ty(e,t,r,n,o)},ny=(t,e,r,n,o)=>J0(t,e,r,n,o).fold(u,e=>(t.dom.rename(n,e),!0),le),oy=B.each,ay=(a,e,s,i)=>{oy(e,t=>{var n,e,r,o;Cf(t)&&oy(a.dom.select(t.inline,i),e=>{B0(e)&&ny(a,t,s,e,t.exact?e:null)}),n=a.dom,r=i,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",O0(n.select(o,r),r=>{B0(r)&&n.isEditable(r)&&O0(e.styles,(e,t)=>{n.setStyle(r,t,"")})}))})},sy=B.each,iy=(e,t,r,n)=>{var o,a;return!!(oc(e)&&Cf(t)&&r.parentNode)&&(t=Wa(e.schema),o=Z.fromDom(r),a=e=>ku(e.dom),o=Jr(o,a).isSome(),$e(t,n))&&Do(e.schema,r.parentNode,{skipBogus:!1,includeZwsp:!0})&&!o},ly=(r,n,e,o)=>{sy(e.styles,(e,t)=>{r.setStyle(n,t,cf(e,o))}),e.styles&&(e=r.getAttrib(n,"style"))&&r.setAttrib(n,"data-mce-style",e)},dy=(w,E,x,t)=>{const k=w.formatter.get(E),_=k[0],n=!t&&w.selection.isCollapsed(),o=w.dom;var e=w.selection;const S=(r,e=_)=>{$(e.onformat)&&e.onformat(r,e,x,t),ly(o,r,e,x),sy(e.attributes,(e,t)=>{o.setAttrib(r,t,cf(e,x))}),sy(e.classes,e=>{e=cf(e,x);o.hasClass(r,e)||o.addClass(r,e)})},N=(e,t)=>{let r=!1;return sy(e,e=>!(!yf(e)||("false"!==o.getContentEditable(t)||e.ceFalseOverride)&&(!H(e.collapsed)||e.collapsed===n)&&(o.is(t,e.selector)&&!ku(t)&&(S(t,e),r=!0)))),r},r=(p,e,f)=>{const h=[];let g=!0;const v=_.inline||_.block,b=(t=v,z(t)?(t=o.create(t),S(t),t):null);var t;const y=e=>{return t=_,bf(t)&&!0===t.wrapper&&r0(w,e,E,x);var t},C=(e,t,r)=>{n=_;var n=bf(n)&&!0!==n.wrapper&&af(w.schema,e)&&sf(w,t,v);return r&&n};Uf(p,e,e=>{let m;const u=t=>{let e=!1,r=g,n=!1;var o,a,s,i,l=t.parentNode,d=l.nodeName.toLowerCase(),c=p.getContentEditable(t),c=(H(c)&&(r=g,g="true"===c,e=!0,n=df(w,t)),g&&!e);if(R(t)&&!iy(w,_,t,d))m=null,bf(_)&&p.remove(t);else if(y(t))m=null;else if(C(t,d,c))o=p.rename(t,v),S(o),h.push(o),m=null;else{if(yf(_)){let e=N(k,t);if(!e&&H(l)&&wf(_)&&(e=N(k,l)),!Cf(_)||e)return void(m=null)}H(b)&&(o=t,d=d,c=c,a=n,s=o.nodeName.toLowerCase(),s=sf(w,v,s)&&sf(w,d,v),d=!f&&P(o)&&Ci(o.data),i=ku(o),o=!Cf(_)||!p.isBlock(o),c||a)&&s&&!d&&!i&&o?(m||(m=p.clone(b,!1),l.insertBefore(m,t),h.push(m)),n&&e&&(g=r),m.appendChild(t)):(m=null,K(De(t.childNodes),u),e&&(g=r),m=null)}};K(e,u)}),!0===_.links&&K(h,e=>{const t=e=>{"A"===e.nodeName&&S(e,_),K(De(e.childNodes),t)};t(e)}),K(h,e=>{var r,t,n,o,a,s,i,l=(e=>{let r=0;return K(e.childNodes,e=>{var t;t=e,H(t)&&P(t)&&0===t.length||Iu(e)||r++}),r})(e);if((1<h.length||!p.isBlock(e))&&0===l)p.remove(e,!0);else if(Cf(_)||bf(_)&&_.wrapper){_.exact||1!==l||(i=e,e=be(i.childNodes,tf).filter(e=>"false"!==p.getContentEditable(e)&&e0(p,e,_)).map(e=>{var t=p.clone(e,!1);return S(t),p.replace(t,i,!0),p.remove(e,!0),t}).getOr(i)),ay(w,k,x,e),t=w,n=_,o=E,a=x,l=(s=e).parentNode,r0(t,l,o,a)&&ny(t,n,a,s)||n.merge_with_parents&&l&&t.dom.getParent(l,e=>!!r0(t,e,o,a)&&(ny(t,n,a,s),!0));var d=p,l=_,c=x,m=e;if(l.styles&&l.styles.backgroundColor){const f=F0(d,"fontSize");I0(m,e=>f(e)&&d.isEditable(e),U0(d,"backgroundColor",cf(l.styles.backgroundColor,c)))}r=p,m=_,l=e,c=e=>{var t;ao(e)&&J(e.parentNode)&&r.isEditable(e)&&(t=gf(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},m.styles&&(m.styles.color||m.styles.textDecoration)&&(B.walk(l,c,"childNodes"),c(l));var u=p,m=_,c=e;if(Cf(m)&&("sub"===m.inline||"sup"===m.inline)){const g=F0(u,"fontSize");I0(c,e=>g(e)&&u.isEditable(e),U0(u,"fontSize",""));m=O(u.select("sup"===m.inline?"sub":"sup",c),u.isEditable);u.remove(m,!0)}M0(w,_,0,e)}})};var a,s=ef(t)?t:e.getNode();if("false"!==o.getContentEditable(s)||df(w,s)){if(_){if(t)ef(t)?N(k,t)||((i=o.createRng()).setStartBefore(t),i.setEndAfter(t),r(o,Ff(o,i,k),!0)):r(o,t,!0);else{if(n&&Cf(_)&&!qu(w).length){var i=w;var l=E;var d=x;let r;var c=i.selection,m=i.formatter.get(l);if(m){var u=c.getRng();let t=u.startOffset;var f=u.startContainer.nodeValue,g=(r=_u(i.getBody(),c.getStart()),/[^\s\u00a0\u00ad\u200b\ufeff]/);if(f&&0<t&&t<f.length&&g.test(f.charAt(t))&&g.test(f.charAt(t-1))){var g=c.getBookmark(),f=(u.collapse(!0),Ff(i.dom,u,m)),f=Bg(f);i.formatter.apply(l,d,f),c.moveToBookmark(g)}else{let e=r?i0(r):null;r&&(null===e||void 0===e?void 0:e.data)===s0||(r=(m=i.getDoc(),f=l0(!0).dom,m.importNode(f,!0)),e=r.firstChild,u.insertNode(r),t=1,g0(i,r)),i.formatter.apply(l,d,r),c.setCursorLocation(e,t)}}}else e.setRng(Db(e.getRng())),nf(w,()=>{Qu(w,(e,t)=>{t=t?e:Ff(o,e,k);r(o,t,!1)})},le),w.nodeChanged();S0(w.formatter,E).each(t=>{K(D0(w.selection),e=>ly(o,e,t,x))})}g=E,a=w,G(w0,g)&&K(w0[g],e=>{e(a)})}}else N(k,t=s);Xf(w,E,t,x)},cy=(e,t,r,n)=>{(n||e.selection.isEditable())&&dy(e,t,r,n)},my=e=>G(e,"vars"),uy=e=>e.selection.getStart(),fy=(t,e,r,n,o)=>{return ve(e,e=>{e=t.formatter.matchNode(e,r,null!=o?o:{},n);return!C(e)},e=>!!Qb(t,e,r)||!n&&H(t.formatter.matchNode(e,r,o,!0)))},gy=(e,t)=>{t=null!=t?t:uy(e);return O(pf(e.dom,t),e=>J(e)&&!io(e))},py=(a,s,e)=>{const i=gy(a,s);Y(e,(e,o)=>{var t=e=>{var t=fy(a,i,o,e.similar,my(e)?e.vars:void 0);const r=t.isSome();if(e.state.get()!==r){e.state.set(r);const n=t.getOr(s);my(e)?e.callback(r,{node:n,format:o,parents:i}):K(e.callbacks,e=>e(r,{node:n,format:o,parents:i}))}};K([e.withSimilar,e.withoutSimilar],t),K(e.withVars,t)})},hy=(e,o,a,s,t,r)=>{{var i=e,n=a,l=s,d=t,c=r;const m=(e=o).get();K(n.split(","),t=>{var e,r=g(m,t).getOrThunk(()=>{var e={withSimilar:{state:Bo(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Bo(!1),similar:!1,callbacks:[]},withVars:[]};return m[t]=e}),n=()=>{var e=gy(i);return fy(i,e,t,d,c).isSome()};C(c)?((e=d?r.withSimilar:r.withoutSimilar).callbacks.push(l),1===e.callbacks.length&&e.state.set(n())):r.withVars.push({state:Bo(n()),similar:d,vars:c,callback:l})}),e.set(m)}return{unbind:()=>{{var e=o,t=a,r=s;const n=e.get();K(t.split(","),t=>g(n,t).each(e=>{n[t]={withSimilar:{...e.withSimilar,callbacks:O(e.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...e.withoutSimilar,callbacks:O(e.withoutSimilar.callbacks,e=>e!==r)},withVars:O(e.withVars,e=>e.callback!==r)}})),e.set(n)}}}},vy=B.explode,by=()=>{const o={};return{addFilter:(e,t)=>{K(vy(e),e=>{G(o,e)||(o[e]={name:e,callbacks:[]}),o[e].callbacks.push(t)})},getFilters:()=>He(o),removeFilter:(e,n)=>{K(vy(e),e=>{var t,r;G(o,e)&&(H(n)&&(t=o[e],0<(r=O(t.callbacks,e=>e!==n)).length)?t.callbacks=r:delete o[e])})}}},yy=(e,s,i)=>{e.addNodeFilter("font",e=>{K(e,e=>{const t=s.parse(e.attr("style"));var r,n=e.attr("color"),o=e.attr("face"),a=e.attr("size");n&&(t.color=n),o&&(t["font-family"]=o),a&&pt(a).each(e=>{t["font-size"]=i[e-1]}),e.name="span",e.attr("style",s.serialize(t)),r=e,n=["color","face","size"],K(n,e=>{r.attr(e,null)})})})},Cy=(e,t,r)=>{var n,o,a=as();t.convert_fonts_to_spans&&yy(e,a,B.explode(null!=(t=t.font_size_legacy_values)?t:"")),n=r,o=a,e.addNodeFilter("strike",e=>{const r="html4"!==n.type;K(e,e=>{var t;r?e.name="s":((t=o.parse(e.attr("style")))["text-decoration"]="line-through",e.name="span",e.attr("style",o.serialize(t)))})})},wy=e=>{var t,[e,...r]=e.split(","),r=r.join(","),e=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);return e?(r=((t=";base64"===e[2])?e=>{e=/([a-z0-9+\/=\s]+)/i.exec(e);return e?e[1]:""}:decodeURIComponent)(r),I.some({type:e[1],data:r,base64Encoded:t})):I.none()},Ey=(e,t,r=!0)=>{let n=t;if(r)try{n=atob(t)}catch(e){return I.none()}var o=new Uint8Array(n.length);for(let e=0;e<o.length;e++)o[e]=n.charCodeAt(e);return I.some(new Blob([o],{type:e}))},xy=e=>{return lt(e,"blob:")?(t=e,fetch(t).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):lt(e,"data:")?(r=e,new Promise((e,t)=>{wy(r).bind(({type:e,data:t,base64Encoded:r})=>Ey(e,t,r)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format");var r,t},ky=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var e;t(null==(e=r.error)?void 0:e.message)},r.readAsDataURL(n)});let _y=0;const Sy=(e,n,o)=>wy(e).bind(({data:e,type:t,base64Encoded:r})=>{return n&&!r?I.none():(r=r?e:btoa(e),o(r,t))}),Ny=(e,t,r)=>{t=e.create("blobid"+_y++,t,r);return e.add(t),t},Ry=(r,e,t=!1)=>Sy(e,t,(t,e)=>I.from(r.getByData(t,e)).orThunk(()=>Ey(e,t).map(e=>Ny(r,e,t)))),Ay=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,Dy=e=>I.from(e.match(Ay)).bind(e=>Ne(e,1)).map(e=>lt(e,"www.")?e.substring(4):e),Ty=(e,t)=>{I.from(e.attr("src")).bind(Dy).forall(e=>!D(t,e))&&e.attr("sandbox","")},Oy=(e,t)=>lt(e,t+"/"),By=({type:e,src:t,width:r,height:n}={},o,a)=>{e=e;var e=C(e)?"iframe":Oy(e,"image")?"img":Oy(e,"video")?"video":Oy(e,"audio")?"audio":"iframe",s=new jp(e,1);return s.attr("audio"==e?{src:t}:{src:t,width:r,height:n}),"audio"!=e&&"video"!=e||s.attr("controls",""),"iframe"==e&&o&&Ty(s,a),s},Py=(e,t)=>{const n=t["blob_cache"];if(n){const r=t=>{var e,r=t.attr("src");(e=t).attr("src")===U.transparentSrc||H(e.attr("data-mce-placeholder"))||(e=t,H(e.attr("data-mce-bogus")))||oe(r)||Ry(n,r,!0).each(e=>{t.attr("src",e.blobUri())})};e.addAttributeFilter("src",e=>K(e,r))}},Ly=(e,o)=>{var t=e.schema;e.addAttributeFilter("href",e=>{let t=e.length;const r=e=>{return e.split(" ").filter(e=>0<e.length).concat(["noopener"]).sort().join(" ")};if(!o.allow_unsafe_link_target)for(;t--;){var n=e[t];"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",(e=>{e=e?B.trim(e):"";return/\b(noopener)\b/g.test(e)?e:r(e)})(n.attr("rel")))}}),o.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t=e.length,r,n,o,a;for(;t--;)if("a"===(a=e[t]).name&&a.firstChild&&!a.attr("href"))for(o=a.parent,r=a.lastChild;r&&o;)n=r.prev,o.insert(r,a),r=n}),o.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t=e.length,r,n;for(;t--;){var o;!(n=(r=e[t]).parent)||"ul"!==n.name&&"ol"!==n.name||(r.prev&&"li"===r.prev.name?r.prev.append(r):((o=new jp("li",1)).attr("style","list-style-type: none"),r.wrap(o)))}});const l=t.getValidClasses(),r=(o.validate&&l&&e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var n=e[t],o=null!=(o=n.attr("class"))?o:"",a=B.explode(o," ");let r="";for(let t=0;t<a.length;t++){var s=a[t];let e=!1;var i=l["*"];i&&i[s]&&(e=!0),i=l[n.name],(e=!e&&i&&i[s]?!0:e)&&(r&&(r+=" "),r+=s)}r.length||(r=null),n.attr("class",r)}}),Py(e,o),null!=(t=o.sandbox_iframes)&&t),n=Oe(null!=(t=o.sandbox_iframes_exclusions)?t:[]);o.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>K(e,e=>{e.replace(By({type:e.attr("type"),src:"object"===e.name?e.attr("data"):e.attr("src"),width:e.attr("width"),height:e.attr("height")},r,n))})),r&&e.addNodeFilter("iframe",e=>K(e,e=>Ty(e,n)))},{entries:My,setPrototypeOf:Iy,isFrozen:Fy,getPrototypeOf:Uy,getOwnPropertyDescriptor:zy}=Object;let{freeze:jy,seal:Hy,create:$y}=Object,{apply:Vy,construct:qy}="undefined"!=typeof Reflect&&Reflect;Vy=Vy||function(e,t,r){return e.apply(t,r)},jy=jy||function(e){return e},Hy=Hy||function(e){return e},qy=qy||function(e,t){return new e(...t)};const Wy=nC(Array.prototype.forEach),Ky=nC(Array.prototype.pop),Yy=nC(Array.prototype.push),Gy=nC(String.prototype.toLowerCase),Xy=nC(String.prototype.toString),Zy=nC(String.prototype.match),Qy=nC(String.prototype.replace),Jy=nC(String.prototype.indexOf),eC=nC(String.prototype.trim),tC=nC(RegExp.prototype.test),rC=(x0=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return qy(x0,t)});function nC(o){return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Vy(o,e,r)}}function je(t,r,n){var e,o;n=null!=(e=n)?e:Gy,Iy&&Iy(t,null);let a=r.length;for(;a--;){let e=r[a];"string"==typeof e&&(o=n(e))!==e&&(Fy(r)||(r[a]=o),e=o),t[e]=!0}return t}function oC(e){var t,r,n=$y(null);for([t,r]of My(e))n[t]=r;return n}function aC(e,t){for(;null!==e;){var r=zy(e,t);if(r){if(r.get)return nC(r.get);if("function"==typeof r.value)return nC(r.value)}e=Uy(e)}return function(e){return console.warn("fallback value for",e),null}}const sC=jy(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),iC=jy(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lC=jy(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dC=jy(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cC=jy(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mC=jy(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),uC=jy(["#text"]),fC=jy(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),gC=jy(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pC=jy(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hC=jy(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var n=Hy(/\{\{[\w\W]*|[\w\W]*\}\}/gm),r=Hy(/<%[\w\W]*|[\w\W]*%>/gm),e=Hy(/\${[\w\W]*}/gm),t=Hy(/^data-[\-\w.\u00B7-\uFFFF]/),vC=Hy(/^aria-[\-\w]+$/);const bC=Hy(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var yC=Hy(/^(?:\w+script|data):/i),CC=Hy(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);const wC=Hy(/^html$/i);var EC=Object.freeze({__proto__:null,MUSTACHE_EXPR:n,ERB_EXPR:r,TMPLIT_EXPR:e,DATA_ATTR:t,ARIA_ATTR:vC,IS_ALLOWED_URI:bC,IS_SCRIPT_OR_DATA:yC,ATTR_WHITESPACE:CC,DOCTYPE_NAME:wC});var xC=function M(e){e=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;const i=e=>M(e);if(i.version="3.0.5",i.removed=[],!e||!e.document||9!==e.document.nodeType)return i.isSupported=!1,i;const l=e.document,I=l.currentScript;let o=e.document;const{DocumentFragment:F,HTMLTemplateElement:U,Node:d,Element:z,NodeFilter:t,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:H,DOMParser:$,trustedTypes:c}=e;e=z.prototype;const V=aC(e,"cloneNode"),q=aC(e,"nextSibling"),W=aC(e,"childNodes"),a=aC(e,"parentNode");"function"==typeof U&&(e=o.createElement("template")).content&&e.content.ownerDocument&&(o=e.content.ownerDocument);let m,u="";const{implementation:s,createNodeIterator:K,createDocumentFragment:Y,getElementsByTagName:G}=o,X=l.importNode;let n={};i.isSupported="function"==typeof My&&"function"==typeof a&&s&&void 0!==s.createHTMLDocument;const{MUSTACHE_EXPR:Z,ERB_EXPR:Q,TMPLIT_EXPR:J,DATA_ATTR:ee,ARIA_ATTR:te,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:ne}=EC;let oe=EC.IS_ALLOWED_URI,f=null;const ae=je({},[...sC,...iC,...lC,...cC,...uC]);let g=null;const se=je({},[...fC,...gC,...pC,...hC]);let p=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),h=null,ie=null,le=!0,de=!0,ce=!1,me=!0,v=!1,b=!1,ue=!1,fe=!1,y=!1,C=!1,w=!1,ge=!0,pe=!1;const he="user-content-";let ve=!0,E=!1,r={},x=null;const be=je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ye=null;const Ce=je({},["audio","video","img","source","image","track"]);let we=null;const Ee=je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),k="http://www.w3.org/1998/Math/MathML",_="http://www.w3.org/2000/svg",S="http://www.w3.org/1999/xhtml";let N=S,xe,ke=null;const _e=je({},[k,_,S],Xy);let R;const Se=["application/xhtml+xml","text/html"];let A,D=null;function Ne(e){return e instanceof RegExp||e instanceof Function}function Re(e){if(!D||D!==e){if(e=oC(e=e&&"object"==typeof e?e:{}),R=R=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,A="application/xhtml+xml"===R?Xy:Gy,f="ALLOWED_TAGS"in e?je({},e.ALLOWED_TAGS,A):ae,g="ALLOWED_ATTR"in e?je({},e.ALLOWED_ATTR,A):se,ke="ALLOWED_NAMESPACES"in e?je({},e.ALLOWED_NAMESPACES,Xy):_e,we="ADD_URI_SAFE_ATTR"in e?je(oC(Ee),e.ADD_URI_SAFE_ATTR,A):Ee,ye="ADD_DATA_URI_TAGS"in e?je(oC(Ce),e.ADD_DATA_URI_TAGS,A):Ce,x="FORBID_CONTENTS"in e?je({},e.FORBID_CONTENTS,A):be,h="FORBID_TAGS"in e?je({},e.FORBID_TAGS,A):{},ie="FORBID_ATTR"in e?je({},e.FORBID_ATTR,A):{},r="USE_PROFILES"in e&&e.USE_PROFILES,le=!1!==e.ALLOW_ARIA_ATTR,de=!1!==e.ALLOW_DATA_ATTR,ce=e.ALLOW_UNKNOWN_PROTOCOLS||!1,me=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,v=e.SAFE_FOR_TEMPLATES||!1,b=e.WHOLE_DOCUMENT||!1,y=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,w=e.RETURN_TRUSTED_TYPE||!1,fe=e.FORCE_BODY||!1,ge=!1!==e.SANITIZE_DOM,pe=e.SANITIZE_NAMED_PROPS||!1,ve=!1!==e.KEEP_CONTENT,E=e.IN_PLACE||!1,oe=e.ALLOWED_URI_REGEXP||bC,N=e.NAMESPACE||S,p=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(p.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ne(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(p.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(p.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),v&&(de=!1),C&&(y=!0),r&&(f=je({},[...uC]),g=[],!0===r.html&&(je(f,sC),je(g,fC)),!0===r.svg&&(je(f,iC),je(g,gC),je(g,hC)),!0===r.svgFilters&&(je(f,lC),je(g,gC),je(g,hC)),!0===r.mathMl)&&(je(f,cC),je(g,pC),je(g,hC)),e.ADD_TAGS&&je(f=f===ae?oC(f):f,e.ADD_TAGS,A),e.ADD_ATTR&&je(g=g===se?oC(g):g,e.ADD_ATTR,A),e.ADD_URI_SAFE_ATTR&&je(we,e.ADD_URI_SAFE_ATTR,A),e.FORBID_CONTENTS&&je(x=x===be?oC(x):x,e.FORBID_CONTENTS,A),ve&&(f["#text"]=!0),b&&je(f,["html","head","body"]),f.table&&(je(f,["tbody"]),delete h.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=e.TRUSTED_TYPES_POLICY,u=m.createHTML("")}else null!==(m=void 0===m?function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null;var n="data-tt-policy-suffix",t="dompurify"+((r=t&&t.hasAttribute(n)?t.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(c,I):m)&&"string"==typeof u&&(u=m.createHTML(""));jy&&jy(e),D=e}}function T(t){Yy(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}}function Ae(e){let t,r;fe?e="<remove></remove>"+e:(n=Zy(e,/^[\r\n\t ]+/),r=n&&n[0]),"application/xhtml+xml"===R&&N===S&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=m?m.createHTML(e):e;if(N===S)try{t=(new $).parseFromString(n,R)}catch(e){}if(!t||!t.documentElement){t=s.createDocument(N,"template",null);try{t.documentElement.innerHTML=xe?u:n}catch(e){}}return n=t.body||t.documentElement,e&&r&&n.insertBefore(o.createTextNode(r),n.childNodes[0]||null),N===S?G.call(t,b?"html":"body")[0]:b?t.documentElement:n}function De(e){return K.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null,!1)}function O(e){return"object"==typeof d?e instanceof d:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Te(t){var e;if(L("beforeSanitizeElements",t,null),!((r=t)instanceof H)||"string"==typeof r.nodeName&&"string"==typeof r.textContent&&"function"==typeof r.removeChild&&r.attributes instanceof j&&"function"==typeof r.removeAttribute&&"function"==typeof r.setAttribute&&"string"==typeof r.namespaceURI&&"function"==typeof r.insertBefore&&"function"==typeof r.hasChildNodes){var r=A(t.nodeName);if(L("uponSanitizeElement",t,{tagName:r,allowedTags:f}),!t.hasChildNodes()||O(t.firstElementChild)||O(t.content)&&O(t.content.firstElementChild)||!tC(/<[/\w]/g,t.innerHTML)||!tC(/<[/\w]/g,t.textContent)){if(f[r]&&!h[r])return t instanceof z&&!function(e){let t=a(e);t&&t.tagName||(t={namespaceURI:N,tagName:"template"});var r=Gy(e.tagName),n=Gy(t.tagName);return ke[e.namespaceURI]&&(e.namespaceURI===_?t.namespaceURI===S?"svg"===r:t.namespaceURI===k?"svg"===r&&("annotation-xml"===n||Me[n]):Boolean(B[r]):e.namespaceURI===k?t.namespaceURI===S?"math"===r:t.namespaceURI===_?"math"===r&&Ie[n]:Boolean(Ue[r]):e.namespaceURI===S?!(t.namespaceURI===_&&!Ie[n]||t.namespaceURI===k&&!Me[n]||Ue[r])&&(Fe[r]||!B[r]):"application/xhtml+xml"===R&&ke[e.namespaceURI])}(t)||("noscript"===r||"noembed"===r||"noframes"===r)&&tC(/<\/no(script|embed|frames)/i,t.innerHTML)?(T(t),!0):(v&&3===t.nodeType&&(e=t.textContent,e=Qy(e,Z," "),e=Qy(e,Q," "),e=Qy(e,J," "),t.textContent!==e)&&(Yy(i.removed,{element:t.cloneNode()}),t.textContent=e),L("afterSanitizeElements",t,null),!1);if(!h[r]&&Oe(r)){if(p.tagNameCheck instanceof RegExp&&tC(p.tagNameCheck,r))return;if(p.tagNameCheck instanceof Function&&p.tagNameCheck(r))return}if(ve&&!x[r]){var n=a(t)||t.parentNode,o=W(t)||t.childNodes;if(o&&n)for(let e=o.length-1;0<=e;--e)n.insertBefore(V(o[e],!0),q(t))}}}return T(t),1}function Oe(e){return 0<e.indexOf("-")}function Be(t){let e,r;L("beforeSanitizeAttributes",t,null);var n=t.attributes;if(n){var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:g};for(r=n.length;r--;){var{name:a,namespaceURI:s}=i=n[r],i=e="value"===a?i.value:eC(i.value),l=A(a);if(o.attrName=l,o.attrValue=e,o.keepAttr=!0,o.forceKeepAttr=void 0,L("uponSanitizeAttribute",t,o),e=o.attrValue,!o.forceKeepAttr)if(o.keepAttr)if(!me&&tC(/\/>/i,e))P(a,t);else{v&&(e=Qy(e,Z," "),e=Qy(e,Q," "),e=Qy(e,J," "));var d=A(t.nodeName);if(ze(d,l,e)){if(!pe||"id"!==l&&"name"!==l||(P(a,t),e=he+e),m&&"object"==typeof c&&"function"==typeof c.getAttributeType&&!s)switch(c.getAttributeType(d,l)){case"TrustedHTML":e=m.createHTML(e);break;case"TrustedScriptURL":e=m.createScriptURL(e)}if(e!==i)try{s?t.setAttributeNS(s,a,e):t.setAttribute(a,e)}catch(e){P(a,t)}}else P(a,t)}else P(a,t)}L("afterSanitizeAttributes",t,null)}}function Pe(e){var t,r=De(e);for(L("beforeSanitizeShadowDOM",e,null);t=r.nextNode();)L("uponSanitizeShadowNode",t,null),Te(t)||(t.content instanceof F&&Pe(t.content),Be(t));L("afterSanitizeShadowDOM",e,null)}const Le=o.createElement("form"),Me=je({},["mi","mo","mn","ms","mtext"]),Ie=je({},["foreignobject","desc","title","annotation-xml"]),Fe=je({},["title","style","font","a","script"]),B=je({},iC),Ue=(je(B,lC),je(B,dC),je({},cC)),P=(je(Ue,mC),function(e,t){try{Yy(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Yy(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!g[e])if(y||C)try{T(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}),L=function(e,t,r){n[e]&&Wy(n[e],e=>{e.call(i,t,r,D)})},ze=function(e,t,r){if(ge&&("id"===t||"name"===t)&&(r in o||r in Le))return!1;if((!de||ie[t]||!tC(ee,t))&&(!le||!tC(te,t)))if(!g[t]||ie[t]){if(!(Oe(e)&&(p.tagNameCheck instanceof RegExp&&tC(p.tagNameCheck,e)||p.tagNameCheck instanceof Function&&p.tagNameCheck(e))&&(p.attributeNameCheck instanceof RegExp&&tC(p.attributeNameCheck,t)||p.attributeNameCheck instanceof Function&&p.attributeNameCheck(t))||"is"===t&&p.allowCustomizedBuiltInElements&&(p.tagNameCheck instanceof RegExp&&tC(p.tagNameCheck,r)||p.tagNameCheck instanceof Function&&p.tagNameCheck(r))))return!1}else if(!we[t]&&!tC(oe,Qy(r,ne,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Jy(r,"data:")||!ye[e])&&(!ce||tC(re,Qy(r,ne,"")))&&r)return!1;return!0};return i.sanitize=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let n,o;if("string"!=typeof(e=(xe=!e)?"\x3c!--\x3e":e)&&!O(e)){if("function"!=typeof e.toString)throw rC("toString is not a function");if("string"!=typeof(e=e.toString()))throw rC("dirty is not a string, aborting")}if(!i.isSupported)return e;if(ue||Re(r),i.removed=[],E="string"!=typeof e&&E){if(e.nodeName){r=A(e.nodeName);if(!f[r]||h[r])throw rC("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)1===(r=(n=Ae("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!y&&!v&&!b&&-1===e.indexOf("<"))return m&&w?m.createHTML(e):e;if(!(n=Ae(e)))return y?null:w?u:""}n&&fe&&T(n.firstChild);for(var a=De(E?e:n);t=a.nextNode();)Te(t)||(t.content instanceof F&&Pe(t.content),Be(t));if(E)return e;if(y){if(C)for(o=Y.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return o=g.shadowroot||g.shadowrootmode?X.call(l,o,!0):o}let s=b?n.outerHTML:n.innerHTML;return b&&f["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&tC(wC,n.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+s),v&&(s=Qy(s,Z," "),s=Qy(s,Q," "),s=Qy(s,J," ")),m&&w?m.createHTML(s):s},i.setConfig=function(e){Re(e),ue=!0},i.clearConfig=function(){D=null,ue=!1},i.isValidAttribute=function(e,t,r){return D||Re({}),e=A(e),t=A(t),ze(e,t,r)},i.addHook=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],Yy(n[e],t))},i.removeHook=function(e){if(n[e])return Ky(n[e])},i.removeHooks=function(e){n[e]&&(n[e]=[])},i.removeAllHooks=function(){n={}},i}();const kC=B.each,_C=B.trim,SC=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],NC={ftp:21,http:80,https:443,mailto:25},RC=["img","video"],AC=(e,t,r)=>{t=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(t)||!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,r=r,(H(e)?!e:!H(r)||!D(RC,r))&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t)))};class DC{static parseDataUri(e){let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}}static isDomSafe(e,t,r={}){return!!r.allow_script_urls||(e=Sa.decode(e).replace(/[\s\u0000-\u001F]+/g,""),!AC(r,e,t))}static getDocumentBaseUrl(e){var t;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!=(t=e.href)?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,t={}){this.path="",this.directory="",e=_C(e);t=(this.settings=t).base_uri;const n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{var r,o,a=0===e.indexOf("//");0!==e.indexOf("/")||a||(e=(t&&t.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t?t.path:new DC(document.location.href).directory,""===(null==t?void 0:t.protocol)?e="//mce_host"+n.toAbsPath(r,e):(o=/([^#?]*)([#?]?.*)/.exec(e))&&(e=(t&&t.protocol||"http")+"://mce_host"+n.toAbsPath(r,o[1])+o[2])),e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&kC(SC,(e,t)=>{let r=s[t];r=r&&r.replace(/\(mce_at\)/g,"@@"),n[e]=r}),t&&(n.protocol||(n.protocol=t.protocol),n.userInfo||(n.userInfo=t.userInfo),n.port||"mce_host"!==n.host||(n.port=t.port),n.host&&"mce_host"!==n.host||(n.host=t.host),n.source=""),a&&(n.protocol="")}}setPath(e){e=/^(.*?)\/?(\w+)?$/.exec(e);e&&(this.path=e[0],this.directory=e[1],this.file=e[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;e=new DC(e,{base_uri:this});if("mce_host"!==e.host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),r=e.getURI();if(t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r)return t;let n=this.toRelPath(this.path,e.path);return e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n}toAbsolute(e,t){e=new DC(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?NC[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r=0,n="",o,a;var s=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(s.length>=i.length)for(o=0,a=s.length;o<a;o++)if(o>=i.length||s[o]!==i[o]){r=o+1;break}if(s.length<i.length)for(o=0,a=i.length;o<a;o++)if(o>=s.length||s[o]!==i[o]){r=o+1;break}if(1===r)return t;for(o=0,a=s.length-(r-1);o<a;o++)n+="../";for(o=r-1,a=i.length;o<a;o++)o!==r-1?n+="/"+i[o]:n+=i[o];return n}toAbsPath(e,t){let r=0;var n=/\/$/.test(t)?"/":"",e=e.split("/"),o=t.split("/");const a=[];kC(e,e=>{e&&a.push(e)});var s=[];for(let e=o.length-1;0<=e;e--)0!==o[e].length&&"."!==o[e]&&(".."===o[e]?r++:0<r?r--:s.push(o[e]));t=a.length-r;let i;return 0!==(i=t<=0?xe(s).join("/"):a.slice(0,t).join("/")+"/"+xe(s).join("/")).indexOf("/")&&(i="/"+i),n&&i.lastIndexOf("/")!==i.length-1&&(i+=n),i}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const TC=B.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),OC="data-mce-type";let BC=0;const PC=(e,t,r,n,o)=>{var a=t.validate,s=r.getSpecialElements(),t=(e.nodeType===Xt&&!t.allow_conditional_comments&&/^\[if/i.test(null!=(t=e.nodeValue)?t:"")&&(e.nodeValue=" "+e.nodeValue),null!=(t=null==o?void 0:o.tagName)?t:e.nodeName.toLowerCase());if("html"!==n&&r.isValid(n))H(o)&&(o.allowedTags[t]=!0);else if(e.nodeType===Zt&&"body"!==t){const i=Z.fromDom(e);var n=cr(i,OC),e=lr(i,"data-mce-bogus");!n&&z(e)?("all"===e?Q:Nn)(i):(e=r.getElementRule(t),a&&!e?(G(s,t)?Q:Nn)(i):(H(o)&&(o.allowedTags[t]=!0),a&&e&&!n&&(K(null!=(r=e.attributesForced)?r:[],e=>{sr(i,e.name,"{$uid}"===e.value?"mce_"+BC++:e.value)}),K(null!=(s=e.attributesDefault)?s:[],e=>{cr(i,e.name)||sr(i,e.name,"{$uid}"===e.value?"mce_"+BC++:e.value)}),e.attributesRequired&&!W(e.attributesRequired,e=>cr(i,e))||e.removeEmptyAttrs&&(e=>{e=e.dom.attributes;return null==e||0===e.length})(i)?Nn(i):e.outputName&&e.outputName!==t&&ni(i,e.outputName))))}},LC=(e,t,r,n,o,a)=>"html"!==r&&!Io(n)||!(o in TC&&AC(e,a,n))&&(!e.validate||t.isValid(n,o)||lt(o,"data-")||lt(o,"aria-")),MC=(e,t)=>e.hasAttribute(OC)&&("id"===t||"class"===t||"style"===t),IC=(e,t)=>e in t.getBoolAttrs(),FC=(t,r,n,o)=>{var a=t["attributes"];for(let e=a.length-1;0<=e;e--){var s=a[e],i=s.name,s=s.value;LC(r,n,o,t.tagName.toLowerCase(),i,s)||MC(t,i)?IC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},UC=(l,d,c)=>{var e=xC();return e.addHook("uponSanitizeElement",(e,t)=>{PC(e,l,d,c.track(e),t)}),e.addHook("uponSanitizeAttribute",(e,t)=>{var r=l,n=d,o=c.current(),a=e.tagName.toLowerCase(),{attrName:s,attrValue:i}=t;t.keepAttr=LC(r,n,o,a,s,i),t.keepAttr?(t.allowedAttributes[s]=!0,IC(s,n)&&(t.attrValue=s),r.allow_svg_data_urls&&lt(i,"data:image/svg+xml")&&(t.forceKeepAttr=!0)):MC(e,s)&&(t.forceKeepAttr=!0)}),e},zC=(e,t)=>{var r={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},jC=e=>{var t=Uo(e);if("svg"===t){var r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>"xlink:"+e)};xC().sanitize(e,r)}else{if("math"!==t)throw new Error("Not a namespace element");r={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};xC().sanitize(e,r)}},HC=B.makeMap,$C=B.extend,VC=(r,e,n,o)=>{var t=r.name,a=t in n&&"title"!==t&&"textarea"!==t&&"noscript"!==t,s=e.childNodes;for(let e=0,t=s.length;e<t;e++){var i=s[e],l=new jp(i.nodeName.toLowerCase(),i.nodeType);if(J(i)){var d=i.attributes;for(let e=0,t=d.length;e<t;e++){var c=d[e];l.attr(c.name,c.value)}Io(l.name)&&(o(i),l.value=i.innerHTML)}else P(i)?(l.value=i.data,a&&(l.raw=!0)):(go(i)||uo(i)||fo(i))&&(l.value=i.data);Io(l.name)||VC(l,i,n,o),r.append(l)}},qC=(r,n,o,a)=>{const s=o.validate,i=n.getNonEmptyElements(),l=n.getWhitespaceElements(),t=$C(HC("script,style,head,html,body,title,meta,param"),n.getBlockElements()),d=Wa(n),c=/[ \t\r\n]+/g,m=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,f=e=>{let t=e.parent;for(;H(t);){if(t.name in l)return!0;t=t.parent}return!1},g=e=>e.name in t||ea(n,e)||Io(e.name)&&e.parent===r,p=(e,t)=>{t=t?e.prev:e.next;return!H(t)&&!oe(e.parent)&&g(e.parent)&&(e.parent!==r||!0===a.isRootContent)};return[t=>{var r;if(3===t.type&&!f(t)){let e=null!=(r=t.value)?r:"";e=e.replace(c," "),0===(e=xb(t.prev,g)||p(t,!0)?e.replace(m,""):e).length||" "===e&&t.prev&&t.prev.type===Xt&&t.next&&t.next.type===Xt?t.remove():t.value=e}},t=>{if(1===t.type){var e,r=n.getElementRule(t.name);s&&r&&(e=Eb(n,i,l,t),r.paddInEmptyBlock&&e&&(e=>{let t=e;for(;H(t);){if(t.name in d)return Eb(n,i,l,t);t=t.parent}return!1})(t)?yb(o,a,g,t):r.removeEmpty&&e?g(t)?t.remove():t.unwrap():r.paddEmpty&&(e||Cb(t))&&yb(o,a,g,t))}else if(3===t.type&&!f(t)){let e=null!=(r=t.value)?r:"";0===(e=t.next&&g(t.next)||p(t,!1)?e.replace(u,""):e).length?t.remove():t.value=e}}]},WC=(e={},E=Ya())=>{var t=by(),r=by();const x={validate:!0,root_name:"body",sanitize:!0,...e},k=new DOMParser,_=((a,s)=>{const i=jo();if(a.sanitize){const r=UC(a,s,i);return{sanitizeHtmlElement:(e,t)=>{r.sanitize(e,zC(a,t)),r.removed=[],i.reset()},sanitizeNamespaceElement:jC}}{const jC=V;return{sanitizeHtmlElement:(e,t)=>{for(var r,n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);r=n.nextNode();){var o=i.track(r);PC(r,a,s,o),J(r)&&FC(r,a,s,o)}i.reset()},sanitizeNamespaceElement:jC}}})(x,E);e=t.addFilter;const S=t.getFilters;var t=t.removeFilter,n=r.addFilter;const N=r.getFilters;r=r.removeFilter;const R=(e,t)=>{var r=z(t.attr(OC)),e=1===t.type&&!G(e,t.name)&&!ea(E,t)&&!Io(t.name);return 3===t.type||e&&!r};n={schema:E,addAttributeFilter:n,getAttributeFilters:N,removeAttributeFilter:r,addNodeFilter:e,getNodeFilters:S,removeNodeFilter:t,parse:(e,t={})=>{var r=x.validate,n=null!=(n=t.context)?n:x.root_name,e=((e,t,r="html")=>{var n="xhtml"===r?"application/xhtml+xml":"text/html",o=G(E.getSpecialElements(),t.toLowerCase());const a=o?`<${t}>${e}</${t}>`:e;t=k.parseFromString("xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${a}</body></html>`:/^[\s]*<head/i.test(e)||/^[\s]*<html/i.test(e)||/^[\s]*<!DOCTYPE/i.test(e)?`<html>${a}</html>`:`<body>${a}</body>`,n).body;return _.sanitizeHtmlElement(t,n),o?t.firstChild:t})(e,n,t.format);Go(E,e);const o=new jp(n,11);VC(o,e,E.getSpecialElements(),_.sanitizeNamespaceElement),e.innerHTML="";var[n,e]=qC(o,E,x,t);const a=[];var s=r?e=>{var t;e=e,t=a,Rb(E,e)&&t.push(e)}:V;const i={nodes:{},attributes:{}};var l=e=>hb(S(),N(),e,i),d=o,c=[n,l],m=[e,s],u=[];for(let e=d,t=e;e;e=(t=e).walk()){const b=e;K(c,e=>e(b)),oe(b.parent)&&b!==d?e=t:u.push(b)}for(let e=u.length-1;0<=e;e--){const y=u[e];K(m,e=>e(y))}a.reverse(),r&&0<a.length&&(t.context?({pass:n,fail:e}=ge(a,e=>e.parent===o),Sb(e,E,o,l),t.invalid=0<n.length):Sb(a,E,o,l));s=((e,t)=>{t=null!=(t=t.forced_root_block)?t:e.forced_root_block;return!1===t?"":!0===t?"p":t})(x,t);if(s&&("body"===o.name||t.isRootContent)){var f=o;var g=s;var p=$C(HC("script,style,head,html,body,title,meta,param"),E.getBlockElements());const C=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/;let r=f.firstChild,e=null;var h=e=>{var t;e&&((r=e.firstChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(C,"")),r=e.lastChild)&&3===r.type&&(r.value=null==(t=r.value)?void 0:t.replace(w,""))};if(E.isValidChild(f.name,g.toLowerCase())){for(;r;){var v=r.next;R(p,r)?(e||((e=new jp(g,1)).attr(x.forced_root_block_attrs),f.insert(e,r)),e.append(r)):(h(e),e=null),r=v}h(e)}}return t.invalid||vb(i,t),o}};return Ly(n,x),r=n,e=x,t=E,e.inline_styles&&Cy(r,e,t),n},KC=(e,t,r)=>{n=e;var n=Wb(n)?sh({validate:!1}).serialize(n):n,t=t(n);return!t.isDefaultPrevented()&&Wb(e)?t.content!==n?(n=WC({validate:!1,forced_root_block:!1,...r}).parse(t.content,{context:e.name}),{...t,content:n}):{...t,content:e}:t},YC=e=>({sanitize:Gc(e),sandbox_iframes:tm(e),sandbox_iframes_exclusions:rm(e)}),GC=(e,t)=>{return t.no_events?Yl.value(t):(t=eg(e,t)).isDefaultPrevented()?Yl.error(tg(e,{content:"",...t}).content):Yl.value(t)},XC=(t,e,r)=>{return r.no_events?e:KC(e,e=>tg(t,{...r,content:e}),YC(t)).content},ZC=(t,r)=>{var e;return r.no_events?Yl.value(r):(e=KC(r.content,e=>Qf(t,{...r,content:e}),YC(t))).isDefaultPrevented()?(Jf(t,e),Yl.error(void 0)):Yl.value(e)},QC=(e,t,r)=>{r.no_events||Jf(e,{...r,content:t})},JC=(e,t,r)=>({element:e,width:t,rows:r}),e1=(e,t)=>({element:e,cells:t}),t1=(e,t)=>dr(e,t).bind(pt).getOr(1),r1=e=>he(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),n1=(e,r)=>{var n=e.rows;for(let t=0;t<n.length;t++){var o=n[t].cells;for(let e=0;e<o.length;e++)if(k(o[e],r))return I.some({x:e,y:t})}return I.none()},o1=(e,t,r,n,o)=>{var a=[],s=e.rows;for(let e=r;e<=o;e++){var i=s[e].cells,i=t<n?i.slice(t,n+1):i.slice(n,t+1);a.push(e1(s[e].element,i))}return a},a1=e=>{const u=JC(ti(e),0,[]);return K(Kn(e,"tr"),(c,m)=>{K(Kn(c,"td,th"),(e,t)=>{var r=u,n=((e,t,r)=>{for(;((e,t,r)=>{e=e.rows;return!!(e[r]?e[r].cells:[])[t]})(e,t,r);)t++;return t})(u,t,m),o=m,a=c,s=e,i=t1(s,"rowspan"),l=t1(s,"colspan"),d=r.rows;for(let t=o;t<o+i;t++){d[t]||(d[t]=e1(ri(a),[]));for(let e=n;e<n+l;e++)d[t].cells[e]=t===o&&e===n?s:ti(s)}})}),JC(u.element,r1(u.rows),u.rows)},s1=e=>{return r=e=e,r=T(r.rows,e=>{var t=T(e.cells,e=>{e=ri(e);return mr(e,"colspan"),mr(e,"rowspan"),e}),e=ti(e.element);return _n(e,t),e}),e=ti(e.element),t=Z.fromTag("tbody"),_n(t,r),En(e,t),e;var t,r},i1=(s,e,t)=>n1(s,e).bind(a=>n1(s,t).map(e=>{return t=s,e=e,n=(r=a).x,r=r.y,o=e.x,e=e.y,n=r<e?o1(t,n,r,o,e):o1(t,n,e,o,r),JC(t.element,r1(n),n);var t,r,n,o})),l1=(r,t)=>be(r,e=>"li"===X(e)&&Gu(e,t)).fold(q([]),e=>{return t=r,be(t,e=>"ul"===X(e)||"ol"===X(e)).map(e=>{var t=Z.fromTag(X(e)),e=Ue(hn(e),(e,t)=>lt(t,"list-style"));return un(t,e),[Z.fromTag("li"),t]}).getOr([]);var t}),d1=(e,t,r)=>{var n,o=Z.fromDom(t.commonAncestorContainer),e=Sh(o,e),a=O(e,e=>r.isWrapper(X(e))),e=l1(e,t),t=a.concat(e.length?e:(n=o,ui(n)?Or(n).filter(mi).fold(q([]),e=>[n,e]):mi(n)?[n]:[]));return T(t,ti)},c1=()=>xg([]),m1=(e,t,r)=>{var n=Z.fromDom(t.cloneContents()),e=d1(e,t,r);return n=he(e,(e,t)=>(En(t,e),t),n),0<e.length?xg([n]):n},u1=(e,n)=>{return e=e,t=n[0],tn(t,"table",E(k,e)).bind(e=>{var t=n[0],r=n[n.length-1],e=a1(e);return i1(e,t,r).map(e=>xg([s1(e)]))}).getOrThunk(c1);var t},f1=(e,t,r)=>{var n=Vu(t,e);return 0<n.length?u1(e,n):(n=e,e=r,0<(r=t).length&&r[0].collapsed?c1():m1(n,r[0],e))},g1=(e,t)=>0<=t&&t<e.length&&zu(e.charAt(t)),p1=e=>wi(e.innerText),h1=(e,t)=>{var r,n,o,a,s,i;return"text"===t.format?(i=e,I.from(i.selection.getRng()).map(e=>{var t=I.from(i.dom.getParent(e.commonAncestorContainer,i.dom.isBlock)),r=i.getBody(),n=t.map(e=>e.nodeName).getOr("div").toLowerCase(),e=Z.fromDom(e.cloneContents()),n=(eh(e),th(e),i.dom.add(r,n,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.dom)),e=p1(n),o=wi(null!=(o=n.textContent)?o:"");return i.dom.remove(n),!g1(o,0)&&!g1(o,o.length-1)||(n=t.getOr(r),-1===(t=(o=p1(n)).indexOf(e)))?e:(g1(o,t-1)?" ":"")+e+(g1(o,t+e.length)?" ":"")}).getOr("")):(n=t,o=(r=e).selection.getRng(),a=r.dom.create("body"),s=r.selection.getSel(),s=Ip(r,Hu(s)),(s=n.contextual?f1(Z.fromDom(r.getBody()),s,r.schema).dom:o.cloneContents())&&a.appendChild(s),o=r.selection.serializer.serialize(a,n),"tree"!==t.format&&e.selection.isCollapsed()?"":o)},v1=(g,p)=>{var e=g.length+p.length+2;const h=new Array(e),v=new Array(e),i=(r,n,o,a,s)=>{var t=((a,s,i,l)=>{const d=s-a,c=l-i;if(0!=d&&0!=c){var m=d-c,u=c+d,f=(u%2==0?u:1+u)/2;h[1+f]=a,v[1+f]=s+1;let e,t,r,n,o;for(e=0;e<=f;++e){for(t=-e;t<=e;t+=2){for(r=t+f,t===-e||t!==e&&h[r-1]<h[r+1]?h[r]=h[r+1]:h[r]=h[r-1]+1,n=h[r],o=n-a+i-t;n<s&&o<l&&g[n]===p[o];)h[r]=++n,++o;if(m%2!=0&&m-e<=t&&t<=m+e&&v[r-m]<=h[r])return b(v[r-m],t+a-i,s,l)}for(t=m-e;t<=m+e;t+=2){for(r=t+f-m,t===m-e||t!==m+e&&v[r+1]<=v[r-1]?v[r]=v[r+1]-1:v[r]=v[r-1],n=v[r]-1,o=n-a+i-t;n>=a&&o>=i&&g[n]===p[o];)v[r]=n--,o--;if(m%2==0&&-e<=t&&t<=e&&v[r]<=h[r+m])return b(v[r],t+a-i,s,l)}}}return null})(r,n,o,a);if(null===t||t.start===n&&t.diag===n-a||t.end===r&&t.diag===r-o){let e=r,t=o;for(;e<n||t<a;)e<n&&t<a&&g[e]===p[t]?(s.push([0,g[e]]),++e,++t):a-o<n-r?(s.push([2,g[e]]),++e):(s.push([1,p[t]]),++t)}else{i(r,t.start,o,t.start-t.diag,s);for(let e=t.start;e<t.end;++e)s.push([0,g[e]]);i(t.end,n,t.end-t.diag,a,s)}},b=(e,t,r,n)=>{let o=e;for(;o-t<n&&o<r&&g[o]===p[o-t];)++o;return{start:e,end:o,diag:t}};e=[];return i(0,g.length,0,p.length,e),e},b1=e=>J(e)?e.outerHTML:P(e)?Sa.encodeRaw(e.data,!1):go(e)?"\x3c!--"+e.data+"--\x3e":"",y1=(e,t,r)=>{t=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(t);e.hasChildNodes()&&r<e.childNodes.length?(r=e.childNodes[r],e.insertBefore(t,r)):e.appendChild(t)},C1=(e,r)=>{let n=0;K(e,e=>{var t;0===e[0]?n++:1===e[0]?(y1(r,e[1],n),n++):2===e[0]&&(e=r,t=n,e.hasChildNodes())&&t<e.childNodes.length&&(t=e.childNodes[t],e.removeChild(t))})},w1=(e,t)=>O(T(De(e.childNodes),t?_(wi,b1):b1),e=>0<e.length),E1=Je(()=>document.implementation.createHTMLDocument("undo")),x1=e=>null!==e.querySelector("iframe"),k1=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),_1=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),S1=e=>{var t=e.serializer.getTempAttrs(),e=Jp(e.getBody(),t);return x1(e)?k1(w1(e,!0)):_1(wi(e.innerHTML))},N1=(e,t,r)=>{var n,o,a,r=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?(n=t.fragments,o=e.getBody(),a=T(De(o.childNodes),b1),C1(v1(a,n),o)):e.setContent(t.content,{format:"raw",no_selection:!H(r)||!Nu(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},R1=e=>"fragmented"===e.type?e.fragments.join(""):e.content,A1=e=>{var t=Z.fromTag("body",E1());return Tn(t,R1(e)),K(Kn(t,"*[data-mce-bogus]"),Nn),Dn(t)},D1=(e,t)=>{return!(!e||!t)&&(r=e,n=t,R1(r)===R1(n)||(r=e,n=t,A1(r)===A1(n)));var r,n},T1=e=>0===e.get(),O1=(e,t,r)=>{T1(r)&&(e.typing=t)},B1=(e,t)=>{e.typing&&(O1(e,!1,t),e.add())},P1=d=>({init:{bindEvents:V},undoManager:{beforeChange:(e,t)=>{var r;r=d,e=e,t=t,T1(e)&&t.set(ql(r.selection))},add:(e,t,r,n,o,a)=>{var s=d,i=e,l=t,e=r,t=n,r=o,n=a,o=S1(s),r=B.extend(r||{},o);if(!T1(e)||s.removed)return null;if(o=i.data[l.get()],s.dispatch("BeforeAddUndo",{level:r,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&D1(o,r))return null;if(i.data[l.get()]&&t.get().each(e=>{i.data[l.get()].beforeBookmark=e}),(e=uc(s))&&i.data.length>e){for(let e=0;e<i.data.length-1;e++)i.data[e]=i.data[e+1];i.data.length--,l.set(i.data.length)}return r.bookmark=ql(s.selection),l.get()<i.data.length-1&&(i.data.length=l.get()+1),i.data.push(r),l.set(i.data.length-1),t={level:r,lastLevel:o,originalEvent:n},0<l.get()?(s.setDirty(!0),s.dispatch("AddUndo",t),s.dispatch("change",t)):s.dispatch("AddUndo",t),r},undo:(t,r,n)=>{{var o=d;let e;return t.typing&&(t.add(),t.typing=!1,O1(t,!1,r)),0<n.get()&&(n.set(n.get()-1),e=t.data[n.get()],N1(o,e,!0),o.setDirty(!0),o.dispatch("Undo",{level:e})),e}},redo:(t,r)=>{{var n=d;let e;return t.get()<r.length-1&&(t.set(t.get()+1),e=r[t.get()],N1(n,e,!1),n.setDirty(!0),n.dispatch("Redo",{level:e})),e}},clear:(e,t)=>{return r=d,t=t,(e=e).data=[],t.set(0),e.typing=!1,void r.dispatch("ClearUndos");var r},reset:e=>{(e=e).clear(),e.add()},hasUndo:(e,t)=>{return r=d,e=e,0<t.get()||e.typing&&e.data[0]&&!D1(S1(r),e.data[0]);var r},hasRedo:(e,t)=>{return e=e,t.get()<e.data.length-1&&!e.typing},transact:(e,t,r)=>{return e=e,t=t,r=r,B1(e,t),e.beforeChange(),e.ignore(r),e.add()},ignore:(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:(e,t,r,n)=>{var o,a;o=d,t=t,r=r,n=n,(e=e).transact(r)&&(r=e.data[t.get()].bookmark,a=e.data[t.get()-1],N1(o,a,!0),e.transact(n))&&(e.data[t.get()-1].beforeBookmark=r)}},formatter:{match:(e,t,r,n)=>n0(d,e,t,r,n),matchAll:(e,t)=>{{var n=d,o=e,a=t;const s=[],i={};return e=n.selection.getStart(),n.dom.getParent(e,t=>{for(let e=0;e<o.length;e++){var r=o[e];!i[r]&&r0(n,t,r,a)&&(i[r]=!0,s.push(r))}},n.dom.getRoot()),s}},matchNode:(e,t,r,n)=>r0(d,e,t,r,n),canApply:e=>{var t=d,r=t.formatter.get(e),n=t.dom;if(r&&t.selection.isEditable()){var e=t.selection.getStart(),o=pf(n,e);for(let e=r.length-1;0<=e;e--){var a=r[e];if(!yf(a))return!0;for(let e=o.length-1;0<=e;e--)if(n.is(o[e],a.selector))return!0}}return!1},closest:e=>o0(d,e),apply:(e,t,r)=>cy(d,e,t,r),remove:(e,t,r,n)=>ry(d,e,t,r,n),toggle:(e,t,r)=>{var n,o;e=e,t=t,r=r,(o=(n=d).formatter.get(e))&&(!n0(n,e,t,r)||"toggle"in o[0]&&!o[0].toggle?cy:ry)(n,e,t,r)},formatChanged:(e,t,r,n,o)=>hy(d,e,t,r,n,o)},editor:{getContent:e=>{return t=d,r=e,I.from(t.getBody()).fold(q("tree"===r.format?new jp("body",11):""),e=>nh(t,r,e));var t,r},setContent:(e,t)=>Yb(d,e,t),insertContent:(e,t)=>qb(d,e,t),addVisual:e=>{{var n=d;const o=n.dom;var t=H(e)?e:n.getBody();K(o.select("table,a",t),e=>{switch(e.nodeName){case"TABLE":var t=wc(n),r=o.getAttrib(e,"border");r&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=Ec(n),r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),n.dispatch("VisualAid",{element:e,hasVisual:n.hasVisual})}}},selection:{getContent:(e,t)=>{var[r,e,t={}]=[d,e,t];return e=e,t={...t,format:e,get:!0,selection:!0,getInner:!0},GC(r,t).fold(N,e=>{var t=h1(r,e);return XC(r,t,e)})}},autocompleter:{addDecoration:V,removeDecoration:V},raw:{getModel:()=>I.none()}}),L1=e=>G(e.plugins,"rtc"),M1=e=>{const n=e;return t=e,g(t.plugins,"rtc").bind(e=>I.from(e.setup)).fold(()=>(n.rtcInstance=P1(e),I.none()),e=>{var t,r;return n.rtcInstance=(t=q(null),r=q(""),{init:{bindEvents:V},undoManager:{beforeChange:V,add:t,undo:t,redo:t,clear:V,reset:V,hasUndo:u,hasRedo:u,transact:t,ignore:V,extra:V},formatter:{match:u,matchAll:q([]),matchNode:q(void 0),canApply:u,closest:r,apply:V,remove:V,toggle:V,formatChanged:q({unbind:V})},editor:{getContent:r,setContent:q({content:"",html:""}),insertContent:q(""),addVisual:V},selection:{getContent:r},autocompleter:{addDecoration:V,removeDecoration:V},raw:{getModel:q(I.none())}}),I.some(()=>e().then(e=>(n.rtcInstance=(e=>{const o=e=>F(e)?e:{},{init:t,undoManager:a,formatter:s,editor:r,selection:n,autocompleter:i,raw:l}=e;return{init:{bindEvents:t.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(e,t,r)=>a.transact(r),ignore:(e,t)=>a.ignore(t),extra:(e,t,r,n)=>a.extra(r,n)},formatter:{match:(e,t,r,n)=>s.match(e,o(t),n),matchAll:s.matchAll,matchNode:s.matchNode,canApply:e=>s.canApply(e),closest:e=>s.closest(e),apply:(e,t,r)=>s.apply(e,o(t)),remove:(e,t,r,n)=>s.remove(e,o(t)),toggle:(e,t,r)=>s.toggle(e,o(t)),formatChanged:(e,t,r,n,o)=>s.formatChanged(t,r,n,o)},editor:{getContent:e=>r.getContent(e),setContent:(e,t)=>({content:r.setContent(e,t),html:""}),insertContent:(e,t)=>(r.insertContent(e),""),addVisual:r.addVisual},selection:{getContent:(e,t)=>n.getContent(t)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>I.some(l.getRawModel())}}})(e),e.rtc.isRemote)))});var t},I1=e=>e.rtcInstance||P1(e),F1=e=>{e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},U1=(e,t,r)=>F1(e).selection.getContent(t,r),z1=e=>F1(e).init.bindEvents(),j1=e=>0===e.dom.length?(Q(e),I.none()):I.some(e),H1=(e,t,i,l,d)=>{e.bind(s=>{return(l?av:ov)(s.dom,l?s.dom.length:0,d),t.filter(tr).map(e=>{var t,r,n,o,a;e=e,r=i,n=l,o=d,t=(t=s).dom,e=e.dom,a=(n?t:e).length,n?(sv(t,e,o,!1,!n),r.setStart(e,a)):(sv(e,t,o,!1,!n),r.setEnd(e,a))})}).orThunk(()=>{var e;return e=l,t.filter(e=>Kf.isBookmarkNode(e.dom)).bind(e?Mr:Lr).or(t).filter(tr).map(e=>{var r,n,o;r=e,n=l,o=d,Or(r).each(e=>{var t=r.dom;n&&Yh(e,L(t,0),o)?ov(t,0,o):!n&&Gh(e,L(t,t.length),o)&&av(t,t.length,o)})})})},$1=(e,t,r)=>{var n=I.from(t.firstChild).map(Z.fromDom),o=I.from(t.lastChild).map(Z.fromDom),t=(e.deleteContents(),e.insertNode(t),n.bind(Lr).filter(tr).bind(j1)),a=o.bind(Mr).filter(tr).bind(j1);H1(t,n,e,!0,r),H1(a,o,e,!1,r),e.collapse(!1)},V1=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),q1=(e,t)=>{var r;return"raw"!==t.format?(r=e.selection.getRng(),r=(r=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock))?{context:r.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...r,...t}),sh({validate:!1},e.schema).serialize(r)):t.content},W1=(e,t,r)=>{var n;G(e,t)&&(0===(n=O(e[t],e=>e!==r)).length?delete e[t]:e[t]=n)};var K1=(r,n)=>{let a,s;const i=(t,e)=>be(e,e=>r.is(e,t)),l=e=>r.getParents(e,void 0,r.getRoot());return{selectorChangedWithUnbind:(e,t)=>(a||(a={},s={},n.on("NodeChange",e=>{const r=e.element,n=l(r),o={};Y(a,(e,r)=>{i(r,n).each(t=>{s[r]||(K(e,e=>{e(!0,{node:t,selector:r,parents:n})}),s[r]=e),o[r]=e})}),Y(s,(e,t)=>{o[t]||(delete s[t],K(e,e=>{e(!1,{node:r,selector:t,parents:n})}))})})),a[e]||(a[e]=[]),a[e].push(t),i(e,l(n.selection.getStart())).each(()=>{s[e]=a[e]}),{unbind:()=>{W1(a,e,t),W1(s,e,t)}})}};const Y1=e=>!(!e||!e.ownerDocument)&&Rr(Z.fromDom(e.ownerDocument),Z.fromDom(e)),G1=(d,a,e,i)=>{let s,l;const r=K1(d,i)["selectorChangedWithUnbind"];const t=(e,t)=>{var[n,e,t={}]=[i,e,t];t=V1(t,e),ZC(n,t).each(e=>{var t=q1(n,e),r=n.selection.getRng();$1(r,r.createContextualFragment(t),n.schema),n.selection.setRng(r),ep(n,r),QC(n,t,e)})};const n=e=>{var t=m();t.collapse(!!e),u(t)},c=()=>a.getSelection?a.getSelection():a.document.selection,m=()=>{let e;var t=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},r=a.document;if(H(i.bookmark)&&!Rp(i)){var n=fp(i);if(n.isSome())return n.map(e=>Ip(i,[e])[0]).getOr(r.createRange())}try{var o=c();o&&!oo(o.anchorNode)&&(e=0<o.rangeCount?o.getRangeAt(0):r.createRange(),e=Ip(i,[e])[0])}catch(e){}return e=e||r.createRange(),po(e.startContainer)&&e.collapsed&&(n=d.getRoot(),e.setStart(n,0),e.setEnd(n,0)),s&&l&&(0===t(e.START_TO_START,e,s)&&0===t(e.END_TO_END,e,s)?e=l:(s=null,l=null)),e},u=(e,t)=>{if((n=e)&&Y1(n.startContainer)&&Y1(n.endContainer)){var r,n=c();if(e=i.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){l=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),s=0<n.rangeCount?n.getRangeAt(0):null}!e.collapsed&&e.startContainer===e.endContainer&&null!=n&&n.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(r=e.startContainer.childNodes[e.startOffset])&&"IMG"===r.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(r,0,r,1)),i.dispatch("AfterSetSelectionRange",{range:e,forward:t})}};const o=()=>{var e=c(),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!t||!r||oo(t)||oo(r))return!0;var n=d.createRng(),o=d.createRng();try{n.setStart(t,e.anchorOffset),n.collapse(!0),o.setStart(r,e.focusOffset),o.collapse(!0)}catch(e){return!0}return n.compareBoundaryPoints(n.START_TO_START,o)<=0};const f={dom:d,win:a,serializer:e,editor:i,expand:(e={type:"word"})=>u(Pg(d).expand(m(),e)),collapse:n,setCursorLocation:(e,t)=>{var r=d.createRng();H(e)&&H(t)?(r.setStart(e,t),r.setEnd(e,t),u(r),n(!1)):(Xu(d,r,i.getBody(),!0),u(r))},getContent:e=>{return[e,t={}]=[i,e],r=t.format||"html",U1(e,r,t);var t,r},setContent:t,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(e,t)=>{var o,r,a;return o=d,r=e,a=t,I.from(r).bind(n=>I.from(n.parentNode).map(e=>{var t=o.nodeIndex(n),r=o.createRng();return r.setStart(e,t),r.setEnd(e,t+1),a&&(Xu(o,r,n,!0),Xu(o,r,n,!1)),r})).each(u),e},isCollapsed:()=>{var e=m(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var e=m(),t=i.getBody().querySelectorAll('[data-mce-selected="1"]');return 0<t.length?Ee(t,e=>d.isEditable(e.parentElement)):Op(d,e)},isForward:o,setNode:e=>(t(d.getOuterHTML(e)),e),getNode:()=>{{var n=i.getBody(),o=m();if(!o)return n;let e=o.startContainer,t=o.endContainer;var a=o.startOffset,s=o.endOffset;let r=o.commonAncestorContainer;return o.collapsed||(e===t&&s-a<2&&e.hasChildNodes()&&(r=e.childNodes[a]),P(e)&&P(t)&&(e=e.length===a?Mp(e.nextSibling,!0):e.parentNode,t=0===s?Mp(t.previousSibling,!1):t.parentNode,e)&&e===t&&(r=e)),o=P(r)?r.parentNode:r,ao(o)?o:n}},getSel:c,setRng:u,getRng:m,getStart:e=>Pp(i.getBody(),m(),e),getEnd:e=>Lp(i.getBody(),m(),e),getSelectedBlocks:(e,t)=>{var r=d,n=m(),o=[],a=r.getRoot(),e=r.getParent(e||Pp(a,n,n.collapsed),r.isBlock),s=r.getParent(t||Lp(a,n,n.collapsed),r.isBlock);if(e&&e!==a&&o.push(e),e&&s&&e!==s)for(var i,l=new Xn(e,a);(i=l.next())&&i!==s;)r.isBlock(i)&&o.push(i);return s&&e!==s&&s!==a&&o.push(s),o},normalize:()=>{var e=m(),t=c();return t=t,1<Hu(t).length||!Zu(i)?e:((t=Tg(d,e)).each(e=>{u(e,o())}),t.getOr(e))},selectorChanged:(e,t)=>(r(e,t),f),selectorChangedWithUnbind:r,getScrollContainer:()=>{let e,t=d.getRoot();for(;t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:(e,t)=>{var r,n;H(e)?(e=e,n=t,((r=i).inline?Zg:Jg)(r,e,n)):ep(i,m(),t)},placeCaretAt:(e,t)=>u(_g(e,t,i.getDoc())),getBoundingClientRect:()=>{var e=m();return e.collapsed?L.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{a=s=l=null,p.destroy()}},g=Kf(f),p=lg(f,i);return f.bookmarkManager=g,f.controlSelection=p,f},X1=(t,l,d)=>{var m,u;t.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),t.addAttributeFilter("src,href,style",(t,r)=>{var n="data-mce-"+r,o=l.url_converter,a=l.url_converter_scope;let s=t.length;for(;s--;){var i=t[s];let e=i.attr(n);void 0!==e?(i.attr(r,0<e.length?e:null),i.attr(n,null)):(e=i.attr(r),"style"===r?e=d.serializeStyle(d.parseStyle(e),i.name):o&&(e=o.call(a,e,r,i.name)),i.attr(r,0<e.length?e:null))}}),t.addAttributeFilter("class",t=>{let r=t.length;for(;r--;){var n=t[r];let e=n.attr("class");e&&(e=e.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<e.length?e:null))}}),t.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){var o=e[n];"bookmark"!==o.attr("data-mce-type")||r.cleanup||(I.from(o.firstChild).exists(e=>{return!Ci(null!=(e=e.value)?e:"")})?o.unwrap():o.remove())}}),t.addNodeFilter("script,style",(e,t)=>{var r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let n=e.length;for(;n--;){var o,a=e[n],s=a.firstChild,i=null!=(i=null==s?void 0:s.value)?i:"";"script"===t?((o=a.attr("type"))&&a.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===l.element_format&&s&&0<i.length&&(s.value="// <![CDATA[\n"+r(i)+"\n// ]]>")):"xhtml"===l.element_format&&s&&0<i.length&&(s.value="\x3c!--\n"+r(i)+"\n--\x3e")}}),t.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.value;l.preserve_cdata&&0===(null==n?void 0:n.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=d.decode(n.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==n?void 0:n.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(n).substr(14))}}),t.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){var n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),t.addAttributeFilter("data-mce-type",e=>{K(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),l.remove_trailing_brs&&(m=l,u=t.schema,t.addNodeFilter("br",(n,e,o)=>{const a=B.extend({},u.getBlockElements());var s,i=u.getNonEmptyElements(),l=u.getWhitespaceElements(),d=(a.body=1,e=>e.name in a||ea(u,e));for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.parent;if(r&&d(r)&&t===r.lastChild){let e=t.prev;for(;e;){var c=e.name;if("span"!==c||"bookmark"!==e.attr("data-mce-type")){"br"===c&&(t=null);break}e=e.prev}t&&(t.remove(),Eb(u,i,l,r))&&(s=u.getElementRule(r.name))&&(s.removeEmpty?r.remove():s.paddEmpty&&yb(m,o,d,r))}else{let e=t;for(;r&&r.firstChild===e&&r.lastChild===e&&(e=r,!a[r.name]);)r=r.parent;e===r&&((s=new jp("#text",3)).value=Qn,t.replace(s))}}}))},Z1=(r,n,o)=>{if(a=r,s=o,H(a)&&a.hasEventListeners("PreProcess")&&!s.no_events){a=r,s=n,r=o;let e;o=a.dom;let t=s.cloneNode(!0);if((s=document.implementation).createHTMLDocument){const i=s.createHTMLDocument("");B.each("BODY"===t.nodeName?t.childNodes:[t],e=>{i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,e=o.doc,o.doc=i}return s=a,a={...r,node:t},s.dispatch("PreProcess",a),e&&(o.doc=e),t}return n;var a,s},Q1=(e,t,r)=>{-1===B.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},J1=(e,t,r)=>{e=wi(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||pi(Z.fromDom(t))?e:B.trim(e)},ew=(e,t,r)=>{var r=r.selection?{forced_root_block:!1,...r}:r,e=e.parse(t,r);return t=e=>"br"===(null==e?void 0:e.name),r=(r=e).lastChild,t(r)&&t(t=r.prev)&&(r.remove(),t.remove()),e},tw=(e,t,r,n,o)=>{t=t,r=r,n=n;t=sh(t,r).serialize(n);return r=e,n=t,!(e=o).no_events&&r?(r=r,e={...e,content:n},r.dispatch("PostProcess",e).content):n},rw=(e,t)=>{e=((e,r)=>{var t=["data-mce-selected"];const n={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=r&&r.dom?r.dom:ee.DOM,a=r&&r.schema?r.schema:Ya(n),s=WC(n,a);X1(s,n,o);return{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(e,t={})=>{t={format:"html",...t},e=Z1(r,e,t),e=J1(o,e,t),e=ew(s,e,t);return"tree"===t.format?e:tw(r,n,a,e,t)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:E(Q1,s,t),getTempAttrs:q(t),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}})(e,t);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs,getNodeFilters:e.getNodeFilters,getAttributeFilters:e.getAttributeFilters,removeNodeFilter:e.removeNodeFilter,removeAttributeFilter:e.removeAttributeFilter}},nw=(n,e={})=>{var t=e.format||"html",e=(t=t,{...e,format:t,get:!0,getInner:!0});return GC(n,e).fold(N,e=>{r=n,t=e;var t,r=I1(r).editor.getContent(t);return XC(n,r,e)})},ow="html",aw=(o,e,t={})=>{t=t,r=e;var r,t={format:ow,...t,set:!0,content:r};return ZC(o,t).map(e=>{n=o,t=e.content,r=e;var t,r,n=I1(n).editor.setContent(t,r);return QC(o,n.html,e),n.content}).getOr(e)},sw="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),iw=[],lw="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),dw=[],cw=(t,e)=>{e=O(e,e=>G(t,e));return Se(e)},mw=e=>{var t=cw(e,sw),e=e.forced_root_block;return!1!==e&&""!==e||t.push("forced_root_block (false only)"),Se(t)},uw=e=>cw(e,iw),fw=(e,t)=>{const r=B.makeMap(e.plugins," ");e=O(t,e=>G(r,e));return Se(e)},gw=e=>fw(e,lw),pw=e=>fw(e,dw.map(e=>e.name)),hw=t=>be(dw,e=>e.name===t).fold(()=>t,e=>e.replacedWith?t+", replaced by "+e.replacedWith:t),vw=(e,t)=>{var r,n,o,a,s,i;o=e,i=t,o=mw(o),r=gw(i),a=0<r.length,n=0<o.length,i="mobile"===i.theme,(a||n||i)&&(s="\n- ",i=i?`

Themes:
- mobile`:"",a=a?`

Plugins:
- `+r.join(s):"",r=n?`

Options:
- `+o.join(s):"",console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+i+a+r)),n=e,o=t,n=uw(n),o=pw(o),s=0<o.length,i=0<n.length,(s||i)&&(a="\n- ",s=s?`

Plugins:
- `+o.map(hw).join(a):"",o=i?`

Options:
- `+n.join(a):"",console.warn("The following deprecated features are currently enabled but will be removed soon."+s+o))},bw=ee.DOM,yw=e=>I.from(e).each(e=>e.destroy()),Cw=e=>{var t,r,n,o;e.removed||({_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement(),n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&H(null==o?void 0:o.nextSibling)&&bw.remove(o.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&n&&(o=e,bw.setStyle(o.id,"display",o.orgDisplay)),e.dispatch("detach"),bw.remove(e.getContainer()),yw(t),yw(r),e.destroy())},ww=(e,t)=>{var{selection:r,dom:n}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),yw(r),yw(n)),(r=(t=e).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,delete r._mceOldSubmit),bw.unbind(r,"submit reset",t.formEventDelegate)),(r=n=e).contentAreaContainer=r.formElement=r.container=r.editorContainer=null,r.bodyElement=r.contentDocument=r.contentWindow=null,r.iframeElement=r.targetElm=null,(n=n.selection)&&(t=n.dom,r.selection=n.win=n.dom=t.doc=null),e.destroyed=!0):e.remove())};const Ew=(()=>{const r={};return{add:(e,t)=>{r[e]=t},get:e=>r[e]||{icons:{}},has:e=>G(r,e)}})(),xw=Bs.ModelManager;n=(e,t)=>{return t.dom[e]},r=(e,t)=>parseInt(fn(t,e),10);const kw=E(n,"clientWidth"),_w=E(n,"clientHeight"),Sw=E(r,"margin-top"),Nw=E(r,"margin-left"),Rw=(e,t,r)=>{var n,o,a=Z.fromDom(e.getBody()),a=e.inline?a:(a=a,Z.fromDom(Dr(a).dom.documentElement)),t=(e=e.inline,t=t,r=r,n=(o=a).dom.getBoundingClientRect(),{x:t-(e?n.left+o.dom.clientLeft+Nw(o):0),y:r-(e?n.top+o.dom.clientTop+Sw(o):0)});return r=a,e=t.x,n=t.y,o=kw(r),r=_w(r),0<=e&&0<=n&&e<=o&&n<=r},Aw=e=>{var e=e.inline?e.getBody():e.getContentAreaContainer();return e=e,I.from(e).map(Z.fromDom).map(Gr).getOr(!1)};var Dw=()=>{var e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Tw=r=>{const n=[],o=()=>{var e=r.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():Dw()},e=()=>I.from(n[0]),a=(e,t)=>!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout),s=()=>{e().each(e=>{e.reposition()})},i=e=>{n.push(e)},l=t=>{ye(n,e=>e===t).each(e=>{n.splice(e,1)})},t=(t,e=!0)=>r.removed||!Aw(r)?{}:(e&&r.dispatch("BeforeOpenNotification",{notification:t}),be(n,e=>a(o().getArgs(e),t)).getOrThunk(()=>{r.editorManager.setActive(r);const e=o().open(t,()=>{l(e)},()=>Ap(r));return i(e),s(),r.dispatch("OpenNotification",{notification:{...e}}),e}));var d,c=q(n);return(d=r).on("SkinLoaded",()=>{var e=Xd(d);e&&t({text:e,type:"warning",timeout:0},!1),s()}),d.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(s)}),d.on("remove",()=>{K(n.slice(),e=>{o().close(e)})}),d.addShortcut("alt+F12","Focus to notification",()=>e().map(e=>Z.fromDom(e.getEl())).each(e=>tp(e))),{open:t,close:()=>{e().each(e=>{o().close(e),l(e),s()})},getNotifications:c}},Ow=Bs.PluginManager,Bw=Bs.ThemeManager;var Pw=()=>{var e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const Lw=r=>{let n=[];const o=()=>{var e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():Pw()},a=(t,r)=>(...e)=>r?r.apply(t,e):void 0,e=e=>{r.dispatch("CloseWindow",{dialog:e})},t=e=>{n.push(e),r.dispatch("OpenWindow",{dialog:e})},s=t=>{e(t),0===(n=O(n,e=>e!==t)).length&&r.focus()},i=e=>{r.editorManager.setActive(r),up(r),r.ui.show();e=e();return t(e),e};return r.on("remove",()=>{K(n,e=>{o().close(e)})}),{open:(e,t)=>i(()=>o().open(e,t,s)),openUrl:e=>i(()=>o().openUrl(e,s)),alert:(e,t,r)=>{var n=o();n.alert(e,a(r||n,t))},confirm:(e,t,r)=>{var n=o();n.confirm(e,a(r||n,t))},close:()=>{I.from(n[n.length-1]).each(e=>{o().close(e),s(e)})}}},Mw=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Iw=(e,t)=>{e._skinLoaded?Mw(e,t):e.on("SkinLoaded",()=>{Mw(e,t)})},Fw=(e,t,r)=>{Gf(e,t,{message:r}),console.error(r)},Uw=(e,t,r)=>r?`Failed to load ${e}: ${r} from url `+t:`Failed to load ${e} url: `+t,zw=(e,...t)=>{var r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},jw=e=>/^[a-z0-9\-]+$/i.test(e),Hw=e=>"content/"+e+"/content.css",$w=e=>tinymce.Resource.has(Hw(e)),Vw=(t,e)=>{const r=t.editorManager.baseURL+"/skins/content";const n=`content${t.editorManager.suffix}.css`;return T(e,e=>$w(e)?e:jw(e)&&!t.inline?r+`/${e}/`+n:t.documentBaseURI.toAbsolute(e))},qw=e=>{var t;e.contentCSS=e.contentCSS.concat((t=e,Vw(t,jd(t))),(t=e,Vw(t,$d(t))))},Ww=(n,o)=>{const a={};return{findAll:(e,r=le)=>{e=O((e=e)?De(e.getElementsByTagName("img")):[],e=>{var t=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===U.transparentSrc)&&(lt(t,"blob:")?!n.isUploaded(t)&&r(e):!!lt(t,"data:")&&r(e))}),e=T(e,t=>{const r=t.src;var e;return G(a,r)?a[r].then(e=>z(e)?e:{image:t,blobInfo:e.blobInfo}):(e=((r,e)=>{const n=()=>Promise.reject("Invalid data URI");var t;return lt(e,"blob:")?(t=r.getByUri(e),H(t)?Promise.resolve(t):xy(e).then(t=>ky(t).then(e=>Sy(e,!1,e=>I.some(Ny(r,t,e))).getOrThunk(n)))):lt(e,"data:")?Ry(r,e).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(o,r).then(e=>(delete a[r],{image:t,blobInfo:e})).catch(e=>(delete a[r],e)),a[r]=e)});return Promise.all(e)}}},Kw=()=>{let r={};const n=(e,t)=>({status:e,resultUri:t}),t=e=>e in r;return{hasBlobUri:t,getResultUri:e=>{e=r[e];return e?e.resultUri:null},isPending:e=>!!t(e)&&1===r[e].status,isUploaded:e=>!!t(e)&&2===r[e].status,markPending:e=>{r[e]=n(1,null)},markUploaded:(e,t)=>{r[e]=n(2,t)},removeFailed:e=>{delete r[e]},destroy:()=>{r={}}}};let Yw=0;const Gw=e=>{return e+Yw+++(e=()=>Math.round(4294967295*Xs()).toString(36),"s"+(new Date).getTime().toString(36)+e()+e()+e())},Xw=(i,s)=>{const r={},n=(t,a)=>new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("POST",s.url),o.withCredentials=s.credentials,o.upload.onprogress=e=>{a(e.loaded/e.total*100)},o.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{var e,t;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&z(t.location)?r((e=s.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):n("Invalid JSON: "+o.responseText)};var e=new FormData;e.append("file",t.blob(),t.filename()),o.send(e)}),o=$(s.handler)?s.handler:n,l=(e,t)=>({url:t,blobInfo:e,status:!0}),d=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),c=(e,t)=>{B.each(r[e],e=>{e(t)}),delete r[e]},a=(o,a,s)=>(i.markPending(o.blobUri()),new Promise(t=>{let r,e;try{const n=()=>{r&&(r.close(),e=V)};e=t=>{t<0||100<t||I.from(r).orThunk(()=>I.from(s).map(se)).each(e=>{(r=e).progressBar.value(t)})},a(o,e).then(e=>{n(),i.markUploaded(o.blobUri(),e),c(o.blobUri(),l(o,e)),t(l(o,e))},e=>{e=z(e)?{message:e}:e,n(),i.removeFailed(o.blobUri()),c(o.blobUri(),d(o,e)),t(d(o,e))})}catch(e){t(d(o,e))}})),m=e=>{const t=e.blobUri();return new Promise(e=>{r[t]=r[t]||[],r[t].push(e)})};return{upload:(e,t)=>{return s.url||o!==n?(e=e,r=t,e=B.grep(e,e=>!i.isUploaded(e.blobUri())),Promise.all(B.map(e,e=>i.isPending(e.blobUri())?m(e):a(e,o,r)))):new Promise(e=>{e([])});var r}}},Zw=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Qw=(e,t)=>Xw(t,{url:Td(e),basePath:Od(e),credentials:Bd(e),handler:Pd(e)});const Jw=n=>e=>{var t,r;r=e,(t=n).dom.isEmpty(r.dom)&&H(t.schema.getTextBlockElements()[X(r)])&&En(e,Z.fromHtml('<br data-mce-bogus="1" />'))},eE=d=>{const c=(()=>{let r=[];const o=e=>{return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[e.toLowerCase()]||"dat"};const s=e=>{var t,r,n;if(e.blob&&e.base64)return t=e.id||Gw("blobid"),r=e.name||t,n=e.blob,{id:q(t),name:q(r),filename:q(e.filename||r+"."+o(n.type)),blob:q(n),base64:q(e.base64),blobUri:q(e.blobUri||URL.createObjectURL(n)),uri:q(e.uri)};throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")};const e=e=>be(r,e).getOrUndefined(),t=t=>e(e=>e.id()===t);return{create:(e,t,r,n,o)=>{var a;if(z(e))return a=e,s({id:a,name:n,filename:o,blob:t,base64:r});if(F(e))return s(e);throw new Error("Unknown input type")},add:e=>{t(e.id())||r.push(e)},get:t,getByUri:t=>e(e=>e.blobUri()===t),getByData:(t,r)=>e(e=>e.base64()===t&&e.blob().type===r),findFirst:e,removeByUri:t=>{r=O(r,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{K(r,e=>{URL.revokeObjectURL(e.blobUri())}),r=[]}}})();let t,e;const o=Kw(),r=[],n=t=>e=>d.selection?t(e):[],a=(e,t,r)=>{let n=0;for(;-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1),-1!==n;);return e},s=(e,t,r)=>{var n=`src="${r}"`+(r===U.transparentSrc?' data-mce-placeholder="1"':"");return e=a(e,`src="${t}"`,n),e=a(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},m=(t,r)=>{K(d.undoManager.data,e=>{"fragmented"===e.type?e.fragments=T(e.fragments,e=>s(e,t,r)):e.content=s(e.content,t,r)})},u=(e,t)=>{var r=d.convertURL(t,"src");m(e.src,t),ir(Z.fromDom(e),{src:Nd(d)?t+(-1===t.indexOf("?")?"?":"&")+(new Date).getTime():t,"data-mce-src":r})},i=()=>(t=t||Qw(d,o),g().then(n(l=>{var e=T(l,e=>e.blobInfo);return t.upload(e,Zw(d)).then(n(e=>{const s=[];let i=!1;e=T(e,(e,t)=>{var r,n,{blobInfo:t,image:o}=l[t];let a=!1;return e.status&&Rd(d)?(e.url&&!it(o.src,e.url)&&(i=!0),c.removeByUri(o.src),L1(d)||u(o,e.url)):e.error&&(e.error.remove&&(m(o.src,U.transparentSrc),s.push(o),a=!0),r=d,n=e.error.message,Iw(r,Os.translate(["Failed to upload image: {0}",n]))),{element:o,status:e.status,uploadUri:e.url,blobInfo:t,removed:a}});return 0<s.length&&!L1(d)?d.undoManager.transact(()=>{K(An(s),e=>{var t=Or(e);Q(e),t.each(Jw(d)),c.removeByUri(e.dom.src)})}):i&&d.undoManager.dispatchChange(),e}))}))),l=()=>Sd(d)?i():Promise.resolve([]),f=t=>Ee(r,e=>e(t));const g=()=>(e=e||Ww(o,c)).findAll(d.getBody(),f).then(n(e=>{e=O(e,e=>z(e)?(Iw(d,e),!1):"blob"!==e.uriType);return L1(d)||K(e,e=>{m(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}));const p=e=>e.replace(/src="(blob:[^"]+)"/g,(e,r)=>{var t=o.getResultUri(r);if(t)return'src="'+t+'"';let n=c.getByUri(r);return(n=n||he(d.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0))?'src="data:'+n.blob().type+";base64,"+n.base64()+'"':e});return d.on("SetContent",()=>{(Sd(d)?l:g)()}),d.on("RawSaveContent",e=>{e.content=p(e.content)}),d.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=p(e.content))}),d.on("PostRender",()=>{d.parser.addNodeFilter("img",e=>{K(e,e=>{var t=e.attr("src");t&&!c.getByUri(t)&&(t=o.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:c,addFilter:e=>{r.push(e)},uploadImages:i,uploadImagesAuto:l,scanForImages:g,destroy:()=>{c.destroy(),o.destroy(),e=t=null}}},tE=e=>{const n=e.dom,t=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},o={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==t?[a,e,o]:[e,a,o]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>J(e)&&e.hasAttribute("href"),onformat:(r,e,t)=>{B.each(t,(e,t)=>{n.setAttrib(r,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{return null!=(e=null==e?void 0:e.customValue)?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};var o,a;return B.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{r[e]={block:e,remove:"all"}}),r};var rE,e={remove_similar:!0,inherit:!1},t={selector:"td,th",...e},vC={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...t},tablecellverticalalign:{styles:{"vertical-align":"%value"},...t},tablecellbordercolor:{styles:{borderColor:"%value"},...t},tablecellclass:{classes:["%value"],...t},tableclass:{selector:"table",classes:["%value"],...e},tablecellborderstyle:{styles:{borderStyle:"%value"},...t},tablecellborderwidth:{styles:{borderWidth:"%value"},...t}};const nE=q(vC),oE=B.each,aE=ee.DOM,sE=e=>H(e)&&F(e),iE=(e,t)=>{const l=t&&t.schema||Ya({}),d=e=>{var t,e=z(e)?{name:e,classes:[],attrs:{}}:e,r=aE.create(e.name);return t=r,0<(e=e).classes.length&&aE.addClass(t,e.classes.join(" ")),aE.setAttribs(t,e.attrs),r},c=(t,e,r)=>{let n;var o=e[0],a=sE(o)?o.name:void 0,s=((e,t)=>{e=l.getElementRule(e.nodeName.toLowerCase()),e=null==e?void 0:e.parentsRequired;return!(!e||!e.length)&&(t&&D(e,t)?t:e[0])})(t,a);if(s)a===s?(n=o,e=e.slice(1)):n=s;else if(o)n=o,e=e.slice(1);else if(!r)return t;const i=n?d(n):aE.create("div");i.appendChild(t),r&&B.each(r,e=>{e=d(e);i.insertBefore(e,t)});a=sE(n)?n.siblings:void 0;return c(i,e,a)};var r,n,t=aE.create("div");return 0<e.length&&(n=e[0],r=d(n),n=sE(n)?n.siblings:void 0,t.appendChild(c(r,e.slice(1),n))),t},lE=e=>{e=B.trim(e);let t="div";const a={name:t,classes:[],attrs:{},selector:e};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,n,o)=>{switch(t){case"#":a.attrs.id=r;break;case".":a.classes.push(r);break;case":":-1!==B.inArray("checked disabled enabled read-only required".split(" "),r)&&(a.attrs[r]=r)}return"["===n&&(t=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(a.attrs[t[1]]=t[2]),""})),a.name=t||"div",a},dE=e=>z(e)?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),B.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{var e=B.map(e.split(/(?:~\+|~|\+)/),lE),t=e.pop();return e.length&&(t.siblings=e),t}).reverse()):[],cE=(r,e)=>{let n="",t=nc(r);if(""===t)return"";const o=e=>z(e)?e.replace(/%(\w+)/g,""):"",a=(e,t)=>aE.getStyle(null!=t?t:r.getBody(),e,!0);if(z(e)){var s=r.formatter.get(e);if(!s)return"";e=s[0]}if("preview"in e){s=e.preview;if(!1===s)return"";t=s||t}let i=e.block||e.inline||"span",l;s=dE(e.selector);l=0<s.length?(s[0].name||(s[0].name=i),i=e.selector,iE(s,r)):iE([i],r);const d=aE.select(i,l)[0]||l.firstChild;oE(e.styles,(e,t)=>{e=o(e);e&&aE.setStyle(d,t,e)}),oE(e.attributes,(e,t)=>{e=o(e);e&&aE.setAttrib(d,t,e)}),oE(e.classes,e=>{e=o(e);aE.hasClass(d,e)||aE.addClass(d,e)}),r.dispatch("PreviewFormats"),aE.setStyles(l,{position:"absolute",left:-65535}),r.getBody().appendChild(l);s=a("fontSize");const c=/px$/.test(s)?parseInt(s,10):0;return oE(t.split(" "),e=>{let t=a(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===os(t).toLowerCase())||"color"===e&&"#000000"===os(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===c)return;var r=parseFloat(t)/(/%$/.test(t)?100:1);t=r*c+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),r.dispatch("AfterPreviewFormats"),aE.remove(l),n},mE=s=>{var t,r,n,e=(e=>{const r={};const n=(e,t)=>{e&&(z(e)?(j(t)||(t=[t]),K(t,e=>{C(e.deep)&&(e.deep=!yf(e)),C(e.split)&&(e.split=!yf(e)||Cf(e)),C(e.remove)&&yf(e)&&!Cf(e)&&(e.remove="none"),yf(e)&&Cf(e)&&(e.mixed=!0,e.block_expand=!0),z(e.classes)&&(e.classes=e.classes.split(/\s+/))}),r[e]=t):Y(e,(e,t)=>{n(t,e)}))};return n(tE(e)),n(nE()),n(rc(e)),{get:e=>H(e)?r[e]:r,has:e=>G(r,e),register:n,unregister:e=>(e&&r[e]&&delete r[e],r)}})(s);const i=Bo({});var o=s;o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)o.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);return o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"]),(t=s).on("mouseup keydown",e=>{h0(t,e.keyCode,v0(t.selection.getRng().endContainer))}),L1(s)||(r=i,n=s,r.set({}),n.on("NodeChange",e=>{py(n,e.element,r.get())}),n.on("FormatApply FormatRemove",e=>{e=I.from(e.node).map(e=>ef(e)?e:e.startContainer).bind(e=>J(e)?I.some(e):I.from(e.parentElement)).getOrThunk(()=>uy(n));py(n,e,r.get())})),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,r)=>{var n;n=s,e=e,t=t,r=r,F1(n).formatter.apply(e,t,r)},remove:(e,t,r,n)=>{var o;o=s,e=e,t=t,r=r,n=n,F1(o).formatter.remove(e,t,r,n)},toggle:(e,t,r)=>{var n;n=s,e=e,t=t,r=r,F1(n).formatter.toggle(e,t,r)},match:(e,t,r,n)=>{return o=s,e=e,t=t,r=r,n=n,F1(o).formatter.match(e,t,r,n);var o},closest:e=>{return t=s,e=e,F1(t).formatter.closest(e);var t},matchAll:(e,t)=>{return r=s,e=e,t=t,F1(r).formatter.matchAll(e,t);var r},matchNode:(e,t,r,n)=>{return o=s,e=e,t=t,r=r,n=n,F1(o).formatter.matchNode(e,t,r,n);var o},canApply:e=>{return t=s,e=e,F1(t).formatter.canApply(e);var t},formatChanged:(e,t,r,n)=>{return o=s,a=i,e=e,t=t,r=r,n=n,F1(o).formatter.formatChanged(a,e,t,r,n);var o,a},getCssText:E(cE,s)}},uE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},fE=(n,o,a)=>{const s=Bo(!1),i=e=>{O1(o,!1,a),o.add({},e)};n.on("init",()=>{o.add()}),n.on("BeforeExecCommand",e=>{e=e.command;uE(e)||(B1(o,a),o.beforeChange())}),n.on("ExecCommand",e=>{var t=e.command;uE(t)||i(e)}),n.on("ObjectResizeStart cut",()=>{o.beforeChange()}),n.on("SaveContent ObjectResized blur",i),n.on("dragend",i),n.on("keyup",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(t=U.os.isMacOS()&&"Meta"===e.key,(33<=r&&r<=36||37<=r&&r<=40||45===r||e.ctrlKey||t)&&(i(),n.nodeChanged()),46!==r&&8!==r||n.nodeChanged(),s.get()&&o.typing&&!D1(S1(n),o.data[0])&&(n.isDirty()||n.setDirty(!0),n.dispatch("TypingUndo"),s.set(!1),n.nodeChanged()))}),n.on("keydown",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(33<=r&&r<=36||37<=r&&r<=40||45===r?o.typing&&i(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(r<16||20<r)||224===r||91===r||o.typing||t?(U.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&o.beforeChange():(o.beforeChange(),O1(o,!0,a),o.add({},e),s.set(!0))))}),n.on("mousedown",e=>{o.typing&&i(e)});n.on("input",e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||("insertFromPaste"===(t=e).inputType||"insertFromDrop"===t.inputType))&&i(e)}),n.on("AddUndo Undo Redo ClearUndos",e=>{e.isDefaultPrevented()||n.nodeChanged()})},gE=i=>{const l=Lo(),d=Bo(0),c=Bo(0),m={data:[],typing:!1,beforeChange:()=>{var e,t,r;e=i,t=d,r=l,F1(e).undoManager.beforeChange(t,r)},add:(e,t)=>{return r=i,n=m,o=c,a=d,s=l,e=e,t=t,F1(r).undoManager.add(n,o,a,s,e,t);var r,n,o,a,s},dispatchChange:()=>{i.setDirty(!0);var e=S1(i);e.bookmark=ql(i.selection),i.dispatch("change",{level:e,lastLevel:Ne(m.data,c.get()).getOrUndefined()})},undo:()=>{return e=i,t=m,r=d,n=c,F1(e).undoManager.undo(t,r,n);var e,t,r,n},redo:()=>{return e=i,t=c,r=m.data,F1(e).undoManager.redo(t,r);var e,t,r},clear:()=>{var e,t,r;e=i,t=m,r=c,F1(e).undoManager.clear(t,r)},reset:()=>{var e,t;e=i,t=m,F1(e).undoManager.reset(t)},hasUndo:()=>{return e=i,t=m,r=c,F1(e).undoManager.hasUndo(t,r);var e,t,r},hasRedo:()=>{return e=i,t=m,r=c,F1(e).undoManager.hasRedo(t,r);var e,t,r},transact:e=>{return t=i,r=m,n=d,e=e,F1(t).undoManager.transact(r,n,e);var t,r,n},ignore:e=>{var t,r;t=i,r=d,e=e,F1(t).undoManager.ignore(r,e)},extra:(e,t)=>{var r,n,o;r=i,n=m,o=c,e=e,t=t,F1(r).undoManager.extra(n,o,e,t)}};var e;return L1(i)||fE(i,m,d),(e=i).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),m},pE=[9,27,te.HOME,te.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,te.DOWN,te.UP,te.LEFT,te.RIGHT].concat(U.browser.isFirefox()?[224]:[]),hE="data-mce-placeholder",vE=e=>"keydown"===e.type||"keyup"===e.type,bE=e=>{e=e.keyCode;return e===te.BACKSPACE||e===te.DELETE},yE=i=>{var e;const l=i.dom,d=yd(i),c=null!=(e=Yd(i))?e:"",m=(e,t)=>{var r,n,o,a,s;r=e,vE(r)&&(s=r.keyCode,!bE(r))&&(te.metaKeyPressed(r)||r.altKey||112<=s&&s<=123||D(pE,s))||(r=i.getBody(),s=e,e=!(vE(s)&&!(bE(s)||"keyup"===s.type&&229===s.keyCode)||(e=l,n=r,o=d,!e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0}))||(a=n.firstElementChild)&&(e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")||o!==a.nodeName.toLowerCase())),""!==l.getAttrib(r,hE)==e&&!t)||(l.setAttrib(r,hE,e?c:null),i.dispatch("PlaceholderToggle",{state:e}),i.on(e?"keydown":"keyup",m),i.off(e?"keyup":"keydown",m))};ft(c)&&i.on("init",e=>{m(e,!0),i.on("change SetContent ExecCommand",m),i.on("paste",e=>pp.setEditorTimeout(i,()=>m(e)))})},CE=(e,t)=>({from:e,to:t}),wE=(e,t)=>{var e=Z.fromDom(e),r=Z.fromDom(t.container());return Rv(e,r).map(e=>({block:e,position:t}))},EE=(t,e)=>{return Qr(e,e=>gi(e)||bo(e.dom),e=>k(e,t)).filter(er).getOr(t)},xE=(a,s,i,e)=>{var e=wE(s,L.fromRangeStart(e)),t=e.bind(e=>pu(i,s,e.position).bind(e=>wE(s,e).map(e=>{return t=a,r=s,n=i,o=e,R(o.position.getNode())&&!To(t,o.block)?bu(!1,o.block.dom).bind(e=>e.isEqual(o.position)?pu(n,r,e).bind(e=>wE(r,e)):I.some(o)).getOr(o):o;var t,r,n,o})));return $t(e,t,CE).filter(e=>{return r=e,!k(r.from.block,r.to.block)&&((e,t)=>{e=Z.fromDom(e);return k(EE(e,t.from.block),EE(e,t.to.block))})(s,e)&&(r=e,!1===b(r.from.block.dom))&&!1===b(r.to.block.dom)&&(r=e=>ci(e)||Xo(e.dom)||ui(e))((t=e).from.block)&&r(t.to.block)&&(r=e,!(Rr(r.to.block,r.from.block)||Rr(r.from.block,r.to.block)));var t,r})},kE=(e,t)=>{e=((e,t)=>{const r=Ur(e);return ye(r,e=>t.isBlock(X(e))).fold(q(r),e=>r.slice(0,e))})(e,t);return K(e,Q),e},_E=(t,e,r)=>{r=Sh(r,e);return be(r.reverse(),e=>To(t,e)).each(Q)},SE=(e,t,r,n,o)=>{var a,s;return To(n,r)?(bi(r),wu(r.dom)):(a=n,s=o,0===O(Ir(s),e=>!To(a,e)).length&&To(n,t)&&yn(o,Z.fromTag("br")),s=Cu(r.dom,L.before(o.dom)),K(kE(t,n),e=>{yn(o,e)}),_E(n,e,t),s)},NE=(e,t,r,o)=>{var n;return To(o,r)?(To(o,t)&&(n=pe((e=>{const n=(e,r)=>jr(e).fold(()=>r,e=>{return t=e,o.isInline(X(t))?n(e,r.concat(ti(e))):r;var t});return n(e,[])})(r),(e,t)=>(xn(e,t),t),vi()),Sn(t),En(t,n)),Q(r),wu(t.dom)):(n=Eu(r.dom),K(kE(t,o),e=>{En(r,e)}),_E(o,e,t),n)},RE=(e,t)=>{return Rr(t,e)?(t=t,e=e,e=Sh(e,t),I.from(e[e.length-1])):I.none()},AE=(e,t)=>{bu(e,t.dom).bind(e=>I.from(e.getNode())).map(Z.fromDom).filter(di).each(Q)},DE=(e,t,r,n)=>(AE(!0,t),AE(!1,r),RE(t,r).fold(E(NE,e,t,r,n),E(SE,e,t,r,n))),TE=(e,t,r,n,o)=>t?DE(e,n,r,o):DE(e,r,n,o),OE=(t,r)=>{const n=Z.fromDom(t.getBody());var e,o,a,s;return e=t.schema,o=n.dom,a=r,((s=t.selection.getRng()).collapsed?xE(e,o,a,s):I.none()).map(e=>()=>{TE(n,r,e.from.block,e.to.block,t.schema).each(e=>{t.selection.setRng(e.toRange())})})},BE=(e,t)=>{t=Z.fromDom(t),e=E(k,e);return Zr(t,gi,e).isSome()},PE=(e,t)=>{var r=Cu(e.dom,L.fromRangeStart(t)).isNone(),n=yu(e.dom,L.fromRangeEnd(t)).isNone();return e=e,t=t,!(BE(e,t.startContainer)||BE(e,t.endContainer))&&r&&n},LE=e=>{var t,r=Z.fromDom(e.getBody()),n=e.selection.getRng();if(PE(r,n))return t=e,I.some(()=>{t.setContent(""),t.selection.setCursorLocation()});{var o=r,a=e.selection,s=e.schema;const i=a.getRng();return $t(Rv(o,Z.fromDom(i.startContainer)),Rv(o,Z.fromDom(i.endContainer)),(e,t)=>k(e,t)?I.none():I.some(()=>{i.deleteContents(),TE(o,!0,e,t,s).each(e=>{a.setRng(e.toRange())})})).getOr(I.none())}},ME=(e,t)=>e.selection.isCollapsed()?I.none():LE(e),IE=(e,t,r,n,o)=>I.from(t._selectionOverrides.showCaret(e,r,n,o)),FE=(e,t)=>{return e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?I.none():I.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))},UE=(e,t,r)=>{return t.collapsed?(e=e,n=t,r=r,n=qm(1,e.getBody(),n),n=L.fromRangeStart(n),o=n.getNode(),(Em(o)?IE(1,e,o,!n.isAtEnd(),!1):(o=n.getNode(!0),Em(o)?IE(1,e,o,!1,!1):(o=cb(e.dom.getRoot(),n.getNode()),Em(o)?IE(1,e,o,!1,r):I.none()))).getOr(t)):t;var n,o},zE=e=>xh(e)||yh(e),jE=e=>kh(e)||Ch(e),HE=(r,n,e,t,o,a)=>{IE(t,r,a.getNode(!o),o,!0).each(e=>{var t;(n.collapsed?(t=n.cloneRange(),o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t):n).deleteContents(),r.selection.setRng(e)}),t=r.dom,a=e,P(a)&&0===a.data.length&&t.remove(a)},$E=(e,t)=>{{var r=e,n=t;const a=r.selection.getRng();if(!P(a.commonAncestorContainer))return I.none();const s=n?jm.Forwards:jm.Backwards,i=(e=cu(r.getBody()),e=E(Xm,n?e.next:e.prev),t=n?zE:jE,Km(s,r.getBody(),a));var o=e(i);const l=o&&wv(n,o);if(!l||!Zm(i,l))return I.none();if(t(l))return I.some(()=>HE(r,a,i.getNode(),s,n,l));const d=e(l);return d&&t(d)&&Zm(l,d)?I.some(()=>HE(r,a,i.getNode(),s,n,d)):I.none()}},VE=(e,t)=>{e=e.getBody();return t?wu(e).filter(xh):Eu(e).filter(kh)},qE=e=>{const t=e.selection.getRng();return!t.collapsed&&(VE(e,!0).exists(e=>e.isEqual(L.fromRangeStart(t)))||VE(e,!1).exists(e=>e.isEqual(L.fromRangeEnd(t))))},WE=Gl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),KE=(t,e,r,n,o)=>{const a=o.getNode(!r);return Rv(Z.fromDom(e),Z.fromDom(n.getNode())).map(e=>To(t,e)?WE.remove(e.dom):WE.moveToElement(a)).orThunk(()=>I.some(WE.moveToElement(a)))},YE=(r,n,o,a)=>pu(n,r,o).bind(e=>{return t=e.getNode(),H(t)&&(gi(Z.fromDom(t))||ui(Z.fromDom(t)))||((t,e,r,n,o)=>{const a=e=>o.isInline(e.nodeName.toLowerCase())&&!Um(r,n,t);return Wm(!e,r).fold(()=>Wm(e,n).fold(u,a),a)})(r,n,o,e,a)?I.none():n&&b(e.getNode())||!n&&b(e.getNode(!0))?KE(a,r,n,o,e):n&&kh(o)||!n&&xh(o)?I.some(WE.moveToPosition(e)):I.none();var t}),GE=(n,e,o,t)=>{return((e,t)=>{t=t.getNode(!e),e=e?"after":"before";return J(t)&&t.getAttribute("data-mce-caret")===e})(e,o)?(r=e,a=o.getNode(!e),(oe(a)?I.none():r&&b(a.nextSibling)?I.some(WE.moveToElement(a.nextSibling)):!r&&b(a.previousSibling)?I.some(WE.moveToElement(a.previousSibling)):I.none()).orThunk(()=>YE(n,e,o,t))):YE(n,e,o,t).bind(e=>{return t=n,r=o,e.fold(e=>I.some(WE.remove(e)),e=>I.some(WE.moveToElement(e)),e=>Um(r,e,t)?I.none():I.some(WE.moveToPosition(e)));var t,r});var r,a},XE=(e,t)=>I.from(cb(e.getBody(),t)),ZE=(s,i)=>{var e=s.selection.getNode();return XE(s,e).filter(b).fold(()=>{return e=s.getBody(),t=i,r=s.selection.getRng(),n=s.schema,r=qm(t?1:-1,e,r),r=L.fromRangeStart(r),o=Z.fromDom(e),(!t&&kh(r)?I.some(WE.remove(r.getNode(!0))):t&&xh(r)?I.some(WE.remove(r.getNode())):!t&&xh(r)&&Ih(o,r,n)?Fh(o,r,n).map(e=>WE.remove(e.getNode())):t&&kh(r)&&Mh(o,r,n)?Uh(o,r,n).map(e=>WE.remove(e.getNode())):GE(e,t,r,n)).map(e=>()=>{return e.fold(e=>(o._selectionOverrides.hideFakeCaret(),hv(o,a,Z.fromDom(e)),!0),(n=a=i,e=>{e=n?L.before(e):L.after(e);return r.selection.setRng(e.toRange()),!0}),(t=r=o=s,e=>(t.selection.setRng(e.toRange()),!0)));var t,r,n,o,a});var e,t,r,n,o},()=>I.some(V))},QE=(t,r)=>{var e=t.selection.getNode();return b(e)&&!yo(e)?XE(t,e.parentNode).filter(b).fold(()=>I.some(()=>{var e;e=Z.fromDom(t.getBody()),K(Kn(e,".mce-offscreen-selection"),Q),hv(t,r,Z.fromDom(t.selection.getNode())),Av(t)}),()=>I.some(V)):qE(t)?I.some(()=>{Ov(t,t.selection.getRng(),Z.fromDom(t.getBody()))}):I.none()},JE=e=>{var t,r=e.dom,n=e.selection,e=cb(e.getBody(),n.getNode());return bo(e)&&r.isBlock(e)&&r.isEmpty(e)&&(t=r.create("br",{"data-mce-bogus":"1"}),r.setHTML(e,""),e.appendChild(t),n.setRng(L.before(t).toRange())),!0},ex=(e,t)=>(e.selection.isCollapsed()?ZE:QE)(e,t),tx=e=>e.hasOwnProperty("text"),rx=e=>e.hasOwnProperty("marker"),nx=(e,o)=>{var t=(e,t)=>{var r,n;return P(e)?{text:e,offset:t}:(r=o(),t<(n=e.childNodes).length?(e.insertBefore(r,n[t]),{marker:r,before:!0}):(e.appendChild(r),{marker:r,before:!1}))},r=t(e.endContainer,e.endOffset);return{start:t(e.startContainer,e.startOffset),end:r}},ox=e=>{var t,{start:e,end:r}=e,n=new window.Range;return tx(e)?n.setStart(e.text,e.offset):rx(e)&&(e.before?n.setStartBefore(e.marker):n.setStartAfter(e.marker),null!=(t=e.marker.parentNode))&&t.removeChild(e.marker),tx(r)?n.setEnd(r.text,r.offset):rx(r)&&(r.before?n.setEndBefore(r.marker):n.setEndAfter(r.marker),null!=(t=r.marker.parentNode))&&t.removeChild(r.marker),n},ax=(t,r)=>{var e,n=t.dom;const o=n.getParent(t.selection.getStart(),n.isBlock);var a=n.getParent(t.selection.getEnd(),n.isBlock);const s=t.getBody();if("div"===(null==(e=null===o||void 0===o?void 0:o.nodeName)?void 0:e.toLowerCase())&&o&&a&&o===s.firstChild&&a===s.lastChild&&!n.isEmpty(s)){const i=o.cloneNode(!1);return I.some(()=>{var e;(r?Sv:_v)(t),s.firstChild!==o&&(e=nx(t.selection.getRng(),()=>document.createElement("span")),Array.from(s.childNodes).forEach(e=>i.appendChild(e)),s.appendChild(i),t.selection.setRng(ox(e)))})}return I.none()},sx=(e,t)=>{return e.selection.isCollapsed()?(r=e,n=t,e=L.fromRangeStart(r.selection.getRng()),pu(n,r.getBody(),e).filter(e=>(n?vh:bh)(e)).bind(e=>zm(n?0:-1,e)).map(e=>()=>r.selection.select(e))):I.none();var r,n},ix=P,lx=e=>ix(e)&&e.data[0]===yi,dx=e=>ix(e)&&e.data[e.data.length-1]===yi,cx=e=>{return(null!=(e=e.ownerDocument)?e:document).createTextNode(yi)},mx=(e,t)=>{return e?(e=t,ix(e.previousSibling)?(dx(e.previousSibling)||e.previousSibling.appendData(yi),e.previousSibling):ix(e)?(lx(e)||e.insertData(0,yi),e):(o=cx(e),null!=(n=e.parentNode)&&n.insertBefore(o,e),o)):(n=t,ix(n.nextSibling)?(lx(n.nextSibling)||n.nextSibling.insertData(0,yi),n.nextSibling):ix(n)?(dx(n)||n.appendData(yi),n):(e=cx(n),n.nextSibling?null!=(r=n.parentNode)&&r.insertBefore(e,n.nextSibling):null!=(r=n.parentNode)&&r.appendChild(e),e));var r,n,o},ux=E(mx,!0),fx=E(mx,!1),gx=(e,t)=>P(e.container())?mx(t,e.container()):mx(t,e.getNode()),px=(e,t)=>{t=t.get();return t&&e.container()===t&&_i(t)},hx=(r,e)=>e.fold(e=>{pm(r.get());e=ux(e);return r.set(e),I.some(L(e,e.length-1))},e=>wu(e).map(e=>{var t;return px(e,r)?(t=r.get(),L(t,1)):(pm(r.get()),t=gx(e,!0),r.set(t),L(t,1))}),e=>Eu(e).map(e=>{var t;return px(e,r)?(t=r.get(),L(t,t.length-1)):(pm(r.get()),t=gx(e,!1),r.set(t),L(t,t.length-1))}),e=>{pm(r.get());e=fx(e);return r.set(e),I.some(L(e,1))}),vx=(t,r)=>{for(let e=0;e<t.length;e++){var n=t[e].apply(null,r);if(n.isSome())return n}return I.none()},bx=Gl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),yx=(e,t)=>{t=Fm(t,e);return t||e},Cx=(e,t,r)=>{const n=Ev(r),o=yx(t,n.container());return Cv(e,o,n).fold(()=>yu(o,n).bind(E(Cv,e,o)).map(e=>bx.before(e)),I.none)},wx=(e,t)=>null===_u(e,t),Ex=(e,t,r)=>Cv(e,t,r).filter(E(wx,t)),xx=(e,t,r)=>{const n=xv(r);return Ex(e,t,n).bind(e=>{return Cu(e,n).isNone()?I.some(bx.start(e)):I.none()})},kx=(e,t,r)=>{const n=Ev(r);return Ex(e,t,n).bind(e=>{return yu(e,n).isNone()?I.some(bx.end(e)):I.none()})},_x=(e,t,r)=>{const n=xv(r),o=yx(t,n.container());return Cv(e,o,n).fold(()=>Cu(o,n).bind(E(Cv,e,o)).map(e=>bx.after(e)),I.none)},Sx=e=>!yv(Rx(e)),Nx=(e,t,r)=>{return vx([Cx,xx,kx,_x],[e,t,r]).filter(Sx)},Rx=e=>e.fold(N,N,N,N),Ax=e=>e.fold(q("before"),q("start"),q("end"),q("after")),Dx=e=>e.fold(bx.before,bx.before,bx.after,bx.after),Tx=e=>e.fold(bx.start,bx.start,bx.end,bx.end),Ox=(r,e,n,t,o,a)=>$t(Cv(e,n,t),Cv(e,n,o),(e,t)=>e!==t&&((e,t,r)=>{t=Fm(t,e),r=Fm(r,e);return H(t)&&t===r})(n,e,t)?bx.after(r?e:t):a).getOr(a),Bx=(e,r)=>e.fold(le,e=>{return e=e,t=r,!(Ax(e)===Ax(t)&&Rx(e)===Rx(t));var t}),Px=(e,t)=>e?t.fold(_(I.some,bx.start),I.none,_(I.some,bx.after),I.none):t.fold(I.none,_(I.some,bx.before),I.none,_(I.some,bx.end)),Lx=(s,i,l,d)=>{var e=wv(s,d);const c=Nx(i,l,e);return Nx(i,l,e).bind(E(Px,s)).orThunk(()=>{{var t=s,r=i,n=l,o=c,e=d;const a=wv(t,e);return pu(t,n,a).map(E(wv,t)).fold(()=>o.map(Dx),e=>Nx(r,n,e).map(E(Ox,t,r,n,a,e)).filter(E(Bx,o))).filter(Sx)}})},Mx=e=>$(e.selection.getSel().modify),Ix=(e,t,r)=>{var n=e?1:-1;return t.setRng(L(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Fx=((yC=rE=rE||{})[yC.Br=0]="Br",yC[yC.Block=1]="Block",yC[yC.Wrap=2]="Wrap",yC[yC.Eol=3]="Eol",(e,t)=>e===jm.Backwards?xe(t):t);var Ux,CC=(e,t,r,n)=>{var o=cu(r);let a=n;for(var s,i,l=[];a;){c=o,d=a;var d,c=t===jm.Forwards?c.next(d):c.prev(d);if(!c)break;if(R(c.getNode(!1)))return t===jm.Forwards?{positions:Fx(t,l).concat([c]),breakType:rE.Br,breakAt:I.some(c)}:{positions:Fx(t,l),breakType:rE.Br,breakAt:I.some(c)};if(c.isVisible()){if(e(a,c))return d=t,s=a,i=c,d=R(i.getNode(d===jm.Forwards))?rE.Br:!1===Um(s,i)?rE.Block:rE.Wrap,{positions:Fx(t,l),breakType:d,breakAt:I.some(c)};l.push(c)}a=c}return{positions:Fx(t,l),breakType:rE.Eol,breakAt:I.none()}},n=(r,n,o,e)=>n(o,e).breakAt.map(e=>{var t=n(o,e).positions;return r===jm.Backwards?t.concat(e):[e].concat(t)}).getOr([]);const zx=(e,o)=>he(e,(e,n)=>e.fold(()=>I.some(n),r=>$t(Re(r.getClientRects()),Re(n.getClientRects()),(e,t)=>{e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?n:r}).or(e)),I.none()),jx=(t,e)=>Re(e.getClientRects()).bind(e=>zx(t,e.left)),Hx=E(CC,L.isAbove,-1),$x=E(CC,L.isBelow,1),Vx=E(n,-1,Hx),qx=E(n,1,$x),Wx=(e,t)=>Hx(e,t).breakAt.isNone(),Kx=(e,t)=>$x(e,t).breakAt.isNone(),Yx=(e,t)=>jx(Vx(e,t),t),Gx=(e,t)=>jx(qx(e,t),t),Xx=b,Zx=(e,t)=>Math.abs(e.left-t),Qx=(e,t)=>Math.abs(e.right-t),Jx=(e,a)=>Xe(e,(e,t)=>{var r,n=Math.min(Zx(e,a),Qx(e,a)),o=Math.min(Zx(t,a),Qx(t,a));return o===n&&(r=t,$e(r,"node"))&&Xx(t.node)||o<n?t:e}),ek=t=>{var e,r=e=>T(e,e=>{e=Mi(e);return e.node=t,e});return J(t)?r(t.getClientRects()):P(t)?((e=t.ownerDocument.createRange()).setStart(t,0),e.setEnd(t,t.data.length),r(e.getClientRects())):[]},tk=e=>we(e,ek);(r=Ux=Ux||{})[r.Up=-1]="Up",r[r.Down=1]="Down";e=(n,o,a,e,s,t)=>{let i=0;const l=[];var r=e=>{let t=tk([e]);-1===n&&(t=t.reverse());for(let e=0;e<t.length;e++){var r=t[e];if(!a(r,d)){if(0<l.length&&o(r,Qe(l))&&i++,r.line=i,s(r))return!0;l.push(r)}}return!1};const d=Qe(t.getClientRects());return d&&(t=t.getNode())&&(r(t),((e,t,r,n)=>{let o=n;for(;o=Mm(o,e,al,t);)if(r(o))return})(n,e,r,t)),l};const rk=E(e,Ux.Up,zi,ji),nk=E(e,Ux.Down,ji,zi),ok=e=>Qe(e.getClientRects()),ak=t=>e=>{return e.line>t},sk=t=>e=>{return e.line===t},ik=(e,t)=>{e.selection.setRng(t),ep(e,e.selection.getRng())},lk=(e,t,r)=>I.some(UE(e,t,r)),dk=(e,t,r,n,o,a)=>{var s=t===jm.Forwards,i=cu(e.getBody()),i=E(Xm,s?i.next:i.prev),n=s?n:o;if(!r.collapsed){o=Vi(r);if(a(o))return IE(t,e,o,t===jm.Backwards,!1);if(qE(e))return(a=r.cloneRange()).collapse(t===jm.Backwards),I.from(a)}o=Km(t,e.getBody(),r);if(n(o))return FE(e,o.getNode(!s));let l=i(o);a=Pi(r);return l?n(l=wv(s,l))?IE(t,e,l.getNode(!s),s,!1):(o=i(l))&&n(o)&&Zm(l,o)?IE(t,e,o.getNode(!s),s,!1):a?lk(e,l.toRange(),!1):I.none():a?I.some(r):I.none()},ck=(t,r,e,n,o,a)=>{const s=Km(r,t.getBody(),e);var i=Qe(s.getClientRects()),l=r===Ux.Down,d=t.getBody();if(!i)return I.none();if(qE(t)){const s=l?L.fromRangeEnd(e):L.fromRangeStart(e);return(l?Gx:Yx)(d,s).orThunk(()=>I.from(s)).map(e=>e.toRange())}var c,m=(l?nk:rk)(d,ak(1),s),m=O(m,sk(1)),i=i.left,u=Jx(m,i);if(u&&a(u.node))return a=Math.abs(i-u.left),c=Math.abs(i-u.right),IE(r,t,u.node,a<c,!1);let f;if(f=n(s)?s.getNode():o(s)?s.getNode(!0):Vi(e)){u=((e,t,r,n)=>{t=cu(t);let o,a,s,i;var l=[];let d=0;i=1===e?(o=t.next,a=ji,s=zi,L.after(n)):(o=t.prev,a=zi,s=ji,L.before(n));var c=ok(i);do{if(i.isVisible()){var m=ok(i);if(!s(m,c)){0<l.length&&a(m,Qe(l))&&d++;m=Mi(m);if(m.position=i,m.line=d,r(m))return l;l.push(m)}}}while(i=o(i));return l})(r,d,ak(1),f);let e=Jx(O(u,sk(1)),i);if(e)return lk(t,e.position.toRange(),!1);if(e=Qe(O(u,sk(0))))return lk(t,e.position.toRange(),!1)}return 0===m.length?mk(t,l).filter(l?o:n).map(e=>UE(t,e.toRange(),!1)):I.none()},mk=(e,t)=>{var r=e.selection.getRng(),r=t?L.fromRangeEnd(r):L.fromRangeStart(r),e=Im(r.container(),e.getBody());return t?(t=$x(e,r),Ae(t.positions)):(t=Hx(e,r),Re(t.positions))},uk=(t,e,r)=>mk(t,e).filter(r).exists(e=>(t.selection.setRng(e.toRange()),!0)),fk=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},gk=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},pk=(t,e,r)=>hx(e,r).map(e=>(fk(t,e),r)),hk=(t,r,e)=>{var n,o,a=t.getBody(),s=(i=t.selection.getRng(),n=a,s=e,o=L.fromRangeStart(i),i.collapsed?o:(i=L.fromRangeEnd(i),s?Cu(n,i).getOr(i):yu(n,o).getOr(o))),i=E(bv,t);return Lx(e,i,a,s).bind(e=>pk(t,r,e))},vk=(e,t)=>{var r,n,o=t.get();e.selection.isCollapsed()&&!e.composing&&o&&(r=L.fromRangeStart(e.selection.getRng()),!L.isTextPosition(r)||(n=r,Ri(n))||Ai(n)||(fk(e,gm(o,r)),t.set(null)))},bk=(e,t,r)=>!!tc(e)&&hk(e,t,r).isSome();t=(e,t,r)=>{return!!tc(t)&&(e=e,n=(t=t).selection.getRng(),n=e?L.fromRangeEnd(n):L.fromRangeStart(n),!!Mx(t))&&(e&&Ri(n)?Ix(!0,t.selection,n):!(e||!Ai(n))&&Ix(!1,t.selection,n));var n};const yk=i=>{const l=Bo(null),d=E(bv,i);return i.on("NodeChange",e=>{var t,r,n,o,a,s;tc(i)&&(s=d,t=i.dom,r=e.parents,t=T(Kn(Z.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),t=O(t,s),r=O(r,s),K(ke(t,r),E(gk,!1)),K(ke(r,t),E(gk,!0)),vk(i,l),n=d,o=i,a=l,s=e.parents,o.selection.isCollapsed())&&(s=O(s,n),K(s,e=>{var t=L.fromRangeStart(o.selection.getRng());Nx(n,o.getBody(),t).bind(e=>pk(o,a,e))}))}),l},Ck=E(t,!0),wk=E(t,!1),Ek=(t,r,n)=>{var e;return!!tc(t)&&(e=mk(t,r).getOrThunk(()=>{var e=t.selection.getRng();return r?L.fromRangeEnd(e):L.fromRangeStart(e)}),Nx(E(bv,t),t.getBody(),e).exists(e=>{e=Dx(e);return hx(n,e).exists(e=>(fk(t,e),!0))}))},xk=(t,r)=>e=>hx(r,e).map(e=>()=>fk(t,e)),kk=(n,o,a,s)=>{const i=n.getBody(),l=E(bv,n);n.undoManager.ignore(()=>{var e,t,r;n.selection.setRng((e=a,t=s,(r=document.createRange()).setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r)),_v(n),Nx(l,i,L.fromRangeStart(n.selection.getRng())).map(Tx).bind(xk(n,o)).each(ie)}),n.nodeChanged()},_k=(r,n,o,a)=>{const s=((e,t)=>{t=Fm(t,e);return t||e})(r.getBody(),a.container()),i=E(bv,r),l=Nx(i,s,a);return l.bind(e=>o?e.fold(q(I.some(Tx(e))),I.none,q(I.some(Dx(e))),I.none):e.fold(I.none,q(I.some(Dx(e))),I.none,q(I.some(Tx(e))))).map(xk(r,n)).getOrThunk(()=>{const e=hu(o,s,a),t=e.bind(e=>Nx(i,s,e));return $t(l,t,()=>Cv(i,s,a).bind(e=>{return n=e,$t(wu(n),Eu(n),(e,t)=>{e=wv(!0,e);const r=wv(!1,t);return yu(n,e).forall(e=>e.isEqual(r))}).getOr(!0)?I.some(()=>{hv(r,o,Z.fromDom(e))}):I.none();var n})).getOrThunk(()=>t.bind(()=>e.map(e=>()=>{o?kk(r,n,a,e):kk(r,n,e,a)})))})},Sk=(e,t,r)=>{var n;return e.selection.isCollapsed()&&tc(e)?(n=L.fromRangeStart(e.selection.getRng()),_k(e,t,r,n)):I.none()},Nk=(e,t)=>{var r=Z.fromDom(e.getBody()),e=Z.fromDom(e.selection.getStart());const n=Sh(e,r);return ye(n,t).fold(q(n),e=>n.slice(0,e))},Rk=e=>1===$r(e),Ak=t=>Nk(t,e=>{return t.schema.isBlock(X(e))||(e=e,1<$r(e))}),Dk=(e,t)=>{const r=E(C0,e);return we(t,e=>r(e)?[e.dom]:[])},Tk=e=>{t=e;var t,r=Nk(t,e=>t.schema.isBlock(X(e)));return Dk(e,r)},Ok=(a,s)=>{const i=O(Ak(a),Rk);return Ae(i).bind(o=>{var e=L.fromRangeStart(a.selection.getRng());return Dv(s,e,o.dom)&&!xf(o)?I.some(()=>{var e=s,t=a,r=o,n=i;0===(n=Dk(t,n)).length?hv(t,e,r):(e=y0(r.dom,n),t.selection.setRng(e.toRange()))}):I.none()})},Bk=(e,t)=>{var r,n,o=e.selection.getStart(),a=(a=e,n=(r=o).parentElement,R(r)&&!y(n)&&a.dom.isEmpty(n)||(r=o,xf(Z.fromDom(r)))?y0(o,t):((e,t)=>{var{caretContainer:t,caretPosition:r}=b0(t);return e.insertNode(t.dom),r})(e.selection.getRng(),t));e.selection.setRng(a.toRange())},Pk=e=>P(e.startContainer),Lk=e=>{return r=(t=e).startContainer.parentNode,t=t.endContainer.parentNode,!y(r)&&!y(t)&&r.isEqualNode(t)&&(r=e.endContainer,e.endOffset===(P(r)?r:r.childNodes).length);var t,r},Mk=e=>{var t,r=e.selection.getRng();return 0===(t=r).startOffset&&Pk(t)&&((e,t)=>{t=t.startContainer.parentElement;return!y(t)&&C0(e,Z.fromDom(t))})(e,r)&&(t=r,Lk(t)||!t.endContainer.isEqualNode(t.commonAncestorContainer))},Ik=r=>{if(Mk(r)){const n=Tk(r);return I.some(()=>{_v(r);var e=r,t=n;0<(t=ke(t,Tk(e))).length&&Bk(e,t)})}return I.none()},Fk=(e,t)=>e.selection.isCollapsed()?Ok(e,t):Ik(e),Uk=e=>{return t=Z.fromDom(e.selection.getStart()),r=e.schema,Yn(t,e=>ku(e.dom),e=>r.isBlock(X(e)));var t,r},zk=e=>{var t,r;return(r=(t=e).selection.getRng()).collapsed&&(Pk(r)||t.dom.isEmpty(r.startContainer))&&!Uk(t)&&Bk(e,[]),!0},jk=(e,t,r)=>H(r)?I.some(()=>{e._selectionOverrides.hideFakeCaret(),hv(e,t,Z.fromDom(r))}):I.none(),Hk=(e,t)=>{if(e.selection.isCollapsed()){var r=e,n=t;const a=n?yh:Ch;var o=n?jm.Forwards:jm.Backwards;const s=Km(o,r.getBody(),r.selection.getRng());return a(s)?jk(r,n,s.getNode(!n)):I.from(wv(n,s)).filter(e=>a(e)&&Zm(s,e)).bind(e=>jk(r,n,e.getNode(!n)))}return o=t,e=(t=e).selection.getNode(),wo(e)?jk(t,o,e):I.none()},$k=e=>Qr(e,e=>bo(e.dom)||b(e.dom)).exists(e=>bo(e.dom)),Vk=e=>pt(null!=e?e:"").getOr(0),qk=(e,t)=>{return(e||(e=t,"table"===X(e))?"margin":"padding")+("rtl"===fn(t,"direction")?"-right":"-left")},Wk=e=>{var r,t=Gk(e);return!e.mode.isReadOnly()&&(1<t.length||(r=e,e=t,Ee(e,e=>{var t=qk(Ud(r),e),t=pn(e,t).map(Vk).getOr(0);return"false"!==r.dom.getContentEditable(e.dom)&&0<t})))},Kk=e=>mi(e)||ui(e),Yk=e=>Or(e).exists(Kk),Gk=e=>O(An(e.selection.getSelectedBlocks()),e=>!Kk(e)&&!Yk(e)&&$k(e)),Xk=(e,i)=>{var t;const l=e["dom"];var r=zd(e);const d=null!=(t=null==(t=/[a-z%]+$/i.exec(r))?void 0:t[0])?t:"px",c=Vk(r),m=Ud(e);K(Gk(e),e=>{var t,r,n,o,a,s;t=l,r=i,n=m,o=c,a=d,e=e.dom,n=qk(n,Z.fromDom(e)),s=Vk(t.getStyle(e,n)),"outdent"===r?(r=Math.max(0,s-o),t.setStyle(e,n,r?r+a:"")):t.setStyle(e,n,s+o+a)})},Zk=e=>Xk(e,"indent"),Qk=e=>Xk(e,"outdent"),Jk=e=>{if(e.selection.isCollapsed()&&Wk(e)){var t=e.dom,r=e.selection.getRng(),n=L.fromRangeStart(r),r=t.getParent(r.startContainer,t.isBlock);if(null!==r&&Dh(Z.fromDom(r),n,e.schema))return I.some(()=>Qk(e))}return I.none()},e_=(t,r,n)=>Te([Jk,ex,$E,(e,t)=>Sk(e,r,t),OE,db,sx,Hk,ME,Fk,ax],e=>e(t,n)).filter(e=>t.selection.isEditable()),t_=(r,n)=>{r.addCommand("delete",()=>{var e,t;e=r,t=n,e_(e,t,!1).fold(()=>{e.selection.isEditable()&&(_v(e),Av(e))},ie)}),r.addCommand("forwardDelete",()=>{var e,t;e=r,t=n,e_(e,t,!0).fold(()=>{e.selection.isEditable()&&Sv(e)},ie)})},r_=e=>void 0===e.touches||1!==e.touches.length?I.none():I.some(e.touches[0]),n_=o=>{const a=Lo(),s=Bo(!1),r=Ls(e=>{o.dispatch("longpress",{...e,type:"longpress"}),s.set(!0)},400);o.on("touchstart",t=>{r_(t).each(e=>{r.cancel();e={x:e.clientX,y:e.clientY,target:t.target};r.throttle(t),s.set(!1),a.set(e)})},!0),o.on("touchmove",e=>{r.cancel(),r_(e).each(n=>{a.on(e=>{var t,r;t=n,e=e,r=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<r||5<t)&&(a.clear(),s.set(!1),o.dispatch("longpresscancel"))})})},!0),o.on("touchend touchcancel",t=>{r.cancel(),"touchcancel"!==t.type&&a.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{s.get()?t.preventDefault():o.dispatch("tap",{...t,type:"tap"})})},!0)},o_=(e,t)=>G(e,t.nodeName),a_=e=>e.dom.create(yd(e),Cd(e)),s_=t=>{var r=t.dom,e=t.selection,n=t.schema,o=n.getBlockElements(),e=e.getStart(),a=t.getBody();let s,i,l=null;var d=yd(t);if(e&&J(e)){var c,m,u,f=a.nodeName.toLowerCase();if(n.isValidChild(f,d.toLowerCase())&&(c=o,f=a,d=e,!W(_h(Z.fromDom(d),Z.fromDom(f)),e=>o_(c,e.dom))))if(a.firstChild===a.lastChild&&R(a.firstChild))(s=a_(t)).appendChild(vi().dom),a.replaceChild(s,a.firstChild),t.selection.setCursorLocation(s,0),t.nodeChanged();else{let e=a.firstChild;for(;e;)if(J(e)&&(m=n,u=e,Qo(m,u))&&(m=$o(m.getBlockElements()),Vo(m,u)),m=n,u=e,!P(u)&&(!J(u)||(o_(m.getBlockElements(),u)||Iu(u)||Jo(m,u)||Fo(u))))s=null,e=e.nextSibling;else if(((e,t)=>{if(P(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||o_(e,t.nextSibling)||Fo(t.nextSibling)}return!1})(o,e))e=(i=e).nextSibling,r.remove(i);else{if(!s){if(!l&&t.hasFocus()&&(l=nx(t.selection.getRng(),()=>document.createElement("span"))),!e.parentNode){e=null;break}s=a_(t),a.insertBefore(s,e)}e=(i=e).nextSibling,s.appendChild(i)}l&&(t.selection.setRng(ox(l)),t.nodeChanged())}}},i_=(e,t,r)=>{var e=Z.fromDom(a_(e)),n=vi(),r=(En(e,n),r(t,e),document.createRange());return r.setStartBefore(n.dom),r.setEndBefore(n.dom),r},l_=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),d_=a=>{const o="contenteditable";var e=" "+B.trim(qc(a))+" ",t=" "+B.trim(Vc(a))+" ";const s=l_(e),i=l_(t),l=Wc(a);0<l.length&&a.on("BeforeSetContent",r=>{{var n=a,o=l;let e=o.length,t=r.content;if("raw"!==r.format){for(;e--;)t=t.replace(o[e],((o,a,s)=>function(e){var t=arguments,r=t[t.length-2],n=0<r?a.charAt(r-1):"";if('"'===n)return e;if(">"===n){n=a.lastIndexOf("<",r);if(-1!==n)if(-1!==a.substring(n,r).indexOf('contenteditable="false"'))return e}return'<span class="'+s+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"})(n,t,Vc(n)));r.content=t}}}),a.parser.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){var r=e[t];s(r)?r.attr(o,"true"):i(r)&&r.attr(o,"false")}}),a.serializer.addAttributeFilter(o,e=>{let t=e.length;for(;t--;){var r,n=e[t];(s(n)||i(n))&&(r=n.attr("data-mce-content"),0<l.length&&r?((e,t)=>Ee(e,e=>{e=t.match(e);return null!==e&&e[0].length===t.length}))(l,r)?(n.name="#text",n.type=3,n.raw=!0,n.value=r):n.remove():n.attr(o,null))}})},c_=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Bi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},m_=(e,t)=>{r=e;var r=rn(Z.fromDom(r.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();r&&("compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),c_(e,r)):Ni(r)&&(c_(e,r),e.undoManager.add()))},u_=b,f_=(e,t,r)=>{var n,o=cu(e.getBody()),o=E(Xm,1===t?o.next:o.prev);r.collapsed&&(n=e.dom.getParent(r.startContainer,"PRE"))&&!o(L.fromRangeStart(r))&&(o=Z.fromDom((e=>{e=e.dom.create(yd(e));return e.innerHTML='<br data-mce-bogus="1">',e})(e)),(1===t?Cn:yn)(Z.fromDom(n),o),e.selection.select(o.dom,!0),e.selection.collapse())},g_=(e,t)=>{const r=t?jm.Forwards:jm.Backwards,n=e.selection.getRng();return t=r,o=e,a=n,dk(o,t,a,xh,kh,u_).orThunk(()=>(f_(e,r,n),I.none()));var o,a},p_=(e,t)=>{const r=t?1:-1,n=e.selection.getRng();return t=r,o=e,a=n,ck(o,t,a,e=>xh(e)||wh(e),e=>kh(e)||Eh(e),u_).orThunk(()=>(f_(e,r,n),I.none()));var o,a},h_=(t,e)=>g_(t,((e,t)=>{e=t?e.getEnd(!0):e.getStart(!0);return yv(e)?!t:t})(t.selection,e)).exists(e=>(ik(t,e),!0)),v_=(t,e)=>p_(t,e).exists(e=>(ik(t,e),!0)),b_=(e,t)=>{var r=t?kh:xh;return uk(e,t,r)},y_=(r,n)=>VE(r,!n).map(e=>{var e=e.toRange(),t=r.selection.getRng();return n?e.setStart(t.startContainer,t.startOffset):e.setEnd(t.endContainer,t.endOffset),e}).exists(e=>(ik(r,e),!0)),C_=e=>D(["figcaption"],X(e)),w_=(n,o)=>{const a=Z.fromDom(n.getBody()),s=L.fromRangeStart(n.selection.getRng());return((e,t,r)=>{t=E(k,t);return Qr(Z.fromDom(e.container()),e=>r.isBlock(X(e)),t).filter(C_)})(s,a,n.schema).exists(()=>{var e,t,r;return e=a,t=o,r=s,!!(t?Kx:Wx)(e.dom,r)&&(t=o?En:wn,e=i_(n,a,t),n.selection.setRng(e),!0)})},E_=(e,t)=>!!e.selection.isCollapsed()&&w_(e,t),x_=(a,e)=>(e?I.from(a.dom.getParent(a.selection.getNode(),"details")).map(e=>{return e=e,r=(t=a).selection.getRng(),r=L.fromRangeStart(r),!(t.getBody().lastChild!==e||!Kx(e,r)||(t.execCommand("InsertNewBlockAfter"),0));var t,r}):I.from(a.dom.getParent(a.selection.getNode(),"summary")).bind(o=>I.from(a.dom.getParent(o,"details")).map(e=>{return e=e,r=o,n=(t=a).selection.getRng(),n=L.fromRangeStart(n),!(t.getBody().firstChild!==e||!Wx(r,n)||(t.execCommand("InsertNewBlockBefore"),0));var t,r,n}))).getOr(!1),k_=(e,t)=>x_(e,t),__={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},S_=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,N_=(e,t)=>{return we((e=e,T(e,e=>({...__,...e}))),e=>S_(e,t)?[e]:[])},R_=(e,t)=>{return we((e=e,T(e,e=>({...__,...e}))),e=>S_(e,t)?[e]:[])},c=(e,...t)=>()=>e.apply(null,t),A_=(e,t)=>be(N_(e,t),e=>e.action()),D_=(e,t)=>Te(R_(e,t),e=>e.action()),T_=(t,e)=>{var e=e?jm.Forwards:jm.Backwards,r=t.selection.getRng();return dk(t,e,r,yh,Ch,wo).exists(e=>(ik(t,e),!0))},O_=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return ck(t,e,r,yh,Ch,wo).exists(e=>(ik(t,e),!0))},B_=(e,t)=>{var r=t?Ch:yh;return uk(e,t,r)},P_=Gl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]);const L_={...P_,none:e=>P_.none(e)},M_=(e,t,r)=>we(Ur(e),e=>_r(e,t)?r(e)?[e]:[]:M_(e,t,r)),I_=(e,t)=>{return[e,t,r=u]=[["td","th"],e,t],r(t)?I.none():D(e,X(t))?I.some(t):tn(t,e.join(","),e=>_r(e,"table")||r(e));var r},F_=e=>{return e=e,t="th,td",M_(e,t,le);var t},U_=(e,t)=>nn(e,"table",t),z_=(e,t,r,n,o=le)=>{var a=1===n;return!a&&r<=0?L_.first(e[0]):a&&r>=e.length-1?L_.last(e[e.length-1]):o(r=e[a=r+n])?L_.middle(t,r):z_(e,t,a,n,o)},j_=(r,e)=>U_(r,e).bind(e=>{const t=F_(e);return ye(t,e=>k(r,e)).map(e=>({index:e,all:t}))}),H_=(t,r,e)=>{return j_(t,e).fold(()=>L_.none(t),e=>z_(e.all,t,e.index,1,r))},$_=e=>{return e=e,si.getOption(e).filter(e=>0!==e.trim().length||-1<e.indexOf(Qn)).isSome()},V_=["img","br"],q_=e=>{return $_(e)||D(V_,X(e))||(e=e,Jt(e)&&"false"===lr(e,"contenteditable"))},W_=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t});vC=(e,t,r,n,o)=>{var a,s,i,r=Kn(Z.fromDom(r),"td,th,caption").map(e=>e.dom),r=O((a=e,e=r,we(e,e=>{var t=W_(Mi(e.getBoundingClientRect()),-1);return[{x:t.left,y:a(t),cell:e},{x:t.right,y:a(t),cell:e}]})),e=>t(e,o));return e=r,s=n,i=o,he(e,(e,n)=>e.fold(()=>I.some(n),e=>{var t=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-i)),r=Math.sqrt(Math.abs(n.x-s)+Math.abs(n.y-i));return I.some(r<t?n:e)}),I.none()).map(e=>e.cell)};const K_=E(vC,e=>e.bottom,(e,t)=>e.y<t),Y_=E(vC,e=>e.top,(e,t)=>e.y>t),G_=(t,r)=>Re(r.getClientRects()).bind(e=>K_(t,e.left,e.top)).bind(e=>{return jx((t=e,Eu(t).map(e=>Hx(t,e).positions.concat(e)).getOr([])),r);var t}),X_=(t,r)=>Ae(r.getClientRects()).bind(e=>Y_(t,e.left,e.top)).bind(e=>{return jx((t=e,wu(t).map(e=>[e].concat($x(t,e).positions)).getOr([])),r);var t});var Z_,yC=(e,t,r)=>{var n,o,a,s=e(t,r);return(a=s).breakType===rE.Wrap&&0===a.positions.length||!R(r.getNode())&&(a=s).breakType===rE.Br&&1===a.positions.length?(n=e,o=t,!s.breakAt.exists(e=>n(o,e).breakAt.isSome())):s.breakAt.isNone()};const Q_=E(yC,Hx),J_=E(yC,$x),eS=(t,e,r,n)=>{var o=t.selection.getRng(),a=e?1:-1;return!(!wm()||!((e,t,r)=>{const n=L.fromRangeStart(t);return bu(!e,r).exists(e=>e.isEqual(n))})(e,o,r)||(IE(a,t,r,!e,!1).each(e=>{ik(t,e)}),0))},tS=(e,t)=>{t=t.getNode(e);return lo(t)?I.some(t):I.none()},rS=(a,s,t)=>{var e=s?tS(!0,t):tS(!1,t);const r=!1===s;e.fold(()=>ik(a,t.toRange()),o=>bu(r,a.getBody()).filter(e=>e.isEqual(t)).fold(()=>ik(a,t.toRange()),e=>{var t,r,n;t=s,n=o,(r=a).undoManager.transact(()=>{var e=t?Cn:yn,e=i_(r,Z.fromDom(n),e);ik(r,e)})}))},nS=(e,t,r,n)=>{var o,a,s,i,l,d,c,m=e.selection.getRng(),m=L.fromRangeStart(m),u=e.getBody();return!t&&Q_(n,m)?(l=u,d=r,c=m,o=G_(d,c).orThunk(()=>Re(c.getClientRects()).bind(e=>zx(Vx(l,L.before(d)),e.left))).getOr(L.before(d)),rS(e,t,o),!0):!(!t||!J_(n,m)||(a=u,s=r,i=m,o=X_(s,i).orThunk(()=>Re(i.getClientRects()).bind(e=>zx(qx(a,L.after(s)),e.left))).getOr(L.after(s)),rS(e,t,o),0))},oS=(r,n,o)=>I.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(t=>I.from(r.dom.getParent(t,"table")).map(e=>o(r,n,e,t))).getOr(!1),aS=(e,t)=>oS(e,t,eS),sS=(e,t)=>oS(e,t,nS),iS=(t,r,e)=>e.fold(I.none,I.none,(e,t)=>{return t=t,en(t,q_).map(e=>{return e=yg.exact(e,0,e,0),kg(e)})},e=>(t.execCommand("mceTableInsertRowAfter"),lS(t,r,e))),lS=(e,t,r)=>iS(e,t,H_(r,an)),dS=(e,t,r)=>{return iS(e,t,(n=r,o=an,j_(n,a).fold(()=>L_.none(),e=>z_(e.all,n,e.index,-1,o))));var n,o,a},cS=(t,r)=>{const n=["table","li","dl"],o=Z.fromDom(t.getBody()),a=e=>{var t=X(e);return k(e,o)||D(n,t)};var e=t.selection.getRng(),e=Z.fromDom(r?e.endContainer:e.startContainer);return I_(e,a).map(e=>{return U_(e,a).each(e=>{t.model.table.clearSelectedCells(e.dom)}),t.selection.collapse(!r),(r?lS:dS)(t,a,e).each(e=>{t.selection.setRng(e)}),!0}).getOr(!1)},mS=(o,a)=>{o.on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=o,r=a,n=e,e=U.os.isMacOS()||U.os.isiOS(),A_([{keyCode:te.RIGHT,action:c(h_,t,!0)},{keyCode:te.LEFT,action:c(h_,t,!1)},{keyCode:te.UP,action:c(v_,t,!1)},{keyCode:te.DOWN,action:c(v_,t,!0)},...e?[{keyCode:te.UP,action:c(y_,t,!1),metaKey:!0,shiftKey:!0},{keyCode:te.DOWN,action:c(y_,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:te.RIGHT,action:c(aS,t,!0)},{keyCode:te.LEFT,action:c(aS,t,!1)},{keyCode:te.UP,action:c(sS,t,!1)},{keyCode:te.DOWN,action:c(sS,t,!0)},{keyCode:te.UP,action:c(sS,t,!1)},{keyCode:te.UP,action:c(k_,t,!1)},{keyCode:te.DOWN,action:c(k_,t,!0)},{keyCode:te.RIGHT,action:c(T_,t,!0)},{keyCode:te.LEFT,action:c(T_,t,!1)},{keyCode:te.UP,action:c(O_,t,!1)},{keyCode:te.DOWN,action:c(O_,t,!0)},{keyCode:te.RIGHT,action:c(bk,t,r,!0)},{keyCode:te.LEFT,action:c(bk,t,r,!1)},{keyCode:te.RIGHT,ctrlKey:!e,altKey:e,action:c(Ck,t,r)},{keyCode:te.LEFT,ctrlKey:!e,altKey:e,action:c(wk,t,r)},{keyCode:te.UP,action:c(E_,t,!1)},{keyCode:te.DOWN,action:c(E_,t,!0)}],n).each(e=>{n.preventDefault()}))})},uS=(e,t)=>({container:e,offset:t}),fS=ee.DOM,gS=t=>e=>t===e?-1:0,pS=(e,t,r)=>{var n;return P(e)&&0<=t?I.some(uS(e,t)):(n=ai(fS),I.from(n.backwards(e,t,gS(e),r)).map(e=>uS(e.container,e.container.data.length)))},hS=(e,t,r)=>{var n;return P(e)&&t>=e.length?I.some(uS(e,t)):(n=ai(fS),I.from(n.forwards(e,t,gS(e),r)).map(e=>uS(e.container,0)))},vS=(e,r,n)=>{var t;return P(e)?(t=e.data,0<=r&&r<=t.length?I.some(uS(e,r)):(t=ai(fS),I.from(t.backwards(e,r,gS(e),n)).bind(e=>{var t=e.container.data;return vS(e.container,r+t.length,n)}))):I.none()},bS=(e,t,r)=>{if(!P(e))return I.none();const n=e.data;var o;return t<=n.length?I.some(uS(e,t)):(o=ai(fS),I.from(o.forwards(e,t,gS(e),r)).bind(e=>bS(e.container,t-n.length,r)))},yS=(e,t,r,n,o)=>{var a,e=ai(e,(a=e,e=>a.isBlock(e)||D(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===a.getContentEditable(e)));return I.from(e.backwards(t,r,n,o))},CS=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),wS=(e,r,n,o=!1)=>{if(!(t=r).collapsed||!P(t.startContainer))return I.none();const a={text:"",offset:0};var t=e.getParent(r.startContainer,e.isBlock)||e.getRoot();return yS(e,r.startContainer,r.startOffset,(e,t,r)=>(a.text=r+a.text,a.offset+=t,((e,t,r,n=!1)=>{let o;var a=r.charAt(0);for(o=t-1;0<=o;o--){var s=e.charAt(o);if(!n&&CS(s))return I.none();if(a===s&&it(e,r,o,t))break}return I.some(o)})(a.text,a.offset,n,o).getOr(t)),t).bind(e=>{var t=r.cloneRange();return t.setStart(e.container,e.offset),t.setEnd(r.endContainer,r.endOffset),t.collapsed||(e=t,0!==(e=wi(e.toString().replace(/\u00A0/g," "))).lastIndexOf(n))?I.none():I.some({text:e.substring(n.length),range:t,trigger:n})})},ES=e=>{var t;return 3===e.nodeType?uS(e,e.data.length):0<(t=e.childNodes).length?ES(t[t.length-1]):uS(e,t.length)},xS=(e,t)=>{var r=e.childNodes;return 0<r.length&&t<r.length?xS(r[t],0):0<r.length&&e.nodeType===Zt&&r.length===t?ES(r[r.length-1]):uS(e,t)},kS=n=>e=>{var t,r,e=xS(e.startContainer,e.startOffset);return e=e,r=null!=(r=(t=n).getParent(e.container,t.isBlock))?r:t.getRoot(),!yS(t,e.container,e.offset,(e,t)=>0===t?-1:t,r).filter(e=>{e=e.container.data.charAt(e.offset-1);return!CS(e)}).isSome()},_S=(t,r)=>{var n,o,e=r(),a=t.selection.getRng();return n=t.dom,o=a,a=e,Te(a.triggers,e=>wS(n,o,e)).bind(e=>SS(t,r,e))},SS=(t,e,r,n={})=>{e=e();const o=null!=(a=t.selection.getRng().startContainer.nodeValue)?a:"";var a=O(e.lookupByTrigger(r.trigger),e=>r.text.length>=e.minChars&&e.matches.getOrThunk(()=>kS(t.dom))(r.range,o,r.text));return 0===a.length?I.none():(e=Promise.all(T(a,t=>{return t.fetch(r.text,t.maxResults,n).then(e=>({matchText:r.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))})),I.some({lookupData:e,context:r}))},NS=((CC=Z_=Z_||{})[CC.Error=0]="Error",CC[CC.Value=1]="Value",(e,t,r)=>e.stype===Z_.Error?t(e.serror):r(e.svalue));const RS=e=>({stype:Z_.Value,svalue:e}),AS=e=>({stype:Z_.Error,serror:e});const DS={fromResult:e=>e.fold(AS,RS),toResult:e=>NS(e,Yl.error,Yl.value),svalue:RS,partition:e=>{const t=[],r=[];return K(e,e=>{NS(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}},serror:AS,bind:(e,t)=>e.stype===Z_.Value?t(e.svalue):e,bindError:(e,t)=>e.stype===Z_.Error?t(e.serror):e,map:(e,t)=>e.stype===Z_.Value?{stype:Z_.Value,svalue:t(e.svalue)}:e,mapError:(e,t)=>e.stype===Z_.Error?{stype:Z_.Error,serror:t(e.serror)}:e,fold:NS},TS=e=>F(e)&&100<Be(e).length?" removed due to size":JSON.stringify(e,null,2),OS=(e,t)=>DS.serror([{path:e,getErrorInfo:t}]),BS=(e,t)=>OS(e,()=>'Choice schema did not contain choice key: "'+t+'"'),PS=(n,t,o,a)=>{return g(o,a).fold(()=>{return e=n,t=o,r=a,OS(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+TS(t));var e,t,r},e=>e.extract(n.concat(["branch: "+a]),t))};n=a=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");var r={};for(let e=0;e<t.length;e++){var n=t[e];for(const o in n)G(n,o)&&(r[o]=a(r[o],n[o]))}return r};const LS=n((e,t)=>{return re(e)&&re(t)?LS(e,t):t}),MS=n((e,t)=>t),IS=()=>({tag:"required",process:{}}),FS=e=>({tag:"defaultedThunk",process:q(e)}),US=()=>({tag:"option",process:{}}),zS=e=>_(DS.serror,Ce)(e);const jS={consolidateObj:(e,t)=>{var e=DS.partition(e);return 0<e.errors.length?zS(e.errors):(e=e.values,t=t,0<e.length?DS.svalue(LS(t,MS.apply(void 0,e))):DS.svalue(t))},consolidateArr:e=>{e=DS.partition(e);return 0<e.errors.length?zS(e.errors):DS.svalue(e.values)}};const HS=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},$S=t=>{return{extract:(r,e)=>DS.bindError(t(e),e=>{return t=r,e=e,OS(t,q(e));var t}),toString:q("val")}};r=$S(DS.svalue);const VS=(n,o,a,e)=>g(o,a).fold(()=>{return e=n,t=a,r=o,OS(e,()=>'Could not find valid *required* value for "'+t+'" in '+TS(r));var e,t,r},e),qS=(e,t,r,n)=>{return n(g(e,t).getOrThunk(()=>r(e)))},WS=(t,r,n,o,a)=>{const s=e=>a.extract(r.concat([o]),e);var i,l,e,d,c=e=>e.fold(()=>DS.svalue(I.none()),e=>{e=a.extract(r.concat([o]),e);return DS.map(e,I.some)});switch(t.tag){case"required":return VS(r,n,o,s);case"defaultedThunk":return qS(n,o,t.process,s);case"option":return e=n,d=o,c(g(e,d));case"defaultedOptionThunk":return i=n,e=o,l=t.process,c(g(i,e).map(e=>!0===e?l(i):e));case"mergeWithThunk":return qS(n,o,q({}),e=>{e=LS(t.process(n),e);return s(e)})}},KS=n=>{return{extract:(e,t)=>{{var o=e,a=t;const s={},i=[];for(const r of e=n)HS(r,(e,t,r,n)=>{r=WS(r,o,a,e,n);DS.fold(r,e=>{i.push(...e)},e=>{s[t]=e})},(e,t)=>{s[e]=t(a)});return 0<i.length?DS.serror(i):DS.svalue(s)}},toString:()=>{return"obj{\n"+T(n,e=>HS(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")")).join("\n")+"}"}}},YS=n=>{return{extract:(r,e)=>{e=T(e,(e,t)=>n.extract(r.concat(["["+t+"]"]),e));return jS.consolidateArr(e)},toString:()=>"array("+n.toString()+")"}},GS=t=>$S(e=>t(e).fold(DS.serror,DS.svalue)),XS=(e,t,r)=>DS.toResult(((e,t,r)=>{t=t.extract([e],r);return DS.mapError(t,e=>({input:r,errors:e}))})(e,t,r)),ZS=e=>"Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):e;return T(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+TS(e.input);e=(e,t)=>{return n=e,o=Le(t,KS),{extract:(t,r)=>{return g(r,n).fold(()=>BS(t,n),e=>PS(t,r,o,e))},toString:()=>"chooseOn("+n+"). Possible values: "+Be(o)};var n,o};const QS=q(r);t=(r,n)=>$S(e=>{var t=typeof e;return r(e)?DS.svalue(e):DS.serror(`Expected type: ${n} but got: `+t)});const JS=t(w,"number"),eN=t(z,"string"),tN=t(ne,"boolean"),rN=t($,"function"),nN=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n});vC=(e,t)=>({tag:"custom",newKey:e,instantiator:t});const oN=(e,t)=>nN(e,e,IS(),t);yC=e=>oN(e,eN),CC=e=>oN(e,rN);const aN=(e,t)=>nN(e,e,US(),t);n=e=>aN(e,eN);const sN=(e,t,r)=>nN(e,e,FS(t),r);r=(e,t)=>sN(e,t,JS);var t=(e,t,r)=>{return sN(e,t,(n=r,GS(e=>D(n,e)?Yl.value(e):Yl.error(`Unsupported value: "${e}", choose one of "${n.join(", ")}".`))));var n},iN=(e,t)=>sN(e,t,tN),lN=(e,t)=>sN(e,t,rN),dN=yC("type"),cN=CC("fetch"),CC=CC("onAction"),mN=lN("onSetup",()=>V),uN=n("text"),fN=n("icon"),gN=n("tooltip"),n=n("label"),pN=iN("active",!1),hN=iN("enabled",!0),iN=iN("primary",!1),vN=e=>{return t="type",e=e,sN(t,e,eN);var t};const bN=KS([dN,yC("trigger"),r("minChars",1),(dN="columns",yC=yC=1,nN(dN,dN,FS(yC),QS())),r("maxResults",10),aN("matches",rN),cN,CC,(dN=eN,sN("highlightOn",[],YS(dN)))]);yC=[hN,gN,fN,uN,mN],r=[pN].concat(yC),cN=[lN("predicate",u),t("scope","node",["node","editor"]),t("position","selection",["node","selection","line"])],dN=yC.concat([vN("contextformbutton"),iN,CC,vC("original",N)]),hN=r.concat([vN("contextformbutton"),iN,CC,vC("original",N)]),gN=yC.concat([vN("contextformbutton")]),fN=r.concat([vN("contextformtogglebutton")]),uN=e("type",{contextformbutton:dN,contextformtogglebutton:hN});KS([vN("contextform"),lN("initValue",q("")),n,(mN="commands",pN=uN,nN(mN,mN,IS(),YS(pN))),aN("launch",e("type",{contextformbutton:gN,contextformtogglebutton:fN}))].concat(cN));const yN=e=>{var e=e.ui.registry.getAll().popups,e=Le(e,e=>{return e=e,XS("Autocompleter",bN,e).fold(e=>{throw new Error(ZS(e))},N)}),t=Ve(ze(e,e=>e.trigger));const r=He(e);return{dataset:e,triggers:t,lookupByTrigger:t=>O(r,e=>e.trigger===t)}},CN=o=>{const a=Lo(),s=Bo(!1),r=a.isSet,n=()=>{r()&&(o.dispatch("AutocompleterEnd"),s.set(!1),a.clear())},i=Je(()=>yN(o)),l=e=>{var t;t=e,a.get().map(e=>wS(o.dom,o.selection.getRng(),e.trigger,!0).bind(e=>SS(o,i,e,t))).getOrThunk(()=>_S(o,i)).fold(n,n=>{var e;e=n.context,r()||a.set({trigger:e.trigger,matchLength:e.text.length}),n.lookupData.then(r=>{a.get().map(e=>{var t=n.context;e.trigger===t.trigger&&(a.set({...e,matchLength:t.text.length}),s.get()?(rg(o,{range:t.range}),e={lookupData:r},o.dispatch("AutocompleterUpdate",e)):(s.set(!0),rg(o,{range:t.range}),e={lookupData:r},o.dispatch("AutocompleterStart",e)))})})})},e=()=>a.get().bind(({trigger:e})=>{const n=o.selection.getRng();return wS(o.dom,n,e,s.get()).filter(({range:e})=>{return t=n,e=e,r=t.compareBoundaryPoints(window.Range.START_TO_START,e),t=t.compareBoundaryPoints(window.Range.END_TO_END,e),0<=r&&t<=0;var t,r}).map(({range:e})=>e)});o.addCommand("mceAutocompleterReload",(e,t)=>{t=F(t)?t.fetchOptions:{};l(t)}),o.addCommand("mceAutocompleterClose",n),o.addCommand("mceAutocompleterRefreshActiveRange",()=>{e().each(e=>{rg(o,{range:e})})}),o.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>e().isSome());{var t=o,d={cancelIfNecessary:n,load:l};const c=Ls(d.load,50);t.on("input",e=>{"insertCompositionText"===e.inputType&&!t.composing||c.throttle()}),t.on("keydown",e=>{e=e.which;8===e?c.throttle():27===e?(c.cancel(),d.cancelIfNecessary()):38!==e&&40!==e||c.cancel()},!0),t.on("remove",c.cancel)}},wN=It().browser.isSafari(),EN=e=>bi(Z.fromDom(e)),xN=(e,t)=>{return 0===e.startOffset&&e.endOffset===(null==(e=t.textContent)?void 0:e.length)},kN=(e,t)=>I.from(e.getParent(t.container(),"details")),_N=(e,t)=>kN(e,t).isSome(),SN=(r,e)=>e.startSummary.exists(e=>{return t=r,e=e,wu(e).exists(e=>e.isEqual(t));var t}),NN=(n,e)=>e.startSummary.exists(e=>{return t=n,r=e,Eu(r).exists(e=>R(e.getNode())&&Cu(r,e).exists(e=>e.isEqual(t))||e.isEqual(t));var t,r}),RN=(e,t)=>{var r=t.getNode();C(r)||e.selection.setCursorLocation(r,t.offset())},AN=(t,e,r)=>{var n=t.dom.getParent(e.container(),"details");n&&!n.open?(n=t.dom.select("summary",n)[0])&&(r?wu:Eu)(n).each(e=>RN(t,e)):RN(t,e)},DN=(r,n,e)=>{const{dom:o,selection:t}=r;var a=r.getBody();if("character"!==e)return!1;{e=L.fromRangeStart(t.getRng());const i=o.getParent(e.container(),o.isBlock),l=kN(o,e),d=i&&o.isEmpty(i),c=y(null===i||void 0===i?void 0:i.previousSibling),m=y(null===i||void 0===i?void 0:i.nextSibling);if(d){var s=n?m:c;if(s)if(hu(!n,a,e).exists(e=>_N(o,e)&&!Ht(l,kN(o,e))))return!0}return hu(n,a,e).fold(u,e=>{var t=kN(o,e);if(!_N(o,e)||Ht(l,t))return!1;if(n||AN(r,e,!1),i&&d){if(n&&c)return!0;if(!n&&m)return!0;AN(r,e,n),r.dom.remove(i)}return!0})}},TN=(e,t,r,n)=>{var o,a,s,i,l,d,c,m=e.selection.getRng(),u=L.fromRangeStart(m),e=e.getBody();return"selection"===n?(l=m,n=(d=t).startSummary.exists(e=>e.contains(l.startContainer)),m=d.startSummary.exists(e=>e.contains(l.endContainer)),c=d.startDetails.forall(t=>d.endDetails.forall(e=>t!==e)),(n||m)&&!(n&&m)||c):r?NN(u,t)||(s=e,i=u,t.startDetails.exists(t=>yu(s,i).forall(e=>!t.contains(e.container())))):SN(u,t)||(o=u,(a=t).startDetails.exists(e=>Cu(e,o).forall(t=>a.startSummary.exists(e=>!e.contains(o.container())&&e.contains(t.container())))))},ON=(t,r,n)=>{return o=t.dom,e=t.selection.getRng(),s=I.from(o.getParent(e.startContainer,"details")),e=I.from(o.getParent(e.endContainer,"details")),(s.isSome()||e.isSome()?(a=s.bind(e=>I.from(o.select("summary",e)[0])),I.some({startSummary:a,startDetails:s,endDetails:e})):I.none()).fold(()=>DN(t,r,n),e=>TN(t,e,r,n)||DN(t,r,n));var o,e,a,s},BN=(l,d,c)=>{const m=l.selection,u=m.getNode();var e=m.getRng(),t=L.fromRangeStart(e);return!!ko(u)&&("selection"===c&&xN(e,u)||Dv(d,t,u)?EN(u):l.undoManager.transact(()=>{const e=m.getSel();let{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:o}=null!==e&&void 0!==e?e:{};var a=()=>{H(t)&&H(r)&&H(n)&&H(o)&&null!==e&&void 0!==e&&e.setBaseAndExtent(t,r,n,o)},s=(e,t)=>{K(e.childNodes,e=>{ef(e)&&t.appendChild(e)})},i=l.dom.create("span",{"data-mce-bogus":"1"});s(u,i),u.appendChild(i),a(),"word"!==c&&"line"!==c||null!==e&&void 0!==e&&e.modify("extend",d?"right":"left",c),!m.isCollapsed()&&xN(m.getRng(),i)?EN(u):(l.execCommand(d?"ForwardDelete":"Delete"),t=null===e||void 0===e?void 0:e.anchorNode,r=null===e||void 0===e?void 0:e.anchorOffset,n=null===e||void 0===e?void 0:e.focusNode,o=null===e||void 0===e?void 0:e.focusOffset,s(i,u),a()),l.dom.remove(i)}),!0)},PN=(e,t,r)=>ON(e,t,r)||wN&&BN(e,t,r)?I.some(V):I.none();t=o=>(e,t,r={})=>{var n=e.getBody(),n={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:n,currentTarget:n,eventPhase:Event.AT_TARGET,originalTarget:n,explicitOriginalTarget:n,isTrusted:!1,srcElement:n,cancelable:!1,preventDefault:V,inputType:t},t=ds(new InputEvent(o));return e.dispatch(o,{...t,...n,...r})};const LN=t("input"),MN=t("beforeinput");iN=It(),CC=iN.os;const IN=CC.isMacOS()||CC.isiOS(),FN=iN.browser.isFirefox(),UN=(i,l)=>{let d=!1;i.on("keydown",e=>{if(d=e.keyCode===te.BACKSPACE,!e.isDefaultPrevented()){var t=i;var r=l;var n=e;const a=n.keyCode===te.BACKSPACE?"deleteContentBackward":"deleteContentForward",s=t.selection.isCollapsed();var e=s?"character":"selection",o=e=>s?e?"word":"line":"selection";D_([{keyCode:te.BACKSPACE,action:c(Jk,t)},{keyCode:te.BACKSPACE,action:c(ex,t,!1)},{keyCode:te.DELETE,action:c(ex,t,!0)},{keyCode:te.BACKSPACE,action:c($E,t,!1)},{keyCode:te.DELETE,action:c($E,t,!0)},{keyCode:te.BACKSPACE,action:c(Sk,t,r,!1)},{keyCode:te.DELETE,action:c(Sk,t,r,!0)},{keyCode:te.BACKSPACE,action:c(db,t,!1)},{keyCode:te.DELETE,action:c(db,t,!0)},{keyCode:te.BACKSPACE,action:c(PN,t,!1,e)},{keyCode:te.DELETE,action:c(PN,t,!0,e)},...IN?[{keyCode:te.BACKSPACE,altKey:!0,action:c(PN,t,!1,o(!0))},{keyCode:te.DELETE,altKey:!0,action:c(PN,t,!0,o(!0))},{keyCode:te.BACKSPACE,metaKey:!0,action:c(PN,t,!1,o(!1))}]:[{keyCode:te.BACKSPACE,ctrlKey:!0,action:c(PN,t,!1,o(!0))},{keyCode:te.DELETE,ctrlKey:!0,action:c(PN,t,!0,o(!0))}],{keyCode:te.BACKSPACE,action:c(sx,t,!1)},{keyCode:te.DELETE,action:c(sx,t,!0)},{keyCode:te.BACKSPACE,action:c(Hk,t,!1)},{keyCode:te.DELETE,action:c(Hk,t,!0)},{keyCode:te.BACKSPACE,action:c(ME,t,!1)},{keyCode:te.DELETE,action:c(ME,t,!0)},{keyCode:te.BACKSPACE,action:c(OE,t,!1)},{keyCode:te.DELETE,action:c(OE,t,!0)},{keyCode:te.BACKSPACE,action:c(Fk,t,!1)},{keyCode:te.DELETE,action:c(Fk,t,!0)},{keyCode:te.BACKSPACE,action:c(ax,t,!1)},{keyCode:te.DELETE,action:c(ax,t,!0)}],n).filter(e=>t.selection.isEditable()).each(e=>{n.preventDefault(),MN(t,a).isDefaultPrevented()||(e(),LN(t,a))})}}),i.on("keyup",e=>{var t,r;e.isDefaultPrevented()||(t=i,e=e,r=d,A_([{keyCode:te.BACKSPACE,action:c(JE,t)},{keyCode:te.DELETE,action:c(JE,t)},...IN?[{keyCode:te.BACKSPACE,altKey:!0,action:c(zk,t)},{keyCode:te.DELETE,altKey:!0,action:c(zk,t)},...r?[{keyCode:FN?224:91,action:c(zk,t)}]:[]]:[{keyCode:te.BACKSPACE,ctrlKey:!0,action:c(zk,t)},{keyCode:te.DELETE,ctrlKey:!0,action:c(zk,t)}]],e)),d=!1})},zN=e=>{for(;e;){if(J(e)||P(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},jN=(e,r)=>{var t=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(r){/^(LI|DT|DD)$/.test(r.nodeName)&&(o=zN(r.firstChild))&&/^(UL|OL|DL)$/.test(o.nodeName)&&r.insertBefore(t.doc.createTextNode(Qn),r.firstChild);var o,a=t.createRng();if(r.normalize(),r.hasChildNodes()){var s=new Xn(r,r);let e=r,t;for(;t=s.current();){if(P(t)){a.setStart(t,0),a.setEnd(t,0);break}if(n[t.nodeName.toLowerCase()]){a.setStartBefore(t),a.setEndBefore(t);break}e=t,t=s.next()}t||(a.setStart(e,0),a.setEnd(e,0))}else R(r)?r.nextSibling&&t.isBlock(r.nextSibling)?(a.setStartBefore(r),a.setEndBefore(r)):(a.setStartAfter(r),a.setEndAfter(r)):(a.setStart(r,0),a.setEnd(r,0));e.selection.setRng(a),ep(e,a)}},HN=(e,t)=>{var r=e.getRoot();let n,o=t;for(;o!==r&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){n=o;break}o=o.parentNode}return o!==r?n:r},$N=e=>I.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),VN=e=>{e.innerHTML='<br data-mce-bogus="1">'},qN=(e,r,t)=>{const n=e.dom;I.from(t.style).map(n.parseStyle).each(e=>{e={...hn(Z.fromDom(r)),...e};n.setStyles(r,e)});var e=I.from(t.class).map(e=>e.split(/\s+/)),o=I.from(r.className).map(e=>O(e.split(/\s+/),e=>""!==e));$t(e,o,(t,e)=>{e=O(e,e=>!D(t,e)),e=[...t,...e];n.setAttrib(r,"class",e.join(" "))});const a=["style","class"];e=Ue(t,(e,t)=>!D(a,t));n.setAttribs(r,e)},WN=(e,t)=>{var r;yd(e).toLowerCase()===t.tagName.toLowerCase()&&(r=Cd(e),qN(e,t,r))},KN=(e,t,r,n,o=!0,a,s)=>{var i=e.dom,l=e.schema,d=yd(e),c=r?r.nodeName.toUpperCase():"";let m=t;var u,f=l.getTextInlineElements();let g,p=g=a||"TABLE"===c||"HR"===c?i.create(a||d,s||{}):r.cloneNode(!1);if(o)do{!f[m.nodeName]||ku(m)||Iu(m)||(u=m.cloneNode(!1),i.setAttrib(u,"id",""),g.hasChildNodes()?u.appendChild(g.firstChild):p=u,g.appendChild(u))}while((m=m.parentNode)&&m!==n);else i.setAttrib(g,"style",null),i.setAttrib(g,"class",null);return WN(e,g),VN(p),g},YN=(e,t)=>e.dom.getParent(t,xo),GN=(e,t,r)=>{let n=t;for(;n&&n!==e&&y(n.nextSibling);){var o=n.parentElement;if(!o||!r(o))return xo(o);n=o}return!1},XN=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,ZN=e=>{var t;return(null==(t=e.parentNode)?void 0:t.firstChild)===e},QN=(e,t)=>{e=null==e?void 0:e.parentNode;return H(e)&&e.nodeName===t},JN=e=>H(e)&&/^(OL|UL|LI)$/.test(e.nodeName),eR=e=>H(e)&&/^(LI|DT|DD)$/.test(e.nodeName),tR=e=>JN(e)&&JN(e.parentNode),rR=e=>{var t=e.parentNode;return eR(t)?t:e},nR=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!J(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},oR=e=>he(ze(hn(Z.fromDom(e)),(e,t)=>t+`: ${e};`),(e,t)=>e+t,""),aR=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),sR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,iR=(e,t)=>H(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),lR=(e,t,r)=>P(t)?e?1===r&&t.data.charAt(r-1)===yi?0:r:r===t.data.length-1&&t.data.charAt(r)===yi?t.data.length:r:r;const dR={insert:(r,n)=>{let a,s,t,o,i=!1;const l=r.dom,e=r.schema,d=e.getNonEmptyElements(),c=r.selection.getRng(),m=yd(r),u=Z.fromDom(c.startContainer);var f=zr(u,c.startOffset),g=f.exists(e=>Jt(e)&&!an(e)),g=c.collapsed&&g;const p=(e,t)=>KN(r,a,w,C,kd(r),e,t);var h,v=e=>{var t=lR(e,a,s);if(P(a)&&(e?0<t:t<a.data.length))return!1;if((a.parentNode!==w&&a!==w||!i||e)&&(!e||!J(a)||a!==w.firstChild)){if(sR(a,"TABLE")||sR(a,"HR"))return i&&!e||!i&&e;var r,n=new Xn(a,w);for(P(a)&&(e&&0===t?n.prev():e||t!==a.data.length||n.next());r=n.current();){if(J(r)){if(!r.getAttribute("data-mce-bogus")){var o=r.nodeName.toLowerCase();if(d[o]&&"br"!==o)return!1}}else if(P(r)&&!to(r.data))return!1;e?n.prev():n.next()}}return!0},b=()=>{let e;return e=/^(H[1-6]|PRE|FIGURE)$/.test(t)&&"HGROUP"!==E?p(m):p(),((e,t)=>{e=_d(e);return!oe(t)&&(z(e)?D(B.explode(e),t.nodeName.toLowerCase()):e)})(r,o)&&iR(l,o)&&l.isEmpty(w,void 0,{includeZwsp:!0})?e=l.split(o,w):l.insertAfter(e,w),jN(r,e),e},y=(Tg(l,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),a=c.startContainer,s=c.startOffset,!(!n||!n.shiftKey)),n=!(!n||!n.ctrlKey);J(a)&&a.hasChildNodes()&&!g&&(i=s>a.childNodes.length-1,a=a.childNodes[Math.min(s,a.childNodes.length-1)]||a,s=i&&P(a)?a.data.length:0);const C=HN(l,a);if(!C||((e,t)=>{t=e.dom.getParent(t,"ol,ul,dl");return null!==t&&"false"===e.dom.getContentEditableParent(t)})(r,a))return;y||(a=((r,n,o,a,s)=>{var i=r.dom,l=null!=(l=HN(i,a))?l:i.getRoot(),d=i.getParent(a,i.isBlock);if(!d||!iR(i,d)){if(!(d=d||l).hasChildNodes())return l=i.create(n),WN(r,l),d.appendChild(l),o.setStart(l,0),o.setEnd(l,0),l;let e=a;for(;e&&e.parentNode!==d;)e=e.parentNode;let t;for(;e&&!i.isBlock(e);)e=(t=e).previousSibling;l=null==(l=null===t||void 0===t?void 0:t.parentElement)?void 0:l.nodeName;if(t&&l&&r.schema.isValidChild(l,n.toLowerCase())){var l=t.parentNode,c=i.create(n);for(WN(r,c),l.insertBefore(c,t),e=t;e&&!i.isBlock(e);){var m=e.nextSibling;c.appendChild(e),e=m}o.setStart(a,s),o.setEnd(a,s)}}return a})(r,m,c,a,s));let w=l.getParent(a,l.isBlock)||l.getRoot();o=H(null===w||void 0===w?void 0:w.parentNode)?l.getParent(w.parentNode,l.isBlock):null,t=w?w.nodeName.toUpperCase():"";const E=o?o.nodeName.toUpperCase():"";if("LI"!==E||n||(n=o,w=n,o=n.parentNode,t=E),J(o)&&(h=r,n=w,!y)&&n.nodeName.toLowerCase()===yd(h)&&h.dom.isEmpty(n)&&GN(h.getBody(),n,e=>G(h.schema.getTextBlockElements(),e.nodeName.toLowerCase())))y=r,n=p,k=w,n=n(yd(y)),(x=YN(y,k))&&(y.dom.insertAfter(n,x),jN(y,n),1<(null!=(x=null==(n=null==(x=k.parentElement)?void 0:x.childNodes)?void 0:n.length)?x:0))&&y.dom.remove(k);else if(/^(LI|DT|DD)$/.test(t)&&J(o)&&l.isEmpty(w)){var n=r,x=p,y=o,k=w,_=m,S=n.dom,N=n.selection.getRng(),R=y.parentNode;if(y!==n.getBody()&&R){tR(y)&&(_="LI");var A=eR(k)?oR(k):void 0;let t=eR(k)&&A?x(_,{style:oR(k)}):x(_);nR(y,k,!0)&&nR(y,k,!1)?QN(y,"LI")?(x=rR(y),S.insertAfter(t,x),ZN(y)?S.remove(x):S.remove(y)):S.replace(t,y):(nR(y,k,!0)?QN(y,"LI")?(S.insertAfter(t,rR(y)),t.appendChild(S.doc.createTextNode(" ")),t.appendChild(y)):R.insertBefore(t,y):nR(y,k,!1)?S.insertAfter(t,rR(y)):(y=rR(y),(x=N.cloneRange()).setStartAfter(k),x.setEndAfter(y),R=x.extractContents(),"LI"===_&&XN(R,"LI")?(N=O(T(t.children,Z.fromDom),M(or("br"))),t=R.firstChild,S.insertAfter(R,y),K(N,e=>wn(Z.fromDom(t),e)),A&&t.setAttribute("style",A)):(S.insertAfter(R,y),S.insertAfter(t,y))),S.remove(k)),jN(n,t)}}else if(g||w!==r.getBody()&&iR(l,w)){_=w.parentNode;let t;if(g)t=p(m),f.fold(()=>{En(u,Z.fromDom(t))},e=>{yn(e,Z.fromDom(t))}),r.selection.setCursorLocation(t,0);else if(ki(w))t=Bi(w),l.isEmpty(w)&&VN(w),WN(r,t),jN(r,t);else if(v(!1))t=b();else if(v(!0)&&_){var N=L.fromRangeStart(c),A=Eh(N),R=Z.fromDom(w),y=Ih(R,N,r.schema)?Fh(R,N,r.schema).bind(e=>I.from(e.getNode())):I.none(),S=(t=_.insertBefore(p(),w),sR(w,"HR")||A?t:y.getOr(w));jN(r,S)}else{n=c,(g=n.cloneRange()).setStart(n.startContainer,lR(!0,n.startContainer,n.startOffset)),g.setEnd(n.endContainer,lR(!1,n.endContainer,n.endOffset));var f=g.cloneRange(),v=(f.setEndAfter(w),f.extractContents());y=v,K(Wn(Z.fromDom(y),tr),e=>{e=e.dom;e.nodeValue=wi(e.data)});{n=v;let e=n;for(;P(e)&&(e.data=e.data.replace(/^[\r\n]+/,"")),e=e.firstChild;);}t=v.firstChild,l.insertAfter(v,w),((r,n,o)=>{var a,s=[];if(o){let e=o;for(;e=e.firstChild;){if(r.isBlock(e))return;J(e)&&!n[e.nodeName.toLowerCase()]&&s.push(e)}let t=s.length;for(;t--;)(!(e=s[t]).hasChildNodes()||e.firstChild===e.lastChild&&""===(null==(a=e.firstChild)?void 0:a.nodeValue)||aR(r,e))&&r.remove(e)}})(l,d,t),g=l,(f=w).normalize(),(!(y=f.lastChild)||J(y)&&/^(left|right)$/gi.test(g.getStyle(y,"float",!0)))&&g.add(f,"br"),l.isEmpty(w)&&VN(w),t.normalize(),l.isEmpty(t)?(l.remove(t),b()):(WN(r,t),jN(r,t))}l.setAttrib(t,"id",""),r.dispatch("NewBlock",{newBlock:t})}},fakeEventName:"insertParagraph"},cR=(e,t,r)=>{for(var n,o=new Xn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||P(n)&&0<n.length)return!0;return!1},mR=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),ep(e,n)},uR=(e,t)=>{var r=Z.fromTag("br");yn(Z.fromDom(t),r),e.undoManager.add()},fR=(e,t)=>{((e,t)=>{if(gR(L.after(t)))return true;else return yu(e,L.after(t)).map(e=>{return R(e.getNode())}).getOr(false)})(e.getBody(),t)||Cn(Z.fromDom(t),Z.fromTag("br"));var r=Z.fromTag("br");Cn(Z.fromDom(t),r),mR(e,r.dom,!1),e.undoManager.add()},gR=e=>R(e.getNode()),pR=e=>e&&"A"===e.nodeName&&"href"in e,hR=e=>e.fold(u,pR,pR,u),vR=(e,t)=>{t.fold(V,E(uR,e),E(fR,e),V)};const bR={insert:(a,s)=>{l=a,i=E(bv,l),d=L.fromRangeStart(l.selection.getRng());var i=Nx(i,l.getBody(),d).filter(hR);if(i.isSome())i.each(E(vR,a));else{var l=a;var d=s;i=l.selection,a=l.dom;const c=i.getRng();let e,t=!1,r=(Tg(a,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),c.startOffset),n=c.startContainer,o=(J(n)&&n.hasChildNodes()&&(i=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=i&&P(n)?n.data.length:0),a.getParent(n,a.isBlock));i=o&&o.parentNode?a.getParent(o.parentNode,a.isBlock):null,s=i?i.nodeName.toUpperCase():"",d=!(!d||!d.ctrlKey);"LI"!==s||d||(o=i),P(n)&&r>=n.data.length&&(cR(l.schema,n,o||a.getRoot())||(e=a.create("br"),c.insertNode(e),c.setStartAfter(e),c.setEndAfter(e),t=!0)),e=a.create("br"),_l(a,c,e),mR(l,e,t),l.undoManager.add()}},fakeEventName:"insertLineBreak"},yR=(e,t)=>$N(e).filter(e=>0<t.length&&_r(Z.fromDom(e),t)).isSome(),CR=Gl([{br:[]},{block:[]},{none:[]}]),wR=(e,t)=>{return e=e,yR(e,xd(e))},ER=r=>(e,t)=>{return e=e,$N(e).filter(e=>ui(Z.fromDom(e))).isSome()===r},xR=(r,n)=>(e,t)=>{return e=e,$N(e).fold(q(""),e=>e.nodeName.toUpperCase())===r.toUpperCase()===n},kR=e=>{e=HN(e.dom,e.selection.getStart());return oe(e)},_R=e=>xR("pre",e),SR=r=>(e,t)=>bd(e)===r,NR=(e,t)=>{return e=e,yR(e,Ed(e))},RR=(e,t)=>t,AR=e=>{var t=yd(e),r=HN(e.dom,e.selection.getStart());return H(r)&&e.schema.isValidChild(r.nodeName,t)},DR=e=>{var e=e.selection.getRng(),t=Z.fromDom(e.startContainer),t=zr(t,e.startOffset).map(e=>Jt(e)&&!an(e));return e.collapsed&&t.getOr(!0)},TR=(e,t)=>(r,n)=>{return he(e,(e,t)=>e&&t(r,n),!0)?I.some(t):I.none()},OR=(e,t)=>vx([TR([wR],CR.none()),TR([_R(!0),kR],CR.none()),TR([xR("summary",!0)],CR.br()),TR([_R(!0),SR(!1),RR],CR.br()),TR([_R(!0),SR(!1)],CR.block()),TR([_R(!0),SR(!0),RR],CR.block()),TR([_R(!0),SR(!0)],CR.br()),TR([ER(!0),RR],CR.br()),TR([ER(!0)],CR.block()),TR([NR],CR.br()),TR([RR],CR.br()),TR([AR],CR.block()),TR([DR],CR.block())],[e,!(!t||!t.shiftKey)]).getOr(CR.none()),BR=(e,t,r)=>{if((t.selection.isCollapsed()||t.execCommand("delete"),H(r))&&MN(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,r),H(r)&&LN(t,e.fakeEventName)},PR=(e,t)=>{var r=()=>BR(bR,e,t),n=()=>BR(dR,e,t),o=OR(e,t);switch(wd(e)){case"linebreak":o.fold(r,r,V);break;case"block":o.fold(n,n,V);break;case"invert":o.fold(n,r,V);break;default:o.fold(r,n,V)}};vC=It();const LR=vC.os.isiOS()&&vC.browser.isSafari(),MR=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact(()=>{PR(e,t)}))},IR=o=>{let a=I.none();o.on("keydown",e=>{var t,r,n;e.keyCode===te.ENTER&&(LR&&!!(t=o.selection.getRng()).collapsed&&(n=t.startContainer,!!P(n))&&(r=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,n=n.data.charAt(t.startOffset-1),r.test(n))?(t=o,a=I.some(t.selection.getBookmark()),t.undoManager.add()):MR(o,e))}),o.on("keyup",r=>{r.keyCode===te.ENTER&&a.each(()=>{return e=r,(t=o).undoManager.undo(),a.fold(V,e=>t.selection.moveToBookmark(e)),MR(t,e),void(a=I.none());var t,e})})},FR=(o,a)=>{o.on("keydown",e=>{var t,r,n;e.isDefaultPrevented()||(t=o,r=a,n=e,e=U.os.isMacOS()||U.os.isiOS(),A_([{keyCode:te.END,action:c(b_,t,!0)},{keyCode:te.HOME,action:c(b_,t,!1)},...e?[]:[{keyCode:te.HOME,action:c(y_,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:te.END,action:c(y_,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:te.END,action:c(B_,t,!0)},{keyCode:te.HOME,action:c(B_,t,!1)},{keyCode:te.END,action:c(Ek,t,!0,r)},{keyCode:te.HOME,action:c(Ek,t,!1,r)}],n).each(e=>{n.preventDefault()}))})},UR=r=>{r.on("input",e=>{var t;e.isComposing||(t=r,e=Z.fromDom(t.getBody()),t.selection.isCollapsed()&&rv(e,L.fromRangeStart(t.selection.getRng()),t.schema).each(e=>{t.selection.setRng(e.toRange())}))})},zR=It(),jR=e=>e.stopImmediatePropagation(),HR=e=>e.keyCode===te.PAGE_UP||e.keyCode===te.PAGE_DOWN,$R=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",jR,!0):!r&&e.get()&&t.off("NodeChange",jR),e.set(r)},VR=(o,a)=>{if(!zR.os.isMacOS()){const s=Bo(!1);o.on("keydown",e=>{HR(e)&&$R(s,o,!0)}),o.on("keyup",e=>{var t,r,n;e.isDefaultPrevented()||(t=o,r=a,n=e,A_([{keyCode:te.PAGE_UP,action:c(Ek,t,!1,r)},{keyCode:te.PAGE_DOWN,action:c(Ek,t,!0,r)}],n)),HR(e)&&s.get()&&($R(s,o,!1),o.nodeChanged())})}};yC=(r,n)=>{var e=n.container(),t=n.offset();return P(e)?(e.insertData(t,r),I.some(L(e,t+r.length))):Ym(n).map(e=>{var t=Z.fromText(r);return(n.isAtEnd()?Cn:yn)(e,t),L(t.dom,r.length)})};const qR=E(yC,Qn),WR=E(yC," "),KR=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},YR=o=>{const a=L.fromRangeStart(o.selection.getRng()),s=Z.fromDom(o.getBody());var e,t,r;return o.selection.isCollapsed()?(e=E(bv,o),t=L.fromRangeStart(o.selection.getRng()),Nx(e,o.getBody(),t).bind((r=s,e=>e.fold(e=>Cu(r.dom,L.before(e)),e=>wu(e),e=>Eu(e),e=>yu(r.dom,L.after(e))))).map(e=>()=>{return t=s,r=a,n=o.schema,(e=>(Kh(t,e,n)?qR:WR)(r))(e).each(KR(o));var t,r,n})):I.none()},GR=n=>{var e,t;return Vt(U.browser.isFirefox()&&n.selection.isEditable()&&(e=n.dom,t=n.selection.getRng().startContainer,e.isEditable(e.getParent(t,"summary"))),()=>{var e,t=Z.fromDom(n.getBody()),r=(n.selection.isCollapsed()||n.getDoc().execCommand("Delete"),L.fromRangeStart(n.selection.getRng()));t=t,r=r,e=n.schema,(Kh(t,r,e)?qR:WR)(r).each(KR(n))})},XR=n=>{n.on("keydown",e=>{var t,r;e.isDefaultPrevented()||(t=n,r=e,D_([{keyCode:te.SPACEBAR,action:c(YR,t)},{keyCode:te.SPACEBAR,action:c(GR,t)}],r).each(e=>{r.preventDefault(),MN(t,"insertText",{data:" "}).isDefaultPrevented()||(e(),LN(t,"insertText",{data:" "}))}))})},ZR=(e,t)=>{A_([...(e=e,Qc(e)?[{keyCode:te.TAB,action:c(cS,e,!0)},{keyCode:te.TAB,shiftKey:!0,action:c(cS,e,!1)}]:[])],t).each(e=>{t.preventDefault()})},QR=e=>{var t,r,n,o;return e.addShortcut("Meta+P","","mcePrint"),CN(e),L1(e)?Bo(null):(t=yk(e),(o=e).on("beforeinput",e=>{o.selection.isEditable()&&!W(e.getTargetRanges(),e=>!Op(o.dom,e))||e.preventDefault()}),(n=e).on("keyup compositionstart",E(m_,n)),mS(e,t),UN(e,t),IR(e),XR(e),UR(e),(r=e).on("keydown",e=>{e.isDefaultPrevented()||ZR(r,e)}),FR(e,t),VR(e,t),t)};class JR{constructor(r){this.lastPath=[],this.editor=r;let n;const t=this;"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",e=>{var t=r.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Sg(t,n)||r.dispatch("SelectionChange"),n=t}),r.on("contextmenu",()=>{up(r),r.dispatch("SelectionChange")}),r.on("SelectionChange",()=>{var e=r.selection.getStart(!0);e&&Zu(r)&&!t.isSameElementPath(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",e=>{!e.isDefaultPrevented()&&Zu(r)&&("IMG"===r.selection.getNode().nodeName?pp.setEditorTimeout(r,()=>{r.nodeChanged()}):r.nodeChanged())})}nodeChanged(e={}){var t=this.editor.selection;let r;if(this.editor.initialized&&t&&!fc(this.editor)&&!this.editor.mode.isReadOnly()){const n=this.editor.getBody(),o=((r=t.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),[]);this.editor.dom.getParent(r,e=>e===n||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:o})}}isSameElementPath(e){let t;var r=this.editor,n=xe(r.dom.getParents(e,le,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}const eA=Qs("image"),tA=Qs("event"),rA=t=>e=>{e[tA]=t},nA=rA(0),oA=rA(2),aA=rA(1);var sA;sA=0;const iA=e=>{return I.from(e[tA]).exists(e=>e===sA)},lA=Qs("mode"),dA=t=>e=>{e[lA]=t},cA=(e,t)=>dA(t)(e),mA=dA(0),uA=dA(2),fA=dA(1);r=t=>e=>{return I.from(e[lA]).exists(e=>e===t)};const gA=r(0),pA=r(1),hA=["none","copy","link","move"],vA=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],bA=()=>{const a=new window.DataTransfer;let t="move",r="all";const s={get dropEffect(){return t},set dropEffect(e){D(hA,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){iA(s)&&D(vA,e)&&(r=e)},get items(){return r=s,{...n=a.items,get length(){return n.length},add:(e,t)=>{if(gA(r)){if(!z(e))return n.add(e);if(!C(t))return n.add(e,t)}return null},remove:e=>{gA(r)&&n.remove(e)},clear:()=>{gA(r)&&n.clear()}};var r,n},get files(){return pA(s)?Object.freeze({length:0,item:e=>null}):a.files},get types(){return a.types},setDragImage:(e,t,r)=>{var n,o;gA(s)&&(n=s,o={image:e,x:t,y:r},n[eA]=o,a.setDragImage(e,t,r))},getData:e=>pA(s)?"":a.getData(e),setData:(e,t)=>{gA(s)&&a.setData(e,t)},clearData:e=>{gA(s)&&a.clearData(e)}};return mA(s),s},yA=t=>{const r=bA();n=t;var e,n=I.from(n[lA]);return uA(t),nA(r),r.dropEffect=t.dropEffect,r.effectAllowed=t.effectAllowed,e=t,I.from(e[eA]).each(e=>r.setDragImage(e.image,e.x,e.y)),K(t.types,e=>{"Files"!==e&&r.setData(e,t.getData(e))}),K(t.files,e=>r.items.add(e)),e=t,I.from(e[tA]).each(e=>{var t;t=r,e=e,rA(e)(t)}),n.each(e=>{cA(t,e),cA(r,e)}),r},CA=(e,t)=>e.setData("text/html",t);dN="x-tinymce/html";const wA=q(dN),EA="\x3c!-- "+dN+" --\x3e",xA=e=>-1!==e.indexOf(EA),kA=(e,t,r)=>{e=e.split(/\n\n/);const n=((e,t)=>{let r="<"+e;e=ze(t,(e,t)=>t+'="'+Sa.encodeAllRaw(e)+'"');return e.length&&(r+=" "+e.join(" ")),r+">"})(t,r),o="</"+t+">";r=T(e,e=>e.split(/\n/).join("<br />"));return 1===r.length?r[0]:T(r,e=>n+e+o).join("")},_A="%MCEPASTEBIN%",SA=e=>e.dom.get("mcepastebin"),NA=e=>H(e)&&"mcepastebin"===e.id,RA=e=>e===_A,AA=i=>{const a=Bo(null);return{create:()=>{var e=i,t=a,{dom:r,selection:n}=e,o=e.getBody(),t=(t.set(n.getRng()),r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},_A));U.browser.isFirefox()&&r.setStyle(t,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(t,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),t.focus(),n.select(t,!0)},remove:()=>{var e=i,t=a,r=e.dom;if(SA(e)){for(var n,o=t.get();n=SA(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)},getEl:()=>SA(i),getHtml:()=>{{var e=i;const n=e.dom,o=(e,t)=>{e.appendChild(t),n.remove(t,!0)},[a,...s]=O(e.getBody().childNodes,NA);K(s,e=>{o(a,e)});var t=n.select("div[id=mcepastebin]",a);for(let e=t.length-1;0<=e;e--){var r=n.create("div");a.insertBefore(r,t[e]),o(r,t[e])}return a?a.innerHTML:""}},getLastRng:a.get}},DA=(t,e)=>(B.each(e,e=>{t=v(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])}),t),TA=e=>{return e=DA(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?Qn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i])};var OA;const BA=(e,t)=>({content:e,cancelled:t}),PA=(e,t,r)=>{var n,o,t=e.dispatch("PastePreProcess",{content:t,internal:r}),a=(n=e,a=t.content,(o=WC({sanitize:Gc(n),sandbox_iframes:tm(n),sandbox_iframes_exclusions:rm(n),convert_unsafe_embeds:nm(n)},n.schema)).addNodeFilter("meta",e=>{B.each(e,e=>{e.remove()})}),o=o.parse(a,{forced_root_block:!1,isRootContent:!0}),sh({validate:!0},n.schema).serialize(o));return e.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()?(n=a,o=r,n=(r=e).dom.create("div",{style:"display:none"},n),r=r.dispatch("PastePostProcess",{node:n,internal:o}),BA(r.node.innerHTML,r.isDefaultPrevented())):BA(a,t.isDefaultPrevented())},LA=(e,t)=>(e.insertContent(t,{merge:Ic(e),paste:!0}),!0),MA=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),IA=(e,t,r)=>{return!(e.selection.isCollapsed()||!MA(t)||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.execCommand("mceInsertLink",!1,o)}),0));var n,o,a},FA=(e,t,r)=>{return s=e,i=t,!(!MA(i)||!W(Zc(s),e=>dt(i.toLowerCase(),"."+e.toLowerCase()))||(o=t,a=r,(n=e).undoManager.extra(()=>{a(n,o)},()=>{n.insertContent('<img src="'+o+'">')}),0));var n,o,a,s,i},UA=(e,t,r)=>{var n,o;r||!Fc(e)?LA(e,t):(n=e,o=t,B.each([IA,FA,LA],e=>!e(n,o,LA)))},zA=(e=>{let t=0;return()=>e+t++})("mceclip"),jA=(e,t,r,n,o)=>{a=e,t=t,r=r;var a=PA(a,t,r);if(!a.cancelled){const t=a.content;r=()=>UA(e,t,n);o?MN(e,"insertFromPaste",{dataTransfer:(a=t,o=bA(),CA(o,a),uA(o),o)}).isDefaultPrevented()||(r(),LN(e,"insertFromPaste")):r()}},HA=(e,t,r,n)=>{r=r||xA(t);jA(e,t.replace(EA,""),r,!1,n)},$A=(e,t,r)=>{t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=no(t,zc(e)),t=kA(t,yd(e),Cd(e));jA(e,t,!1,!0,r)},VA=t=>{var r={};if(t&&t.types)for(let e=0;e<t.types.length;e++){var n=t.types[e];try{r[n]=t.getData(n)}catch(e){r[n]=""}}return r},qA=(e,t)=>t in e&&0<e[t].length,WA=e=>qA(e,"text/html")||qA(e,"text/plain"),KA=(e,t,r,n)=>{var o=zA(),a=Nd(e)&&H(r.name),e=a?((e,t)=>{t=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return H(t)?e.dom.encode(t[1]):void 0})(e,r.name):o,a=a?r.name:void 0,o=t.create(o,r,n,e,a);return t.add(o),o},YA=e=>{const t=Zc(e);return r=>lt(r.type,"image/")&&W(t,e=>{return e=(e=e).toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(B.hasOwn(t,e)?"image/"+t[e]:"image/"+e)===r.type;var t})},GA=(t,e,r)=>{var n,o="paste"===e.type?e.clipboardData:e.dataTransfer;if(Tc(t)&&o){n=t,a=(o=o).items?we(De(o.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],o=o.files?De(o.files):[];var a=O(0<a.length?a:o,YA(n));if(0<a.length)return e.preventDefault(),o=a,Promise.all(T(o,t=>ky(t).then(e=>({file:t,uri:e})))).then(e=>{r&&t.selection.setRng(r),K(e,e=>{var o,a;o=t,a=e,wy(a.uri).each(({data:e,type:t,base64Encoded:r})=>{var r=r?e:btoa(e),e=a.file,n=o.editorUpload.blobCache,t=n.getByData(r,t),t=null!=t?t:KA(o,n,e,r);HA(o,`<img src="${t.blobUri()}">`,!1,!0)})})}),!0}return!1},XA=(e,t,r,n,o)=>{let a=TA(r);var r=qA(t,wA())||xA(r),s=!r&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),i=MA(a);((n=RA(a)||!a.length||s&&!i?!0:n)||i)&&(a=qA(t,"text/plain")&&s?t["text/plain"]:(e=>{const n=Ya();var t=WC({},n);let o="";const a=n.getVoidElements(),s=B.makeMap("script noscript style textarea video audio iframe object"," "),i=n.getBlockElements(),l=t=>{var e=t.name,r=t;if("br"===e)o+="\n";else if("wbr"!==e)if(a[e]&&(o+=" "),s[e])o+=" ";else{if(3===t.type&&(o+=t.value),!(t.name in n.getVoidElements())){let e=t.firstChild;if(e)for(;l(e),e=e.next;);}i[e]&&r.next&&(o+="\n","p"===e)&&(o+="\n")}};return e=DA(e,[/<!\[[^\]]+\]>/g]),l(t.parse(e)),o})(a)),RA(a)||(n?$A(e,a,o):HA(e,a,r,o))},ZA=(o,a,s)=>{let i;o.on("keydown",e=>{var t;t=e,(te.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!e.isDefaultPrevented()&&(i=e.shiftKey&&86===e.keyCode)}),o.on("paste",e=>{if(!e.isDefaultPrevented()&&(t=e,!U.os.isAndroid()||0!==(null==(t=null==(t=t.clipboardData)?void 0:t.items)?void 0:t.length))){var t;const r="text"===s.get()||i,n=(i=!1,VA(e.clipboardData));!WA(n)&&GA(o,e,a.getLastRng()||o.selection.getRng())||(qA(n,"text/html")?(e.preventDefault(),XA(o,n,n["text/html"],r,!0)):qA(n,"text/plain")&&qA(n,"text/uri-list")?(e.preventDefault(),XA(o,n,n["text/plain"],r,!0)):(a.create(),pp.setEditorTimeout(o,()=>{var e=a.getHtml();a.remove(),XA(o,n,e,r,!1)},0)))}})},QA=s=>{s.parser.addNodeFilter("img",(e,t,r)=>{if(!Tc(s)&&!0===(null==(r=(r=r).data)?void 0:r.paste))for(const a of e){var n=a.attr("src");z(n)&&!a.attr("data-mce-object")&&n!==U.transparentSrc&&(o=n,lt(o,"webkit-fake-url")||!jc(s)&&(o=n,lt(o,"data:")))&&a.remove()}var o})},JA=(r,n)=>{r.addCommand("mceTogglePlainTextPaste",()=>{var e,t;e=r,"text"===(t=n).get()?(t.set("html"),ng(e,!1)):(t.set("text"),ng(e,!0)),e.focus()}),r.addCommand("mceInsertClipboardContent",(e,t)=>{t.html&&HA(r,t.html,t.internal,!1),t.text&&$A(r,t.text,!1)})},eD=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(wA(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},tD=i=>(e,t)=>{const{dom:r,selection:n}=i,o=r.create("div",{contenteditable:"false","data-mce-bogus":"all"});e=r.create("div",{contenteditable:"true"},e);r.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(e),r.add(i.getBody(),o);const a=n.getRng();e.focus();var s=r.createRng();s.selectNodeContents(e),n.setRng(s),pp.setEditorTimeout(i,()=>{n.setRng(a),r.remove(o),t()},0)},rD=e=>{return{html:(t=e.selection.getContent({contextual:!0}),EA+t),text:e.selection.getContent({format:"text"})};var t},nD=e=>{return!e.selection.isCollapsed()||!!(e=e).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},oD=e=>{var t,r;e.on("cut",(t=e,e=>{!e.isDefaultPrevented()&&nD(t)&&t.selection.isEditable()&&eD(e,rD(t),tD(t),()=>{if(U.browser.isChromium()||U.browser.isFirefox()){const e=t.selection.getRng();pp.setEditorTimeout(t,()=>{t.selection.setRng(e),t.execCommand("Delete")},0)}else t.execCommand("Delete")})})),e.on("copy",(r=e,e=>{!e.isDefaultPrevented()&&nD(r)&&eD(e,rD(r),tD(r),V)}))},aD=(e,t)=>{var r;return Pg.getCaretRangeFromPoint(null!=(r=t.clientX)?r:0,null!=(r=t.clientY)?r:0,e.getDoc())},sD=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},iD=r=>{r.on("input",e=>{"deleteByDrag"===e.inputType&&(e=O(r.dom.select("details"),e=>y(e.querySelector("summary"))),K(e,e=>{R(e.firstChild)&&e.firstChild.remove();var t=r.dom.create("summary");t.appendChild(vi().dom),e.prepend(t)}))})},lD=(f,g)=>{Dc(f)&&f.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),Tc(f)||f.on("drop",e=>{var t=e.dataTransfer;t&&(t=t,W(t.files,e=>/^image\//.test(e.type)))&&e.preventDefault()}),f.on("drop",e=>{if(!e.isDefaultPrevented()){const s=aD(f,e);if(!oe(s)){const i=VA(e.dataTransfer),l=qA(i,wA());if(WA(i)&&!(e=>{e=e["text/plain"];return!!e&&0===e.indexOf("file://")})(i)||!GA(f,e,s)){const d=i[wA()],c=d||i["text/html"]||i["text/plain"],m=(t=f.dom,r=f.schema,n=s.startContainer,o=i,a=t.getParent(n,e=>Jo(r,e)),!y(t.getParent(n,"summary"))||!(!a||!G(o,"text/html")||(t=(new DOMParser).parseFromString(o["text/html"],"text/html").body,y(t.querySelector(a.nodeName.toLowerCase())))));var t,r,n,o,a;const u=g.get();u&&!m||c&&(e.preventDefault(),pp.setEditorTimeout(f,()=>{f.undoManager.transact(()=>{(d||u&&m)&&f.execCommand("Delete"),sD(f,s);var e=TA(c);i["text/html"]?HA(f,e,l,!0):$A(f,e,!0)})}))}}}}),f.on("dragstart",e=>{g.set(!0)}),f.on("dragover dragend",e=>{Tc(f)&&!g.get()&&(e.preventDefault(),sD(f,aD(f,e))),"dragend"===e.type&&g.set(!1)}),iD(f)},dD=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,cD=e=>B.trim(e).replace(dD,os).toLowerCase(),mD=(e,t,r)=>{var n=Lc(e);if(!r&&"all"!==n&&Mc(e)){const i=n?n.split(/[, ]/):[];if(i&&"none"!==n){const l=e.dom,d=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,r,n)=>{var o=l.parseStyle(l.decode(r)),a={};for(let r=0;r<i.length;r++){var s=o[i[r]];let e=s,t=l.getStyle(d,i[r],!0);/color/.test(i[r])&&(e=cD(e),t=cD(t)),t!==e&&(a[i[r]]=s)}r=l.serializeStyle(a,"span");return r?t+' style="'+r+'"'+n:t+n})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)}return t},uD=n=>{const o=Bo(!1),a=Bo(Uc(n)?"text":"html"),s=AA(n);var t,r,i,e,l;e=n,(U.browser.isChromium()||U.browser.isSafari())&&(t=e,r=mD,t.on("PastePreProcess",e=>{e.content=r(t,e.content,e.internal)})),JA(n,a),i=n,e=t=>e=>{t(i,e)},l=Oc(i),$(l)&&i.on("PastePreProcess",e(l)),l=Bc(i),$(l)&&i.on("PastePostProcess",e(l)),n.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===a.get()),n.on("PreInit",()=>{var e,t,r;oD(n),lD(n,o),e=n,t=s,r=a,ZA(e,t,r),QA(e)})},fD=e=>{var t,r;(t=e).on("click",e=>{t.dom.getParent(e.target,"details")&&e.preventDefault()}),(r=e).parser.addNodeFilter("details",e=>{const t=Jc(r);K(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})}),r.serializer.addNodeFilter("details",e=>{const t=em(r);K(e,e=>{"expanded"===t?e.attr("open","open"):"collapsed"===t&&e.attr("open",null)})})},gD=R,pD=P,hD=e=>b(e.dom),vD=t=>e=>k(Z.fromDom(t),e),bD=(e,t,r)=>Qr(Z.fromDom(e),e=>{return t=e,bo(t.dom)||r.isBlock(X(e));var t},vD(t)).getOr(Z.fromDom(t)).dom,yD=(e,t)=>Qr(Z.fromDom(e),hD,vD(t)),CD=(t,e,r)=>{var e=new Xn(t,e),n=(r?e.next:e.prev).bind(e);let o=t;for(let e=r?t:n();e&&!gD(e);e=n())rl(e)&&(o=e);return o},wD=e=>{var t=((e,t,r)=>{e=L.fromRangeStart(e).getNode(),t=bD(e,t,r);const n=CD(e,t,!1),o=CD(e,t,!0),a=document.createRange();return yD(n,t).fold(()=>{pD(n)?a.setStart(n,0):a.setStartBefore(n)},e=>a.setStartBefore(e.dom)),yD(o,t).fold(()=>{pD(o)?a.setEnd(o,o.data.length):a.setEndAfter(o)},e=>a.setEndAfter(e.dom)),a})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Db(t))},ED=((hN=OA=OA||{}).Before="before",hN.After="after",(e,t)=>{n=e,r=t;var r,n=Math.max(0,Math.min(n.bottom,r.bottom)-Math.max(n.top,r.top))/Math.min(e.height,t.height);return r=t,(t=e).top<r.bottom&&t.bottom>r.top&&.5<n}),xD=(n,r)=>{var e=O(n,e=>{return(t=r)>=(e=e).top&&t<=e.bottom;var t});return e=e,he(e,(e,o)=>e.fold(()=>I.some(o),e=>{var t=Math.min(o.left,e.left),r=Math.min(o.top,e.top),n=Math.max(o.right,e.right),e=Math.max(o.bottom,e.bottom);return I.some({top:r,right:n,bottom:e,left:t,width:n-t,height:e-r})}),I.none()).fold(()=>[[],n],t=>{var{pass:e,fail:r}=ge(n,e=>ED(e,t));return[e,r]})},kD=(e,t)=>{return{node:e.node,position:Math.abs(e.left-t)<Math.abs(e.right-t)?OA.Before:OA.After}},_D=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),SD=(e,s,i,l)=>{const d=e=>rl(e.node)?I.some(e):J(e.node)?SD(De(e.node.childNodes),s,i,!1):I.none(),t=(e,o)=>{const a=Se(e,(e,t)=>o(e,s,i)-o(t,s,i));return Te(a,d).map(e=>{return l&&!P(e.node)&&1<a.length?(t=e,r=a[1],n=o,d(r).filter(e=>{return Math.abs(n(t,s,i)-n(e,s,i))<2&&P(e.node)}).getOr(e)):e;var t,r,n})};var[e,r]=xD(tk(e),i);const{pass:n,fail:o}=ge(r,e=>e.top<i);return t(e,_D).orThunk(()=>t(o,$i)).orThunk(()=>t(n,$i))},ND=(e,t,r)=>{const n=Z.fromDom(e);e=Dr(n),e=Z.fromPoint(e,t,r).filter(e=>Rr(n,e)).getOr(n);{var o=n,a=t,s=r;const i=(t,e)=>{const r=O(t.dom.childNodes,M(e=>J(e)&&e.classList.contains("mce-drag-container")));return e.fold(()=>SD(r,a,s,!0),t=>{var e=O(r,e=>e!==t.dom);return SD(e,a,s,!0)}).orThunk(()=>{return(k(t,o)?I.none():Br(t)).bind(e=>i(e,I.some(t)))})};return i(e,I.none())}},RD=(e,t,r)=>ND(e,t,r).filter(e=>xm(e.node)).map(e=>kD(e,t)),AD=e=>{var t,r=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:r.top+(null!=(t=null==e?void 0:e.scrollY)?t:0)-n.clientTop,left:r.left+(null!=(t=null==e?void 0:e.scrollX)?t:0)-n.clientLeft}},DD=(e,t)=>{return i=(i=e).inline?AD(i.getBody()):{left:0,top:0},s=(a=e).getBody(),a=a.inline?{left:s.scrollLeft,top:s.scrollTop}:{left:0,top:0},s=e,{pageX:(s=(e=t).target.ownerDocument!==s.getDoc()?(t=AD(s.getContentAreaContainer()),r=(s=s).getBody(),n=s.getDoc().documentElement,o={left:r.scrollLeft,top:r.scrollTop},r={left:r.scrollLeft||n.scrollLeft,top:r.scrollTop||n.scrollTop},n=s.inline?o:r,{left:e.pageX-t.left+n.left,top:e.pageY-t.top+n.top}):{left:e.pageX,top:e.pageY}).left-i.left+a.left,pageY:s.top-i.top+a.top};var r,n,o,a,s,i},TD=e=>({target:e,srcElement:e}),OD=(e,t,r,n)=>{var o,a,s,i,r=((e,t)=>{e=yA(e);return("dragstart"===t?(nA(e),mA):"drop"===t?(oA(e),uA):(aA(e),fA))(e),e})(r,e);return C(n)?(o=e,a=t,s=r,i=ae("Function not supported on simulated event."),{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:o,composedPath:i,initEvent:i,preventDefault:V,stopImmediatePropagation:V,stopPropagation:V,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:s,...TD(a)}):(o=e,i=t,s=r,{...n,dataTransfer:s,type:o,...TD(i)})};var BD;const PD=b,LD=(BD=[PD,bo],t=>{for(let e=0;e<BD.length;e++)if(BD[e](t))return!0;return!1});vN=(r,n)=>t=>()=>{var e="left"===r?t.scrollX:t.scrollY;t.scroll({[r]:e+n,behavior:"smooth"})};const MD=vN("left",-32),ID=vN("left",32),FD=vN("top",-32),UD=vN("top",32),zD=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},jD=(a,s)=>e=>{var t,r,n,o;0===e.button&&(t=be(s.dom.getParents(e.target),LD).getOr(null),H(t))&&(r=s.dom,n=s.getBody(),o=t,PD(o))&&o!==n&&r.isEditable(o.parentElement)&&(n=s.dom.getPos(t),r=s.getBody(),o=s.getDoc().documentElement,a.set({element:t,dataTransfer:bA(),dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(s.inline?r.scrollWidth:o.offsetWidth)-2,maxY:(s.inline?r.scrollHeight:o.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:(r=s,e=(o=t).offsetWidth,n=t.offsetHeight,r=r.dom,o=o.cloneNode(!0),r.setStyles(o,{width:e,height:n}),r.setAttrib(o,"data-mce-selected",null),t=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),r.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:e,height:n}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),t.appendChild(o),t),intervalId:(t=>{const r=Bo(I.none()),n=()=>r.get().each(e=>clearInterval(e));return{clear:()=>{n(),r.set(I.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:e=>{n(),r.set(I.some(setInterval(e,t)))}}})(100)}))},HD=(e,t,r,n,o)=>{"dragstart"===t&&CA(n,e.dom.getOuterHTML(r));r=OD(t,r,n,o);return e.dispatch(t,r)},$D=(e,C)=>{const t=Ps((e,t)=>{return n=e,o=t,(r=C)._selectionOverrides.hideFakeCaret(),void RD(r.getBody(),n,o).fold(()=>r.selection.placeCaretAt(n,o),e=>{e=r._selectionOverrides.showCaret(1,e.node,e.position===OA.Before,!1);e?r.selection.setRng(e):r.selection.placeCaretAt(n,o)});var r,n,o},0),w=(C.on("remove",t.cancel),e);return y=>e.on(r=>{var n=Math.max(Math.abs(y.screenX-r.screenX),Math.abs(y.screenY-r.screenY));if(!r.dragging&&10<n){n=HD(C,"dragstart",r.element,r.dataTransfer,y);if(H(n.dataTransfer)&&(r.dataTransfer=n.dataTransfer),n.isDefaultPrevented())return;r.dragging=!0,C.focus()}if(r.dragging){var n=y.currentTarget===C.getDoc().documentElement,o=(o=r,{pageX:(s=DD(C,y)).pageX-o.relX,pageY:s.pageY+5});s=r.ghost,a=C.getBody(),s.parentNode!==a&&a.appendChild(s);{var a=r.ghost;var s=o;o=r.width;var i=r.height;var l=r.maxX;r=r.maxY;var d=y.clientY;var c=y.clientX;var m=C.getContentAreaContainer();var u=C.getWin();var f=w;var g=n;let e=0,t=0;a.style.left=s.pageX+"px",a.style.top=s.pageY+"px",s.pageX+o>l&&(e=s.pageX+o-l),s.pageY+i>r&&(t=s.pageY+i-r),a.style.width=o-e+"px",a.style.height=i-t+"px";const p=m.clientHeight,h=m.clientWidth,v=d+m.getBoundingClientRect().top,b=c+m.getBoundingClientRect().left;f.on(e=>{e.intervalId.clear(),e.dragging&&g&&(d+8>=p?e.intervalId.set(UD(u)):d-8<=0?e.intervalId.set(FD(u)):c+8>=h?e.intervalId.set(ID(u)):c-8<=0?e.intervalId.set(MD(u)):v+16>=window.innerHeight?e.intervalId.set(UD(window)):v-16<=0?e.intervalId.set(FD(window)):b+16>=window.innerWidth?e.intervalId.set(ID(window)):b-16<=0&&e.intervalId.set(MD(window)))})}t.throttle(y.clientX,y.clientY)}})},VD=(e,a)=>o=>{e.on(n=>{var e,t,r;n.intervalId.clear(),n.dragging&&(r=(r=(e=a).selection).getSel(),r=H(r)?(r=r.getRangeAt(0).startContainer,P(r)?r.parentNode:r):null,t=n.element,oe(r)||r===t||e.dom.isChildOf(r,t)||!e.dom.isEditable(r)||(e=null!=(t=a.getDoc().elementFromPoint(o.clientX,o.clientY))?t:a.getBody(),HD(a,"drop",e,n.dataTransfer,o).isDefaultPrevented())||a.undoManager.transact(()=>{var e,t,r;e=a.dom,t=n.element,r=e.getParent(t.parentNode,e.isBlock),zD(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&bi(Z.fromDom(r)),(e=>{e=e.getData("text/html");return""===e?I.none():I.some(e)})(n.dataTransfer).each(e=>a.insertContent(e)),a._selectionOverrides.hideFakeCaret()}),HD(a,"dragend",a.getBody(),n.dataTransfer,o))}),WD(e)},qD=(e,r,n)=>{e.on(t=>{t.intervalId.clear(),t.dragging&&n.fold(()=>HD(r,"dragend",t.element,t.dataTransfer),e=>HD(r,"dragend",t.element,t.dataTransfer,e))}),WD(e)},WD=e=>{e.on(e=>{e.intervalId.clear(),zD(e.ghost)}),e.clear()},KD=t=>{const r=Lo(),e=ee.DOM,n=document;var o=jD(r,t);const a=$D(r,t);var s,i,l=VD(r,t);s=r;const d=e=>qD(s,i,I.some(e));(i=t).on("mousedown",o),t.on("mousemove",a),t.on("mouseup",l),e.bind(n,"mousemove",a),e.bind(n,"mouseup",d),t.on("remove",()=>{e.unbind(n,"mousemove",a),e.unbind(n,"mouseup",d)}),t.on("keydown",e=>{e.keyCode===te.ESC&&qD(r,t,I.none())})},YD=e=>{if(KD(e),yc(e)){var a=e;const s=e=>{var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(D(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type)&&Iw(a,"Dropped file type is not supported")},i=e=>{Cp(a,e.target)&&s(e)},t=()=>{const t=ee.DOM,r=a.dom,n=document,o=a.inline?a.getBody():a.getDoc(),e=["drop","dragover"];K(e,e=>{t.bind(n,e,i),r.bind(o,e,s)}),a.on("remove",()=>{K(e,e=>{t.unbind(n,e,i),r.unbind(o,e,s)})})};a.on("init",()=>{pp.setEditorTimeout(a,t,0)})}},GD=b,XD=(e,t)=>cb(e.getBody(),t),ZD=i=>{const s=i.selection,l=i.dom,d=i.getBody(),o=Cm(i,d,l.isBlock,()=>Rp(i)),c="sel-"+l.uniqueId(),n="data-mce-selected";let a;const m=e=>e!==d&&(GD(e)||wo(e))&&l.isChildOf(e,d)&&l.isEditable(e.parentNode),u=(e,t,r,n=!0)=>{return i.dispatch("ShowCaret",{target:t,direction:e,before:r}).isDefaultPrevented()?null:(n&&s.scrollIntoView(t,-1===e),o.show(r,t))};var e=()=>{i.on("click",e=>{l.isEditable(e.target)||(e.preventDefault(),i.focus())}),i.on("blur NewBlock",h),i.on("ResizeWindow FullscreenStateChanged",o.reposition),i.on("tap",e=>{var t=e.target,r=XD(i,t);GD(r)?(e.preventDefault(),FE(i,r).each(p)):m(t)&&FE(i,t).each(p)},!0),i.on("mousedown",t=>{var e=t.target;if((e===d||"HTML"===e.nodeName||l.isChildOf(e,d))&&Rw(i,t.clientX,t.clientY)){h(),v();const r=XD(i,e);GD(r)?(t.preventDefault(),FE(i,r).each(p)):RD(d,t.clientX,t.clientY).each(e=>{t.preventDefault();var e=u(1,e.node,e.position===OA.Before,!1);(e=e)&&s.setRng(e),(ao(r)?r:i.getBody()).focus()})}}),i.on("keypress",e=>{te.modifierPressed(e)||GD(s.getNode())&&e.preventDefault()}),i.on("GetSelectionRange",e=>{let t=e.range;a&&(a.parentNode?((t=t.cloneRange()).selectNode(a),e.range=t):a=null)}),i.on("SetSelectionRange",e=>{e.range=(e=>{const t=i.schema.getVoidElements(),r=l.createRng(),n=e.startContainer,o=e.startOffset,a=e.endContainer,s=e.endOffset;if(G(t,n.nodeName.toLowerCase()))if(o===0)r.setStartBefore(n);else r.setStartAfter(n);else r.setStart(n,o);if(G(t,a.nodeName.toLowerCase()))if(s===0)r.setEndBefore(a);else r.setEndAfter(a);else r.setEnd(a,s);return r})(e.range);var t=p(e.range,e.forward);t&&(e.range=t)});i.on("AfterSetSelectionRange",e=>{var e=e.range,t=e.startContainer.parentElement;f(e)||(e=t,J(e)&&"mcepastebin"===e.id)||v(),e=t,H(e)&&l.hasClass(e,"mce-offscreen-selection")||h()}),YD(i);{var t=i;const e=Ps(()=>{var e;!t.removed&&t.getBody().contains(document.activeElement)&&(e=t.selection.getRng()).collapsed&&(e=UE(t,e,!1),t.selection.setRng(e))},0);t.on("focus",()=>{e.throttle()}),t.on("blur",()=>{e.cancel()})}var r;(r=i).on("init",()=>{r.on("focusin",e=>{var t,e=e.target;wo(e)&&(t=cb(r.getBody(),e),t=b(t)?t:e,r.selection.getNode()!==t)&&FE(r,t).each(e=>r.selection.setRng(e))})})};const t=e=>Si(e)||Di(e)||Ti(e),f=e=>t(e.startContainer)||t(e.endContainer),g=e=>{var t=e.cloneNode(!0),t=i.dispatch("ObjectSelected",{target:e,targetClone:t});if(t.isDefaultPrevented())return null;t=((e,t)=>{const r=Z.fromDom(i.getBody()),n=i.getDoc();var o=rn(r,"#"+c).getOrThunk(()=>{var e=Z.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',n);return sr(e,"id",c),En(r,e),e}),a=l.createRng(),t=(Sn(o),_n(o,[Z.fromText(Qn,n),Z.fromDom(t),Z.fromText(Qn,n)]),a.setStart(o.dom.firstChild,1),a.setEnd(o.dom.lastChild,0),un(o,{top:l.getPos(e,i.getBody()).y+"px"}),tp(o),s.getSel());return t&&(t.removeAllRanges(),t.addRange(a)),a})(e,t.targetClone);const r=Z.fromDom(e);return K(Kn(Z.fromDom(i.getBody()),`*[${n}]`),e=>{k(r,e)||mr(e,n)}),l.getAttrib(e,n)||e.setAttribute(n,"1"),a=e,v(),t},p=(r,n)=>{if(r)if(r.collapsed){if(!f(r)){var o=n?1:-1,e=Km(o,d,r),t=e.getNode(!n);if(H(t)){if(xm(t))return u(o,t,!!n&&!e.isAtEnd(),!1);if(_i(t)&&b(t.nextSibling))return(a=l.createRng()).setStart(t,0),a.setEnd(t,0),a}var a,t=e.getNode(n);if(H(t)){if(xm(t))return u(o,t,!n&&!e.isAtEnd(),!1);if(_i(t)&&b(t.previousSibling))return(a=l.createRng()).setStart(t,1),a.setEnd(t,1),a}}}else{let e=r.startContainer,t=r.startOffset;o=r.endOffset;if(P(e)&&0===t&&GD(e.parentNode)&&(e=e.parentNode,t=l.nodeIndex(e),e=e.parentNode),J(e)&&o===t+1&&e===r.endContainer){n=e.childNodes[t];if(m(n))return g(n)}}return null},h=()=>{a&&a.removeAttribute(n),rn(Z.fromDom(i.getBody()),"#"+c).each(Q),a=null};const v=()=>{o.hide()};return L1(i)||e(),{showCaret:u,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Bi(e),s.scrollIntoView(e))},hideFakeCaret:v,destroy:()=>{o.destroy(),a=null}}},QD=(e,t,r,n,o)=>{if(P(r)&&(n<0||n>r.data.length))return[];var a=o&&P(r)?[((t,e)=>{let r=e;for(let e=t.previousSibling;P(e);e=e.previousSibling)r+=e.data.length;return r})(r,n)]:[n];let s=r;for(;s!==t&&s.parentNode;)a.push(e.nodeIndex(s,o)),s=s.parentNode;return s===t?a.reverse():[]},JD=(e,t,r,n,o,a,s=!1)=>{return{start:QD(e,t,r,n,s),end:QD(e,t,o,a,s)}},eT=(e,t)=>{t=t.slice();const r=t.pop();return w(r)?he(t,(e,t)=>e.bind(e=>I.from(e.childNodes[t])),I.some(e)).bind(e=>P(e)&&(r<0||r>e.data.length)?I.none():I.some({node:e,offset:r})):I.none()},tT=(e,t)=>eT(e,t.start).bind(({node:n,offset:o})=>eT(e,t.end).map(({node:e,offset:t})=>{var r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})),rT=(e,t,r)=>{var n;t&&e.isEmpty(t)&&!r(t)&&(n=t.parentNode,e.remove(t,P(t.firstChild)&&to(t.firstChild.data)),rT(e,n,r))},nT=(e,t,r,n=!0)=>{var o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(P(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),P(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),rT(e,o,r),o!==a)&&rT(e,a,r)},oT=(e,t)=>I.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),aT=(e,t,r)=>{r=e.dynamicPatternsLookup({text:r,block:t});return{...e,blockPatterns:ed(r).concat(e.blockPatterns),inlinePatterns:td(r).concat(e.inlinePatterns)}},sT=(e,t,r,n)=>{e=e.createRng();return e.setStart(t,0),e.setEnd(r,n),e.toString()},iT=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),lT=(e,t)=>{e=e.createRng();return e.setStartAfter(t.start),e.setEndBefore(t.end),e},dT=(e,t,r)=>{var r=tT(e.getRoot(),r).getOrDie("Unable to resolve path range"),n=r.startContainer,o=r.endContainer,o=0===r.endOffset?o:o.splitText(r.endOffset),n=0===r.startOffset?n:n.splitText(r.startOffset),r=n.parentNode;return{prefix:t,end:o.parentNode.insertBefore(iT(e,t+"-end"),o),start:r.insertBefore(iT(e,t+"-start"),n)}},cT=(e,t,r)=>{rT(e,e.get(t.prefix+"-end"),r),rT(e,e.get(t.prefix+"-start"),r)},mT=e=>0===e.start.length,uT=(n,t,o,e)=>{const a=t.start;var r;return yS(n,e.container,e.offset,(r=a,(e,t)=>{e=e.data.substring(0,t),t=e.lastIndexOf(r.charAt(r.length-1)),e=e.lastIndexOf(r);return-1!==e?e+r.length:-1!==t?t+1:-1}),o).bind(r=>{var e=null!=(e=null==(e=o.textContent)?void 0:e.indexOf(a))?e:-1;return-1!==e&&r.offset>=e+a.length?((e=n.createRng()).setStart(r.container,r.offset-a.length),e.setEnd(r.container,r.offset),I.some(e)):(e=r.offset-a.length,vS(r.container,e,o).map(e=>{var t=n.createRng();return t.setStart(e.container,e.offset),t.setEnd(r.container,r.offset),t}).filter(e=>e.toString()===a).orThunk(()=>uT(n,t,o,uS(r.container,0))))})},fT=(d,c,m,u)=>{const f=d.dom,g=f.getRoot(),p=m.pattern,h=m.position.container,v=m.position.offset;return vS(h,v-m.pattern.end.length,c).bind(e=>{const a=JD(f,g,e.container,e.offset,h,v,u);if(mT(p))return I.some({matches:[{pattern:p,startRng:a,endRng:a}],position:e});{var t=gT(d,m.remainingPatterns,e.container,e.offset,c,u);const l=t.getOr({matches:[],position:e});e=l.position;return[n,o,e,t,s,i=!1]=[f,p,e.container,e.offset,c,t.isNone()],(0!==o.start.length||i?pS(e,t,s).bind(r=>{return uT(n,o,s,r).bind(e=>{var t;if(i){if(e.endContainer===r.container&&e.endOffset===r.offset)return I.none();if(0===r.offset&&(null==(t=e.endContainer.textContent)?void 0:t.length)===e.endOffset)return I.none()}return I.some(e)})}):((r=n.createRng()).setStart(e,t),r.setEnd(e,t),I.some(r))).map(e=>{[o,t,r,n=!1]=[f,g,e,u];var t,r,n,o=JD(o,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n);return{matches:l.matches.concat([{pattern:p,startRng:o,endRng:a}]),position:uS(e.startContainer,e.startOffset)}})}var n,o,s,i,r})},gT=(a,s,i,l,d,c)=>{const e=a.dom;return pS(i,l,e.getRoot()).bind(t=>{var r=sT(e,d,i,l);for(let e=0;e<s.length;e++){var n=s[e];if(dt(r,n.end)){var o=s.slice(),n=(o.splice(e,1),fT(a,d,{pattern:n,remainingPatterns:o,position:t},c));if(n.isNone()&&0<l)return gT(a,s,i,l-1,d,c);if(n.isSome())return n}}return I.none()})},pT=(t,e,r)=>{t.selection.setRng(r),"inline-format"===e.type?K(e.format,e=>{t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},hT=(e,t,r,n,o,a)=>{var s,i=gT(e,o.inlinePatterns,r,n,t,a).fold(()=>[],e=>e.matches),o=gT(e,(e=o.inlinePatterns,Se(e,(e,t)=>t.end.length-e.end.length)),r,n,t,a).fold(()=>[],e=>e.matches);return e=i,s=o,r=Ee(e,t=>W(s,e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end)),e.length===s.length?r?e:s:e.length>s.length?e:s},vT=(m,e)=>{if(0!==e.length){const u=m.dom;var t=m.selection.getBookmark(),e=((n,e)=>{const o=Qs("mce_textpattern"),a=pe(e,(e,t)=>{var r=dT(n,o+("_end"+e.length),t.endRng);return e.concat([{...t,endMarker:r}])},[]);return pe(a,(e,t)=>{var r=a.length-e.length-1,r=mT(t.pattern)?t.endMarker:dT(n,o+"_start"+r,t.startRng);return e.concat([{...t,startMarker:r}])},[])})(u,e);K(e,e=>{const t=u.getParent(e.startMarker.start,u.isBlock);var r,n,o,a,s,i,l,d,c=e=>e===t;mT(e.pattern)?(n=m,o=e.pattern,a=e.endMarker,r=c,a=lT(n.dom,a),nT(n.dom,a,r),pT(n,o,a)):(r=m,n=e.pattern,o=e.startMarker,a=e.endMarker,s=c,i=r.dom,l=lT(i,a),d=lT(i,o),nT(i,d,s),nT(i,l,s),d={prefix:o.prefix,start:o.end,end:a.start},l=lT(i,d),pT(r,n,l)),cT(u,e.endMarker,c),cT(u,e.startMarker,c)}),m.selection.moveToBookmark(t)}},bT=(n,o,t)=>hS(o,0,o).map(e=>{const r=e.container;return bS(r,t.start.length,o).each(e=>{var t=n.createRng();t.setStart(r,0),t.setEnd(e.container,e.offset),nT(n,t,e=>e===o)}),r});lN=o=>(t,e)=>{var r=t.dom;const n=e.pattern;r=tT(r.getRoot(),e.range).getOrDie("Unable to resolve path range");return oT(t,r).each(e=>{"block-format"===n.type?((e,t)=>{t=t.get(e);return j(t)&&Re(t).exists(e=>G(e,"block"))})(n.format,t.formatter)&&t.undoManager.transact(()=>{o(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(()=>{o(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),!0};n=n=>(e,t)=>{e=e;e=Se(e,(e,t)=>t.start.length-e.start.length);const r=t.replace(Qn," ");return be(e,e=>n(e,t,r))},uN=(i,l)=>(e,t,r,n,o)=>{void 0===o&&(o=null!=(s=t.textContent)?s:"");const a=e.dom;var s=yd(e);return a.is(t,s)?i(r.blockPatterns,o).map(e=>l&&B.trim(o).length===e.start.length?[]:[{pattern:e,range:JD(a,a.getRoot(),t,0,t,0,n)}]).getOr([]):[]};const yT=lN((e,t,r)=>{bT(e,t,r).each(e=>{var e=Z.fromDom(e),t=ii(e);/^\s[^\s]/.test(t)&&li(e,t.slice(1))})}),CT=uN(n((e,t,r)=>0===t.indexOf(e.start)||0===r.indexOf(e.start)),!0),wT=lN(bT),ET=uN(n((e,t,r)=>t===e.start||r===e.start),!1),xT=(a,e)=>((n,o)=>{const a=n.selection.getRng();return oT(n,a).map(e=>{var t=Math.max(0,a.startOffset),r=aT(o,e,null!=(r=e.textContent)?r:"");return{inlineMatches:hT(n,e,a.startContainer,t,r,!0),blockMatches:CT(n,e,r,!0)}}).filter(({inlineMatches:e,blockMatches:t})=>0<t.length||0<e.length)})(a,e).fold(u,({inlineMatches:n,blockMatches:o})=>(a.undoManager.add(),a.undoManager.extra(()=>{a.execCommand("mceInsertNewLine")},()=>{a.insertContent(yi,{preserve_zwsp:!0}),vT(a,n),t=a,0!==(e=o).length&&(r=t.selection.getBookmark(),K(e,e=>yT(t,e)),t.selection.moveToBookmark(r));var t,e=a.selection.getRng(),r=pS(e.startContainer,e.startOffset,a.dom.getRoot());a.execCommand("mceInsertNewLine"),r.each(e=>{var t=e.container;t.data.charAt(e.offset-1)===Zn&&(t.deleteData(e.offset-1,1),rT(a.dom,t.parentNode,e=>e===a.dom.getRoot()))})}),!0)),kT=(n,e)=>((n,o)=>{const a=n.selection.getRng();return oT(n,a).map(e=>{var t=Math.max(0,a.startOffset),t=sT(n.dom,e,a.startContainer,t),r=aT(o,e,t);return ET(n,e,r,!1,t)}).filter(e=>0<e.length)})(n,e).fold(u,r=>(n.undoManager.transact(()=>{var t,e;t=n,e=r,K(e,e=>wT(t,e))}),!0)),_T=(t,r,n)=>{for(let e=0;e<t.length;e++)if(n(t[e],r))return!0;return!1},ST=r=>{const n=[",",".",";",":","!","?"],o=[32],i=()=>{return e=Hc(r).filter(e=>"inline-command"!==e.type&&"block-command"!==e.type||r.queryCommandSupported(e.cmd)),t=$c(r),{inlinePatterns:td(e),blockPatterns:ed(e),dynamicPatternsLookup:t};var e,t},l=()=>r.options.isSet("text_patterns_lookup"),a=(r.on("keydown",e=>{var t;13===e.keyCode&&!te.modifierPressed(e)&&r.selection.isCollapsed()&&(0<(t=rd(i(),"enter")).inlinePatterns.length||0<t.blockPatterns.length||l())&&xT(r,t)&&e.preventDefault()},!0),r.on("keydown",e=>{var t;32===e.keyCode&&r.selection.isCollapsed()&&(0<(t=rd(i(),"space")).blockPatterns.length||l())&&kT(r,t)&&e.preventDefault()},!0),()=>{if(r.selection.isCollapsed()){var e=rd(i(),"space");if(0<e.inlinePatterns.length||l()){var o=r;var a=e;const s=o.selection.getRng();oT(o,s).map(e=>{var t=Math.max(0,s.startOffset-1),r=sT(o.dom,e,s.startContainer,t),r=aT(a,e,r);const n=hT(o,e,s.startContainer,t,r,!1);0<n.length&&o.undoManager.transact(()=>{vT(o,n)})})}}});r.on("keyup",e=>{var t;t=o,e=e,_T(t,e,(e,t)=>e===t.keyCode&&!te.modifierPressed(t))&&a()}),r.on("keypress",e=>{var t;t=n,e=e,_T(t,e,(e,t)=>e.charCodeAt(0)===t.charCode)&&pp.setEditorTimeout(r,a)})},NT=a=>{const o=B.each,s=te.BACKSPACE,i=te.DELETE,l=a.dom,d=a.selection,e=a.parser;var t=U.browser;const c=t.isFirefox(),m=t.isChromium()||t.isSafari(),u=U.deviceType.isiPhone()||U.deviceType.isiPad(),r=U.os.isMacOS()||U.os.isiOS(),f=(e,t)=>{try{a.getDoc().execCommand(e,!1,String(t))}catch(e){}},g=e=>e.isDefaultPrevented(),p=()=>{const o=e=>{var t=l.create("body"),e=e.cloneContents();return t.appendChild(e),d.serializer.serialize(t,{format:"html"})};a.on("keydown",e=>{var t,r,n=e.keyCode;g(e)||n!==i&&n!==s||!a.selection.isEditable()||(n=a.selection.isCollapsed(),t=a.getBody(),n&&!Do(a.schema,t))||!n&&(n=a.selection.getRng(),n=o(n),(r=l.createRng()).selectNode(a.getBody()),r=o(r),n!==r)||(e.preventDefault(),a.setContent(""),t.firstChild&&l.isBlock(t.firstChild)?a.selection.setCursorLocation(t.firstChild,0):a.selection.setCursorLocation(t,0),a.nodeChanged())})},h=()=>{a.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{a.inline||l.bind(a.getDoc(),"mousedown mouseup",e=>{var t;e.target===a.getDoc().documentElement&&(t=d.getRng(),a.getBody().focus(),"mousedown"===e.type?Si(t.startContainer)||d.placeCaretAt(e.clientX,e.clientY):d.setRng(t))})},b=()=>{Range.prototype.getClientRects||a.on("mousedown",e=>{if(!g(e)&&"HTML"===e.target.nodeName){const t=a.getBody();t.blur(),pp.setEditorTimeout(a,()=>{t.focus()})}})},y=()=>{const r=Ec(a);a.on("click",e=>{var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&l.isEditable(t)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&l.hasClass(t,r)&&0===t.childNodes.length&&l.isEditable(t.parentNode)&&(e.preventDefault(),d.select(t))})},C=()=>{a.on("keydown",e=>{if(!g(e)&&e.keyCode===s&&d.isCollapsed()&&0===d.getRng().startOffset){var t=d.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},w=()=>{gc(a)||a.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Wd(a)||f("enableObjectResizing",!1)})},E=()=>{a.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(l.select("a:not([data-mce-block])"),e=>{var t;let r=e.parentNode;var n=l.getRoot();if((null===r||void 0===r?void 0:r.lastChild)===e){for(;r&&!l.isBlock(r);){if((null==(t=r.parentNode)?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}l.add(r,"br",{"data-mce-bogus":1})}})})},x=e=>{var t=e.getBody(),e=e.selection.getRng();return e.startContainer===e.endContainer&&e.startContainer===t&&0===e.startOffset&&e.endOffset===t.childNodes.length},k=()=>{a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{a.inline||a.on("keydown",()=>{document.activeElement===document.body&&a.getWin().focus()})},S=()=>{a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",e=>{"HTML"===e.target.nodeName&&(e=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(e),a.selection.normalize(),a.nodeChanged())}))},N=()=>{r&&a.on("keydown",e=>{!te.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},R=()=>{a.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},A=()=>{a.on("init",()=>{a.dom.bind(a.getBody(),"submit",e=>{e.preventDefault()})})};var t=V,n=()=>{if(a.on("keydown",t=>{if(!g(t)&&t.keyCode===te.BACKSPACE){var t=d.getRng(),r=t.startContainer,n=t.startOffset,o=l.getRoot();let e=r;if(t.collapsed&&0===n){for(;e.parentNode&&e.parentNode.firstChild===e&&e.parentNode!==o;)e=e.parentNode;"BLOCKQUOTE"===e.nodeName&&(a.formatter.toggle("blockquote",void 0,e),(t=l.createRng()).setStart(r,0),t.setEnd(r,0),d.setRng(t))}}}),p(),U.windowsPhone||a.on("keyup focusin mouseup",e=>{te.modifierPressed(e)||x(a)||d.normalize()},!0),m&&(v(),y(),a.on("init",()=>{f("DefaultParagraphSeparator",yd(a))}),A(),C(),e.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),(u?(_(),S(),R):h)()),c){a.on("keydown",e=>{var t,r;g(e)||e.keyCode!==s||a.getBody().getElementsByTagName("hr").length&&d.isCollapsed()&&0===d.getRng().startOffset&&(r=(t=d.getNode()).previousSibling,"HR"===t.nodeName?(l.remove(t),e.preventDefault()):r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(l.remove(r),e.preventDefault()))}),b();{const r=()=>{const e=l.getAttribs(d.getStart().cloneNode(!1));return()=>{const t=d.getStart();t!==a.getBody()&&(l.setAttrib(t,"style",null),o(e,e=>{t.setAttributeNode(e.cloneNode(!0))}))}},n=()=>!d.isCollapsed()&&l.getParent(d.getStart(),l.isBlock)!==l.getParent(d.getEnd(),l.isBlock);a.on("keypress",e=>{var t;return!(!(g(e)||8!==e.keyCode&&46!==e.keyCode)&&n()&&(t=r(),a.getDoc().execCommand("delete",!1),t(),e.preventDefault(),1))}),l.bind(a.getDoc(),"cut",e=>{if(!g(e)&&n()){const t=r();pp.setEditorTimeout(a,()=>{t()})}})}w(),E(),k(),N(),C()}};return L1(a)?(m&&(v(),y(),A(),h(),u)&&(_(),S(),R()),c&&(b(),w(),k(),N())):n(),{refreshContentEditable:t,isHidden:()=>{var e;return!(!c||a.removed||(e=a.selection.getSel())&&e.rangeCount&&0!==e.rangeCount)}}},RT=ee.DOM,AT=e=>Ue(e,e=>!1===C(e)),DT=e=>{var t,r=e.options.get,n=e.editorUpload.blobCache;return AT({allow_conditional_comments:r("allow_conditional_comments"),allow_html_data_urls:r("allow_html_data_urls"),allow_svg_data_urls:r("allow_svg_data_urls"),allow_html_in_named_anchor:r("allow_html_in_named_anchor"),allow_script_urls:r("allow_script_urls"),allow_unsafe_link_target:r("allow_unsafe_link_target"),convert_unsafe_embeds:r("convert_unsafe_embeds"),convert_fonts_to_spans:r("convert_fonts_to_spans"),fix_list_elements:r("fix_list_elements"),font_size_legacy_values:r("font_size_legacy_values"),forced_root_block:r("forced_root_block"),forced_root_block_attrs:r("forced_root_block_attrs"),preserve_cdata:r("preserve_cdata"),inline_styles:r("inline_styles"),root_name:(t=e).inline?t.getElement().nodeName.toLowerCase():void 0,sandbox_iframes:r("sandbox_iframes"),sandbox_iframes_exclusions:rm(e),sanitize:r("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},TT=e=>{e=e.options.get;return AT({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},OT=e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),t=(r=e).dom.getRoot(),r.inline||Zu(r)&&r.selection.getStart(!0)!==t||wu(t).each(e=>{var t=e.getNode(),t=lo(t)?wu(t).getOr(e):e;r.selection.setRng(t.toRange())}),e.nodeChanged({initial:!0});var r,t=_c(e);$(t)&&t.call(e,e);{var n=e;const o=Nc(n);o&&pp.setEditorTimeout(n,()=>{let e;(e=!0===o?n:n.editorManager.get(o))&&!e.destroyed&&(e.focus(),e.selection.scrollIntoView())},100)}},BT=e=>(e.inline?e.ui:e.dom).styleSheetLoader,PT=e=>{const t=BT(e),r=$d(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)};var a=()=>{e.removed?o():e.on("remove",o)};if(0<e.contentStyles.length){let t="";B.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}var a=Promise.all(((r,e,t)=>{var{pass:e,fail:n}=ge(e,e=>tinymce.Resource.has(Hw(e))),e=[...e.map(e=>{var t=tinymce.Resource.get(Hw(e));return z(t)?Promise.resolve(BT(r).loadRawCss(e,t)):Promise.resolve()}),BT(r).loadAll(n)];return r.inline?e:e.concat([r.ui.styleSheetLoader.loadAll(t)])})(e,n,r)).then(a).catch(a),s=Hd(e);if(s){var i=e;var l=Z.fromDom(i.getBody()),l=Wr(qr(l));const d=Z.fromTag("style");sr(d,"type","text/css"),En(d,Z.fromText(s)),En(l,d),i.on("remove",()=>{Q(d)})}return a},LT=e=>{var t;!0!==e.removed&&(t=e,L1(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),OT(e))},MT=t=>{var e=t.getElement();let r=t.getDoc();t.inline&&(RT.addClass(e,"mce-content-body"),t.contentDocument=r=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);var i,n,o,e=t.getBody(),a=(e.disabled=!0,t.readonly=gc(t),t._editableRoot=pc(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===RT.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable="true"),e.disabled=!1,t.editorUpload=eE(t),t.schema=Ya(TT(t)),t.dom=ee(r,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Ld(t),referrerPolicy:Md(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}}),t.parser=(i=t,(e=WC(DT(i),i.schema)).addAttributeFilter("src,href,style,tabindex",(t,r)=>{var n=i.dom,o="data-mce-"+r;let a=t.length;for(;a--;){var s=t[a];let e=s.attr(r);e&&!s.attr(o)&&0!==e.indexOf("data:")&&0!==e.indexOf("blob:")&&("style"===r?((e=n.serializeStyle(n.parseStyle(e),s.name)).length||(e=null),s.attr(o,e),s.attr(r,e)):"tabindex"===r?(s.attr(o,e),s.attr(r,null)):s.attr(o,i.convertURL(e,r,s.name)))}}),e.addNodeFilter("script",e=>{let t=e.length;for(;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),Kc(i)&&e.addNodeFilter("#cdata",e=>{let t=e.length;for(;t--;){var r=e[t];r.type=8,r.name="#comment",r.value="[CDATA["+i.dom.encode(null!=(r=r.value)?r:"")+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",e=>{let t=e.length;for(var r=i.schema.getNonEmptyElements();t--;){var n=e[t];n.isEmpty(r)&&0===n.getAll("br").length&&n.append(new jp("br",1))}}),e),t.serializer=rw((a=(e=t).options.get,{...DT(e),...TT(e),...AT({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}),t),t.selection=G1(t.dom,t.getWin(),t.serializer,t),t.annotator=Wf(t),t.formatter=mE(t),t.undoManager=gE(t),t._nodeChangeDispatcher=new JR(t),t._selectionOverrides=ZD(t),n_(t),fD(t),d_(t),L1(t)||((n=t).on("mousedown",e=>{3<=e.detail&&(e.preventDefault(),wD(n))}),e=t,ST(e)),QR(t)),e=(t_(t,a),(o=t).on("NodeChange",()=>s_(o)),yE(t),uD(t),M1(t));{var s=t,a=s.getDoc(),l=s.getBody(),a;s.dispatch("PreInit"),Rc(s)||(a.body.spellcheck=!1,RT.setAttrib(l,"spellcheck","false")),s.quirks=NT(s),s.dispatch("PostRender"),void 0!==(a=Vd(s))&&(l.dir=a);const d=Ac(s);d&&s.on("BeforeSetContent",t=>{B.each(d,e=>{t.content=t.content.replace(e,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",e=>{s.composing="compositionstart"===e.type})}l=t,a=om(l),z(am(l))||!C(a)&&"INVALID"!=("gpl"===(l=a).toLowerCase()||64<=(l=l).length&&l.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/"),e.fold(()=>{const e=(e=>{let t=!1;const r=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(t);PT(t).then(()=>{LT(t),e()})},e=>{t.setProgressState(!0),PT(t).then(()=>{e().then(e=>{t.setProgressState(!1),LT(t),z1(t)},e=>{t.notificationManager.open({type:"error",text:String(e)}),LT(t),z1(t)})})})},IT=le,FT=ee.DOM,UT=(e,t)=>{var r=U.browser.isFirefox()?xc(e):"Rich Text Area",r=e.translate(r),n=dr(Z.fromDom(e.getElement()),"tabindex").bind(pt);const o=((e,t,r,n)=>{const o=Z.fromTag("iframe");return n.each(e=>sr(o,"tabindex",e)),ir(o,r),ir(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),yr(o,"tox-edit-area__iframe"),o})(e.id,r,ud(e),n).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=(e=>{let t=fd(e)+"<html><head>";gd(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=pd(e),n=hd(e),o=e.translate(xc(e));return vd(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+vd(e)+'" />'),t+="</head>"+`<body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}">`+"<br></body></html>"})(e),FT.add(t.iframeContainer,o)},zT=e=>{const t=e.iframeElement,r=()=>{e.contentDocument=t.contentDocument,MT(e)};if(Xc(e)||U.browser.isFirefox()){var n=e.getDoc();n.open(),n.write(e.iframeHTML),n.close(),r()}else{n=Z.fromDom(t),o="load",a=()=>{s.unbind(),r()};const s=Bn(n,o,IT,a);t.srcdoc=e.iframeHTML}var o,a},jT=ee.DOM,HT=(t,e,r)=>{var n=Ow.get(r),o=Ow.urls[r]||t.documentBaseUrl.replace(/\/$/,"");if(r=B.trim(r),n&&-1===B.inArray(e,r)&&!t.plugins[r])try{var a=n(t,o)||{};t.plugins[r]=a,$(a.init)&&(a.init(t,o),e.push(r))}catch(e){n=t,a=r,o=e;a=Os.translate(["Failed to initialize plugin: {0}",a]),Gf(n,"PluginLoadError",{message:a}),zw(a,o),Iw(n,a)}},$T=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),VT=e=>{var t=jT.create("div");return jT.insertAfter(t,e),$T(t,t)},qT=e=>{var t=e.getElement();return e.inline?$T(null):VT(t)},WT=e=>{var t,r,n=e.getElement();return e.orgDisplay=n.style.display,z(Zd(e))?(r=(n=e).theme.renderUI)?r():qT(n):$(Zd(e))?(n=(r=e).getElement(),(t=Zd(r)(r,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||r.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||r.id+"_iframecontainer"),t.height=t.iframeHeight||n.offsetHeight,t):qT(e)},KT=async e=>{e.dispatch("ScriptsLoaded");{var r=e,t=B.trim(Ad(r));const l=r.ui.registry.getAll().icons;t={...Ew.get("default").icons,...Ew.get(t).icons},Y(t,(e,t)=>{G(l,t)||r.ui.registry.addIcon(t,e)})}var n;t=e,i=Zd(t),z(i)?(n=Bw.get(i),t.theme=n(t,Bw.urls[i])||{},$(t.theme.init)&&t.theme.init(t,Bw.urls[i]||t.documentBaseUrl.replace(/\/$/,""))):t.theme={},n=e,i=Jd(n),t=xw.get(i),n.model=t(n,xw.urls[i]);{var o=e;const d=[];K(vc(o),e=>{HT(o,d,e.replace(/^\-/,""))})}var a,s,i,t=await WT(e);a=e,s=I.from(t.api).getOr({}),i={show:I.from(s.show).getOr(V),hide:I.from(s.hide).getOr(V),isEnabled:I.from(s.isEnabled).getOr(le),setEnabled:t=>{a.mode.isReadOnly()||I.from(s.setEnabled).each(e=>e(t))}},a.ui={...a.ui,...i},e.editorContainer=t.editorContainer,qw(e),e.inline?MT(e):(i=e,e={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer},UT(i,e),e.editorContainer&&(e.editorContainer.style.display=i.orgDisplay,i.hidden=FT.isHidden(e.editorContainer)),i.getElement().style.display="none",FT.setAttrib(i.id,"aria-hidden","true"),i.getElement().style.visibility=i.orgVisibility,zT(i))},YT=ee.DOM,GT=e=>"-"===e.charAt(0),XT=(e,n)=>{const o=Id(n);var t=Fd(n);if(!Os.hasCode(o)&&"en"!==o){const a=ft(t)?t:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{var e,t,r;e=n,t=a,r=o,Fw(e,"LanguageLoadError",Uw("language",t,r))})}},ZT=(n,e)=>{const o=Zd(n);if(z(o)&&!GT(o)&&!G(Bw.urls,o)){var t=Qd(n);const a=t?n.documentBaseURI.toAbsolute(t):`themes/${o}/theme${e}.js`;Bw.load(o,a).catch(()=>{var e,t,r;e=n,t=a,r=o,Fw(e,"ThemeLoadError",Uw("theme",t,r))})}},QT=(n,e)=>{const o=Jd(n);if("plugin"!==o&&!G(xw.urls,o)){var t=ec(n);const a=z(t)?n.documentBaseURI.toAbsolute(t):`models/${o}/model${e}.js`;xw.load(o,a).catch(()=>{var e,t,r;e=n,t=a,r=o,Fw(e,"ModelLoadError",Uw("model",t,r))})}},JT=(t,e,r)=>I.from(e).filter(e=>ft(e)&&!Ew.has(e)).map(e=>({url:t.editorManager.baseURL+`/icons/${e}/icons${r}.js`,name:I.some(e)})),eO=(e,o,t)=>{var t=JT(o,"default",t),r=(r=o,I.from(Dd(r)).filter(ft).map(e=>({url:e,name:I.none()})).orThunk(()=>JT(o,Ad(o),"")));K((t=>{const r=[];var n=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return r})([t,r]),n=>{e.add(n.url).catch(()=>{var e,t,r;e=o,t=n.url,r=n.name.getOrUndefined(),Fw(e,"IconsLoadError",Uw("icons",t,r))})})},tO=(a,t)=>{const r=(n,o)=>{Ow.load(n,o).catch(()=>{var e,t,r;e=a,t=o,r=n,Fw(e,"PluginLoadError",Uw("plugin",t,r))})};Y(bc(a),(e,t)=>{r(t,e),a.options.set("plugins",vc(a).concat(t))}),K(vc(a),e=>{!(e=B.trim(e))||Ow.urls[e]||GT(e)||r(e,`plugins/${e}/plugin${t}.js`)})},rO=e=>{e=Zd(e);return!z(e)||H(Bw.get(e))},nO=e=>{e=Jd(e);return H(xw.get(e))},oO=t=>{var e,r,n,o=t.id;Os.setCode(Id(t));const a=()=>{YT.unbind(window,"ready",a),t.render()};if(hs.Event.domLoaded){if(t.getElement()){const s=Z.fromDom(t.getElement()),i=ur(s);t.on("remove",()=>{fe(s.dom.attributes,e=>mr(s,e.name)),ir(s,i)}),t.ui.styleSheetLoader=(r=s,n=t,sa.forElement(r,{contentCssCors:hc(n),referrerPolicy:Md(n)})),ic(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const l=t.getElement().form||YT.getParent(o,"form");l&&(t.formElement=l,lc(t)&&!mo(t.getElement())&&(YT.insertAfter(YT.create("input",{type:"hidden",name:o}),o),t.hasHiddenInput=!0),t.formEventDelegate=e=>{t.dispatch(e.type,e)},YT.bind(l,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!dc(t)||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)))),t.windowManager=Lw(t),t.notificationManager=Tw(t),"xml"===t.options.get("encoding")&&t.on("GetContent",e=>{e.save&&(e.content=YT.encode(e.content))}),cc(t)&&t.on("submit",()=>{t.initialized&&t.save()}),mc(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),r=(e=t).suffix,n=Rs.ScriptLoader,o=()=>{!e.removed&&rO(e)&&nO(e)&&KT(e)},ZT(e,r),QT(e,r),XT(n,e),eO(n,e,r),tO(e,r),n.loadQueue().then(o,o)}}else YT.bind(window,"ready",a)};mN=It().deviceType;const aO=mN.isPhone(),sO=mN.isTablet(),iO=e=>{return oe(e)?[]:(e=j(e)?e:e.split(/[ ,]/),e=T(e,ct),O(e,ft))},lO=(r,e)=>{e=e,n=(e,t)=>D(r,t),o={},t={},Fe(e,n,Ie(o),Ie(t));var t,n,o,e={t:o,f:t};return n=e.t,o=e.f,{sections:q(n),options:q(o)}},dO=(e,t,r={})=>{e=e.sections(),e=g(e,t).getOr({});return B.extend({},r,e)},cO=(e,t)=>G(e.sections(),t),mO=(e,t)=>{return{...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:g(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}},uO=(e,t)=>{t=null!=(t=t.external_plugins)?t:{};return e&&e.external_plugins?B.extend({},e.external_plugins,t):t},fO=(e,t,r,n)=>{var r=iO(r.forced_plugins),o=iO(n.plugins),a=(a=t,s="mobile",cO(a,s)?a.sections()[s]:{}),s=a.plugins?iO(a.plugins):o,s=(a=t,t=o,o=s,e&&cO(a,"mobile")?o:t),o=(e=r,a=s,[...iO(e),...iO(a)]);return B.extend(n,{forced_plugins:r,plugins:o})},gO=(e,t)=>e&&cO(t,"mobile"),pO=(e,t)=>{var r,n,o,a,t=MS(t);return r=aO||sO,n=aO,e=e,o=t=t,a=r?{mobile:mO(null!=(a=o.mobile)?a:{},n)}:{},n=lO(["mobile"],LS(a,o)),a=B.extend(t,e,n.options(),gO(r,n)?dO(n,"mobile"):{},{external_plugins:uO(e,n.options())}),fO(r,n,e,a)},hO=(e,t)=>{return e=e,t=t,F1(e).editor.addVisual(t)},vO=n=>{var e=r=>()=>{var e,t;K("left,center,right,justify".split(","),e=>{r!==e&&n.formatter.remove("align"+e)}),"none"!==r&&(e="align"+r,n.formatter.toggle(e,t),n.nodeChanged())};n.editorCommands.addCommands({JustifyLeft:e("left"),JustifyCenter:e("center"),JustifyRight:e("right"),JustifyFull:e("justify"),JustifyNone:e("none")})},bO=r=>{var e=t=>()=>{var e=r.selection,e=e.isCollapsed()?[r.dom.getParent(e.getNode(),r.dom.isBlock)]:e.getSelectedBlocks();return W(e,e=>H(r.formatter.matchNode(e,t)))};r.editorCommands.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify")},"state")},yO=(e,t)=>{var r,n=e.selection,o=e.dom;return/^ | $/.test(t)?(o=o,n=n.getRng(),r=t,e=e.schema,o=Z.fromDom(o.getRoot()),r=Yh(o,L.fromRangeStart(n),e)?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),r=Gh(o,L.fromRangeEnd(n),e)?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")):t},CO=(o,e)=>{if(o.selection.isEditable()){const{content:r,details:a}="string"!=typeof(e=e)?(t=B.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}};ZC(o,{...a,content:yO(o,r),format:"html",set:!1,selection:!0}).each(e=>{n=o,t=e.content,r=a;var t,r,n=I1(n).editor.insertContent(t,r);QC(o,n,e),o.addVisual()})}var t},wO={"font-size":"size","font-family":"face"},EO=or("font"),xO=(r,t,e)=>{return Xb(Z.fromDom(e),e=>{return t=e,pn(t,r).orThunk(()=>EO(t)?g(wO,r).bind(e=>dr(t,e)):I.none());var t},e=>k(Z.fromDom(t),e))};pN=n=>(r,e)=>I.from(e).map(Z.fromDom).filter(er).bind(e=>{return xO(n,r,e.dom).or((t=n,e=e.dom,I.from(ee.DOM.getStyle(e,t,!0))));var t}).getOr("");const kO=pN("font-size"),_O=_(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),pN("font-family")),SO=e=>wu(e.getBody()).bind(e=>{e=e.container();return I.from(P(e)?e.parentNode:e)}),NO=(e,t)=>{return r=e,I.from(r.selection.getRng()).bind(e=>{var t=r.getBody();return e.startContainer===t&&0===e.startOffset?I.none():I.from(r.selection.getStart(!0))}).orThunk(E(SO,e)).map(Z.fromDom).filter(er).bind(t);var r},RO=(e,t)=>NO(e,S(I.some,t)),AO=(e,t)=>{var r,n;return/^[0-9.]+$/.test(t)&&1<=(r=parseInt(t,10))&&r<=7?(n=e,n=B.explode(n.options.get("font_size_style_values")),e=e,0<(e=B.explode(e.options.get("font_size_classes"))).length?e[r-1]||t:n[r-1]||t):t},DO=(e,t)=>{t=AO(e,t);e.formatter.toggle("fontname",{value:(e=>{e=e.split(/\s*,\s*/);return T(e,e=>-1===e.indexOf(" ")||lt(e,'"')||lt(e,"'")?e:`'${e}'`).join(",")})(t)}),e.nodeChanged()},TO=o=>{const n=(e,t)=>{o.formatter.toggle(e,t),o.nodeChanged()};o.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{n(e)},"ForeColor,HiliteColor":(e,t,r)=>{n(e,{value:r})},BackColor:(e,t,r)=>{n("hilitecolor",{value:r})},FontName:(e,t,r)=>{DO(o,r)},FontSize:(e,t,r)=>{var n;r=r,(n=o).formatter.toggle("fontsize",{value:AO(n,r)}),n.nodeChanged()},LineHeight:(e,t,r)=>{var n;(n=o).formatter.toggle("lineheight",{value:String(r)}),n.nodeChanged()},Lang:(e,t,r)=>{n(e,{value:r.code,customValue:null!=(e=r.customCode)?e:null})},RemoveFormat:e=>{o.formatter.remove(e)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(e,t,r)=>{n(z(r)?r:"p")},mceToggleFormat:(e,t,r)=>{n(r)}})},OO=r=>{const t=e=>r.formatter.match(e);r.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),r.editorCommands.addQueryValueHandler("FontName",()=>{return t=r,RO(t,e=>_O(t.getBody(),e.dom)).getOr("");var t}),r.editorCommands.addQueryValueHandler("FontSize",()=>{return t=r,RO(t,e=>kO(t.getBody(),e.dom)).getOr("");var t}),r.editorCommands.addQueryValueHandler("LineHeight",()=>{return t=r,RO(t,r=>{var e=Z.fromDom(t.getBody());return Xb(r,e=>pn(e,"line-height"),E(k,e)).getOrThunk(()=>{var e=parseFloat(fn(r,"line-height")),t=parseFloat(fn(r,"font-size"));return String(e/t)})}).getOr("");var t})},BO=(r,e)=>{var t=r.dom,n=r.selection.getRng(),o=e?r.selection.getStart():r.selection.getEnd();const a=e?n.startContainer:n.endContainer,s=HN(t,a);if(s&&s.isContentEditable){const i=e?yn:Cn,l=yd(r);((e,t,r,n)=>{const o=e.dom;e=e=>o.isBlock(e)&&e.parentElement===r,t=e(t)?t:o.getParent(n,e,r);return I.from(t).map(Z.fromDom)})(r,o,s,a).each(e=>{var t=KN(r,a,e.dom,s,!1,l);i(e,Z.fromDom(t)),r.selection.setCursorLocation(t,0),r.dispatch("NewBlock",{newBlock:t}),LN(r,"insertParagraph")})}},PO=e=>BO(e,!0),LO=e=>BO(e,!1),MO=e=>{var n,t,o,a,s,r,i,l,d,c;d=e,vO(d),bO(d),(n=e).editorCommands.addCommands({"Cut,Copy,Paste":e=>{var t=n.getDoc();let r;try{t.execCommand(e)}catch(e){r=!0}if((r="paste"!==e||t.queryCommandEnabled(e)?r:!0)||!t.queryCommandSupported(e)){let e=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(U.os.isMacOS()||U.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:e,type:"error"})}}}),(t=e).editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}}),(o=e).editorCommands.addCommands({mceSelectNodeDepth:(e,t,r)=>{let n=0;o.dom.getParent(o.selection.getNode(),e=>!J(e)||n++!==r||(o.selection.select(e),!1),o.getBody())},mceSelectNode:(e,t,r)=>{o.selection.select(r)},selectAll:()=>{var e,t=o.dom.getParent(o.selection.getStart(),bo);t&&((e=o.dom.createRng()).selectNodeContents(t),o.selection.setRng(e))}}),(a=e).editorCommands.addCommands({mceCleanup:()=>{var e=a.selection.getBookmark();a.setContent(a.getContent()),a.selection.moveToBookmark(e)},insertImage:(e,t,r)=>{CO(a,a.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{a.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,t,r)=>{CO(a,a.dom.encode(r))},insertHTML:(e,t,r)=>{CO(a,r)},mceInsertContent:(e,t,r)=>{CO(a,r)},mceSetContent:(e,t,r)=>{a.setContent(r)},mceReplaceContent:(e,t,r)=>{a.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,a.selection.getContent({format:"text"})))},mceNewDocument:()=>{a.setContent(Pc(a))}}),d=(e,t,r)=>{var r=z(r)?{href:r}:r,n=s.dom.getParent(s.selection.getNode(),"a");F(r)&&z(r.href)&&(r.href=r.href.replace(/ /g,"%20"),n&&r.href||s.formatter.remove("link"),r.href)&&s.formatter.apply("link",r,n)},(s=e).editorCommands.addCommands({unlink:()=>{var e;s.selection.isEditable()&&(s.selection.isCollapsed()?(e=s.dom.getParent(s.selection.getStart(),"a"))&&s.dom.remove(e,!0):s.formatter.remove("link"))},mceInsertLink:d,createLink:d}),(r=e).editorCommands.addCommands({Indent:()=>{Zk(r)},Outdent:()=>{Qk(r)}}),r.editorCommands.addCommands({Outdent:()=>Wk(r)},"state"),(i=e).editorCommands.addCommands({InsertNewBlockBefore:()=>{PO(i)},InsertNewBlockAfter:()=>{LO(i)}}),(l=e).editorCommands.addCommands({insertParagraph:()=>{BR(dR,l)},mceInsertNewLine:(e,t,r)=>{PR(l,r)},InsertLineBreak:(e,t,r)=>{BR(bR,l)}}),d=e,TO(d),OO(d),(c=e).editorCommands.addCommands({mceRemoveNode:(e,t,r)=>{var n,r=null!=r?r:c.selection.getNode();r!==c.getBody()&&(n=c.selection.getBookmark(),c.dom.remove(r,!0),c.selection.moveToBookmark(n))},mcePrint:()=>{c.getWin().print()},mceFocus:(e,t,r)=>{Tp(c,!0===r)},mceToggleVisualAid:()=>{c.hasVisual=!c.hasVisual,c.addVisual()}})},IO=["toggleview"],FO=e=>D(IO,e.toLowerCase());class UO{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,r,n){var o,a=this.editor,s=e.toLowerCase(),n=null==n?void 0:n.skip_focus;return!(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||n?(o=a,fp(o).each(e=>o.selection.setRng(e))):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())||(n=this.commands.exec[s],!$(n))||(n(s,t,r),a.dispatch("ExecCommand",{command:e,ui:t,value:r}),0))}queryCommandState(e){var t;return!(!FO(e)&&this.editor.quirks.isHidden()||this.editor.removed||(e=e.toLowerCase(),t=this.commands.state[e],!$(t)))&&t(e)}queryCommandValue(e){var t;return!(!FO(e)&&this.editor.quirks.isHidden()||this.editor.removed)&&(e=e.toLowerCase(),t=this.commands.value[e],$(t))?t(e):""}addCommands(e,r="exec"){const n=this.commands;Y(e,(t,e)=>{K(e.toLowerCase().split(","),e=>{n[r][e]=t})})}addCommand(e,n,o){e=e.toLowerCase();this.commands.exec[e]=(e,t,r)=>n.call(null!=o?o:this.editor,t,r)}queryCommandSupported(e){e=e.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}const zO="data-mce-contenteditable",jO=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},HO=(e,t)=>{e.dom.contentEditable=t?"true":"false"},$O=(e,t)=>{var r,n,o,a=Z.fromDom(e.getBody());n=a,r="mce-content-readonly",o=t,Er(n,r)&&!o?wr(n,r):o&&yr(n,r),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),o=e,I.from(o.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")}),e.readonly=!0,HO(a,!1),n=a,K(Kn(n,'*[contenteditable="true"]'),e=>{sr(e,zO,"true"),HO(e,!1)})):(e.readonly=!1,e.hasEditableRoot()&&HO(a,!0),r=a,K(Kn(r,`*[${zO}="true"]`),e=>{mr(e,zO),HO(e,!0)}),jO(e,"StyleWithCSS",!1),jO(e,"enableInlineTableEditing",!1),jO(e,"enableObjectResizing",!1),Ap(e)&&e.focus(),e.selection.setRng(e.selection.getRng()),e.nodeChanged())},VO=e=>e.readonly,qO=t=>{t.parser.addAttributeFilter("contenteditable",e=>{VO(t)&&K(e,e=>{e.attr(zO,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(zO,e=>{VO(t)&&K(e,e=>{e.attr("contenteditable",e.attr(zO))})}),t.serializer.addTempAttr(zO)},WO=["copy"],KO=(r,n)=>{var e,t,o;"click"!==n.type||te.metaKeyPressed(n)?(e=n,D(WO,e.type)&&r.dispatch(n.type,n)):(e=Z.fromDom(n.target),t=r,o=e,nn(o,"a",e=>k(e,Z.fromDom(t.getBody()))).bind(e=>dr(e,"href")).each(e=>{var t;n.preventDefault(),/^#/.test(e)?(t=r.dom.select(`${e},[name="${st(e,"#")}"]`)).length&&r.selection.scrollIntoView(t[0],!0):window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))},YO=B.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class GO{static isNative(e){return!!YO[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||u}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){var r=e.toLowerCase(),n=cs(r,null!=t?t:{},this.scope),o=(this.settings.beforeFire&&this.settings.beforeFire(n),this.bindings[r]);if(o)for(let e=0,t=o.length;e<t;e++){var a=o[e];if(!a.removed){if(a.once&&this.off(r,a.func),n.isImmediatePropagationStopped())return n;if(!1===a.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,r,n,o){if(r=!1===r?u:r){var a={func:r,removed:!1},s=(o&&B.extend(a,o),e.toLowerCase().split(" "));let t=s.length;for(;t--;){var i=s[t];let e=this.bindings[i];e||(e=[],this.toggleEvent(i,!0)),e=n?[a,...e]:[...e,a],this.bindings[i]=e}}return this}off(r,n){if(r){var o=r.toLowerCase().split(" ");let t=o.length;for(;t--;){var a,s=o[t];let e=this.bindings[s];if(!s)return Y(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;e&&(n?(a=ge(e,e=>e.func===n),e=a.fail,this.bindings[s]=e,K(a.pass,e=>{e.removed=!0})):e.length=0,e.length||(this.toggleEvent(r,!1),delete this.bindings[s]))}}else Y(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();e=this.bindings[e];return!(!e||0===e.length)}}const XO=r=>(r._eventDispatcher||(r._eventDispatcher=new GO({scope:r,toggleEvent:(e,t)=>{GO.isNative(e)&&r.toggleNativeEvent&&r.toggleNativeEvent(e,t)}})),r._eventDispatcher);e={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(t,e,r){if(this.removed&&"remove"!==t&&"detach"!==t)return cs(t.toLowerCase(),null!=e?e:{},this);var n=XO(this).dispatch(t,e);if(!1!==r&&this.parent){let e=this.parent();for(;e&&!n.isPropagationStopped();)e.dispatch(t,n,!1),e=e.parent?e.parent():void 0}return n},on(e,t,r){return XO(this).on(e,t,r)},off(e,t){return XO(this).off(e,t)},once(e,t){return XO(this).once(e,t)},hasEventListeners(e){return XO(this).has(e)}};const ZO=ee.DOM;let QO;const JO=(e,t)=>{return"selectionchange"===t?e.getDoc():!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t)?e.getDoc().documentElement:(t=Gd(e))?(e.eventRoot||(e.eventRoot=ZO.select(t)[0]),e.eventRoot):e.getBody()},eB=e=>!e.hidden&&!VO(e),tB=(e,t,r)=>{eB(e)?e.dispatch(t,r):VO(e)&&KO(e,r)},rB=(a,s)=>{var e,t;a.delegates||(a.delegates={}),a.delegates[s]||a.removed||(e=JO(a,s),Gd(a)?(QO||(QO={},a.editorManager.on("removeEditor",()=>{a.editorManager.activeEditor||QO&&(Y(QO,(e,t)=>{a.dom.unbind(JO(a,t))}),QO=null)})),QO[s]||(t=e=>{var t=e.target,r=a.editorManager.get();let n=r.length;for(;n--;){var o=r[n].getBody();o!==t&&!ZO.isChildOf(t,o)||tB(r[n],s,e)}},QO[s]=t,ZO.bind(e,s,t))):(t=e=>{tB(a,s,e)},ZO.bind(e,s,t),a.delegates[s]=t))},nB={...e,bindPendingEventDelegates(){const t=this;B.each(t._pendingNativeEvents,e=>{rB(t,e)})},toggleNativeEvent(e,t){var r=this;"focus"===e||"blur"===e||r.removed||(t?r.initialized?rB(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(JO(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){const r=this;var e=r.getBody(),t=r.dom;r.delegates&&(Y(r.delegates,(e,t)=>{r.dom.unbind(JO(r,t),t,e)}),delete r.delegates),!r.inline&&e&&t&&(e.onload=null,t.unbind(r.getWin()),t.unbind(r.getDoc())),t&&(t.unbind(e),t.unbind(r.getContainer()))}},oB=e=>z(e)?{value:e.split(/[ ,]/),valid:!0}:x(e,z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},aB=(e,t)=>{return e+(gt(t.message)?"":". "+t.message)},sB=e=>e.valid,iB=(e,t,r="")=>{t=t(e);return ne(t)?t?{value:e,valid:!0}:{valid:!1,message:r}:t},lB=(e,o,t=o)=>{const a={},s={},i=(e,t,r)=>{t=iB(t,r);return sB(t)?(s[e]=t.value,!0):(console.warn(aB(`Invalid value passed for the ${e} option`,t)),!1)};const n=e=>G(a,e);return{register:(t,e)=>{n=e;const r=z(n.processor)?(t=>{const r=(()=>{switch(t){case"array":return j;case"boolean":return ne;case"function":return $;case"number":return w;case"object":return F;case"string":return z;case"string[]":return oB;case"object[]":return e=>x(e,F);case"regexp":return e=>v(e,RegExp);default:return le}})();return e=>iB(e,r,`The value must be a ${t}.`)})(e.processor):e.processor;var n=((e,t,r)=>{if(!C(t)){t=iB(t,r);if(sB(t))return t.value;console.error(aB(`Invalid default value passed for the "${e}" option`,t))}})(t,e.default,r);a[t]={...e,default:n,processor:r},g(s,t).orThunk(()=>g(o,t)).each(e=>i(t,e,r))},isRegistered:n,get:e=>g(s,e).orThunk(()=>g(a,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{var r;return n(e)?(r=a[e]).immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):i(e,t,r.processor):(console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1)},unset:e=>{var t=n(e);return t&&delete s[e],t},isSet:e=>G(s,e),debug:()=>{try{console.log(JSON.parse(JSON.stringify(t,(e,t)=>ne(t)||w(t)||z(t)||y(t)||j(t)||re(t)?t:Object.prototype.toString.call(t))))}catch(e){console.error(e)}}}},dB=["design","readonly"],cB=(e,t,r,n)=>{var o=r[t.get()],r=r[n];try{r.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&$O(e,r.editorReadOnly),t.set(n),e.dispatch("SwitchMode",{mode:n})},mB=a=>{const s=Bo("design"),i=Bo({design:{activate:V,deactivate:V,editorReadOnly:!1},readonly:{activate:V,deactivate:V,editorReadOnly:!0}});var e,t;return(e=a).serializer?qO(e):e.on("PreInit",()=>{qO(e)}),(t=a).on("ShowCaret",e=>{VO(t)&&e.preventDefault()}),t.on("ObjectSelected",e=>{VO(t)&&e.preventDefault()}),{isReadOnly:()=>VO(a),set:e=>{var t=a,r=i.get(),n=s,o=e;if(o!==n.get()){if(!G(r,o))throw new Error(`Editor mode '${o}' is invalid`);t.initialized?cB(t,n,r,o):t.on("init",()=>cB(t,n,r,o))}},get:()=>s.get(),register:(e,t)=>{i.set(((e,t,r)=>{if(D(dB,t))throw new Error("Cannot override default mode "+t);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(i.get(),e,t))}}},uB=B.each,fB=B.explode,gB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},pB=B.makeMap("alt,ctrl,shift,meta,access"),hB=e=>{const t={};var r=U.os.isMacOS()||U.os.isiOS(),n=(uB(fB(e.toLowerCase(),"+"),e=>{e in pB?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=gB[e]||e.toUpperCase().charCodeAt(0))}),[t.keyCode]);let o;for(o in pB)t[o]?n.push(o):t[o]=!1;return t.id=n.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class vB{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const r=this;e.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(uB(r.shortcuts,e=>{r.matchShortcut(t,e)&&(r.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type)&&r.executeShortcutAction(e)}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(e,t,r,n){const o=this,a=o.normalizeCommandFunc(r);return uB(fB(B.trim(e)),e=>{e=o.createShortcut(e,t,a,n);o.shortcuts[e.id]=e}),!0}remove(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(e){const t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:B.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){e=B.map(fB(e,">"),hB);return e[e.length-1]=B.extend(e[e.length-1],{func:r,scope:n||this.editor}),B.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const bB=ee.DOM,yB=B.extend,CB=B.each;class wB{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,yB(this,nB);var n=this,e=(this.id=e,this.hidden=!1,pO(r.defaultOptions,t)),o=(this.options=lB(0,e,t),md(n),this.options.get),t=(o("deprecation_warnings")&&vw(t,e),o("suffix")),e=(t&&(r.suffix=t),this.suffix=r.suffix,o("base_url")),t=(e&&r._setBaseUrl(e),this.baseUri=r.baseURI,Md(n)),e=(t&&(Rs.ScriptLoader._setReferrerPolicy(t),ee.DOM.styleSheetLoader._setReferrerPolicy(t)),hc(n)),t=(H(e)&&ee.DOM.styleSheetLoader._setContentCssCors(e),Bs.languageLoad=o("language_load"),Bs.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new DC(gd(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ic(n),this.hasVisual=Cc(n),this.shortcuts=new vB(this),this.editorCommands=new UO(this),MO(this),o("cache_suffix")),o=(t&&(U.cacheSuffix=t.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(e=(()=>{const e={},t={},r={},n={},o={},a={},s={},i={};var l=(r,n)=>(e,t)=>{r[e.toLowerCase()]={...t,type:n}};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(r,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(a,"contexttoolbar"),addContextForm:l(a,"contextform"),addSidebar:l(s,"sidebar"),addView:l(i,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:s,views:i})}})()).addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll},styleSheetLoader:void 0,show:V,hide:V,setEnabled:V,isEnabled:le},this.mode=mB(n),r.dispatch("SetupEditor",{editor:this}),kc(n));$(o)&&o.call(n,n)}render(){oO(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Rp(this)}translate(e){return Os.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(H(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:le,default:t})),n.isSet(e)||C(t)?n.get(e):t}hasPlugin(e,t){return!(!D(vc(this),e)||t&&void 0===Ow.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(bB.show(this.getContainer()),bB.hide(this.id)),this.load(),this.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(bB.hide(e.getContainer()),bB.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){var t,r=this.getElement();return!this.removed&&r?(e={...e,load:!0},t=mo(r)?r.value:r.innerHTML,t=this.setContent(t,e),e.no_events||this.dispatch("LoadContent",{...e,element:r}),t):""}save(e={}){const t=this;let r=t.getElement();if(!r||!t.initialized||t.removed)return"";var n={...e,save:!0,element:r};let o=t.getContent(n);var a={...n,content:o};return a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,mo(r)?r.value=o:(!e.is_removing&&t.inline||(r.innerHTML=o),(e=bB.getParent(t.id,"form"))&&CB(e.elements,e=>e.name!==t.id||(e.value=o,!1))),a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return aw(this,e,t)}getContent(e){return nw(this,e)}insertContent(e,t){t&&(e=yB({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?aw(this,this.startContent,{format:"raw"}):aw(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||bB.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=bB.get(this.id)),this.targetElm}getWin(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow}getDoc(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument}getBody(){var e,t=this.getDoc();return null!=(e=null!=(e=this.bodyElement)?e:null==t?void 0:t.body)?e:null}convertURL(e,t,r){var n=this.options.get,o=Sc(this);if($(o))return o.call(this,e,r,!0,t);if(n("convert_urls")&&"link"!==r&&(!F(r)||"LINK"!==r.nodeName)&&0!==e.indexOf("file:")&&0!==e.length){o=new DC(e);if("http"===o.protocol||"https"===o.protocol||""===o.protocol){if(n("relative_urls"))return this.documentBaseURI.toRelative(e);e=this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}}return e}addVisual(e){hO(this,e)}setEditableRoot(e){var t;e=e,(t=this)._editableRoot!==e&&(t._editableRoot=e,t.readonly||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),t.dispatch("EditableRootStateChange",{state:e}))}hasEditableRoot(){return this._editableRoot}remove(){Cw(this)}destroy(e){ww(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const EB=ee.DOM,xB=B.each;let kB=!1,_B,SB=[];const NB=t=>{const r=t.type;xB(TB.get(),e=>{switch(r){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t)}})},RB=e=>{var t;e!==kB&&(t=ee.DOM,e?(t.bind(window,"resize",NB),t.bind(window,"scroll",NB)):(t.unbind(window,"resize",NB),t.unbind(window,"scroll",NB)),kB=e)},AB=t=>{var e=SB;return SB=O(SB,e=>t!==e),TB.activeEditor===t&&(TB.activeEditor=0<SB.length?SB[0]:null),TB.focusedEditor===t&&(TB.focusedEditor=null),e.length!==SB.length},DB="CSS1Compat"!==document.compatMode,TB={...e,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:Os,activeEditor:null,focusedEditor:null,setup(){let t="",r="",e=DC.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));var n=window.tinymce||window.tinyMCEPreInit;if(n)t=n.base||n.baseURL,r=n.suffix;else{var o=document.getElementsByTagName("script");for(let e=0;e<o.length;e++){var a=o[e].src||"";if(""!==a){var s=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==s.indexOf(".min")&&(r=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}}!t&&document.currentScript&&(-1!==(n=document.currentScript.src).indexOf(".min")&&(r=".min"),t=n.substring(0,n.lastIndexOf("/")))}this.baseURL=new DC(e).toAbsolute(t),this.documentBaseURL=e,this.baseURI=new DC(this.baseURL),this.suffix=r,(n=this).on("AddEditor",E(Ep,n)),n.on("RemoveEditor",E(xp,n))},overrideDefaults(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(t&&(this.suffix=t),(this.defaultOptions=e).plugin_base_urls);void 0!==t&&Y(t,(e,t)=>{Bs.PluginManager.urls[t]=e})},init(s){const i=this;let r;const n=B.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),l=(e,t)=>e.inline&&t.tagName.toLowerCase()in n,d=e=>{let t=e.id;return t||(t=g(e,"name").filter(e=>!EB.get(e)).getOrThunk(EB.uniqueId),e.setAttribute("id",t)),t},e=e=>{e=s[e];if(e)return e.apply(i,[])},t=e=>U.browser.isIE()||U.browser.isEdge()?(zw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):DB?(zw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):z(e.selector)?EB.select(e.selector):H(e.target)?[e.target]:[];let c=e=>{r=e};const m=()=>{let n=0;const o=[];let a;EB.unbind(window,"ready",m),e("onpageload"),a=Oe(t(s)),B.each(a,e=>{(e=i.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(AB(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(a=B.grep(a,e=>!i.get(e.id))).length?c([]):xB(a,e=>{var t,r;l(s,e)?zw("Could not initialize inline editor on invalid inline target element",e):(t=d(e),r=s,e=e,t=new wB(t,r,i),o.push(t),t.on("init",()=>{++n===a.length&&c(o)}),t.targetElm=t.targetElm||e,t.render())})};return EB.bind(window,"ready",m),new Promise(t=>{r?t(r):c=e=>{t(e)}})},get(t){return 0===arguments.length?SB.slice(0):z(t)?be(SB,e=>e.id===t).getOr(null):w(t)&&SB[t]||null},add(e){const r=this;var t=r.get(e.id);return t===e||(null===t&&SB.push(e),RB(!0),r.activeEditor=e,r.dispatch("AddEditor",{editor:e}),_B)||(_B=e=>{var t=r.dispatch("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",_B)),e},createEditor(e,t){return this.add(new wB(e,t,this))},remove(e){const t=this;let r;if(e){if(!z(e))return r=e,y(t.get(r.id))?null:(AB(r)&&t.dispatch("RemoveEditor",{editor:r}),0===SB.length&&window.removeEventListener("beforeunload",_B),r.remove(),RB(0<SB.length),r);xB(EB.select(e),e=>{(r=t.get(e.id))&&t.remove(r)})}else for(let e=SB.length-1;0<=e;e--)t.remove(SB[e])},execCommand(e,t,r){var n,o=F(r)?null!=(n=r.id)?n:r.index:r;switch(e){case"mceAddEditor":return this.get(o)||(a=r.options,new wB(o,a,this).render()),!0;case"mceRemoveEditor":var a=this.get(o);return a&&a.remove(),!0;case"mceToggleEditor":a=this.get(o);return a?a.isHidden()?a.show():a.hide():this.execCommand("mceAddEditor",!1,r),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{xB(SB,e=>{e.save()})},addI18n:(e,t)=>{Os.add(e,t)},translate:e=>Os.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new DC(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new DC(this.baseURL)}};TB.setup();gN=(()=>{const t=Lo();return{FakeClipboardItem:t=>({items:t,types:Be(t),getType:e=>g(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})();const OB=Math.min,BB=Math.max,PB=Math.round,LB=(e,t,r)=>{let n=t.x,o=t.y;var a=e.w,e=e.h,s=t.w,t=t.h,r=(r||"").split("");return"b"===r[0]&&(o+=t),"r"===r[1]&&(n+=s),"c"===r[0]&&(o+=PB(t/2)),"c"===r[1]&&(n+=PB(s/2)),"b"===r[3]&&(o-=e),"r"===r[4]&&(n-=a),"c"===r[3]&&(o-=PB(e/2)),"c"===r[4]&&(n-=PB(a/2)),MB(n,o,a,e)};const MB=(e,t,r,n)=>({x:e,y:t,w:r,h:n});fN={inflate:(e,t,r)=>MB(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:LB,findBestRelativePosition:(t,r,n,o)=>{for(let e=0;e<o.length;e++){var a=LB(t,r,o[e]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[e]}return null},intersect:(e,t)=>{var r=BB(e.x,t.x),n=BB(e.y,t.y),o=OB(e.x+e.w,t.x+t.w),e=OB(e.y+e.h,t.y+t.h);return o-r<0||e-n<0?null:MB(r,n,o-r,e-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,a=e.x+e.w,s=e.y+e.h;var e=t.x+t.w,i=t.y+t.h,l=BB(0,t.x-n),t=BB(0,t.y-o),e=BB(0,a-e),i=BB(0,s-i);return n+=l,o+=t,r&&(a+=l,s+=t,n-=e,o-=i),a-=e,s-=i,MB(n,o,a-n,s-o)},create:MB,fromClientRect:e=>MB(e.left,e.top,e.width,e.height)};cN=(()=>{const r={},i={},n={};return{load:(n,o)=>{const a=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;var e;return void 0!==r[n]?r[n]:(e=new Promise((e,t)=>{const r=((e,t,r=1e3)=>{let n=!1,o=null;var a=t=>(...e)=>{n||(n=!0,null!==o&&(clearTimeout(o),o=null),t.apply(null,e))},e=a(e);const s=a(t);return{start:(...e)=>{n||null!==o||(o=setTimeout(()=>s.apply(null,e),r))},resolve:e,reject:s}})(e,t);i[n]=r.resolve,Rs.ScriptLoader.loadScript(o).then(()=>r.start(s),()=>r.reject(a))}),r[n]=e)},add:(e,t)=>{void 0!==i[e]&&(i[e](t),delete i[e]),r[e]=Promise.resolve(t),n[e]=t},has:e=>e in n,get:e=>n[e],unload:e=>{delete r[e],delete n[e]}}})();let IB;try{var FB="__storage_test__";(IB=window.localStorage).setItem(FB,FB),IB.removeItem(FB)}catch(e){IB=(()=>{{let r={},n=[];var e={getItem:e=>{e=r[e];return e||null},setItem:(e,t)=>{n.push(e),r[e]=String(t)},key:e=>n[e],removeItem:t=>{n=n.filter(e=>e===t),delete r[t]},clear:()=>{n=[],r={}},length:0};return Object.defineProperty(e,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),e}})()}t=IB,CC={geom:{Rect:fN},util:{Delay:pp,Tools:B,VK:te,URI:DC,EventDispatcher:GO,Observable:e,I18n:Os,LocalStorage:t,ImageUploader:r=>{var e=Kw();const n=Qw(r,e);return{upload:(e,t=!0)=>n.upload(e,t?Zw(r):void 0)}}},dom:{EventUtils:hs,TreeWalker:Xn,TextSeeker:ai,DOMUtils:ee,ScriptLoader:Rs,RangeUtils:Pg,Serializer:rw,StyleSheetLoader:aa,ControlSelection:lg,BookmarkManager:Kf,Selection:G1,Event:hs.Event},html:{Styles:as,Entities:Sa,Node:jp,Schema:Ya,DomParser:WC,Writer:ah,Serializer:sh},Env:U,AddOnManager:Bs,Annotator:Wf,Formatter:mE,UndoManager:gE,EditorCommands:UO,WindowManager:Lw,NotificationManager:Tw,EditorObservable:nB,Shortcuts:vB,Editor:wB,FocusManager:gp,EditorManager:TB,DOM:ee.DOM,ScriptLoader:Rs.ScriptLoader,PluginManager:Ow,ThemeManager:Bw,ModelManager:xw,IconManager:Ew,Resource:cN,FakeClipboard:gN,trim:B.trim,isArray:B.isArray,is:B.is,toArray:B.toArray,makeMap:B.makeMap,each:B.each,map:B.map,grep:B.grep,inArray:B.inArray,extend:B.extend,walk:B.walk,resolve:B.resolve,explode:B.explode,_addCacheSuffix:B._addCacheSuffix},iN=B.extend(TB,CC),vC=iN,window.tinymce=vC,window.tinyMCE=vC,yC=iN;if("object"==typeof module)try{module.exports=yC}catch(e){}}();